!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=142)}([function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(95)),r(n(96)),r(n(61)),r(n(250)),r(n(251)),r(n(252)),r(n(253)),r(n(97)),r(n(254)),r(n(98)),r(n(255)),r(n(256)),r(n(258)),r(n(259)),r(n(260))},function(e,t,n){"use strict";e.exports=n(151)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(0),i=n(0),a=n(0),s=n(0),u=n(0),l=n(37),c=n(0);t.LUIDGenerator=function(){var e=1;return function(){return e++}}(),t.sha1=function(e){var t=s.stringToByteArray(e),n=new a.Sha1;n.update(t);var r=n.digest();return i.base64.encodeByteArray(r)};var p=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n="",r=0;r<e.length;r++)Array.isArray(e[r])||e[r]&&"object"===typeof e[r]&&"number"===typeof e[r].length?n+=p.apply(null,e[r]):"object"===typeof e[r]?n+=u.stringify(e[r]):n+=e[r],n+=" ";return n};t.logger=null;var h=!0;t.enableLogging=function(e,n){r.assert(!n||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?("undefined"!==typeof console&&("function"===typeof console.log?t.logger=console.log.bind(console):"object"===typeof console.log&&(t.logger=function(e){console.log(e)})),n&&l.SessionStorage.set("logging_enabled",!0)):"function"===typeof e?t.logger=e:(t.logger=null,l.SessionStorage.remove("logging_enabled"))},t.log=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(!0===h&&(h=!1,null===t.logger&&!0===l.SessionStorage.get("logging_enabled")&&t.enableLogging(!0)),t.logger){var r=p.apply(null,e);t.logger(r)}},t.logWrapper=function(e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];t.log.apply(void 0,[e].concat(n))}},t.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if("undefined"!==typeof console){var n="FIREBASE INTERNAL ERROR: "+p.apply(void 0,e);"undefined"!==typeof console.error?console.error(n):console.log(n)}},t.fatal=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=p.apply(void 0,e);throw new Error("FIREBASE FATAL ERROR: "+n)},t.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if("undefined"!==typeof console){var n="FIREBASE WARNING: "+p.apply(void 0,e);"undefined"!==typeof console.warn?console.warn(n):console.log(n)}},t.warnIfPageIsSecure=function(){"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&t.warn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},t.warnAboutUnsupportedMethod=function(e){t.warn(e+" is unsupported and will likely change soon.  Please do not use.")},t.isInvalidJSONNumber=function(e){return"number"===typeof e&&(e!=e||e==Number.POSITIVE_INFINITY||e==Number.NEGATIVE_INFINITY)},t.executeWhenDOMReady=function(e){if(c.isNodeSdk()||"complete"===document.readyState)e();else{var t=!1,n=function(){if(!document.body)return void setTimeout(n,Math.floor(10));t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}},t.MIN_NAME="[MIN_NAME]",t.MAX_NAME="[MAX_NAME]",t.nameCompare=function(e,n){if(e===n)return 0;if(e===t.MIN_NAME||n===t.MAX_NAME)return-1;if(n===t.MIN_NAME||e===t.MAX_NAME)return 1;var r=t.tryParseInt(e),o=t.tryParseInt(n);return null!==r?null!==o?r-o==0?e.length-n.length:r-o:-1:null!==o?1:e<n?-1:1},t.stringCompare=function(e,t){return e===t?0:e<t?-1:1},t.requireKey=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+u.stringify(t))},t.ObjectToUniqueKey=function(e){if("object"!==typeof e||null===e)return u.stringify(e);var n=[];for(var r in e)n.push(r);n.sort();for(var o="{",i=0;i<n.length;i++)0!==i&&(o+=","),o+=u.stringify(n[i]),o+=":",o+=t.ObjectToUniqueKey(e[n[i]]);return o+="}"},t.splitStringBySize=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],o=0;o<n;o+=t)o+t>n?r.push(e.substring(o,n)):r.push(e.substring(o,o+t));return r},t.each=function(e,t){if(Array.isArray(e))for(var n=0;n<e.length;++n)t(n,e[n]);else o.forEach(e,function(e,n){return t(n,e)})},t.bindCallback=function(e,t){return t?e.bind(t):e},t.doubleToIEEE754String=function(e){r.assert(!t.isInvalidJSONNumber(e),"Invalid JSON number");var n,o,i,a,s,u,l;for(0===e?(o=0,i=0,n=1/e===-1/0?1:0):(n=e<0,e=Math.abs(e),e>=Math.pow(2,-1022)?(a=Math.min(Math.floor(Math.log(e)/Math.LN2),1023),o=a+1023,i=Math.round(e*Math.pow(2,52-a)-Math.pow(2,52))):(o=0,i=Math.round(e/Math.pow(2,-1074)))),u=[],s=52;s;s-=1)u.push(i%2?1:0),i=Math.floor(i/2);for(s=11;s;s-=1)u.push(o%2?1:0),o=Math.floor(o/2);u.push(n?1:0),u.reverse(),l=u.join("");var c="";for(s=0;s<64;s+=8){var p=parseInt(l.substr(s,8),2).toString(16);1===p.length&&(p="0"+p),c+=p}return c.toLowerCase()},t.isChromeExtensionContentScript=function(){return!("object"!==typeof window||!window.chrome||!window.chrome.extension||/^chrome/.test(window.location.href))},t.isWindowsStoreApp=function(){return"object"===typeof Windows&&"object"===typeof Windows.UI},t.errorForServerCode=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"==e?n="Client doesn't have permission to access the desired data.":"unavailable"==e&&(n="The service is unavailable");var r=new Error(e+" at "+t.path.toString()+": "+n);return r.code=e.toUpperCase(),r},t.INTEGER_REGEXP_=new RegExp("^-?\\d{1,10}$"),t.tryParseInt=function(e){if(t.INTEGER_REGEXP_.test(e)){var n=Number(e);if(n>=-2147483648&&n<=2147483647)return n}return null},t.exceptionGuard=function(e){try{e()}catch(e){setTimeout(function(){var n=e.stack||"";throw t.warn("Exception was thrown by user callback.",n),e},Math.floor(0))}},t.callUserCallback=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];"function"===typeof e&&t.exceptionGuard(function(){e.apply(void 0,n)})},t.beingCrawled=function(){return("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},t.exportPropGetter=function(e,t,n){Object.defineProperty(e,t,{get:n})},t.setTimeoutNonBlocking=function(e,t){var n=setTimeout(e,t);return"object"===typeof n&&n.unref&&n.unref(),n}},function(e,t,n){e.exports=n(167)()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(0),i=function(){function e(e,t){if(void 0===t){this.pieces_=e.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}return Object.defineProperty(e,"Empty",{get:function(){return new e("")},enumerable:!0,configurable:!0}),e.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},e.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},e.prototype.popFront=function(){var t=this.pieceNum_;return t<this.pieces_.length&&t++,new e(this.pieces_,t)},e.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},e.prototype.toString=function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"},e.prototype.toUrlEncodedString=function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+encodeURIComponent(String(this.pieces_[t])));return e||"/"},e.prototype.slice=function(e){return void 0===e&&(e=0),this.pieces_.slice(this.pieceNum_+e)},e.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var t=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)t.push(this.pieces_[n]);return new e(t,0)},e.prototype.child=function(t){for(var n=[],r=this.pieceNum_;r<this.pieces_.length;r++)n.push(this.pieces_[r]);if(t instanceof e)for(var r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else for(var o=t.split("/"),r=0;r<o.length;r++)o[r].length>0&&n.push(o[r]);return new e(n,0)},e.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},e.relativePath=function(t,n){var r=t.getFront(),o=n.getFront();if(null===r)return n;if(r===o)return e.relativePath(t.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+t+")")},e.comparePaths=function(e,t){for(var n=e.slice(),o=t.slice(),i=0;i<n.length&&i<o.length;i++){var a=r.nameCompare(n[i],o[i]);if(0!==a)return a}return n.length===o.length?0:n.length<o.length?-1:1},e.prototype.equals=function(e){if(this.getLength()!==e.getLength())return!1;for(var t=this.pieceNum_,n=e.pieceNum_;t<=this.pieces_.length;t++,n++)if(this.pieces_[t]!==e.pieces_[n])return!1;return!0},e.prototype.contains=function(e){var t=this.pieceNum_,n=e.pieceNum_;if(this.getLength()>e.getLength())return!1;for(;t<this.pieces_.length;){if(this.pieces_[t]!==e.pieces_[n])return!1;++t,++n}return!0},e}();t.Path=i;var a=function(){function e(e,t){this.errorPrefix_=t,this.parts_=e.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=o.stringLength(this.parts_[n]);this.checkValid_()}return Object.defineProperty(e,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!0,configurable:!0}),Object.defineProperty(e,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!0,configurable:!0}),e.prototype.push=function(e){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(e),this.byteLength_+=o.stringLength(e),this.checkValid_()},e.prototype.pop=function(){var e=this.parts_.pop();this.byteLength_-=o.stringLength(e),this.parts_.length>0&&(this.byteLength_-=1)},e.prototype.checkValid_=function(){if(this.byteLength_>e.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+e.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>e.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+e.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},e.prototype.toErrorString=function(){return 0==this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},e}();t.ValidationPath=a},function(e,t,n){"use strict";var r=n(166);n.d(t,"a",function(){return r.a});var o=(n(170),n(81));n.d(t,"b",function(){return o.a});var i=(n(172),n(175),n(178),n(180),n(82));n.d(t,"c",function(){return i.a});var a=(n(52),n(186),n(188));n.d(t,"d",function(){return a.a});var s=(n(190),n(191));n.d(t,"e",function(){return s.a})},function(e,t,n){"use strict";var r=function(){};e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isView=t.isViews=t.isValue=t.isMaxDate=t.isMinDate=t.isCalendarType=void 0;var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=n(3),i=function(e){return e&&e.__esModule?e:{default:e}}(o),a=["ISO 8601","US"],s=["century","decade","year","month"],u=(t.isCalendarType=i.default.oneOf(a),t.isMinDate=function(e,t,n){var o=e[t],i=e.maxDate;if(o){if(!(o instanceof Date))return new Error("Warning: Failed prop type: Invalid prop `"+t+"` of type `"+("undefined"===typeof i?"undefined":r(i))+"` supplied to `"+n+"`, expected instance of `Date`.");if(i&&o>i)return new Error("Warning: Failed prop type: Invalid prop `"+t+"` of type `"+("undefined"===typeof i?"undefined":r(i))+"` supplied to `"+n+"`, minDate cannot be larger than maxDate.")}return null},t.isMaxDate=function(e,t,n){var o=e[t],i=e.minDate;if(o){if(!(o instanceof Date))return new Error("Warning: Failed prop type: Invalid prop `"+t+"` of type `"+("undefined"===typeof o?"undefined":r(o))+"` supplied to `"+n+"`, expected instance of `Date`.");if(i&&o<i)return new Error("Warning: Failed prop type: Invalid prop `"+t+"` of type `"+("undefined"===typeof o?"undefined":r(o))+"` supplied to `"+n+"`, maxDate cannot be smaller than minDate.")}return null},t.isValue=i.default.oneOfType([i.default.instanceOf(Date),i.default.arrayOf(i.default.instanceOf(Date))]),t.isViews=i.default.arrayOf(i.default.oneOf(s)),t.isView=function(e,t,n){var r=e[t];return-1===(e.views||s).indexOf(r)?new Error("Warning: Failed prop type: Invalid prop `"+t+"` of value `"+r+"` supplied to `"+n+"`, expected one of ["+["a","b","c","d","e"].map(function(e){return'"'+e+'"'}).join(", ")+"]."):null});u.isRequired=function(e,t,n){var r=e[t];return r?u(e,t,n):new Error("Warning: Failed prop type: The prop `"+t+"` is marked as required in `"+n+"`, but its value is `"+r+"`.")}},function(e,t,n){"use strict";function r(e){a=e}function o(e){s=e}var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a,s,u=n(39),l=n(2),c=n(13),p=n(40);t.setNodeFromJSON=r,t.setMaxNode=o;var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.compare=function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),o=n.compareTo(r);return 0===o?l.nameCompare(e.name,t.name):o},t.prototype.isDefinedOn=function(e){return!e.getPriority().isEmpty()},t.prototype.indexedValueChanged=function(e,t){return!e.getPriority().equals(t.getPriority())},t.prototype.minPost=function(){return c.NamedNode.MIN},t.prototype.maxPost=function(){return new c.NamedNode(l.MAX_NAME,new p.LeafNode("[PRIORITY-POST]",s))},t.prototype.makePost=function(e,t){var n=a(e);return new c.NamedNode(t,new p.LeafNode("[PRIORITY-POST]",n))},t.prototype.toString=function(){return".priority"},t}(u.Index);t.PriorityIndex=h,t.PRIORITY_INDEX=new h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=t.getYear=function(e){if(e instanceof Date)return e.getFullYear();if("number"===typeof e)return e;var t=parseInt(e,10);if("string"===typeof e&&!isNaN(t))return t;throw new Error("Failed to get year from date: "+e+".")},i=t.getMonthIndex=function(e){return e.getMonth()},a=t.getDay=function(e){return e.getDate()},s=t.getDayOfWeek=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ISO 8601",n=e.getDay();switch(t){case"ISO 8601":return(n+6)%7;case"US":return n;default:throw new Error("Unsupported calendar type.")}},u=t.getBeginOfCenturyYear=function(e){var t=o(e)-1;return t+-t%100+1},l=t.getBeginOfCentury=function(e){var t=u(e);return new Date(t,0,1)},c=t.getEndOfCentury=function(e){var t=u(e);return new Date(t+100,0,1,0,0,0,-1)},p=t.getCenturyRange=function(e){return[l(e),c(e)]},h=t.getBeginOfPreviousCentury=function(e){var t=o(e)-100;return l(t)},f=t.getEndOfPreviousCentury=function(e){var t=o(e)-100;return c(t)},d=t.getBeginOfNextCentury=function(e){var t=o(e)+100;return l(t)},m=t.getBeginOfDecadeYear=function(e){var t=o(e)-1;return t+-t%10+1},y=t.getBeginOfDecade=function(e){var t=m(e);return new Date(t,0,1)},v=t.getEndOfDecade=function(e){var t=m(e);return new Date(t+10,0,1,0,0,0,-1)},g=t.getDecadeRange=function(e){return[y(e),v(e)]},_=t.getBeginOfPreviousDecade=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=m(e)-t;return y(n)},b=t.getEndOfPreviousDecade=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=m(e)-t;return v(n)},w=t.getBeginOfNextDecade=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=m(e)+t;return y(n)},x=t.getBeginOfYear=function(e){var t=o(e);return new Date(t,0,1)},E=t.getEndOfYear=function(e){var t=o(e);return new Date(t+1,0,1,0,0,0,-1)},C=t.getYearRange=function(e){return[x(e),E(e)]},T=t.getBeginOfPreviousYear=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=o(e)-t;return x(n)},S=t.getEndOfPreviousYear=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=o(e)-t;return E(n)},P=t.getBeginOfNextYear=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=o(e)+t;return x(n)},O=t.getBeginOfMonth=function(e){var t=o(e),n=i(e);return new Date(t,n,1)},A=t.getEndOfMonth=function(e){var t=o(e),n=i(e);return new Date(t,n+1,1,0,0,0,-1)},k=t.getBeginOfWeek=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ISO 8601",n=o(e),r=i(e),a=e.getDate()-s(e,t);return new Date(n,r,a)},I=t.getMonthRange=function(e){return[O(e),A(e)]},N=t.getBeginOfPreviousMonth=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=o(e),r=i(e)-t;return O(new Date(n,r,1))},R=t.getEndOfPreviousMonth=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=o(e),r=i(e)-t;return A(new Date(n,r,1))},M=t.getBeginOfNextMonth=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=o(e),r=i(e)+t;return O(new Date(n,r,1))},D=t.getBeginOfDay=function(e){var t=o(e),n=i(e),r=a(e);return new Date(t,n,r)},L=t.getEndOfDay=function(e){var t=o(e),n=i(e),r=a(e);return new Date(t,n,r+1,0,0,0,-1)},F=t.getDayRange=function(e){return[D(e),L(e)]};t.getWeekNumber=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ISO 8601",n=o(e)+1,r=void 0,i=void 0;do{r=new Date(n,0,"ISO 8601"===t?4:1),i=k(r,t),n-=1}while(e-i<0);return Math.floor((e-i)/6048e5)+1},t.getRange=function(e,t){switch(e){case"century":return p(t);case"decade":return g(t);case"year":return C(t);case"month":return I(t);case"day":return F(t);default:throw new Error("Invalid rangeType: "+e)}},t.getBegin=function(e,t){switch(e){case"century":return l(t);case"decade":return y(t);case"year":return x(t);case"month":return O(t);case"day":return D(t);default:throw new Error("Invalid rangeType: "+e)}},t.getBeginPrevious=function(e,t){switch(e){case"century":return h(t);case"decade":return _(t);case"year":return T(t);case"month":return N(t);default:throw new Error("Invalid rangeType: "+e)}},t.getBeginNext=function(e,t){switch(e){case"century":return d(t);case"decade":return w(t);case"year":return P(t);case"month":return M(t);default:throw new Error("Invalid rangeType: "+e)}},t.getBeginPrevious2=function(e,t){switch(e){case"decade":return _(t,100);case"year":return T(t,10);case"month":return N(t,12);default:throw new Error("Invalid rangeType: "+e)}},t.getBeginNext2=function(e,t){switch(e){case"decade":return w(t,100);case"year":return P(t,10);case"month":return M(t,12);default:throw new Error("Invalid rangeType: "+e)}},t.getEnd=function(e,t){switch(e){case"century":return c(t);case"decade":return v(t);case"year":return E(t);case"month":return A(t);case"day":return L(t);default:throw new Error("Invalid rangeType: "+e)}},t.getEndPrevious=function(e,t){switch(e){case"century":return f(t);case"decade":return b(t);case"year":return S(t);case"month":return R(t);default:throw new Error("Invalid rangeType: "+e)}},t.getEndPrevious2=function(e,t){switch(e){case"decade":return b(t,100);case"year":return S(t,10);case"month":return R(t,12);default:throw new Error("Invalid rangeType: "+e)}},t.getDaysInMonth=function(e){var t=o(e),n=i(e);return new Date(t,n+1,0).getDate()},t.getCenturyLabel=function(e){var t=p(e),n=r(t,2),i=n[0],a=n[1];return o(i)+" \u2013 "+o(a)},t.getDecadeLabel=function(e){var t=g(e),n=r(t,2),i=n[0],a=n[1];return o(i)+" \u2013 "+o(a)},t.isWeekend=function(e){return s(e)>=5}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o,i=n(0),a=n(2),s=n(41),u=n(13),l=n(104),c=n(8),p=n(31),h=n(106),f=n(40),d=n(108),m=function(){function e(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&l.validatePriorityNode(this.priorityNode_),this.children_.isEmpty()&&i.assert(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(e,"EMPTY_NODE",{get:function(){return o||(o=new e(new s.SortedMap(d.NAME_COMPARATOR),null,h.IndexMap.Default))},enumerable:!0,configurable:!0}),e.prototype.isLeafNode=function(){return!1},e.prototype.getPriority=function(){return this.priorityNode_||o},e.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)},e.prototype.getImmediateChild=function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?o:t},e.prototype.getChild=function(e){var t=e.getFront();return null===t?this:this.getImmediateChild(t).getChild(e.popFront())},e.prototype.hasChild=function(e){return null!==this.children_.get(e)},e.prototype.updateImmediateChild=function(t,n){if(i.assert(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r=new u.NamedNode(t,n),a=void 0,s=void 0,l=void 0;return n.isEmpty()?(a=this.children_.remove(t),s=this.indexMap_.removeFromIndexes(r,this.children_)):(a=this.children_.insert(t,n),s=this.indexMap_.addToIndexes(r,this.children_)),l=a.isEmpty()?o:this.priorityNode_,new e(a,l,s)},e.prototype.updateChild=function(e,t){var n=e.getFront();if(null===n)return t;i.assert(".priority"!==e.getFront()||1===e.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(e.popFront(),t);return this.updateImmediateChild(n,r)},e.prototype.isEmpty=function(){return this.children_.isEmpty()},e.prototype.numChildren=function(){return this.children_.count()},e.prototype.val=function(t){if(this.isEmpty())return null;var n={},r=0,o=0,i=!0;if(this.forEachChild(c.PRIORITY_INDEX,function(a,s){n[a]=s.val(t),r++,i&&e.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):i=!1}),!t&&i&&o<2*r){var a=[];for(var s in n)a[s]=n[s];return a}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},e.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+l.priorityHashText(this.getPriority().val())+":"),this.forEachChild(c.PRIORITY_INDEX,function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)}),this.lazyHash_=""===e?"":a.sha1(e)}return this.lazyHash_},e.prototype.getPredecessorChildName=function(e,t,n){var r=this.resolveIndex_(n);if(r){var o=r.getPredecessorKey(new u.NamedNode(e,t));return o?o.name:null}return this.children_.getPredecessorKey(e)},e.prototype.getFirstChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()},e.prototype.getFirstChild=function(e){var t=this.getFirstChildName(e);return t?new u.NamedNode(t,this.children_.get(t)):null},e.prototype.getLastChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()},e.prototype.getLastChild=function(e){var t=this.getLastChildName(e);return t?new u.NamedNode(t,this.children_.get(t)):null},e.prototype.forEachChild=function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal(function(e){return t(e.name,e.node)}):this.children_.inorderTraversal(t)},e.prototype.getIterator=function(e){return this.getIteratorFrom(e.minPost(),e)},e.prototype.getIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,function(e){return e});for(var r=this.children_.getIteratorFrom(e.name,u.NamedNode.Wrap),o=r.peek();null!=o&&t.compare(o,e)<0;)r.getNext(),o=r.peek();return r},e.prototype.getReverseIterator=function(e){return this.getReverseIteratorFrom(e.maxPost(),e)},e.prototype.getReverseIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,function(e){return e});for(var r=this.children_.getReverseIteratorFrom(e.name,u.NamedNode.Wrap),o=r.peek();null!=o&&t.compare(o,e)>0;)r.getNext(),o=r.peek();return r},e.prototype.compareTo=function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===t.MAX_NODE?-1:0},e.prototype.withIndex=function(t){if(t===p.KEY_INDEX||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)},e.prototype.isIndexed=function(e){return e===p.KEY_INDEX||this.indexMap_.hasIndex(e)},e.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(c.PRIORITY_INDEX),r=t.getIterator(c.PRIORITY_INDEX),o=n.getNext(),i=r.getNext();o&&i;){if(o.name!==i.name||!o.node.equals(i.node))return!1;o=n.getNext(),i=r.getNext()}return null===o&&null===i}return!1}return!1},e.prototype.resolveIndex_=function(e){return e===p.KEY_INDEX?null:this.indexMap_.get(e.toString())},e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e}();t.ChildrenNode=m;var y=function(e){function t(){return e.call(this,new s.SortedMap(d.NAME_COMPARATOR),m.EMPTY_NODE,h.IndexMap.Default)||this}return r(t,e),t.prototype.compareTo=function(e){return e===this?0:1},t.prototype.equals=function(e){return e===this},t.prototype.getPriority=function(){return this},t.prototype.getImmediateChild=function(e){return m.EMPTY_NODE},t.prototype.isEmpty=function(){return!1},t}(m);t.MaxNode=y,t.MAX_NODE=new y,Object.defineProperties(u.NamedNode,{MIN:{value:new u.NamedNode(a.MIN_NAME,m.EMPTY_NODE)},MAX:{value:new u.NamedNode(a.MAX_NAME,t.MAX_NODE)}}),p.KeyIndex.__EMPTY_NODE=m.EMPTY_NODE,f.LeafNode.__childrenNodeConstructor=m,l.setMaxNode(t.MAX_NODE),c.setMaxNode(t.MAX_NODE)},function(e,t,n){"use strict";var r=function(e,t,n,r,o,i,a,s){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,o,i,a,s],c=0;u=new Error(t.replace(/%s/g,function(){return l[c++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}};e.exports=r},function(e,t,n){"use strict";function r(e){return"[object Array]"===C.call(e)}function o(e){return"[object ArrayBuffer]"===C.call(e)}function i(e){return"undefined"!==typeof FormData&&e instanceof FormData}function a(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer}function s(e){return"string"===typeof e}function u(e){return"number"===typeof e}function l(e){return"undefined"===typeof e}function c(e){return null!==e&&"object"===typeof e}function p(e){return"[object Date]"===C.call(e)}function h(e){return"[object File]"===C.call(e)}function f(e){return"[object Blob]"===C.call(e)}function d(e){return"[object Function]"===C.call(e)}function m(e){return c(e)&&d(e.pipe)}function y(e){return"undefined"!==typeof URLSearchParams&&e instanceof URLSearchParams}function v(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}function g(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)}function _(e,t){if(null!==e&&"undefined"!==typeof e)if("object"===typeof e||r(e)||(e=[e]),r(e))for(var n=0,o=e.length;n<o;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}function b(){function e(e,n){"object"===typeof t[n]&&"object"===typeof e?t[n]=b(t[n],e):t[n]=e}for(var t={},n=0,r=arguments.length;n<r;n++)_(arguments[n],e);return t}function w(e,t,n){return _(t,function(t,r){e[r]=n&&"function"===typeof t?x(t,n):t}),e}var x=n(90),E=n(221),C=Object.prototype.toString;e.exports={isArray:r,isArrayBuffer:o,isBuffer:E,isFormData:i,isArrayBufferView:a,isString:s,isNumber:u,isObject:c,isUndefined:l,isDate:p,isFile:h,isBlob:f,isFunction:d,isStream:m,isURLSearchParams:y,isStandardBrowserEnv:g,forEach:_,merge:b,extend:w,trim:v}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.name=e,this.node=t}return e.Wrap=function(t,n){return new e(t,n)},e}();t.NamedNode=r},function(e,t,n){"use strict";function r(e){return null!=e}function o(e){return void 0!==e}function i(e){return"function"===typeof e}function a(e){return"object"===typeof e}function s(e){return a(e)&&null!==e}function u(e){return a(e)&&!Array.isArray(e)}function l(e){return"string"===typeof e||e instanceof String}function c(e){return"number"===typeof e||e instanceof Number}function p(e){return h()&&e instanceof Blob}function h(){return"undefined"!==typeof Blob}t.a=r,t.c=o,t.b=i,t.i=a,t.g=s,t.f=u,t.j=l,t.h=c,t.d=p,t.e=h},function(e,t,n){e.exports=n(220)},function(e,t,n){"use strict";var r=n(241),o=n.n(r),i={apiKey:"AIzaSyCUqxdZnU3XJk-vuo_OgjSfUPMG6i7ztaQ",authDomain:"craiglist-redesign.firebaseapp.com",databaseURL:"https://craiglist-redesign.firebaseio.com",projectId:"craiglist-redesign",storageBucket:"craiglist-redesign.appspot.com",messagingSenderId:"518734229789"};o.a.initializeApp(i),t.a=o.a},function(e,t,n){"use strict";function r(e){return"storage/"+e}function o(){return new x(E.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function i(e){return new x(E.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function a(e){return new x(E.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function s(){return new x(E.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}function u(e){return new x(E.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function l(){return new x(E.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function c(){return new x(E.CANCELED,"User canceled the upload/download.")}function p(e){return new x(E.INVALID_URL,"Invalid URL '"+e+"'.")}function h(e){return new x(E.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function f(){return new x(E.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function d(){return new x(E.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function m(){return new x(E.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function y(e,t,n){return new x(E.INVALID_ARGUMENT,"Invalid argument in `"+t+"` at index "+e+": "+n)}function v(e,t,n,r){var o,i;return e===t?(o=e,i=1===e?"argument":"arguments"):(o="between "+e+" and "+t,i="arguments"),new x(E.INVALID_ARGUMENT_COUNT,"Invalid argument count in `"+n+"`: Expected "+o+" "+i+", received "+r+".")}function g(){return new x(E.APP_DELETED,"The Firebase app was deleted.")}function _(e){return new x(E.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function b(e,t){return new x(E.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function w(e){throw new x(E.INTERNAL_ERROR,"Internal error: "+e)}n.d(t,"a",function(){return E}),t.s=o,t.m=i,t.n=a,t.q=s,t.r=u,t.o=l,t.c=c,t.k=p,t.h=h,t.d=f,t.p=d,t.l=m,t.f=y,t.g=v,t.b=g,t.j=_,t.i=b,t.e=w;var x=(n(45),function(){function e(e,t){this.code_=r(e),this.message_="Firebase Storage: "+t,this.serverResponse_=null,this.name_="FirebaseError"}return e.prototype.codeProp=function(){return this.code},e.prototype.codeEquals=function(e){return r(e)===this.codeProp()},e.prototype.serverResponseProp=function(){return this.serverResponse_},e.prototype.setServerResponseProp=function(e){this.serverResponse_=e},Object.defineProperty(e.prototype,"name",{get:function(){return this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"code",{get:function(){return this.code_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"message",{get:function(){return this.message_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.serverResponse_},enumerable:!0,configurable:!0}),e}()),E={UNKNOWN:"unknown",OBJECT_NOT_FOUND:"object-not-found",BUCKET_NOT_FOUND:"bucket-not-found",PROJECT_NOT_FOUND:"project-not-found",QUOTA_EXCEEDED:"quota-exceeded",UNAUTHENTICATED:"unauthenticated",UNAUTHORIZED:"unauthorized",RETRY_LIMIT_EXCEEDED:"retry-limit-exceeded",INVALID_CHECKSUM:"invalid-checksum",CANCELED:"canceled",INVALID_EVENT_NAME:"invalid-event-name",INVALID_URL:"invalid-url",INVALID_DEFAULT_BUCKET:"invalid-default-bucket",NO_DEFAULT_BUCKET:"no-default-bucket",CANNOT_SLICE_BLOB:"cannot-slice-blob",SERVER_FILE_WRONG_SIZE:"server-file-wrong-size",NO_DOWNLOAD_URL:"no-download-url",INVALID_ARGUMENT:"invalid-argument",INVALID_ARGUMENT_COUNT:"invalid-argument-count",APP_DELETED:"app-deleted",INVALID_ROOT_OPERATION:"invalid-root-operation",INVALID_FORMAT:"invalid-format",INTERNAL_ERROR:"internal-error"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"firebase",function(){return o});var r=n(249),o=Object(r.a)();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),o=n(0),i=n(2),a=n(0),s=n(0);t.INVALID_KEY_REGEX_=/[\[\].#$\/\u0000-\u001F\u007F]/,t.INVALID_PATH_REGEX_=/[\[\].#$\u0000-\u001F\u007F]/,t.MAX_LEAF_SIZE_=10485760,t.isValidKey=function(e){return"string"===typeof e&&0!==e.length&&!t.INVALID_KEY_REGEX_.test(e)},t.isValidPathString=function(e){return"string"===typeof e&&0!==e.length&&!t.INVALID_PATH_REGEX_.test(e)},t.isValidRootPathString=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),t.isValidPathString(e)},t.isValidPriority=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!i.isInvalidJSONNumber(e)||e&&"object"===typeof e&&o.contains(e,".sv")},t.validateFirebaseDataArg=function(e,n,r,o,i){i&&void 0===r||t.validateFirebaseData(a.errorPrefix(e,n,i),r,o)},t.validateFirebaseData=function(e,n,a){var u=a instanceof r.Path?new r.ValidationPath(a,e):a;if(void 0===n)throw new Error(e+"contains undefined "+u.toErrorString());if("function"===typeof n)throw new Error(e+"contains a function "+u.toErrorString()+" with contents = "+n.toString());if(i.isInvalidJSONNumber(n))throw new Error(e+"contains "+n.toString()+" "+u.toErrorString());if("string"===typeof n&&n.length>t.MAX_LEAF_SIZE_/3&&s.stringLength(n)>t.MAX_LEAF_SIZE_)throw new Error(e+"contains a string greater than "+t.MAX_LEAF_SIZE_+" utf8 bytes "+u.toErrorString()+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var l=!1,c=!1;if(o.forEach(n,function(n,r){if(".value"===n)l=!0;else if(".priority"!==n&&".sv"!==n&&(c=!0,!t.isValidKey(n)))throw new Error(e+" contains an invalid key ("+n+") "+u.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');u.push(n),t.validateFirebaseData(e,r,u),u.pop()}),l&&c)throw new Error(e+' contains ".value" child '+u.toErrorString()+" in addition to actual children.")}},t.validateFirebaseMergePaths=function(e,n){var o,i;for(o=0;o<n.length;o++){i=n[o];for(var a=i.slice(),s=0;s<a.length;s++)if(".priority"===a[s]&&s===a.length-1);else if(!t.isValidKey(a[s]))throw new Error(e+"contains an invalid key ("+a[s]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}n.sort(r.Path.comparePaths);var u=null;for(o=0;o<n.length;o++){if(i=n[o],null!==u&&u.contains(i))throw new Error(e+"contains a path "+u.toString()+" that is ancestor of another path "+i.toString());u=i}},t.validateFirebaseMergeDataArg=function(e,n,i,s,u){if(!u||void 0!==i){var l=a.errorPrefix(e,n,u);if(!i||"object"!==typeof i||Array.isArray(i))throw new Error(l+" must be an object containing the children to replace.");var c=[];o.forEach(i,function(e,n){var o=new r.Path(e);if(t.validateFirebaseData(l,n,s.child(o)),".priority"===o.getBack()&&!t.isValidPriority(n))throw new Error(l+"contains an invalid value for '"+o.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");c.push(o)}),t.validateFirebaseMergePaths(l,c)}},t.validatePriority=function(e,n,r,o){if(!o||void 0!==r){if(i.isInvalidJSONNumber(r))throw new Error(a.errorPrefix(e,n,o)+"is "+r.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!t.isValidPriority(r))throw new Error(a.errorPrefix(e,n,o)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},t.validateEventType=function(e,t,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(a.errorPrefix(e,t,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},t.validateKey=function(e,n,r,o){if((!o||void 0!==r)&&!t.isValidKey(r))throw new Error(a.errorPrefix(e,n,o)+'was an invalid key = "'+r+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},t.validatePathString=function(e,n,r,o){if((!o||void 0!==r)&&!t.isValidPathString(r))throw new Error(a.errorPrefix(e,n,o)+'was an invalid path = "'+r+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},t.validateRootPathString=function(e,n,r,o){r&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),t.validatePathString(e,n,r,o)},t.validateWritablePath=function(e,t){if(".info"===t.getFront())throw new Error(e+" failed = Can't modify data under /.info/")},t.validateUrl=function(e,n,r){var o=r.path.toString();if("string"!==typeof r.repoInfo.host||0===r.repoInfo.host.length||!t.isValidKey(r.repoInfo.namespace)||0!==o.length&&!t.isValidRootPathString(o))throw new Error(a.errorPrefix(e,n,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},t.validateCredential=function(e,t,n,r){if((!r||void 0!==n)&&"string"!==typeof n)throw new Error(a.errorPrefix(e,t,r)+"must be a valid credential (a string).")},t.validateBoolean=function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error(a.errorPrefix(e,t,r)+"must be a boolean.")},t.validateString=function(e,t,n,r){if((!r||void 0!==n)&&"string"!==typeof n)throw new Error(a.errorPrefix(e,t,r)+"must be a valid string.")},t.validateObject=function(e,t,n,r){if((!r||void 0!==n)&&(!n||"object"!==typeof n||null===n))throw new Error(a.errorPrefix(e,t,r)+"must be a valid object.")},t.validateObjectContainsKey=function(e,t,n,r,i,s){if(!n||"object"!==typeof n||!o.contains(n,r)){if(i)return;throw new Error(a.errorPrefix(e,t,i)+'must contain the key "'+r+'"')}if(s){var u=o.safeGet(n,r);if("number"===s&&"number"!==typeof u||"string"===s&&"string"!==typeof u||"boolean"===s&&"boolean"!==typeof u||"function"===s&&"function"!==typeof u||"object"===s&&"object"!==typeof u&&u)throw i?new Error(a.errorPrefix(e,t,i)+'contains invalid value for key "'+r+'" (must be of type "'+s+'")'):new Error(a.errorPrefix(e,t,i)+'must contain the key "'+r+'" with type "'+s+'"')}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(t.OperationType||(t.OperationType={}));var o=function(){function e(e,t,n,o){this.fromUser=e,this.fromServer=t,this.queryId=n,this.tagged=o,r.assert(!o||t,"Tagged queries must be from server.")}return e.User=new e(!0,!1,null,!1),e.Server=new e(!1,!0,null,!1),e.forServerTaggedQuery=function(t){return new e(!1,!0,t,!0)},e}();t.OperationSource=o},function(e,t,n){"use strict";function r(e){return new Promise(e)}function o(e){return Promise.resolve(e)}function i(e){return Promise.reject(e)}t.a=r,t.c=o,t.b=i},function(e,t,n){"use strict";var r=n(323),o=(n(134),n(325));n.d(t,"a",function(){return r.a}),n.d(t,"b",function(){return o.a})},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"===typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t,n,r,o){this.type=e,this.snapshotNode=t,this.childName=n,this.oldSnap=r,this.prevName=o}return e.valueChange=function(t){return new e(e.VALUE,t)},e.childAddedChange=function(t,n){return new e(e.CHILD_ADDED,n,t)},e.childRemovedChange=function(t,n){return new e(e.CHILD_REMOVED,n,t)},e.childChangedChange=function(t,n,r){return new e(e.CHILD_CHANGED,n,t,r)},e.childMovedChange=function(t,n){return new e(e.CHILD_MOVED,n,t)},e.CHILD_ADDED="child_added",e.CHILD_REMOVED="child_removed",e.CHILD_CHANGED="child_changed",e.CHILD_MOVED="child_moved",e.VALUE="value",e}();t.Change=r},function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function o(e,t){for(var n in e)r(e,n)&&t(n,e[n])}function i(e){if(null==e)return{};var t={};return o(e,function(e,n){t[e]=n}),t}t.b=o,t.a=i},function(e,t,n){"use strict";t.__esModule=!0;var r=(t.addLeadingSlash=function(e){return"/"===e.charAt(0)?e:"/"+e},t.stripLeadingSlash=function(e){return"/"===e.charAt(0)?e.substr(1):e},t.hasBasename=function(e,t){return new RegExp("^"+t+"(\\/|\\?|#|$)","i").test(e)});t.stripBasename=function(e,t){return r(e,t)?e.substr(t.length):e},t.stripTrailingSlash=function(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e},t.parsePath=function(e){var t=e||"/",n="",r="",o=t.indexOf("#");-1!==o&&(r=t.substr(o),t=t.substr(0,o));var i=t.indexOf("?");return-1!==i&&(n=t.substr(i),t=t.substr(0,i)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}},t.createPath=function(e){var t=e.pathname,n=e.search,r=e.hash,o=t||"/";return n&&"?"!==n&&(o+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(o+="#"===r.charAt(0)?r:"#"+r),o}},function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"f",function(){return o}),n.d(t,"c",function(){return i}),n.d(t,"e",function(){return a}),n.d(t,"g",function(){return s}),n.d(t,"d",function(){return u}),n.d(t,"b",function(){return l});var r=function(e){return"/"===e.charAt(0)?e:"/"+e},o=function(e){return"/"===e.charAt(0)?e.substr(1):e},i=function(e,t){return new RegExp("^"+t+"(\\/|\\?|#|$)","i").test(e)},a=function(e,t){return i(e,t)?e.substr(t.length):e},s=function(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e},u=function(e){var t=e||"/",n="",r="",o=t.indexOf("#");-1!==o&&(r=t.substr(o),t=t.substr(0,o));var i=t.indexOf("?");return-1!==i&&(n=t.substr(i),t=t.substr(0,i)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}},l=function(e){var t=e.pathname,n=e.search,r=e.hash,o=t||"/";return n&&"?"!==n&&(o+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(o+="#"===r.charAt(0)?r:"#"+r),o}},function(e,t){},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(1),a=r(i),s=n(3),u=r(s),l=function(e){return Math.floor(100*e)/100+"%"},c=function(e){var t=e.children,n=e.className,r=e.count,i=e.offset,s=e.wrap;return a.default.createElement("div",{className:n,style:{display:"flex",flexWrap:s?"wrap":"no-wrap"}},a.default.Children.map(t,function(e,t){return a.default.createElement("div",{style:o({display:"flex",flexBasis:l(100/r),overflow:"hidden"},i&&0===t&&{marginLeft:l(100*i/r)})},e)}))};c.propTypes={children:u.default.node,className:u.default.string,count:u.default.number.isRequired,offset:u.default.number,wrap:u.default.bool},t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTileActivityFlags=t.doRangesOverlap=t.isRangeWithinRange=t.isValueWithinRange=t.mergeFunctions=void 0;var r=n(9),o=(t.mergeFunctions=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.filter(function(e){return e}).forEach(function(e){return e.apply(void 0,n)})}},t.isValueWithinRange=function(e,t){return t[0].getTime()<=e.getTime()&&t[1].getTime()>=e.getTime()}),i=t.isRangeWithinRange=function(e,t){return e[0].getTime()<=t[0].getTime()&&e[1].getTime()>=t[1].getTime()},a=t.doRangesOverlap=function(e,t){return o(e[0],t)||o(e[1],t)};t.getTileActivityFlags=function(e,t,n,o){var s={};if(!e)return s.active=!1,s.hasActive=!1,s;if(!n||!(e instanceof Array)&&!t||!(n instanceof Array)&&!o)throw new Error("getTileActivityFlags(): Unable to get tile activity flags because one or more required arguments were not passed.");var u=e instanceof Array?e:(0,r.getRange)(t,e),l=n instanceof Array?n:(0,r.getRange)(o,n);return s.active=i(u,l),s.hasActive=!s.active&&a(u,l),s}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o,i=n(39),a=n(13),s=n(2),u=n(0),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t,"__EMPTY_NODE",{get:function(){return o},set:function(e){o=e},enumerable:!0,configurable:!0}),t.prototype.compare=function(e,t){return s.nameCompare(e.name,t.name)},t.prototype.isDefinedOn=function(e){throw u.assertionError("KeyIndex.isDefinedOn not expected to be called.")},t.prototype.indexedValueChanged=function(e,t){return!1},t.prototype.minPost=function(){return a.NamedNode.MIN},t.prototype.maxPost=function(){return new a.NamedNode(s.MAX_NAME,o)},t.prototype.makePost=function(e,t){return u.assert("string"===typeof e,"KeyIndex indexValue must always be a string."),new a.NamedNode(e,o)},t.prototype.toString=function(){return".key"},t}(i.Index);t.KeyIndex=l,t.KEY_INDEX=new l},function(e,t,n){"use strict";function r(e,t){if(void 0===t&&(t=null),null===e)return o.ChildrenNode.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),u.assert(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){var n=e;return new i.LeafNode(n,r(t))}if(e instanceof Array||!f){var d=o.ChildrenNode.EMPTY_NODE,m=e;return s.forEach(m,function(e,t){if(s.contains(m,e)&&"."!==e.substring(0,1)){var n=r(t);!n.isLeafNode()&&n.isEmpty()||(d=d.updateImmediateChild(e,n))}}),d.updatePriority(r(t))}var y=[],v=!1,g=e;if(s.forEach(g,function(e,t){if("string"!==typeof e||"."!==e.substring(0,1)){var n=r(g[e]);n.isEmpty()||(v=v||!n.getPriority().isEmpty(),y.push(new a.NamedNode(e,n)))}}),0==y.length)return o.ChildrenNode.EMPTY_NODE;var _=l.buildChildSet(y,c.NAME_ONLY_COMPARATOR,function(e){return e.name},c.NAME_COMPARATOR);if(v){var b=l.buildChildSet(y,h.PRIORITY_INDEX.getCompare());return new o.ChildrenNode(_,r(t),new p.IndexMap({".priority":b},{".priority":h.PRIORITY_INDEX}))}return new o.ChildrenNode(_,r(t),p.IndexMap.Default)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(10),i=n(40),a=n(13),s=n(0),u=n(0),l=n(107),c=n(108),p=n(106),h=n(8),f=!0;t.nodeFromJSON=r,h.setNodeFromJSON(r)},function(e,t,n){"use strict";function r(e){switch(e){case h.RAW:case h.BASE64:case h.BASE64URL:case h.DATA_URL:return;default:throw"Expected one of the event types: ["+h.RAW+", "+h.BASE64+", "+h.BASE64URL+", "+h.DATA_URL+"]."}}function o(e,t){switch(e){case h.RAW:return new f(i(t));case h.BASE64:case h.BASE64URL:return new f(s(e,t));case h.DATA_URL:return new f(u(t),l(t))}throw p.s()}function i(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296==(64512&r)){var o=n<e.length-1&&56320==(64512&e.charCodeAt(n+1));if(o){var i=r,a=e.charCodeAt(++n);r=65536|(1023&i)<<10|1023&a,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320==(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function a(e){var t;try{t=decodeURIComponent(e)}catch(e){throw p.i(h.DATA_URL,"Malformed data URL.")}return i(t)}function s(e,t){switch(e){case h.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){var o=n?"-":"_";throw p.i(e,"Invalid character '"+o+"' found: is it base64url encoded?")}break;case h.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a){var o=i?"+":"/";throw p.i(e,"Invalid character '"+o+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(t)}catch(t){throw p.i(e,"Invalid character found")}for(var u=new Uint8Array(s.length),l=0;l<s.length;l++)u[l]=s.charCodeAt(l);return u}function u(e){var t=new d(e);return t.base64?s(h.BASE64,t.rest):a(t.rest)}function l(e){return new d(e).contentType}function c(e,t){return!!(e.length>=t.length)&&e.substring(e.length-t.length)===t}n.d(t,"a",function(){return h}),t.c=r,t.b=o;var p=n(17),h={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},f=function(){function e(e,t){this.data=e,this.contentType=t||null}return e}(),d=function(){function e(e){this.base64=!1,this.contentType=null;var t=e.match(/^data:([^,]+)?,/);if(null===t)throw p.i(h.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=t[1]||null;null!=n&&(this.base64=c(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=e.substring(e.indexOf(",")+1)}return e}()},function(e,t,n){"use strict";function r(e){switch(e){case i.RUNNING:case i.PAUSING:case i.CANCELING:return a.RUNNING;case i.PAUSED:return a.PAUSED;case i.SUCCESS:return a.SUCCESS;case i.CANCELED:return a.CANCELED;case i.ERROR:default:return a.ERROR}}n.d(t,"b",function(){return o}),n.d(t,"a",function(){return i}),n.d(t,"c",function(){return a}),t.d=r;var o={STATE_CHANGED:"state_changed"},i={RUNNING:"running",PAUSING:"pausing",PAUSED:"paused",SUCCESS:"success",CANCELING:"canceling",CANCELED:"canceled",ERROR:"error"},a={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"}},function(e,t,n){"use strict";function r(e){return function(){return e}}var o=function(){};o.thatReturns=r,o.thatReturnsFalse=r(!1),o.thatReturnsTrue=r(!0),o.thatReturnsNull=r(null),o.thatReturnsThis=function(){return this},o.thatReturnsArgument=function(e){return e},e.exports=o},function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return u});var r=n(78),o=n(79),i=n(27),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(e,t,n,o){var s=void 0;"string"===typeof e?(s=Object(i.d)(e),s.state=t):(s=a({},e),void 0===s.pathname&&(s.pathname=""),s.search?"?"!==s.search.charAt(0)&&(s.search="?"+s.search):s.search="",s.hash?"#"!==s.hash.charAt(0)&&(s.hash="#"+s.hash):s.hash="",void 0!==t&&void 0===s.state&&(s.state=t));try{s.pathname=decodeURI(s.pathname)}catch(e){throw e instanceof URIError?new URIError('Pathname "'+s.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):e}return n&&(s.key=n),o?s.pathname?"/"!==s.pathname.charAt(0)&&(s.pathname=Object(r.default)(s.pathname,o.pathname)):s.pathname=o.pathname:s.pathname||(s.pathname="/"),s},u=function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&Object(o.default)(e.state,t.state)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(265),o=n(266),i=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new r.DOMStorageWrapper(t)}}catch(e){}return new o.MemoryStorage};t.PersistentStorage=i("localStorage"),t.SessionStorage=i("sessionStorage")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PROTOCOL_VERSION="5",t.VERSION_PARAM="v",t.TRANSPORT_SESSION_PARAM="s",t.REFERER_PARAM="r",t.FORGE_REF="f",t.FORGE_DOMAIN="firebaseio.com",t.LAST_SESSION_PARAM="ls",t.WEBSOCKET="websocket",t.LONG_POLLING="long_polling"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(13),o=n(2),i=function(){function e(){}return e.prototype.getCompare=function(){return this.compare.bind(this)},e.prototype.indexedValueChanged=function(e,t){var n=new r.NamedNode(o.MIN_NAME,e),i=new r.NamedNode(o.MIN_NAME,t);return 0!==this.compare(n,i)},e.prototype.minPost=function(){return r.NamedNode.MIN},e}();t.Index=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(0),i=n(2),a=n(104),s=function(){function e(t,n){void 0===n&&(n=e.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,o.assert(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),a.validatePriorityNode(this.priorityNode_)}return Object.defineProperty(e,"__childrenNodeConstructor",{get:function(){return r},set:function(e){r=e},enumerable:!0,configurable:!0}),e.prototype.isLeafNode=function(){return!0},e.prototype.getPriority=function(){return this.priorityNode_},e.prototype.updatePriority=function(t){return new e(this.value_,t)},e.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.getChild=function(t){return t.isEmpty()?this:".priority"===t.getFront()?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.hasChild=function(){return!1},e.prototype.getPredecessorChildName=function(e,t){return null},e.prototype.updateImmediateChild=function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)},e.prototype.updateChild=function(t,n){var r=t.getFront();return null===r?n:n.isEmpty()&&".priority"!==r?this:(o.assert(".priority"!==r||1===t.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(t.popFront(),n)))},e.prototype.isEmpty=function(){return!1},e.prototype.numChildren=function(){return 0},e.prototype.forEachChild=function(e,t){return!1},e.prototype.val=function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},e.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+a.priorityHashText(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?i.doubleToIEEE754String(this.value_):this.value_,this.lazyHash_=i.sha1(e)}return this.lazyHash_},e.prototype.getValue=function(){return this.value_},e.prototype.compareTo=function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(o.assert(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},e.prototype.compareToLeafNode_=function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return o.assert(i>=0,"Unknown leaf type: "+n),o.assert(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i},e.prototype.withIndex=function(){return this},e.prototype.isIndexed=function(){return!0},e.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1},e.VALUE_TYPE_ORDER=["object","boolean","number","string"],e}();t.LeafNode=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t,n,r,o){void 0===o&&(o=null),this.isReverse_=r,this.resultGenerator_=o,this.nodeStack_=[];for(var i=1;!e.isEmpty();)if(e=e,i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse_?e.left:e.right;else{if(0===i){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}return e.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e},e.prototype.hasNext=function(){return this.nodeStack_.length>0},e.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}},e}();t.SortedMapIterator=r;var o=function(){function e(t,n,r,o,i){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=o?o:a.EMPTY_NODE,this.right=null!=i?i:a.EMPTY_NODE}return e.prototype.copy=function(t,n,r,o,i){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=i?i:this.right)},e.prototype.count=function(){return this.left.count()+1+this.right.count()},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},e.prototype.minKey=function(){return this.min_().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r,o;return o=this,r=n(e,o.key),o=r<0?o.copy(null,null,null,o.left.insert(e,t,n),null):0===r?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,n)),o.fixUp_()},e.prototype.removeMin_=function(){if(this.left.isEmpty())return a.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()},e.prototype.remove=function(e,t){var n,r;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return a.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()},e.prototype.isRed_=function(){return this.color},e.prototype.fixUp_=function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e},e.prototype.moveRedLeft_=function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e},e.prototype.moveRedRight_=function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e},e.prototype.rotateLeft_=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight_=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip_=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth_=function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1},e.prototype.check_=function(){var e;if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");if((e=this.left.check_())!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)},e.RED=!0,e.BLACK=!1,e}();t.LLRBNode=o;var i=function(){function e(){}return e.prototype.copy=function(e,t,n,r,o){return this},e.prototype.insert=function(e,t,n){return new o(e,t,null)},e.prototype.remove=function(e,t){return this},e.prototype.count=function(){return 0},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.check_=function(){return 0},e.prototype.isRed_=function(){return!1},e}();t.LLRBEmptyNode=i;var a=function(){function e(t,n){void 0===n&&(n=e.EMPTY_NODE),this.comparator_=t,this.root_=n}return e.prototype.insert=function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,o.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,o.BLACK,null,null))},e.prototype.get=function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null},e.prototype.getPredecessorKey=function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},e.prototype.isEmpty=function(){return this.root_.isEmpty()},e.prototype.count=function(){return this.root_.count()},e.prototype.minKey=function(){return this.root_.minKey()},e.prototype.maxKey=function(){return this.root_.maxKey()},e.prototype.inorderTraversal=function(e){return this.root_.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.root_.reverseTraversal(e)},e.prototype.getIterator=function(e){return new r(this.root_,null,this.comparator_,!1,e)},e.prototype.getIteratorFrom=function(e,t){return new r(this.root_,e,this.comparator_,!1,t)},e.prototype.getReverseIteratorFrom=function(e,t){return new r(this.root_,e,this.comparator_,!0,t)},e.prototype.getReverseIterator=function(e){return new r(this.root_,null,this.comparator_,!0,e)},e.EMPTY_NODE=new i,e}();t.SortedMap=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(110),o=n(32),i=n(4),a=n(111),s=n(271),u=n(282),l=n(0),c=n(2),p=n(0),h=n(283),f=n(66),d=n(285),m=n(116),y=n(286),v=n(117),g=n(291),_=n(99),b=function(){function e(e,t,n){var r=this;this.repoInfo_=e,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new y.EventQueue,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new a.SparseSnapshotTree,this.persistentConnection_=null;var o=new h.AuthTokenProvider(n);if(this.stats_=f.StatsManager.getCollection(e),t||c.beingCrawled())this.server_=new g.ReadonlyRestClient(this.repoInfo_,this.onDataUpdate_.bind(this),o),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var i=n.options.databaseAuthVariableOverride;if("undefined"!==typeof i&&null!==i){if("object"!==typeof i)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{l.stringify(i)}catch(e){throw new Error("Invalid authOverride provided: "+e)}}this.persistentConnection_=new v.PersistentConnection(this.repoInfo_,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),o,i),this.server_=this.persistentConnection_}o.addTokenChangeListener(function(e){r.server_.refreshAuthToken(e)}),this.statsReporter_=f.StatsManager.getOrCreateReporter(e,function(){return new d.StatsReporter(r.stats_,r.server_)}),this.transactions_init_(),this.infoData_=new u.SnapshotHolder,this.infoSyncTree_=new s.SyncTree({startListening:function(e,t,n,o){var i=[],a=r.infoData_.getNode(e.path);return a.isEmpty()||(i=r.infoSyncTree_.applyServerOverwrite(e.path,a),setTimeout(function(){o("ok")},0)),i},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new s.SyncTree({startListening:function(e,t,n,o){return r.server_.listen(e,n,t,function(t,n){var i=o(t,n);r.eventQueue_.raiseEventsForChangedPath(e.path,i)}),[]},stopListening:function(e,t){r.server_.unlisten(e,t)}})}return e.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},e.prototype.name=function(){return this.repoInfo_.namespace},e.prototype.serverTime=function(){var e=this.infoData_.getNode(new i.Path(".info/serverTimeOffset")),t=e.val()||0;return(new Date).getTime()+t},e.prototype.generateServerValues=function(){return r.generateWithValues({timestamp:this.serverTime()})},e.prototype.onDataUpdate_=function(e,t,n,r){this.dataUpdateCount++;var a=new i.Path(e);t=this.interceptServerDataCallback_?this.interceptServerDataCallback_(e,t):t;var s=[];if(r)if(n){var u=p.map(t,function(e){return o.nodeFromJSON(e)});s=this.serverSyncTree_.applyTaggedQueryMerge(a,u,r)}else{var l=o.nodeFromJSON(t);s=this.serverSyncTree_.applyTaggedQueryOverwrite(a,l,r)}else if(n){var c=p.map(t,function(e){return o.nodeFromJSON(e)});s=this.serverSyncTree_.applyServerMerge(a,c)}else{var h=o.nodeFromJSON(t);s=this.serverSyncTree_.applyServerOverwrite(a,h)}var f=a;s.length>0&&(f=this.rerunTransactions_(a)),this.eventQueue_.raiseEventsForChangedPath(f,s)},e.prototype.interceptServerData_=function(e){this.interceptServerDataCallback_=e},e.prototype.onConnectStatus_=function(e){this.updateInfo_("connected",e),!1===e&&this.runOnDisconnectEvents_()},e.prototype.onServerInfoUpdate_=function(e){var t=this;c.each(e,function(e,n){t.updateInfo_(n,e)})},e.prototype.updateInfo_=function(e,t){var n=new i.Path("/.info/"+e),r=o.nodeFromJSON(t);this.infoData_.updateSnapshot(n,r);var a=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,a)},e.prototype.getNextWriteId_=function(){return this.nextWriteId_++},e.prototype.setWithPriority=function(e,t,n,i){var a=this;this.log_("set",{path:e.toString(),value:t,priority:n});var s=this.generateServerValues(),u=o.nodeFromJSON(t,n),l=r.resolveDeferredValueSnapshot(u,s),p=this.getNextWriteId_(),h=this.serverSyncTree_.applyUserOverwrite(e,l,p,!0);this.eventQueue_.queueEvents(h),this.server_.put(e.toString(),u.val(!0),function(t,n){var r="ok"===t;r||c.warn("set at "+e+" failed: "+t);var o=a.serverSyncTree_.ackUserWrite(p,!r);a.eventQueue_.raiseEventsForChangedPath(e,o),a.callOnCompleteCallback(i,t,n)});var f=this.abortTransactions_(e);this.rerunTransactions_(f),this.eventQueue_.raiseEventsForChangedPath(f,[])},e.prototype.update=function(e,t,n){var i=this;this.log_("update",{path:e.toString(),value:t});var a=!0,s=this.generateServerValues(),u={};if(p.forEach(t,function(e,t){a=!1;var n=o.nodeFromJSON(t);u[e]=r.resolveDeferredValueSnapshot(n,s)}),a)c.log("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var l=this.getNextWriteId_(),h=this.serverSyncTree_.applyUserMerge(e,u,l);this.eventQueue_.queueEvents(h),this.server_.merge(e.toString(),t,function(t,r){var o="ok"===t;o||c.warn("update at "+e+" failed: "+t);var a=i.serverSyncTree_.ackUserWrite(l,!o),s=a.length>0?i.rerunTransactions_(e):e;i.eventQueue_.raiseEventsForChangedPath(s,a),i.callOnCompleteCallback(n,t,r)}),p.forEach(t,function(t){var n=i.abortTransactions_(e.child(t));i.rerunTransactions_(n)}),this.eventQueue_.raiseEventsForChangedPath(e,[])}},e.prototype.runOnDisconnectEvents_=function(){var e=this;this.log_("onDisconnectEvents");var t=this.generateServerValues(),n=r.resolveDeferredValueTree(this.onDisconnect_,t),o=[];n.forEachTree(i.Path.Empty,function(t,n){o=o.concat(e.serverSyncTree_.applyServerOverwrite(t,n));var r=e.abortTransactions_(t);e.rerunTransactions_(r)}),this.onDisconnect_=new a.SparseSnapshotTree,this.eventQueue_.raiseEventsForChangedPath(i.Path.Empty,o)},e.prototype.onDisconnectCancel=function(e,t){var n=this;this.server_.onDisconnectCancel(e.toString(),function(r,o){"ok"===r&&n.onDisconnect_.forget(e),n.callOnCompleteCallback(t,r,o)})},e.prototype.onDisconnectSet=function(e,t,n){var r=this,i=o.nodeFromJSON(t);this.server_.onDisconnectPut(e.toString(),i.val(!0),function(t,o){"ok"===t&&r.onDisconnect_.remember(e,i),r.callOnCompleteCallback(n,t,o)})},e.prototype.onDisconnectSetWithPriority=function(e,t,n,r){var i=this,a=o.nodeFromJSON(t,n);this.server_.onDisconnectPut(e.toString(),a.val(!0),function(t,n){"ok"===t&&i.onDisconnect_.remember(e,a),i.callOnCompleteCallback(r,t,n)})},e.prototype.onDisconnectUpdate=function(e,t,n){var r=this;if(p.isEmpty(t))return c.log("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(e.toString(),t,function(i,a){"ok"===i&&p.forEach(t,function(t,n){var i=o.nodeFromJSON(n);r.onDisconnect_.remember(e.child(t),i)}),r.callOnCompleteCallback(n,i,a)})},e.prototype.addEventCallbackForQuery=function(e,t){var n;n=".info"===e.path.getFront()?this.infoSyncTree_.addEventRegistration(e,t):this.serverSyncTree_.addEventRegistration(e,t),this.eventQueue_.raiseEventsAtPath(e.path,n)},e.prototype.removeEventCallbackForQuery=function(e,t){var n;n=".info"===e.path.getFront()?this.infoSyncTree_.removeEventRegistration(e,t):this.serverSyncTree_.removeEventRegistration(e,t),this.eventQueue_.raiseEventsAtPath(e.path,n)},e.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt("repo_interrupt")},e.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume("repo_interrupt")},e.prototype.stats=function(e){if(void 0===e&&(e=!1),"undefined"!==typeof console){var t;e?(this.statsListener_||(this.statsListener_=new m.StatsListener(this.stats_)),t=this.statsListener_.get()):t=this.stats_.get();var n=Object.keys(t).reduce(function(e,t){return Math.max(t.length,e)},0);p.forEach(t,function(e,t){for(var r=e.length;r<n+2;r++)e+=" ";console.log(e+t)})}},e.prototype.statsIncrementCounter=function(e){this.stats_.incrementCounter(e),this.statsReporter_.includeStat(e)},e.prototype.log_=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),c.log.apply(void 0,[n].concat(e))},e.prototype.callOnCompleteCallback=function(e,t,n){e&&c.exceptionGuard(function(){if("ok"==t)e(null);else{var r=(t||"error").toUpperCase(),o=r;n&&(o+=": "+n);var i=new Error(o);i.code=r,e(i)}})},Object.defineProperty(e.prototype,"database",{get:function(){return this.__database||(this.__database=new _.Database(this))},enumerable:!0,configurable:!0}),e}();t.Repo=b},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}return e.prototype.isFullyInitialized=function(){return this.fullyInitialized_},e.prototype.isFiltered=function(){return this.filtered_},e.prototype.isCompleteForPath=function(e){if(e.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var t=e.getFront();return this.isCompleteForChild(t)},e.prototype.isCompleteForChild=function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)},e.prototype.getNode=function(){return this.node_},e}();t.CacheNode=r},function(e,t,n){"use strict";var r={AVAILABLE_IN_WINDOW:"only-available-in-window",AVAILABLE_IN_SW:"only-available-in-sw",SHOULD_BE_INHERITED:"should-be-overriden",BAD_SENDER_ID:"bad-sender-id",INCORRECT_GCM_SENDER_ID:"incorrect-gcm-sender-id",PERMISSION_DEFAULT:"permission-default",PERMISSION_BLOCKED:"permission-blocked",UNSUPPORTED_BROWSER:"unsupported-browser",NOTIFICATIONS_BLOCKED:"notifications-blocked",FAILED_DEFAULT_REGISTRATION:"failed-serviceworker-registration",SW_REGISTRATION_EXPECTED:"sw-registration-expected",GET_SUBSCRIPTION_FAILED:"get-subscription-failed",INVALID_SAVED_TOKEN:"invalid-saved-token",SW_REG_REDUNDANT:"sw-reg-redundant",TOKEN_SUBSCRIBE_FAILED:"token-subscribe-failed",TOKEN_SUBSCRIBE_NO_TOKEN:"token-subscribe-no-token",TOKEN_SUBSCRIBE_NO_PUSH_SET:"token-subscribe-no-push-set",USE_SW_BEFORE_GET_TOKEN:"use-sw-before-get-token",INVALID_DELETE_TOKEN:"invalid-delete-token",DELETE_TOKEN_NOT_FOUND:"delete-token-not-found",DELETE_SCOPE_NOT_FOUND:"delete-scope-not-found",BG_HANDLER_FUNCTION_EXPECTED:"bg-handler-function-expected",NO_WINDOW_CLIENT_TO_MSG:"no-window-client-to-msg",UNABLE_TO_RESUBSCRIBE:"unable-to-resubscribe",NO_FCM_TOKEN_FOR_RESUBSCRIBE:"no-fcm-token-for-resubscribe",FAILED_TO_DELETE_TOKEN:"failed-to-delete-token",NO_SW_IN_REG:"no-sw-in-reg",BAD_SCOPE:"bad-scope",BAD_VAPID_KEY:"bad-vapid-key",BAD_SUBSCRIPTION:"bad-subscription",BAD_TOKEN:"bad-token",BAD_PUSH_SET:"bad-push-set",FAILED_DELETE_VAPID_KEY:"failed-delete-vapid-key"},o=(i={},i[r.AVAILABLE_IN_WINDOW]="This method is available in a Window context.",i[r.AVAILABLE_IN_SW]="This method is available in a service worker context.",i[r.SHOULD_BE_INHERITED]="This method should be overriden by extended classes.",i[r.BAD_SENDER_ID]="Please ensure that 'messagingSenderId' is set correctly in the options passed into firebase.initializeApp().",i[r.PERMISSION_DEFAULT]="The required permissions were not granted and dismissed instead.",i[r.PERMISSION_BLOCKED]="The required permissions were not granted and blocked instead.",i[r.UNSUPPORTED_BROWSER]="This browser doesn't support the API's required to use the firebase SDK.",i[r.NOTIFICATIONS_BLOCKED]="Notifications have been blocked.",i[r.FAILED_DEFAULT_REGISTRATION]="We are unable to register the default service worker. {$browserErrorMessage}",i[r.SW_REGISTRATION_EXPECTED]="A service worker registration was the expected input.",i[r.GET_SUBSCRIPTION_FAILED]="There was an error when trying to get any existing Push Subscriptions.",i[r.INVALID_SAVED_TOKEN]="Unable to access details of the saved token.",i[r.SW_REG_REDUNDANT]="The service worker being used for push was made redundant.",i[r.TOKEN_SUBSCRIBE_FAILED]="A problem occured while subscribing the user to FCM: {$message}",i[r.TOKEN_SUBSCRIBE_NO_TOKEN]="FCM returned no token when subscribing the user to push.",i[r.TOKEN_SUBSCRIBE_NO_PUSH_SET]="FCM returned an invalid response when getting an FCM token.",i[r.USE_SW_BEFORE_GET_TOKEN]="You must call useServiceWorker() before calling getToken() to ensure your service worker is used.",i[r.INVALID_DELETE_TOKEN]="You must pass a valid token into deleteToken(), i.e. the token from getToken().",i[r.DELETE_TOKEN_NOT_FOUND]="The deletion attempt for token could not be performed as the token was not found.",i[r.DELETE_SCOPE_NOT_FOUND]="The deletion attempt for service worker scope could not be performed as the scope was not found.",i[r.BG_HANDLER_FUNCTION_EXPECTED]="The input to setBackgroundMessageHandler() must be a function.",i[r.NO_WINDOW_CLIENT_TO_MSG]="An attempt was made to message a non-existant window client.",i[r.UNABLE_TO_RESUBSCRIBE]="There was an error while re-subscribing the FCM token for push messaging. Will have to resubscribe the user on next visit. {$message}",i[r.NO_FCM_TOKEN_FOR_RESUBSCRIBE]="Could not find an FCM token and as a result, unable to resubscribe. Will have to resubscribe the user on next visit.",i[r.FAILED_TO_DELETE_TOKEN]="Unable to delete the currently saved token.",i[r.NO_SW_IN_REG]="Even though the service worker registration was successful, there was a problem accessing the service worker itself.",i[r.INCORRECT_GCM_SENDER_ID]="Please change your web app manifest's 'gcm_sender_id' value to '103953800507' to use Firebase messaging.",i[r.BAD_SCOPE]="The service worker scope must be a string with at least one character.",i[r.BAD_VAPID_KEY]="The public VAPID key must be a string with at least one character.",i[r.BAD_SUBSCRIPTION]="The subscription must be a valid PushSubscription.",i[r.BAD_TOKEN]="The FCM Token used for storage / lookup was not a valid token string.",i[r.BAD_PUSH_SET]="The FCM push set used for storage / lookup was not not a valid push set string.",i[r.FAILED_DELETE_VAPID_KEY]="The VAPID key could not be deleted.",i);t.a={codes:r,map:o};var i},function(e,t,n){"use strict";n.d(t,"f",function(){return r}),n.d(t,"g",function(){return o}),n.d(t,"a",function(){return i}),n.d(t,"b",function(){return a}),n.d(t,"c",function(){return s}),n.d(t,"d",function(){return u}),n.d(t,"e",function(){return l}),n.d(t,"h",function(){return c});var r="https://firebasestorage.googleapis.com",o="https://firebasestorage.googleapis.com",i="/v0",a="/v0",s="storageBucket",u=12e4,l=6e4,c=-9007199254740991},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(17),o=function(){function e(e,t){this.bucket=e,this.path_=t}return Object.defineProperty(e.prototype,"path",{get:function(){return this.path_},enumerable:!0,configurable:!0}),e.prototype.fullServerUrl=function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)},e.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},e.makeFromBucketSpec=function(t){var n;try{n=e.makeFromUrl(t)}catch(n){return new e(t,"")}if(""===n.path)return n;throw r.h(t)},e.makeFromUrl=function(t){function n(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}function o(e){e.path_=decodeURIComponent(e.path)}for(var i=null,a=new RegExp("^gs://([A-Za-z0-9.\\-]+)(/(.*))?$","i"),s={bucket:1,path:3},u=new RegExp("^https?://firebasestorage\\.googleapis\\.com/v[A-Za-z0-9_]+/b/([A-Za-z0-9.\\-]+)/o(/([^?#]*).*)?$","i"),l={bucket:1,path:3},c=[{regex:a,indices:s,postModify:n},{regex:u,indices:l,postModify:o}],p=0;p<c.length;p++){var h=c[p],f=h.regex.exec(t);if(f){var d=f[h.indices.bucket],m=f[h.indices.path];m||(m=""),i=new e(d,m),h.postModify(i);break}}if(null==i)throw r.k(t);return i},e}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(1),s=n.n(a),u=n(16),l=n(15),c=(n.n(l),n(5)),p=n(322),h=(n.n(p),n(72)),f=n(22),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),m=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={loginEmail:"",loginPassword:"",createEmail:"",createPassword:"",successEmail:"",userUid:"",form:!1},n}return i(t,e),d(t,[{key:"componentWillMount",value:function(){console.log(this.props)}},{key:"handleLogin",value:function(e){var t=this,n=this.state.loginEmail,r=this.state.loginPassword;n&&r&&u.a.auth().signInWithEmailAndPassword(n,r).then(function(e){u.a.auth().onAuthStateChanged(function(e){e&&(console.log(e),t.props.login(e.uid),t.setState({successEmail:e.email}),t.props.closeModal(),"account"==t.props.state.redirect?t.props.history.push("/myaccount"):"form"==t.props.state.redirect?t.props.history.push("/form"):"post"==t.props.state.redirect?(t.props.post(),t.props.closeModal()):"listings"==t.props.state.redirect&&t.props.listings(e.uid))})}).catch(function(e){"There is no user record corresponding to this identifier. The user may have been deleted."===e.message?alert("This email does not exist."):"The email address is badly formatted."===e.message?alert("Please enter a correctly formatted email address."):"The password is invalid or the user does not have a password."===e.message?alert("Password is incorrect."):console.log(e)})}},{key:"handleSubmit",value:function(e){var t=this,n=this.state.createEmail,r=this.state.createPassword;n&&r.length>=6?(console.log(this.state),u.a.auth().createUserWithEmailAndPassword(n,r).then(function(e){u.a.auth().onAuthStateChanged(function(e){e&&(console.log(e),t.props.login(e.uid),t.setState({successEmail:e.email}),t.props.closeModal(),"account"==t.props.state.redirect?t.props.history.push("/myaccount"):"form"==t.props.state.redirect?t.props.history.push("/form"):"post"==t.props.state.redirect?(t.props.post(),t.props.closeModal()):"listings"==t.props.state.redirect&&t.props.listings(e.uid))})}).catch(function(e){"The email address is already in use by another account."===e.message&&alert("The email address is already in use by another account.")})):n&&r.length<6?alert("Password should be at least 6 characters"):alert("Please fill out all fields.")}},{key:"showCreateAccount",value:function(){this.setState({form:!0})}},{key:"showLogin",value:function(){this.setState({form:!1})}},{key:"render",value:function(){var e=this,t=void 0;return t=this.state.form?s.a.createElement("div",{className:"login-modal-container"},s.a.createElement("div",{className:"login-modal-content-container"},s.a.createElement("h1",{className:"login-modal-header"},"Create Account"),s.a.createElement("hr",null),s.a.createElement("form",{className:"login-modal-form-container"},s.a.createElement("label",{className:"login-modal-email-header"},"Email"),s.a.createElement("br",null),s.a.createElement("input",{className:"login-modal-email",type:"email",onChange:function(t){return e.setState({createEmail:t.target.value})}}),s.a.createElement("br",null),s.a.createElement("label",{className:"login-modal-password-header"},"Password"),s.a.createElement("br",null),s.a.createElement("input",{className:"login-modal-password",type:"password",onChange:function(t){return e.setState({createPassword:t.target.value})}})),s.a.createElement("input",{id:"login-modal-login-button",className:"btn",type:"submit",value:"Sign up",onClick:function(t){return e.handleSubmit(t)}}),s.a.createElement("br",null),s.a.createElement("hr",null),s.a.createElement("div",{className:"login-modal-account-container"},s.a.createElement("p",{className:"login-modal-account-header"},"Already have an account?"),s.a.createElement("a",{className:"login-modal-account",onClick:function(t){return e.showLogin(t)}},"Login")))):s.a.createElement("div",{className:"login-modal-container"},s.a.createElement("div",{className:"login-modal-content-container"},s.a.createElement("h1",{className:"login-modal-header"},"Login"),s.a.createElement("hr",null),s.a.createElement("form",{className:"login-modal-form-container"},s.a.createElement("label",{className:"login-modal-email-header"},"Email"),s.a.createElement("br",null),s.a.createElement("input",{className:"login-modal-email",type:"email",onChange:function(t){return e.setState({loginEmail:t.target.value})}}),s.a.createElement("br",null),s.a.createElement("label",{className:"login-modal-password-header"},"Password"),s.a.createElement("br",null),s.a.createElement("input",{className:"login-modal-password",type:"password",onChange:function(t){return e.setState({loginPassword:t.target.value})}})),s.a.createElement("input",{id:"login-modal-login-button",className:"btn",type:"submit",value:"Login",onClick:function(t){return e.handleLogin(t)}}),s.a.createElement("br",null),s.a.createElement("hr",null),s.a.createElement("div",{className:"login-modal-account-container"},s.a.createElement("p",{className:"login-modal-account-header"},"Don't have an account?"),s.a.createElement("a",{className:"login-modal-account",onClick:function(t){return e.showCreateAccount(t)}},"Sign up")))),s.a.createElement("div",{className:"login-modal-background"},s.a.createElement("div",{className:"close-login-modal",onClick:this.props.closeModal},"X"),t)}}]),t}(a.Component);t.a=Object(c.e)(Object(f.b)(function(e){return e},{login:h.c})(m))},function(e,t,n){e.exports=n.p+"static/media/drop-down-arrow.729c998e.svg"},function(e,t,n){"use strict";function r(e,t,n,r,i,a,s,u){if(o(t),!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,a,s,u],p=0;l=new Error(t.replace(/%s/g,function(){return c[p++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}}var o=function(e){};e.exports=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.locationsAreEqual=t.createLocation=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(78),a=r(i),s=n(79),u=r(s),l=n(26);t.createLocation=function(e,t,n,r){var i=void 0;"string"===typeof e?(i=(0,l.parsePath)(e),i.state=t):(i=o({},e),void 0===i.pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==t&&void 0===i.state&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(e){throw e instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):e}return n&&(i.key=n),r?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=(0,a.default)(i.pathname,r.pathname)):i.pathname=r.pathname:i.pathname||(i.pathname="/"),i},t.locationsAreEqual=function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&(0,u.default)(e.state,t.state)}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(6),o=function(e){return e&&e.__esModule?e:{default:e}}(r),i=function(){var e=null,t=function(t){return(0,o.default)(null==e,"A history supports only one prompt at a time"),e=t,function(){e===t&&(e=null)}},n=function(t,n,r,i){if(null!=e){var a="function"===typeof e?e(t,n):e;"string"===typeof a?"function"===typeof r?r(a,i):((0,o.default)(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),i(!0)):i(!1!==a)}else i(!0)},r=[];return{setPrompt:t,confirmTransitionTo:n,appendListener:function(e){var t=!0,n=function(){t&&e.apply(void 0,arguments)};return r.push(n),function(){t=!1,r=r.filter(function(e){return e!==n})}},notifyListeners:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];r.forEach(function(e){return e.apply(void 0,t)})}}};t.default=i},function(e,t,n){"use strict";var r=n(53);t.a=r.a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(6),s=n.n(a),u=n(11),l=n.n(u),c=n(1),p=n.n(c),h=n(3),f=n.n(h),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m=function(e){function t(){var n,i,a;r(this,t);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return n=i=o(this,e.call.apply(e,[this].concat(u))),i.state={match:i.computeMatch(i.props.history.location.pathname)},a=n,o(i,a)}return i(t,e),t.prototype.getChildContext=function(){return{router:d({},this.context.router,{history:this.props.history,route:{location:this.props.history.location,match:this.state.match}})}},t.prototype.computeMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}},t.prototype.componentWillMount=function(){var e=this,t=this.props,n=t.children,r=t.history;l()(null==n||1===p.a.Children.count(n),"A <Router> may have only one child element"),this.unlisten=r.listen(function(){e.setState({match:e.computeMatch(r.location.pathname)})})},t.prototype.componentWillReceiveProps=function(e){s()(this.props.history===e.history,"You cannot change <Router history>")},t.prototype.componentWillUnmount=function(){this.unlisten()},t.prototype.render=function(){var e=this.props.children;return e?p.a.Children.only(e):null},t}(p.a.Component);m.propTypes={history:f.a.object.isRequired,children:f.a.node},m.contextTypes={router:f.a.object},m.childContextTypes={router:f.a.object.isRequired},t.a=m},function(e,t,n){"use strict";var r=n(176),o=n.n(r),i={},a=0,s=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=i[n]||(i[n]={});if(r[e])return r[e];var s=[],u=o()(e,s,t),l={re:u,keys:s};return a<1e4&&(r[e]=l,a++),l},u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"string"===typeof t&&(t={path:t});var n=t,r=n.path,o=void 0===r?"/":r,i=n.exact,a=void 0!==i&&i,u=n.strict,l=void 0!==u&&u,c=n.sensitive,p=void 0!==c&&c,h=s(o,{end:a,strict:l,sensitive:p}),f=h.re,d=h.keys,m=f.exec(e);if(!m)return null;var y=m[0],v=m.slice(1),g=e===y;return a&&!g?null:{path:o,url:"/"===o&&""===y?"/":y,isExact:g,params:d.reduce(function(e,t,n){return e[t.name]=v[n],e},{})}};t.a=u},function(e,t,n){"use strict";var r=n(6),o=n.n(r),i=function(){var e=null,t=function(t){return o()(null==e,"A history supports only one prompt at a time"),e=t,function(){e===t&&(e=null)}},n=function(t,n,r,i){if(null!=e){var a="function"===typeof e?e(t,n):e;"string"===typeof a?"function"===typeof r?r(a,i):(o()(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),i(!0)):i(!1!==a)}else i(!0)},r=[];return{setPrompt:t,confirmTransitionTo:n,appendListener:function(e){var t=!0,n=function(){t&&e.apply(void 0,arguments)};return r.push(n),function(){t=!1,r=r.filter(function(e){return e!==n})}},notifyListeners:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];r.forEach(function(e){return e.apply(void 0,t)})}}};t.a=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatShortWeekday=t.formatMonth=t.formatMonthYear=t.formatDate=void 0;var r=n(57),o={},i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,r.getLocale)(),n=JSON.stringify(e);return o[t]||(o[t]={}),o[t][n]||(o[t][n]=new Intl.DateTimeFormat(t,e).format),o[t][n]};t.formatDate=function(e){return i({day:"numeric",month:"numeric",year:"numeric"})(e)},t.formatMonthYear=function(e){return i({month:"long",year:"numeric"})(e)},t.formatMonth=function(e){return i({month:"long"})(e)},t.formatShortWeekday=function(e){return i({weekday:"short"})(e)}},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.setLocale=t.getLocale=t.getDefaultLocale=t.getDefaultLocales=void 0;var o=n(204),i=function(e){return e&&e.__esModule?e:{default:e}}(o),a=null,s=t.getDefaultLocales=(0,i.default)(function(){var e=[];return window.navigator.languages?e.push.apply(e,r(window.navigator.languages)):window.navigator.userLanguage&&e.push(window.navigator.userLanguage),e.push("en-GB"),e}),u=t.getDefaultLocale=(0,i.default)(function(){return s()[0]});t.getLocale=function(){return a||u()},t.setLocale=function(e){a=e}},function(e,t,n){"use strict";(function(t){function r(e,t){!o.isUndefined(e)&&o.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var o=n(12),i=n(223),a={"Content-Type":"application/x-www-form-urlencoded"},s={adapter:function(){var e;return"undefined"!==typeof XMLHttpRequest?e=n(91):"undefined"!==typeof t&&(e=n(91)),e}(),transformRequest:[function(e,t){return i(t,"Content-Type"),o.isFormData(e)||o.isArrayBuffer(e)||o.isBuffer(e)||o.isStream(e)||o.isFile(e)||o.isBlob(e)?e:o.isArrayBufferView(e)?e.buffer:o.isURLSearchParams(e)?(r(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):o.isObject(e)?(r(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"===typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};s.headers={common:{Accept:"application/json, text/plain, */*"}},o.forEach(["delete","get","head"],function(e){s.headers[e]={}}),o.forEach(["post","put","patch"],function(e){s.headers[e]=o.merge(a)}),e.exports=s}).call(t,n(59))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function i(e){if(p===clearTimeout)return clearTimeout(e);if((p===r||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(e);try{return p(e)}catch(t){try{return p.call(null,e)}catch(t){return p.call(this,e)}}}function a(){m&&f&&(m=!1,f.length?d=f.concat(d):y=-1,d.length&&s())}function s(){if(!m){var e=o(a);m=!0;for(var t=d.length;t;){for(f=d,d=[];++y<t;)f&&f[y].run();y=-1,t=d.length}f=null,m=!1,i(e)}}function u(e,t){this.fun=e,this.array=t}function l(){}var c,p,h=e.exports={};!function(){try{c="function"===typeof setTimeout?setTimeout:n}catch(e){c=n}try{p="function"===typeof clearTimeout?clearTimeout:r}catch(e){p=r}}();var f,d=[],m=!1,y=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];d.push(new u(e,t)),1!==d.length||m||o(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=l,h.addListener=l,h.once=l,h.off=l,h.removeListener=l,h.removeAllListeners=l,h.emit=l,h.prependListener=l,h.prependOnceListener=l,h.listeners=function(e){return[]},h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(e,t,n){(function(e,r){function o(e,t){this._id=e,this._clearFn=t}var i=Function.prototype.apply;t.setTimeout=function(){return new o(i.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new o(i.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(246),t.setImmediate=e,t.clearImmediate=r}).call(t,n(60).setImmediate,n(60).clearImmediate)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CONSTANTS={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(102),i=n(267),a=n(2),s=n(268),u=n(103),l=n(42),c=n(4),p=n(292),h=n(19),f=n(0),d=n(0),m=n(114),y=function(e){function t(t,n){if(!(t instanceof l.Repo))throw new Error("new Reference() no longer supported - use app.database().");return e.call(this,t,n,p.QueryParams.DEFAULT,!1)||this}return r(t,e),t.prototype.getKey=function(){return f.validateArgCount("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},t.prototype.child=function(e){return f.validateArgCount("Reference.child",1,1,arguments.length),"number"===typeof e?e=String(e):e instanceof c.Path||(null===this.path.getFront()?h.validateRootPathString("Reference.child",1,e,!1):h.validatePathString("Reference.child",1,e,!1)),new t(this.repo,this.path.child(e))},t.prototype.getParent=function(){f.validateArgCount("Reference.parent",0,0,arguments.length);var e=this.path.parent();return null===e?null:new t(this.repo,e)},t.prototype.getRoot=function(){f.validateArgCount("Reference.root",0,0,arguments.length);for(var e=this;null!==e.getParent();)e=e.getParent();return e},t.prototype.databaseProp=function(){return this.repo.database},t.prototype.set=function(e,t){f.validateArgCount("Reference.set",1,2,arguments.length),h.validateWritablePath("Reference.set",this.path),h.validateFirebaseDataArg("Reference.set",1,e,this.path,!1),f.validateCallback("Reference.set",2,t,!0);var n=new d.Deferred;return this.repo.setWithPriority(this.path,e,null,n.wrapCallback(t)),n.promise},t.prototype.update=function(e,t){if(f.validateArgCount("Reference.update",1,2,arguments.length),h.validateWritablePath("Reference.update",this.path),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,a.warn("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}h.validateFirebaseMergeDataArg("Reference.update",1,e,this.path,!1),f.validateCallback("Reference.update",2,t,!0);var o=new d.Deferred;return this.repo.update(this.path,e,o.wrapCallback(t)),o.promise},t.prototype.setWithPriority=function(e,t,n){if(f.validateArgCount("Reference.setWithPriority",2,3,arguments.length),h.validateWritablePath("Reference.setWithPriority",this.path),h.validateFirebaseDataArg("Reference.setWithPriority",1,e,this.path,!1),h.validatePriority("Reference.setWithPriority",2,t,!1),f.validateCallback("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new d.Deferred;return this.repo.setWithPriority(this.path,e,t,r.wrapCallback(n)),r.promise},t.prototype.remove=function(e){return f.validateArgCount("Reference.remove",0,1,arguments.length),h.validateWritablePath("Reference.remove",this.path),f.validateCallback("Reference.remove",1,e,!0),this.set(null,e)},t.prototype.transaction=function(e,t,n){if(f.validateArgCount("Reference.transaction",1,3,arguments.length),h.validateWritablePath("Reference.transaction",this.path),f.validateCallback("Reference.transaction",1,e,!1),f.validateCallback("Reference.transaction",2,t,!0),h.validateBoolean("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new d.Deferred;"function"===typeof t&&r.promise.catch(function(){});var o=function(e,n,o){e?r.reject(e):r.resolve(new i.TransactionResult(n,o)),"function"===typeof t&&t(e,n,o)};return this.repo.startTransaction(this.path,e,o,n),r.promise},t.prototype.setPriority=function(e,t){f.validateArgCount("Reference.setPriority",1,2,arguments.length),h.validateWritablePath("Reference.setPriority",this.path),h.validatePriority("Reference.setPriority",1,e,!1),f.validateCallback("Reference.setPriority",2,t,!0);var n=new d.Deferred;return this.repo.setWithPriority(this.path.child(".priority"),e,null,n.wrapCallback(t)),n.promise},t.prototype.push=function(e,t){f.validateArgCount("Reference.push",0,2,arguments.length),h.validateWritablePath("Reference.push",this.path),h.validateFirebaseDataArg("Reference.push",1,e,this.path,!0),f.validateCallback("Reference.push",2,t,!0);var n,r=this.repo.serverTime(),o=s.nextPushId(r),i=this.child(o),a=this.child(o);return n=null!=e?i.set(e,t).then(function(){return a}):Promise.resolve(a),i.then=n.then.bind(n),i.catch=n.then.bind(n,void 0),"function"===typeof t&&n.catch(function(){}),i},t.prototype.onDisconnect=function(){return h.validateWritablePath("Reference.onDisconnect",this.path),new o.OnDisconnect(this.repo,this.path)},Object.defineProperty(t.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.getKey()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this.getParent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this.getRoot()},enumerable:!0,configurable:!0}),t}(u.Query);t.Reference=y,u.Query.__referenceConstructor=y,m.SyncPoint.__referenceConstructor=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(19),i=n(4),a=n(8),s=function(){function e(e,t,n){this.node_=e,this.ref_=t,this.index_=n}return e.prototype.val=function(){return r.validateArgCount("DataSnapshot.val",0,0,arguments.length),this.node_.val()},e.prototype.exportVal=function(){return r.validateArgCount("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},e.prototype.toJSON=function(){return r.validateArgCount("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},e.prototype.exists=function(){return r.validateArgCount("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},e.prototype.child=function(t){r.validateArgCount("DataSnapshot.child",0,1,arguments.length),t=String(t),o.validatePathString("DataSnapshot.child",1,t,!1);var n=new i.Path(t),s=this.ref_.child(n);return new e(this.node_.getChild(n),s,a.PRIORITY_INDEX)},e.prototype.hasChild=function(e){r.validateArgCount("DataSnapshot.hasChild",1,1,arguments.length),o.validatePathString("DataSnapshot.hasChild",1,e,!1);var t=new i.Path(e);return!this.node_.getChild(t).isEmpty()},e.prototype.getPriority=function(){return r.validateArgCount("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},e.prototype.forEach=function(t){var n=this;return r.validateArgCount("DataSnapshot.forEach",1,1,arguments.length),r.validateCallback("DataSnapshot.forEach",1,t,!1),!this.node_.isLeafNode()&&!!this.node_.forEachChild(this.index_,function(r,o){return t(new e(o,n.ref_.child(r),a.PRIORITY_INDEX))})},e.prototype.hasChildren=function(){return r.validateArgCount("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(e.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!0,configurable:!0}),e.prototype.numChildren=function(){return r.validateArgCount("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},e.prototype.getRef=function(){return r.validateArgCount("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(e.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),e}();t.DataSnapshot=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(41),i=n(4),a=n(2),s=n(0),u=function(){return r||(r=new o.SortedMap(a.stringCompare)),r},l=function(){function e(e,t){void 0===t&&(t=u()),this.value=e,this.children=t}return e.fromObject=function(t){var n=e.Empty;return s.forEach(t,function(e,t){n=n.set(new i.Path(e),t)}),n},e.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},e.prototype.findRootMostMatchingPathAndValue=function(e,t){if(null!=this.value&&t(this.value))return{path:i.Path.Empty,value:this.value};if(e.isEmpty())return null;var n=e.getFront(),r=this.children.get(n);if(null!==r){var o=r.findRootMostMatchingPathAndValue(e.popFront(),t);if(null!=o){return{path:new i.Path(n).child(o.path),value:o.value}}return null}return null},e.prototype.findRootMostValueAndPath=function(e){return this.findRootMostMatchingPathAndValue(e,function(){return!0})},e.prototype.subtree=function(t){if(t.isEmpty())return this;var n=t.getFront(),r=this.children.get(n);return null!==r?r.subtree(t.popFront()):e.Empty},e.prototype.set=function(t,n){if(t.isEmpty())return new e(n,this.children);var r=t.getFront(),o=this.children.get(r)||e.Empty,i=o.set(t.popFront(),n),a=this.children.insert(r,i);return new e(this.value,a)},e.prototype.remove=function(t){if(t.isEmpty())return this.children.isEmpty()?e.Empty:new e(null,this.children);var n=t.getFront(),r=this.children.get(n);if(r){var o=r.remove(t.popFront()),i=void 0;return i=o.isEmpty()?this.children.remove(n):this.children.insert(n,o),null===this.value&&i.isEmpty()?e.Empty:new e(this.value,i)}return this},e.prototype.get=function(e){if(e.isEmpty())return this.value;var t=e.getFront(),n=this.children.get(t);return n?n.get(e.popFront()):null},e.prototype.setTree=function(t,n){if(t.isEmpty())return n;var r=t.getFront(),o=this.children.get(r)||e.Empty,i=o.setTree(t.popFront(),n),a=void 0;return a=i.isEmpty()?this.children.remove(r):this.children.insert(r,i),new e(this.value,a)},e.prototype.fold=function(e){return this.fold_(i.Path.Empty,e)},e.prototype.fold_=function(e,t){var n={};return this.children.inorderTraversal(function(r,o){n[r]=o.fold_(e.child(r),t)}),t(e,this.value,n)},e.prototype.findOnPath=function(e,t){return this.findOnPath_(e,i.Path.Empty,t)},e.prototype.findOnPath_=function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(e.isEmpty())return null;var o=e.getFront(),i=this.children.get(o);return i?i.findOnPath_(e.popFront(),t.child(o),n):null},e.prototype.foreachOnPath=function(e,t){return this.foreachOnPath_(e,i.Path.Empty,t)},e.prototype.foreachOnPath_=function(t,n,r){if(t.isEmpty())return this;this.value&&r(n,this.value);var o=t.getFront(),i=this.children.get(o);return i?i.foreachOnPath_(t.popFront(),n.child(o),r):e.Empty},e.prototype.foreach=function(e){this.foreach_(i.Path.Empty,e)},e.prototype.foreach_=function(e,t){this.children.inorderTraversal(function(n,r){r.foreach_(e.child(n),t)}),this.value&&t(e,this.value)},e.prototype.foreachChild=function(e){this.children.inorderTraversal(function(t,n){n.value&&e(t,n.value)})},e.Empty=new e(null),e}();t.ImmutableTree=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(24),i=n(10),a=n(8),s=function(){function e(e){this.index_=e}return e.prototype.updateChild=function(e,t,n,i,a,s){r.assert(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var u=e.getImmediateChild(t);return u.getChild(i).equals(n.getChild(i))&&u.isEmpty()==n.isEmpty()?e:(null!=s&&(n.isEmpty()?e.hasChild(t)?s.trackChildChange(o.Change.childRemovedChange(t,u)):r.assert(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):u.isEmpty()?s.trackChildChange(o.Change.childAddedChange(t,n)):s.trackChildChange(o.Change.childChangedChange(t,n,u))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))},e.prototype.updateFullNode=function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(a.PRIORITY_INDEX,function(e,r){t.hasChild(e)||n.trackChildChange(o.Change.childRemovedChange(e,r))}),t.isLeafNode()||t.forEachChild(a.PRIORITY_INDEX,function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(o.Change.childChangedChange(t,r,i))}else n.trackChildChange(o.Change.childAddedChange(t,r))})),t.withIndex(this.index_)},e.prototype.updatePriority=function(e,t){return e.isEmpty()?i.ChildrenNode.EMPTY_NODE:e.updatePriority(t)},e.prototype.filtersNodes=function(){return!1},e.prototype.getIndexedFilter=function(){return this},e.prototype.getIndex=function(){return this.index_},e}();t.IndexedFilter=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(284),o=function(){function e(){}return e.getCollection=function(e){var t=e.toString();return this.collections_[t]||(this.collections_[t]=new r.StatsCollection),this.collections_[t]},e.getOrCreateReporter=function(e,t){var n=e.toString();return this.reporters_[n]||(this.reporters_[n]=t()),this.reporters_[n]},e.collections_={},e.reporters_={},e}();t.StatsManager=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(42),i=n(2),a=n(100),s=n(19);n(294);var u,l=function(){function e(){this.repos_={},this.useRestClient_=!1}return e.getInstance=function(){return u||(u=new e),u},e.prototype.interrupt=function(){for(var e in this.repos_)for(var t in this.repos_[e])this.repos_[e][t].interrupt()},e.prototype.resume=function(){for(var e in this.repos_)for(var t in this.repos_[e])this.repos_[e][t].resume()},e.prototype.databaseFromApp=function(e,t){var n=t||e.options.databaseURL;void 0===n&&i.fatal("Can't determine Firebase Database URL.  Be sure to include databaseURL option when calling firebase.intializeApp().");var r=a.parseRepoInfo(n),o=r.repoInfo;return s.validateUrl("Invalid Firebase Database URL",1,r),r.path.isEmpty()||i.fatal("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(o,e).database},e.prototype.deleteRepo=function(e){var t=r.safeGet(this.repos_,e.app.name);t&&r.safeGet(t,e.repoInfo_.toURLString())===e||i.fatal("Database "+e.app.name+"("+e.repoInfo_+") has already been deleted."),e.interrupt(),delete t[e.repoInfo_.toURLString()]},e.prototype.createRepo=function(e,t){var n=r.safeGet(this.repos_,t.name);n||(n={},this.repos_[t.name]=n);var a=r.safeGet(n,e.toURLString());return a&&i.fatal("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new o.Repo(e,this.useRestClient_,t),n[e.toURLString()]=a,a},e.prototype.forceRestClient=function(e){this.useRestClient_=e},e}();t.RepoManager=l},function(e,t,n){"use strict";function r(e,t,n){for(var r=t.length,o=t.length,i=0;i<t.length;i++)if(t[i].optional){r=i;break}if(!(r<=n.length&&n.length<=o))throw p.g(r,o,e,n.length);for(var i=0;i<n.length;i++)try{t[i].validator(n[i])}catch(t){throw t instanceof Error?p.f(i,e,t.message):p.f(i,e,t)}}function o(e,t){return function(n){e(n),t(n)}}function i(e,t){function n(e){if(!f.j(e))throw"Expected string."}var r;return r=e?o(n,e):n,new d(r,t)}function a(){function e(e){if(!(e instanceof Uint8Array||e instanceof ArrayBuffer||f.e()&&e instanceof Blob))throw"Expected Blob or File."}return new d(e)}function s(e){return new d(h.c,e)}function u(){function e(e){if(!(f.h(e)&&e>=0))throw"Expected a number 0 or greater."}return new d(e)}function l(e,t){function n(t){if(!(null===t||f.a(t)&&t instanceof Object))throw"Expected an Object.";void 0!==e&&null!==e&&e(t)}return new d(n,t)}function c(e){function t(e){if(null!==e&&!f.b(e))throw"Expected a Function."}return new d(t,e)}t.g=r,t.e=i,t.f=a,t.b=s,t.c=u,t.a=l,t.d=c;var p=n(17),h=n(69),f=n(14),d=function(){function e(e,t){var n=this;this.validator=function(t){n.optional&&!f.c(t)||e(t)},this.optional=!!t}return e}()},function(e,t,n){"use strict";function r(e,t){return t}function o(e){return!d.j(e)||e.length<2?e:(e=e,f.b(e))}function i(){function e(e,t){return o(t)}function t(e,t){return d.a(t)?+t:t}function n(e,t){if(!(d.j(t)&&t.length>0))return[];var n=encodeURIComponent;return t.split(",").map(function(t){var r=e.bucket,o=e.fullPath,i="/b/"+n(r)+"/o/"+n(o);return m.a(i)+m.c({alt:"media",token:t})})}if(v)return v;var r=[];r.push(new y("bucket")),r.push(new y("generation")),r.push(new y("metageneration")),r.push(new y("name","fullPath",!0));var i=new y("name");i.xform=e,r.push(i);var a=new y("size");return a.xform=t,r.push(a),r.push(new y("timeCreated")),r.push(new y("updated")),r.push(new y("md5Hash",null,!0)),r.push(new y("cacheControl",null,!0)),r.push(new y("contentDisposition",null,!0)),r.push(new y("contentEncoding",null,!0)),r.push(new y("contentLanguage",null,!0)),r.push(new y("contentType",null,!0)),r.push(new y("metadata","customMetadata",!0)),r.push(new y("downloadTokens","downloadURLs",!1,n)),v=r}function a(e,t){function n(){var n=e.bucket,r=e.fullPath,o=new h.a(n,r);return t.makeStorageReference(o)}Object.defineProperty(e,"ref",{get:n})}function s(e,t,n){var r={};r.type="file";for(var o=n.length,i=0;i<o;i++){var s=n[i];r[s.local]=s.xform(r,t[s.server])}return a(r,e),r}function u(e,t,n){var r=p.a(t);return null===r?null:s(e,r,n)}function l(e,t){for(var n={},r=t.length,o=0;o<r;o++){var i=t[o];i.writable&&(n[i.server]=e[i.local])}return JSON.stringify(n)}function c(e){if(!e||!d.i(e))throw"Expected Metadata object.";for(var t in e){var n=e[t];if("customMetadata"===t){if(!d.i(n))throw"Expected object for 'customMetadata' mapping."}else if(d.g(n))throw"Mapping for '"+t+"' cannot be an object."}}t.b=i,t.a=u,t.d=l,t.c=c;var p=n(309),h=n(46),f=n(130),d=n(14),m=n(70),y=function(){function e(e,t,n,o){this.server=e,this.local=t||e,this.writable=!!n,this.xform=o||r}return e}(),v=null},function(e,t,n){"use strict";function r(e){return s.f+s.a+e}function o(e){return s.g+s.a+e}function i(e){return s.f+s.b+e}function a(e){var t=encodeURIComponent,n="?";return u.b(e,function(e,r){var o=t(e)+"="+t(r);n=n+o+"&"}),n=n.slice(0,-1)}t.b=r,t.a=o,t.d=i,t.c=a;var s=n(45),u=n(25)},function(e,t,n){"use strict";function r(e,t){return-1!==e.indexOf(t)}function o(e){return Array.prototype.slice.call(e)}function i(e,t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}t.b=r,t.a=o,t.c=i},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments[1];switch(console.log(e,t),t.type){case s:return Object.assign({},e,{userId:t.payload});case u+"_PENDING":return console.log("PENDING"),Object.assign({},e,{isLoading:!0});case u+"_FULFILLED":return console.log("FULFILLED"),Object.assign({},e,{isLoading:!1,userId:t.payload});default:return e}}function o(e){return console.log(e),{type:s,payload:e}}function i(){return{type:u,payload:new Promise(function(e,t){a.a.auth().onAuthStateChanged(function(n){n?e(n.uid):t(null)})})}}t.a=r,t.c=o,t.b=i;var a=n(16),s="USER_ID",u="GET_USER_ID",l={userId:""}},function(e,t,n){"use strict";function r(e){"undefined"!==typeof console&&"function"===typeof console.error&&console.error(e);try{throw new Error(e)}catch(e){}}t.a=r},function(e,t,n){"use strict";function r(e){if(!Object(a.a)(e)||Object(o.a)(e)!=s)return!1;var t=Object(i.a)(e);if(null===t)return!0;var n=p.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==h}var o=n(328),i=n(333),a=n(335),s="[object Object]",u=Function.prototype,l=Object.prototype,c=u.toString,p=l.hasOwnProperty,h=c.call(Object);t.a=r},function(e,t,n){"use strict";function r(){}function o(e){try{return e.then}catch(e){return v=e,g}}function i(e,t){try{return e(t)}catch(e){return v=e,g}}function a(e,t,n){try{e(t,n)}catch(e){return v=e,g}}function s(e){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");if("function"!==typeof e)throw new TypeError("Promise constructor's argument is not a function");this._75=0,this._83=0,this._18=null,this._38=null,e!==r&&m(e,this)}function u(e,t,n){return new e.constructor(function(o,i){var a=new s(r);a.then(o,i),l(e,new d(t,n,a))})}function l(e,t){for(;3===e._83;)e=e._18;if(s._47&&s._47(e),0===e._83)return 0===e._75?(e._75=1,void(e._38=t)):1===e._75?(e._75=2,void(e._38=[e._38,t])):void e._38.push(t);c(e,t)}function c(e,t){y(function(){var n=1===e._83?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._83?p(t.promise,e._18):h(t.promise,e._18));var r=i(n,e._18);r===g?h(t.promise,v):p(t.promise,r)})}function p(e,t){if(t===e)return h(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"===typeof t||"function"===typeof t)){var n=o(t);if(n===g)return h(e,v);if(n===e.then&&t instanceof s)return e._83=3,e._18=t,void f(e);if("function"===typeof n)return void m(n.bind(t),e)}e._83=1,e._18=t,f(e)}function h(e,t){e._83=2,e._18=t,s._71&&s._71(e,t),f(e)}function f(e){if(1===e._75&&(l(e,e._38),e._38=null),2===e._75){for(var t=0;t<e._38.length;t++)l(e,e._38[t]);e._38=null}}function d(e,t,n){this.onFulfilled="function"===typeof e?e:null,this.onRejected="function"===typeof t?t:null,this.promise=n}function m(e,t){var n=!1,r=a(e,function(e){n||(n=!0,p(t,e))},function(e){n||(n=!0,h(t,e))});n||r!==g||(n=!0,h(t,v))}var y=n(145),v=null,g={};e.exports=s,s._47=null,s._71=null,s._44=r,s.prototype.then=function(e,t){if(this.constructor!==s)return u(this,e,t);var n=new s(r);return l(this,new d(e,t,n)),n}},function(e,t,n){"use strict";function r(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var o=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,s,u=r(e),l=1;l<arguments.length;l++){n=Object(arguments[l]);for(var c in n)i.call(n,c)&&(u[c]=n[c]);if(o){s=o(n);for(var p=0;p<s.length;p++)a.call(n,s[p])&&(u[s[p]]=n[s[p]])}}return u}},function(e,t,n){"use strict";var r={};e.exports=r},function(e,t,n){"use strict";function r(e){return"/"===e.charAt(0)}function o(e,t){for(var n=t,r=n+1,o=e.length;r<o;n+=1,r+=1)e[n]=e[r];e.pop()}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e&&e.split("/")||[],i=t&&t.split("/")||[],a=e&&r(e),s=t&&r(t),u=a||s;if(e&&r(e)?i=n:n.length&&(i.pop(),i=i.concat(n)),!i.length)return"/";var l=void 0;if(i.length){var c=i[i.length-1];l="."===c||".."===c||""===c}else l=!1;for(var p=0,h=i.length;h>=0;h--){var f=i[h];"."===f?o(i,h):".."===f?(o(i,h),p++):p&&(o(i,h),p--)}if(!u)for(;p--;p)i.unshift("..");!u||""===i[0]||i[0]&&r(i[0])||i.unshift("");var d=i.join("/");return l&&"/"!==d.substr(-1)&&(d+="/"),d}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i},function(e,t,n){"use strict";function r(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(Array.isArray(e))return Array.isArray(t)&&e.length===t.length&&e.every(function(e,n){return r(e,t[n])});var n="undefined"===typeof e?"undefined":o(e);if(n!==("undefined"===typeof t?"undefined":o(t)))return!1;if("object"===n){var i=e.valueOf(),a=t.valueOf();if(i!==e||a!==t)return r(i,a);var s=Object.keys(e),u=Object.keys(t);return s.length===u.length&&s.every(function(n){return r(e[n],t[n])})}return!1}Object.defineProperty(t,"__esModule",{value:!0});var o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=r},function(e,t,n){"use strict";t.__esModule=!0;t.canUseDOM=!("undefined"===typeof window||!window.document||!window.document.createElement),t.addEventListener=function(e,t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},t.removeEventListener=function(e,t,n){return e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)},t.getConfirmation=function(e,t){return t(window.confirm(e))},t.supportsHistory=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)},t.supportsPopStateOnHashChange=function(){return-1===window.navigator.userAgent.indexOf("Trident")},t.supportsGoWithoutReloadUsingHash=function(){return-1===window.navigator.userAgent.indexOf("Firefox")},t.isExtraneousPopstateEvent=function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")}},function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(1),u=n.n(s),l=n(3),c=n.n(l),p=n(11),h=n.n(p),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d=function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)},m=function(e){function t(){var n,r,a;o(this,t);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return n=r=i(this,e.call.apply(e,[this].concat(u))),r.handleClick=function(e){if(r.props.onClick&&r.props.onClick(e),!e.defaultPrevented&&0===e.button&&!r.props.target&&!d(e)){e.preventDefault();var t=r.context.router.history,n=r.props,o=n.replace,i=n.to;o?t.replace(i):t.push(i)}},a=n,i(r,a)}return a(t,e),t.prototype.render=function(){var e=this.props,t=(e.replace,e.to),n=e.innerRef,o=r(e,["replace","to","innerRef"]);h()(this.context.router,"You should not use <Link> outside a <Router>");var i=this.context.router.history.createHref("string"===typeof t?{pathname:t}:t);return u.a.createElement("a",f({},o,{onClick:this.handleClick,href:i,ref:n}))},t}(u.a.Component);m.propTypes={onClick:c.a.func,target:c.a.string,replace:c.a.bool,to:c.a.oneOfType([c.a.string,c.a.object]).isRequired,innerRef:c.a.oneOfType([c.a.string,c.a.func])},m.defaultProps={replace:!1},m.contextTypes={router:c.a.shape({history:c.a.shape({push:c.a.func.isRequired,replace:c.a.func.isRequired,createHref:c.a.func.isRequired}).isRequired}).isRequired},t.a=m},function(e,t,n){"use strict";var r=n(83);t.a=r.a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(6),s=n.n(a),u=n(11),l=n.n(u),c=n(1),p=n.n(c),h=n(3),f=n.n(h),d=n(54),m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y=function(e){return 0===p.a.Children.count(e)},v=function(e){function t(){var n,i,a;r(this,t);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return n=i=o(this,e.call.apply(e,[this].concat(u))),i.state={match:i.computeMatch(i.props,i.context.router)},a=n,o(i,a)}return i(t,e),t.prototype.getChildContext=function(){return{router:m({},this.context.router,{route:{location:this.props.location||this.context.router.route.location,match:this.state.match}})}},t.prototype.computeMatch=function(e,t){var n=e.computedMatch,r=e.location,o=e.path,i=e.strict,a=e.exact,s=e.sensitive;if(n)return n;l()(t,"You should not use <Route> or withRouter() outside a <Router>");var u=t.route,c=(r||u.location).pathname;return o?Object(d.a)(c,{path:o,strict:i,exact:a,sensitive:s}):u.match},t.prototype.componentWillMount=function(){s()(!(this.props.component&&this.props.render),"You should not use <Route component> and <Route render> in the same route; <Route render> will be ignored"),s()(!(this.props.component&&this.props.children&&!y(this.props.children)),"You should not use <Route component> and <Route children> in the same route; <Route children> will be ignored"),s()(!(this.props.render&&this.props.children&&!y(this.props.children)),"You should not use <Route render> and <Route children> in the same route; <Route children> will be ignored")},t.prototype.componentWillReceiveProps=function(e,t){s()(!(e.location&&!this.props.location),'<Route> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),s()(!(!e.location&&this.props.location),'<Route> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.'),this.setState({match:this.computeMatch(e,t.router)})},t.prototype.render=function(){var e=this.state.match,t=this.props,n=t.children,r=t.component,o=t.render,i=this.context.router,a=i.history,s=i.route,u=i.staticContext,l=this.props.location||s.location,c={match:e,location:l,history:a,staticContext:u};return r?e?p.a.createElement(r,c):null:o?e?o(c):null:n?"function"===typeof n?n(c):y(n)?null:p.a.Children.only(n):null},t}(p.a.Component);v.propTypes={computedMatch:f.a.object,path:f.a.string,exact:f.a.bool,strict:f.a.bool,sensitive:f.a.bool,component:f.a.func,render:f.a.func,children:f.a.oneOfType([f.a.func,f.a.node]),location:f.a.object},v.contextTypes={router:f.a.shape({history:f.a.object.isRequired,route:f.a.object.isRequired,staticContext:f.a.object})},v.childContextTypes={router:f.a.object.isRequired},t.a=v},function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return o}),n.d(t,"e",function(){return i}),n.d(t,"c",function(){return a}),n.d(t,"g",function(){return s}),n.d(t,"h",function(){return u}),n.d(t,"f",function(){return l}),n.d(t,"d",function(){return c});var r=!("undefined"===typeof window||!window.document||!window.document.createElement),o=function(e,t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},i=function(e,t,n){return e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)},a=function(e,t){return t(window.confirm(e))},s=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)},u=function(){return-1===window.navigator.userAgent.indexOf("Trident")},l=function(){return-1===window.navigator.userAgent.indexOf("Firefox")},c=function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")}},function(e,t,n){"use strict";var r={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i=Object.defineProperty,a=Object.getOwnPropertyNames,s=Object.getOwnPropertySymbols,u=Object.getOwnPropertyDescriptor,l=Object.getPrototypeOf,c=l&&l(Object);e.exports=function e(t,n,p){if("string"!==typeof n){if(c){var h=l(n);h&&h!==c&&e(t,h,p)}var f=a(n);s&&(f=f.concat(s(n)));for(var d=0;d<f.length;++d){var m=f[d];if(!r[m]&&!o[m]&&(!p||!p[m])){var y=u(n,m);try{i(t,m,y)}catch(e){}}}return t}return t}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),c=r(l),p=n(3),h=r(p),f=n(205),d=r(f),m=n(7),y=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),u(t,[{key:"componentDidMount",value:function(){var e=this.props.setView;e&&e("century")}},{key:"renderDecades",value:function(){var e=this.props,t=(e.setView,o(e,["setView"]));return c.default.createElement(d.default,t)}},{key:"render",value:function(){return c.default.createElement("div",{className:"react-calendar__century-view"},this.renderDecades())}}]),t}(l.Component);t.default=y,y.propTypes={activeStartDate:h.default.instanceOf(Date).isRequired,maxDate:m.isMaxDate,minDate:m.isMinDate,onChange:h.default.func,setActiveRange:h.default.func,setView:h.default.func,value:m.isValue,valueType:h.default.string}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),c=r(l),p=n(3),h=r(p),f=n(207),d=r(f),m=n(7),y=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),u(t,[{key:"componentDidMount",value:function(){var e=this.props.setView;e&&e("decade")}},{key:"renderYears",value:function(){var e=this.props,t=(e.setView,o(e,["setView"]));return c.default.createElement(d.default,t)}},{key:"render",value:function(){return c.default.createElement("div",{className:"react-calendar__decade-view"},this.renderYears())}}]),t}(l.Component);t.default=y,y.propTypes={activeStartDate:h.default.instanceOf(Date).isRequired,maxDate:m.isMaxDate,minDate:m.isMinDate,onChange:h.default.func,setActiveRange:h.default.func,setView:h.default.func,value:m.isValue,valueType:h.default.string}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),c=r(l),p=n(3),h=r(p),f=n(209),d=r(f),m=n(7),y=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),u(t,[{key:"componentDidMount",value:function(){var e=this.props.setView;e&&e("year")}},{key:"renderMonths",value:function(){var e=this.props,t=(e.setView,o(e,["setView"]));return c.default.createElement(d.default,t)}},{key:"render",value:function(){return c.default.createElement("div",{className:"react-calendar__year-view"},this.renderMonths())}}]),t}(l.Component);t.default=y,y.propTypes={activeStartDate:h.default.instanceOf(Date).isRequired,maxDate:m.isMaxDate,minDate:m.isMinDate,onChange:h.default.func,setActiveRange:h.default.func,setView:h.default.func,value:m.isValue,valueType:h.default.string}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),p=r(c),h=n(3),f=r(h),d=n(211),m=r(d),y=n(213),v=r(y),g=n(214),_=r(g),b=n(57),w=n(7),x=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this.props.setView;e&&e("month")}},{key:"renderWeekdays",value:function(){var e=this.calendarType,t=this.props.activeStartDate;return p.default.createElement(v.default,{calendarType:e,month:t})}},{key:"renderWeekNumbers",value:function(){if(!this.props.showWeekNumbers)return null;var e=this.calendarType,t=this.props.activeStartDate;return p.default.createElement(_.default,{activeStartDate:t,calendarType:e})}},{key:"renderDays",value:function(){var e=this.props,t=(e.setView,e.calendarType,o(e,["setView","calendarType"]));return p.default.createElement(m.default,u({calendarType:this.calendarType},t))}},{key:"render",value:function(){var e=this.props.showWeekNumbers;return p.default.createElement("div",{className:["react-calendar__month-view",e?"react-calendar__month-view--weekNumbers":""].join(" ")},p.default.createElement("div",{style:{display:"flex",alignItems:"flex-end"}},this.renderWeekNumbers(),p.default.createElement("div",{style:{flexGrow:1}},this.renderWeekdays(),this.renderDays())))}},{key:"calendarType",get:function(){var e=this.props.calendarType;if(e)return e;switch((0,b.getLocale)()){case"en-US":return"US";default:return"ISO 8601"}}}]),t}(c.Component);t.default=x,x.propTypes={activeStartDate:f.default.instanceOf(Date).isRequired,calendarType:w.isCalendarType,maxDate:w.isMaxDate,minDate:w.isMinDate,onChange:f.default.func,setActiveRange:f.default.func,setView:f.default.func,showNeighboringMonth:f.default.bool,showWeekNumbers:f.default.bool,value:w.isValue,valueType:f.default.string}},function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t,n){"use strict";var r=n(12),o=n(224),i=n(226),a=n(227),s=n(228),u=n(92),l="undefined"!==typeof window&&window.btoa&&window.btoa.bind(window)||n(229);e.exports=function(e){return new Promise(function(t,c){var p=e.data,h=e.headers;r.isFormData(p)&&delete h["Content-Type"];var f=new XMLHttpRequest,d="onreadystatechange",m=!1;if(window.XMLHttpRequest||"undefined"===typeof window||!window.XDomainRequest||"withCredentials"in f||s(e.url)||(f=new window.XDomainRequest,d="onload",m=!0,f.onprogress=function(){},f.ontimeout=function(){}),e.auth){var y=e.auth.username||"",v=e.auth.password||"";h.Authorization="Basic "+l(y+":"+v)}if(f.open(e.method.toUpperCase(),i(e.url,e.params,e.paramsSerializer),!0),f.timeout=e.timeout,f[d]=function(){if(f&&(4===f.readyState||m)&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in f?a(f.getAllResponseHeaders()):null,r=e.responseType&&"text"!==e.responseType?f.response:f.responseText,i={data:r,status:1223===f.status?204:f.status,statusText:1223===f.status?"No Content":f.statusText,headers:n,config:e,request:f};o(t,c,i),f=null}},f.onerror=function(){c(u("Network Error",e,null,f)),f=null},f.ontimeout=function(){c(u("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",f)),f=null},r.isStandardBrowserEnv()){var g=n(230),_=(e.withCredentials||s(e.url))&&e.xsrfCookieName?g.read(e.xsrfCookieName):void 0;_&&(h[e.xsrfHeaderName]=_)}if("setRequestHeader"in f&&r.forEach(h,function(e,t){"undefined"===typeof p&&"content-type"===t.toLowerCase()?delete h[t]:f.setRequestHeader(t,e)}),e.withCredentials&&(f.withCredentials=!0),e.responseType)try{f.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"===typeof e.onDownloadProgress&&f.addEventListener("progress",e.onDownloadProgress),"function"===typeof e.onUploadProgress&&f.upload&&f.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){f&&(f.abort(),c(e),f=null)}),void 0===p&&(p=null),f.send(p)})}},function(e,t,n){"use strict";var r=n(225);e.exports=function(e,t,n,o,i){var a=new Error(e);return r(a,t,n,o,i)}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(61);t.assert=function(e,n){if(!e)throw t.assertionError(n)},t.assertionError=function(e){return new Error("Firebase Database ("+r.CONSTANTS.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){for(var t=[],n=0,r=0;r<e.length;r++){for(var o=e.charCodeAt(r);o>255;)t[n++]=255&o,o>>=8;t[n++]=o}return t},o=function(e){if(e.length<8192)return String.fromCharCode.apply(null,e);for(var t="",n=0;n<e.length;n+=8192){var r=e.slice(n,n+8192);t+=String.fromCharCode.apply(null,r)}return t};t.base64={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],o=0;o<e.length;o+=3){var i=e[o],a=o+1<e.length,s=a?e[o+1]:0,u=o+2<e.length,l=u?e[o+2]:0,c=i>>2,p=(3&i)<<4|s>>4,h=(15&s)<<2|l>>6,f=63&l;u||(f=64,a||(h=64)),r.push(n[c],n[p],n[h],n[f])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(r(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):o(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],o=0;o<e.length;){var i=n[e.charAt(o++)],a=o<e.length,s=a?n[e.charAt(o)]:0;++o;var u=o<e.length,l=u?n[e.charAt(o)]:64;++o;var c=o<e.length,p=c?n[e.charAt(o)]:64;if(++o,null==i||null==s||null==l||null==p)throw Error();var h=i<<2|s>>4;if(r.push(h),64!=l){var f=s<<4&240|l>>2;if(r.push(f),64!=p){var d=l<<6&192|p;r.push(d)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},t.base64Encode=function(e){var n=r(e);return t.base64.encodeByteArray(n,!0)},t.base64Decode=function(e){try{return t.base64.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null}},function(e,t,n){"use strict";function r(e){return JSON.parse(e)}function o(e){return JSON.stringify(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.jsonEval=r,t.stringify=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.contains=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.safeGet=function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},t.forEach=function(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])},t.extend=function(e,n){return t.forEach(n,function(t,n){e[t]=n}),e},t.clone=function(e){return t.extend({},e)},t.isNonNullObject=function(e){return"object"===typeof e&&null!==e},t.isEmpty=function(e){for(var t in e)return!1;return!0},t.getCount=function(e){var t=0;for(var n in e)t++;return t},t.map=function(e,t,n){var r={};for(var o in e)r[o]=t.call(n,e[o],o,e);return r},t.findKey=function(e,t,n){for(var r in e)if(t.call(n,e[r],r,e))return r},t.findValue=function(e,n,r){var o=t.findKey(e,n,r);return o&&e[o]},t.getAnyKey=function(e){for(var t in e)return t},t.getValues=function(e){var t=[],n=0;for(var r in e)t[n++]=e[r];return t},t.every=function(e,t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&!t(n,e[n]))return!1;return!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(100),i=n(4),a=n(62),s=n(42),u=n(67),l=n(0),c=n(19),p=function(){function e(e){this.repo_=e,e instanceof s.Repo||r.fatal("Don't call new Database() directly - please use firebase.database()."),this.root_=new a.Reference(e,i.Path.Empty),this.INTERNAL=new h(this)}return Object.defineProperty(e.prototype,"app",{get:function(){return this.repo_.app},enumerable:!0,configurable:!0}),e.prototype.ref=function(e){return this.checkDeleted_("ref"),l.validateArgCount("database.ref",0,1,arguments.length),void 0!==e?this.root_.child(e):this.root_},e.prototype.refFromURL=function(e){var t="database.refFromURL";this.checkDeleted_(t),l.validateArgCount(t,1,1,arguments.length);var n=o.parseRepoInfo(e);c.validateUrl(t,1,n);var i=n.repoInfo;return i.host!==this.repo_.repoInfo_.host&&r.fatal(t+": Host name does not match the current database: (found "+i.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},e.prototype.checkDeleted_=function(e){null===this.repo_&&r.fatal("Cannot call "+e+" on a deleted database.")},e.prototype.goOffline=function(){l.validateArgCount("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},e.prototype.goOnline=function(){l.validateArgCount("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},e.ServerValue={TIMESTAMP:{".sv":"timestamp"}},e}();t.Database=p;var h=function(){function e(e){this.database=e}return e.prototype.delete=function(){return this.database.checkDeleted_("delete"),u.RepoManager.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,Promise.resolve()},e}();t.DatabaseInternals=h},function(e,t,n){"use strict";function r(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var o=n[r];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch(e){}t+="/"+o}return t}Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),i=n(101),a=n(2);t.parseRepoInfo=function(e){var n=t.parseURL(e),r=n.subdomain;"firebase"===n.domain&&a.fatal(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!=r||a.fatal("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||a.warnIfPageIsSecure();var s="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new i.RepoInfo(n.host,n.secure,r,s),path:new o.Path(n.pathString)}},t.parseURL=function(e){var t="",n="",o="",i="",a=!0,s="https",u=443;if("string"===typeof e){var l=e.indexOf("//");l>=0&&(s=e.substring(0,l-1),e=e.substring(l+2));var c=e.indexOf("/");-1===c&&(c=e.length),t=e.substring(0,c),i=r(e.substring(c));var p=t.split(".");3===p.length?(n=p[1],o=p[0].toLowerCase()):2===p.length&&(n=p[0]),l=t.indexOf(":"),l>=0&&(a="https"===s||"wss"===s,u=parseInt(t.substring(l+1),10))}return{host:t,port:u,domain:n,subdomain:o,secure:a,scheme:s,pathString:i}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(0),i=n(37),a=n(38),s=function(){function e(e,t,n,r,o){void 0===o&&(o=""),this.secure=t,this.namespace=n,this.webSocketOnly=r,this.persistenceKey=o,this.host=e.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=i.PersistentStorage.get("host:"+e)||this.host}return e.prototype.needsQueryParam=function(){return this.host!==this.internalHost},e.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},e.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},e.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},e.prototype.updateHost=function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&i.PersistentStorage.set("host:"+this.host,this.internalHost))},e.prototype.connectionURL=function(e,t){r.assert("string"===typeof e,"typeof type must == string"),r.assert("object"===typeof t,"typeof params must == object");var n;if(e===a.WEBSOCKET)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(e!==a.LONG_POLLING)throw new Error("Unknown connection type: "+e);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(t.ns=this.namespace);var i=[];return o.forEach(t,function(e,t){i.push(e+"="+t)}),n+i.join("&")},e.prototype.toString=function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e},e.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},e}();t.RepoInfo=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(19),i=n(2),a=n(0),s=function(){function e(e,t){this.repo_=e,this.path_=t}return e.prototype.cancel=function(e){r.validateArgCount("OnDisconnect.cancel",0,1,arguments.length),r.validateCallback("OnDisconnect.cancel",1,e,!0);var t=new a.Deferred;return this.repo_.onDisconnectCancel(this.path_,t.wrapCallback(e)),t.promise},e.prototype.remove=function(e){r.validateArgCount("OnDisconnect.remove",0,1,arguments.length),o.validateWritablePath("OnDisconnect.remove",this.path_),r.validateCallback("OnDisconnect.remove",1,e,!0);var t=new a.Deferred;return this.repo_.onDisconnectSet(this.path_,null,t.wrapCallback(e)),t.promise},e.prototype.set=function(e,t){r.validateArgCount("OnDisconnect.set",1,2,arguments.length),o.validateWritablePath("OnDisconnect.set",this.path_),o.validateFirebaseDataArg("OnDisconnect.set",1,e,this.path_,!1),r.validateCallback("OnDisconnect.set",2,t,!0);var n=new a.Deferred;return this.repo_.onDisconnectSet(this.path_,e,n.wrapCallback(t)),n.promise},e.prototype.setWithPriority=function(e,t,n){r.validateArgCount("OnDisconnect.setWithPriority",2,3,arguments.length),o.validateWritablePath("OnDisconnect.setWithPriority",this.path_),o.validateFirebaseDataArg("OnDisconnect.setWithPriority",1,e,this.path_,!1),o.validatePriority("OnDisconnect.setWithPriority",2,t,!1),r.validateCallback("OnDisconnect.setWithPriority",3,n,!0);var i=new a.Deferred;return this.repo_.onDisconnectSetWithPriority(this.path_,e,t,i.wrapCallback(n)),i.promise},e.prototype.update=function(e,t){if(r.validateArgCount("OnDisconnect.update",1,2,arguments.length),o.validateWritablePath("OnDisconnect.update",this.path_),Array.isArray(e)){for(var n={},s=0;s<e.length;++s)n[""+s]=e[s];e=n,i.warn("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}o.validateFirebaseMergeDataArg("OnDisconnect.update",1,e,this.path_,!1),r.validateCallback("OnDisconnect.update",2,t,!0);var u=new a.Deferred;return this.repo_.onDisconnectUpdate(this.path_,e,u.wrapCallback(t)),u.promise},e}();t.OnDisconnect=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(0),i=n(31),a=n(8),s=n(105),u=n(109),l=n(2),c=n(4),p=n(19),h=n(0),f=n(269),d=n(0),m=function(){function e(e,t,n,r){this.repo=e,this.path=t,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(e,"__referenceConstructor",{get:function(){return o.assert(r,"Reference.ts has not been loaded"),r},set:function(e){r=e},enumerable:!0,configurable:!0}),e.validateQueryEndpoints_=function(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===i.KEY_INDEX){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",c="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!=l.MIN_NAME)throw new Error(r);if("string"!==typeof t)throw new Error(c)}if(e.hasEnd()){if(e.getIndexEndName()!=l.MAX_NAME)throw new Error(r);if("string"!==typeof n)throw new Error(c)}}else if(e.getIndex()===a.PRIORITY_INDEX){if(null!=t&&!p.isValidPriority(t)||null!=n&&!p.isValidPriority(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(o.assert(e.getIndex()instanceof u.PathIndex||e.getIndex()===s.VALUE_INDEX,"unknown index type."),null!=t&&"object"===typeof t||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},e.validateLimit_=function(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},e.prototype.validateNoPreviousOrderByCall_=function(e){if(!0===this.orderByCalled_)throw new Error(e+": You can't combine multiple orderBy calls.")},e.prototype.getQueryParams=function(){return this.queryParams_},e.prototype.getRef=function(){return h.validateArgCount("Query.ref",0,0,arguments.length),new e.__referenceConstructor(this.repo,this.path)},e.prototype.on=function(t,n,r,o){h.validateArgCount("Query.on",2,4,arguments.length),p.validateEventType("Query.on",1,t,!1),h.validateCallback("Query.on",2,n,!1);var i=e.getCancelAndContextArgs_("Query.on",r,o);if("value"===t)this.onValueEvent(n,i.cancel,i.context);else{var a={};a[t]=n,this.onChildEvent(a,i.cancel,i.context)}return n},e.prototype.onValueEvent=function(e,t,n){var r=new f.ValueEventRegistration(e,t||null,n||null);this.repo.addEventCallbackForQuery(this,r)},e.prototype.onChildEvent=function(e,t,n){var r=new f.ChildEventRegistration(e,t,n);this.repo.addEventCallbackForQuery(this,r)},e.prototype.off=function(e,t,n){h.validateArgCount("Query.off",0,3,arguments.length),p.validateEventType("Query.off",1,e,!0),h.validateCallback("Query.off",2,t,!0),h.validateContextObject("Query.off",3,n,!0);var r=null,o=null;if("value"===e){var i=t||null;r=new f.ValueEventRegistration(i,null,n||null)}else e&&(t&&(o={},o[e]=t),r=new f.ChildEventRegistration(o,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},e.prototype.once=function(t,n,r,o){var i=this;h.validateArgCount("Query.once",1,4,arguments.length),p.validateEventType("Query.once",1,t,!1),h.validateCallback("Query.once",2,n,!0);var a=e.getCancelAndContextArgs_("Query.once",r,o),s=!0,u=new d.Deferred;u.promise.catch(function(){});var l=function(e){s&&(s=!1,i.off(t,l),n&&n.bind(a.context)(e),u.resolve(e))};return this.on(t,l,function(e){i.off(t,l),a.cancel&&a.cancel.bind(a.context)(e),u.reject(e)}),u.promise},e.prototype.limitToFirst=function(t){if(h.validateArgCount("Query.limitToFirst",1,1,arguments.length),"number"!==typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new e(this.repo,this.path,this.queryParams_.limitToFirst(t),this.orderByCalled_)},e.prototype.limitToLast=function(t){if(h.validateArgCount("Query.limitToLast",1,1,arguments.length),"number"!==typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new e(this.repo,this.path,this.queryParams_.limitToLast(t),this.orderByCalled_)},e.prototype.orderByChild=function(t){if(h.validateArgCount("Query.orderByChild",1,1,arguments.length),"$key"===t)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===t)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===t)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');p.validatePathString("Query.orderByChild",1,t,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new c.Path(t);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new u.PathIndex(n),o=this.queryParams_.orderBy(r);return e.validateQueryEndpoints_(o),new e(this.repo,this.path,o,!0)},e.prototype.orderByKey=function(){h.validateArgCount("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var t=this.queryParams_.orderBy(i.KEY_INDEX);return e.validateQueryEndpoints_(t),new e(this.repo,this.path,t,!0)},e.prototype.orderByPriority=function(){h.validateArgCount("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var t=this.queryParams_.orderBy(a.PRIORITY_INDEX);return e.validateQueryEndpoints_(t),new e(this.repo,this.path,t,!0)},e.prototype.orderByValue=function(){h.validateArgCount("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var t=this.queryParams_.orderBy(s.VALUE_INDEX);return e.validateQueryEndpoints_(t),new e(this.repo,this.path,t,!0)},e.prototype.startAt=function(t,n){void 0===t&&(t=null),h.validateArgCount("Query.startAt",0,2,arguments.length),p.validateFirebaseDataArg("Query.startAt",1,t,this.path,!0),p.validateKey("Query.startAt",2,n,!0);var r=this.queryParams_.startAt(t,n);if(e.validateLimit_(r),e.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===t&&(t=null,n=null),new e(this.repo,this.path,r,this.orderByCalled_)},e.prototype.endAt=function(t,n){void 0===t&&(t=null),h.validateArgCount("Query.endAt",0,2,arguments.length),p.validateFirebaseDataArg("Query.endAt",1,t,this.path,!0),p.validateKey("Query.endAt",2,n,!0);var r=this.queryParams_.endAt(t,n);if(e.validateLimit_(r),e.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new e(this.repo,this.path,r,this.orderByCalled_)},e.prototype.equalTo=function(e,t){if(h.validateArgCount("Query.equalTo",1,2,arguments.length),p.validateFirebaseDataArg("Query.equalTo",1,e,this.path,!1),p.validateKey("Query.equalTo",2,t,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(e,t).endAt(e,t)},e.prototype.toString=function(){return h.validateArgCount("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},e.prototype.toJSON=function(){return h.validateArgCount("Query.toJSON",0,1,arguments.length),this.toString()},e.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},e.prototype.queryIdentifier=function(){var e=this.queryObject(),t=l.ObjectToUniqueKey(e);return"{}"===t?"default":t},e.prototype.isEqual=function(t){if(h.validateArgCount("Query.isEqual",1,1,arguments.length),!(t instanceof e)){throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.")}var n=this.repo===t.repo,r=this.path.equals(t.path),o=this.queryIdentifier()===t.queryIdentifier();return n&&r&&o},e.getCancelAndContextArgs_=function(e,t,n){var r={cancel:null,context:null};if(t&&n)r.cancel=t,h.validateCallback(e,3,r.cancel,!0),r.context=n,h.validateContextObject(e,4,r.context,!0);else if(t)if("object"===typeof t&&null!==t)r.context=t;else{if("function"!==typeof t)throw new Error(h.errorPrefix(e,3,!0)+" must either be a cancel callback or a context object.");r.cancel=t}return r},Object.defineProperty(e.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),e}();t.Query=m},function(e,t,n){"use strict";function r(e){o=e}Object.defineProperty(t,"__esModule",{value:!0});var o,i=n(0),a=n(2),s=n(0);t.setMaxNode=r,t.priorityHashText=function(e){return"number"===typeof e?"number:"+a.doubleToIEEE754String(e):"string:"+e},t.validatePriorityNode=function(e){if(e.isLeafNode()){var t=e.val();i.assert("string"===typeof t||"number"===typeof t||"object"===typeof t&&s.contains(t,".sv"),"Priority must be a string or number.")}else i.assert(e===o||e.isEmpty(),"priority of unexpected type.");i.assert(e===o||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(39),i=n(13),a=n(2),s=n(32),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.compare=function(e,t){var n=e.node.compareTo(t.node);return 0===n?a.nameCompare(e.name,t.name):n},t.prototype.isDefinedOn=function(e){return!0},t.prototype.indexedValueChanged=function(e,t){return!e.equals(t)},t.prototype.minPost=function(){return i.NamedNode.MIN},t.prototype.maxPost=function(){return i.NamedNode.MAX},t.prototype.makePost=function(e,t){var n=s.nodeFromJSON(e);return new i.NamedNode(t,n)},t.prototype.toString=function(){return".value"},t}(o.Index);t.ValueIndex=u,t.VALUE_INDEX=new u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(0),i=n(107),a=n(0),s=n(13),u=n(8),l=n(31),c={},p=function(){function e(e,t){this.indexes_=e,this.indexSet_=t}return Object.defineProperty(e,"Default",{get:function(){return o.assert(c&&u.PRIORITY_INDEX,"ChildrenNode.ts has not been loaded"),r=r||new e({".priority":c},{".priority":u.PRIORITY_INDEX})},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var t=a.safeGet(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t===c?null:t},e.prototype.hasIndex=function(e){return a.contains(this.indexSet_,e.toString())},e.prototype.addIndex=function(t,n){o.assert(t!==l.KEY_INDEX,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r=[],u=!1,p=n.getIterator(s.NamedNode.Wrap),h=p.getNext();h;)u=u||t.isDefinedOn(h.node),r.push(h),h=p.getNext();var f;f=u?i.buildChildSet(r,t.getCompare()):c;var d=t.toString(),m=a.clone(this.indexSet_);m[d]=t;var y=a.clone(this.indexes_);return y[d]=f,new e(y,m)},e.prototype.addToIndexes=function(t,n){var r=this;return new e(a.map(this.indexes_,function(e,u){var l=a.safeGet(r.indexSet_,u);if(o.assert(l,"Missing index implementation for "+u),e===c){if(l.isDefinedOn(t.node)){for(var p=[],h=n.getIterator(s.NamedNode.Wrap),f=h.getNext();f;)f.name!=t.name&&p.push(f),f=h.getNext();return p.push(t),i.buildChildSet(p,l.getCompare())}return c}var d=n.get(t.name),m=e;return d&&(m=m.remove(new s.NamedNode(t.name,d))),m.insert(t,t.node)}),this.indexSet_)},e.prototype.removeFromIndexes=function(t,n){return new e(a.map(this.indexes_,function(e){if(e===c)return e;var r=n.get(t.name);return r?e.remove(new s.NamedNode(t.name,r)):e}),this.indexSet_)},e}();t.IndexMap=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(41),o=n(41),i=Math.log(2),a=function(){function e(e){this.count=function(e){return parseInt(Math.log(e)/i,10)}(e+1),this.current_=this.count-1;var t=function(e){return parseInt(Array(e+1).join("1"),2)}(this.count);this.bits_=e+1&t}return e.prototype.nextBitIsOne=function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e},e}();t.buildChildSet=function(e,t,n,i){e.sort(t);var s=function(t,o){var i,a,u=o-t;if(0==u)return null;if(1==u)return i=e[t],a=n?n(i):i,new r.LLRBNode(a,i.node,r.LLRBNode.BLACK,null,null);var l=parseInt(u/2,10)+t,c=s(t,l),p=s(l+1,o);return i=e[l],a=n?n(i):i,new r.LLRBNode(a,i.node,r.LLRBNode.BLACK,c,p)},u=new a(e.length),l=function(t){for(var o=null,i=null,a=e.length,u=function(t,o){var i=a-t,u=a;a-=t;var c=s(i+1,u),p=e[i],h=n?n(p):p;l(new r.LLRBNode(h,p.node,o,null,c))},l=function(e){o?(o.left=e,o=e):(i=e,o=e)},c=0;c<t.count;++c){var p=t.nextBitIsOne(),h=Math.pow(2,t.count-(c+1));p?u(h,r.LLRBNode.BLACK):(u(h,r.LLRBNode.BLACK),u(h,r.LLRBNode.RED))}return i}(u);return new o.SortedMap(i||t,l)}},function(e,t,n){"use strict";function r(e,t){return i.nameCompare(e.name,t.name)}function o(e,t){return i.nameCompare(e,t)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2);t.NAME_ONLY_COMPARATOR=r,t.NAME_COMPARATOR=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=n(2),a=n(39),s=n(10),u=n(13),l=n(32),c=function(e){function t(t){var n=e.call(this)||this;return n.indexPath_=t,o.assert(!t.isEmpty()&&".priority"!==t.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return r(t,e),t.prototype.extractChild=function(e){return e.getChild(this.indexPath_)},t.prototype.isDefinedOn=function(e){return!e.getChild(this.indexPath_).isEmpty()},t.prototype.compare=function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),o=n.compareTo(r);return 0===o?i.nameCompare(e.name,t.name):o},t.prototype.makePost=function(e,t){var n=l.nodeFromJSON(e),r=s.ChildrenNode.EMPTY_NODE.updateChild(this.indexPath_,n);return new u.NamedNode(t,r)},t.prototype.maxPost=function(){var e=s.ChildrenNode.EMPTY_NODE.updateChild(this.indexPath_,s.MAX_NODE);return new u.NamedNode(i.MAX_NAME,e)},t.prototype.toString=function(){return this.indexPath_.slice().join("/")},t}(a.Index);t.PathIndex=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(4),i=n(111),a=n(40),s=n(32),u=n(8);t.generateWithValues=function(e){return e=e||{},e.timestamp=e.timestamp||(new Date).getTime(),e},t.resolveDeferredValue=function(e,t){return e&&"object"===typeof e?(r.assert(".sv"in e,"Unexpected leaf node or priority contents"),t[e[".sv"]]):e},t.resolveDeferredValueTree=function(e,n){var r=new i.SparseSnapshotTree;return e.forEachTree(new o.Path(""),function(e,o){r.remember(e,t.resolveDeferredValueSnapshot(o,n))}),r},t.resolveDeferredValueSnapshot=function(e,n){var r,o=e.getPriority().val(),i=t.resolveDeferredValue(o,n);if(e.isLeafNode()){var l=e,c=t.resolveDeferredValue(l.getValue(),n);return c!==l.getValue()||i!==l.getPriority().val()?new a.LeafNode(c,s.nodeFromJSON(i)):e}var p=e;return r=p,i!==p.getPriority().val()&&(r=r.updatePriority(new a.LeafNode(i))),p.forEachChild(u.PRIORITY_INDEX,function(e,o){var i=t.resolveDeferredValueSnapshot(o,n);i!==o&&(r=r.updateImmediateChild(e,i))}),r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),o=n(8),i=n(112),a=function(){function e(){this.value_=null,this.children_=null}return e.prototype.find=function(e){if(null!=this.value_)return this.value_.getChild(e);if(e.isEmpty()||null==this.children_)return null;var t=e.getFront();if(e=e.popFront(),this.children_.contains(t)){return this.children_.get(t).find(e)}return null},e.prototype.remember=function(t,n){if(t.isEmpty())this.value_=n,this.children_=null;else if(null!==this.value_)this.value_=this.value_.updateChild(t,n);else{null==this.children_&&(this.children_=new i.CountedSet);var r=t.getFront();this.children_.contains(r)||this.children_.add(r,new e);var o=this.children_.get(r);t=t.popFront(),o.remember(t,n)}},e.prototype.forget=function(e){if(e.isEmpty())return this.value_=null,this.children_=null,!0;if(null!==this.value_){if(this.value_.isLeafNode())return!1;var t=this.value_;this.value_=null;var n=this;return t.forEachChild(o.PRIORITY_INDEX,function(e,t){n.remember(new r.Path(e),t)}),this.forget(e)}if(null!==this.children_){var i=e.getFront();if(e=e.popFront(),this.children_.contains(i)){this.children_.get(i).forget(e)&&this.children_.remove(i)}return!!this.children_.isEmpty()&&(this.children_=null,!0)}return!0},e.prototype.forEachTree=function(e,t){null!==this.value_?t(e,this.value_):this.forEachChild(function(n,o){var i=new r.Path(e.toString()+"/"+n);o.forEachTree(i,t)})},e.prototype.forEachChild=function(e){null!==this.children_&&this.children_.each(function(t,n){e(t,n)})},e}();t.SparseSnapshotTree=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=function(){function e(){this.set={}}return e.prototype.add=function(e,t){this.set[e]=null===t||t},e.prototype.contains=function(e){return r.contains(this.set,e)},e.prototype.get=function(e){return this.contains(e)?this.set[e]:void 0},e.prototype.remove=function(e){delete this.set[e]},e.prototype.clear=function(){this.set={}},e.prototype.isEmpty=function(){return r.isEmpty(this.set)},e.prototype.count=function(){return r.getCount(this.set)},e.prototype.each=function(e){r.forEach(this.set,function(t,n){return e(t,n)})},e.prototype.keys=function(){var e=[];return r.forEach(this.set,function(t){e.push(t)}),e},e}();t.CountedSet=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(20),o=n(4),i=function(){function e(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=r.OperationType.OVERWRITE}return e.prototype.operationForChild=function(t){return this.path.isEmpty()?new e(this.source,o.Path.Empty,this.snap.getImmediateChild(t)):new e(this.source,this.path.popFront(),this.snap)},e}();t.Overwrite=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(43),i=n(10),a=n(0),s=n(0),u=n(115),l=n(275),c=function(){function e(){this.views_={}}return Object.defineProperty(e,"__referenceConstructor",{get:function(){return a.assert(r,"Reference.ts has not been loaded"),r},set:function(e){a.assert(!r,"__referenceConstructor has already been defined"),r=e},enumerable:!0,configurable:!0}),e.prototype.isEmpty=function(){return s.isEmpty(this.views_)},e.prototype.applyOperation=function(e,t,n){var r=e.source.queryId;if(null!==r){var o=s.safeGet(this.views_,r);return a.assert(null!=o,"SyncTree gave us an op for an invalid query."),o.applyOperation(e,t,n)}var i=[];return s.forEach(this.views_,function(r,o){i=i.concat(o.applyOperation(e,t,n))}),i},e.prototype.addEventRegistration=function(e,t,n,r,a){var c=e.queryIdentifier(),p=s.safeGet(this.views_,c);if(!p){var h=n.calcCompleteEventCache(a?r:null),f=!1;h?f=!0:r instanceof i.ChildrenNode?(h=n.calcCompleteEventChildren(r),f=!1):(h=i.ChildrenNode.EMPTY_NODE,f=!1);var d=new u.ViewCache(new o.CacheNode(h,f,!1),new o.CacheNode(r,a,!1));p=new l.View(e,d),this.views_[c]=p}return p.addEventRegistration(t),p.getInitialEvents(t)},e.prototype.removeEventRegistration=function(t,n,r){var o=t.queryIdentifier(),i=[],a=[],u=this.hasCompleteView();if("default"===o){var l=this;s.forEach(this.views_,function(e,t){a=a.concat(t.removeEventRegistration(n,r)),t.isEmpty()&&(delete l.views_[e],t.getQuery().getQueryParams().loadsAllData()||i.push(t.getQuery()))})}else{var c=s.safeGet(this.views_,o);c&&(a=a.concat(c.removeEventRegistration(n,r)),c.isEmpty()&&(delete this.views_[o],c.getQuery().getQueryParams().loadsAllData()||i.push(c.getQuery())))}return u&&!this.hasCompleteView()&&i.push(new e.__referenceConstructor(t.repo,t.path)),{removed:i,events:a}},e.prototype.getQueryViews=function(){var e=this;return Object.keys(this.views_).map(function(t){return e.views_[t]}).filter(function(e){return!e.getQuery().getQueryParams().loadsAllData()})},e.prototype.getCompleteServerCache=function(e){var t=null;return s.forEach(this.views_,function(n,r){t=t||r.getCompleteServerCache(e)}),t},e.prototype.viewForQuery=function(e){if(e.getQueryParams().loadsAllData())return this.getCompleteView();var t=e.queryIdentifier();return s.safeGet(this.views_,t)},e.prototype.viewExistsForQuery=function(e){return null!=this.viewForQuery(e)},e.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},e.prototype.getCompleteView=function(){return s.findValue(this.views_,function(e){return e.getQuery().getQueryParams().loadsAllData()})||null},e}();t.SyncPoint=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(10),o=n(43),i=function(){function e(e,t){this.eventCache_=e,this.serverCache_=t}return e.prototype.updateEventSnap=function(t,n,r){return new e(new o.CacheNode(t,n,r),this.serverCache_)},e.prototype.updateServerSnap=function(t,n,r){return new e(this.eventCache_,new o.CacheNode(t,n,r))},e.prototype.getEventCache=function(){return this.eventCache_},e.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},e.prototype.getServerCache=function(){return this.serverCache_},e.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},e.Empty=new e(new o.CacheNode(r.ChildrenNode.EMPTY_NODE,!1,!1),new o.CacheNode(r.ChildrenNode.EMPTY_NODE,!1,!1)),e}();t.ViewCache=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=function(){function e(e){this.collection_=e,this.last_=null}return e.prototype.get=function(){var e=this.collection_.get(),t=r.clone(e);return this.last_&&r.forEach(this.last_,function(e,n){t[e]=t[e]-n}),this.last_=e,t},e}();t.StatsListener=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(18),i=n(0),a=n(0),s=n(0),u=n(2),l=n(4),c=n(287),p=n(288),h=n(0),f=n(119),d=n(0),m=n(0),y=n(122),v=1e3,g=3e5,_=function(e){function t(n,r,o,i,a,s){var l=e.call(this)||this;if(l.repoInfo_=n,l.onDataUpdate_=r,l.onConnectStatus_=o,l.onServerInfoUpdate_=i,l.authTokenProvider_=a,l.authOverride_=s,l.id=t.nextPersistentConnectionId_++,l.log_=u.logWrapper("p:"+l.id+":"),l.interruptReasons_={},l.listens_={},l.outstandingPuts_=[],l.outstandingPutCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=v,l.maxReconnectDelay_=g,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,s&&!m.isNodeSdk())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return l.scheduleConnect_(0),c.VisibilityMonitor.getInstance().on("visible",l.onVisible_,l),-1===n.host.indexOf("fblocal")&&p.OnlineMonitor.getInstance().on("online",l.onOnline_,l),l}return r(t,e),t.prototype.sendRequest=function(e,t,n){var r=++this.requestNumber_,o={r:r,a:e,b:t};this.log_(a.stringify(o)),s.assert(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),n&&(this.requestCBHash_[r]=n)},t.prototype.listen=function(e,t,n,r){var o=e.queryIdentifier(),i=e.path.toString();this.log_("Listen called for "+i+" "+o),this.listens_[i]=this.listens_[i]||{},s.assert(e.getQueryParams().isDefault()||!e.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),s.assert(!this.listens_[i][o],"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:t,query:e,tag:n};this.listens_[i][o]=a,this.connected_&&this.sendListen_(a)},t.prototype.sendListen_=function(e){var n=this,r=e.query,o=r.path.toString(),i=r.queryIdentifier();this.log_("Listen on "+o+" for "+i);var a={p:o};e.tag&&(a.q=r.queryObject(),a.t=e.tag),a.h=e.hashFn(),this.sendRequest("q",a,function(a){var s=a.d,u=a.s;t.warnOnListenWarnings_(s,r),(n.listens_[o]&&n.listens_[o][i])===e&&(n.log_("listen response",a),"ok"!==u&&n.removeListen_(o,i),e.onComplete&&e.onComplete(u,s))})},t.warnOnListenWarnings_=function(e,t){if(e&&"object"===typeof e&&i.contains(e,"w")){var n=i.safeGet(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t.getQueryParams().getIndex().toString()+'"',o=t.path.toString();u.warn("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+o+" to your security rules for better performance.")}}},t.prototype.refreshAuthToken=function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(e)},t.prototype.reduceReconnectDelayIfAdminCredential_=function(e){(e&&40===e.length||h.isAdmin(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},t.prototype.tryAuth=function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=h.isValidFormat(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,o=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,o))})}},t.prototype.unlisten=function(e,t){var n=e.path.toString(),r=e.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),s.assert(e.getQueryParams().isDefault()||!e.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e.queryObject(),t)},t.prototype.sendUnlisten_=function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var o={p:e};r&&(o.q=n,o.t=r),this.sendRequest("n",o)},t.prototype.onDisconnectPut=function(e,t,n){this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})},t.prototype.onDisconnectMerge=function(e,t,n){this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})},t.prototype.onDisconnectCancel=function(e,t){this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})},t.prototype.sendOnDisconnect_=function(e,t,n,r){var o={p:t,d:n};this.log_("onDisconnect "+e,o),this.sendRequest(e,o,function(e){r&&setTimeout(function(){r(e.s,e.d)},Math.floor(0))})},t.prototype.put=function(e,t,n,r){this.putInternal("p",e,t,n,r)},t.prototype.merge=function(e,t,n,r){this.putInternal("m",e,t,n,r)},t.prototype.putInternal=function(e,t,n,r,o){var i={p:t,d:n};void 0!==o&&(i.h=o),this.outstandingPuts_.push({action:e,request:i,onComplete:r}),this.outstandingPutCount_++;var a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+t)},t.prototype.sendPut_=function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,o=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),o&&o(r.s,r.d)})},t.prototype.reportStats=function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}})}},t.prototype.onDataMessage_=function(e){if("r"in e){this.log_("from server: "+a.stringify(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}},t.prototype.onDataPush_=function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):u.error("Unrecognized action received from server: "+a.stringify(e)+"\nAre you using the latest client?")},t.prototype.onReady_=function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},t.prototype.scheduleConnect_=function(e){var t=this;s.assert(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){t.establishConnectionTimer_=null,t.establishConnection_()},Math.floor(e))},t.prototype.onVisible_=function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=v,this.realtime_||this.scheduleConnect_(0)),this.visible_=e},t.prototype.onOnline_=function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=v,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},t.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){var e=(new Date).getTime()-this.lastConnectionEstablishedTime_;e>3e4&&(this.reconnectDelay_=v),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var t=(new Date).getTime()-this.lastConnectionAttemptTime_,n=Math.max(0,this.reconnectDelay_-t);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},t.prototype.establishConnection_=function(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+t.nextConnectionId_++,i=this,a=this.lastSessionId,l=!1,c=null,p=function(){c?c.close():(l=!0,r())},h=function(e){s.assert(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(e)};this.realtime_={close:p,sendRequest:h};var m=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(m).then(function(t){l?u.log("getToken() completed but was canceled"):(u.log("getToken() completed. Creating connection."),i.authToken_=t&&t.accessToken,c=new f.Connection(o,i.repoInfo_,e,n,r,function(e){u.warn(e+" ("+i.repoInfo_.toString()+")"),i.interrupt("server_kill")},a))}).then(null,function(e){i.log_("Failed to get token: "+e),l||(d.CONSTANTS.NODE_ADMIN&&u.warn(e),p())})}},t.prototype.interrupt=function(e){u.log("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},t.prototype.resume=function(e){u.log("Resuming connection for reason: "+e),delete this.interruptReasons_[e],i.isEmpty(this.interruptReasons_)&&(this.reconnectDelay_=v,this.realtime_||this.scheduleConnect_(0))},t.prototype.handleTimestamp_=function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})},t.prototype.cancelSentTransactions_=function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},t.prototype.onListenRevoked_=function(e,t){var n;n=t?t.map(function(e){return u.ObjectToUniqueKey(e)}).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")},t.prototype.removeListen_=function(e,t){var n,r=new l.Path(e).toString();return void 0!==this.listens_[r]?(n=this.listens_[r][t],delete this.listens_[r][t],0===i.getCount(this.listens_[r])&&delete this.listens_[r]):n=void 0,n},t.prototype.onAuthRevoked_=function(e,t){u.log("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||++this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken())},t.prototype.onSecurityDebugPacket_=function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&"undefined"!==typeof console&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))},t.prototype.restoreState_=function(){var e=this;this.tryAuth(),i.forEach(this.listens_,function(t,n){i.forEach(n,function(t,n){e.sendListen_(n)})});for(var t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){var n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}},t.prototype.sendConnectStats_=function(){var e={},t="js";d.CONSTANTS.NODE_ADMIN?t="admin_node":d.CONSTANTS.NODE_CLIENT&&(t="node"),e["sdk."+t+"."+o.default.SDK_VERSION.replace(/\./g,"-")]=1,m.isMobileCordova()?e["framework.cordova"]=1:m.isReactNative()&&(e["framework.reactnative"]=1),this.reportStats(e)},t.prototype.shouldReconnect_=function(){var e=p.OnlineMonitor.getInstance().currentlyOnline();return i.isEmpty(this.interruptReasons_)&&e},t.nextPersistentConnectionId_=0,t.nextConnectionId_=0,t}(y.ServerActions);t.PersistentConnection=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=function(){function e(e){this.allowedEvents_=e,this.listeners_={},r.assert(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}return e.prototype.trigger=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Array.isArray(this.listeners_[e]))for(var r=this.listeners_[e].slice(),o=0;o<r.length;o++)r[o].callback.apply(r[o].context,t)},e.prototype.on=function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)},e.prototype.off=function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],o=0;o<r.length;o++)if(r[o].callback===t&&(!n||n===r[o].context))return void r.splice(o,1)},e.prototype.validateEventType_=function(e){r.assert(this.allowedEvents_.find(function(t){return t===e}),"Unknown event: "+e)},e}();t.EventEmitter=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(37),i=n(38),a=n(289),s=function(){function e(e,t,n,o,i,s,u){this.id=e,this.repoInfo_=t,this.onMessage_=n,this.onReady_=o,this.onDisconnect_=i,this.onKill_=s,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=r.logWrapper("c:"+this.id+":"),this.transportManager_=new a.TransportManager(t),this.log_("Connection created"),this.start_()}return e.prototype.start_=function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,void 0,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),o=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){e.conn_&&e.conn_.open(n,o)},Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=r.setTimeoutNonBlocking(function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))},Math.floor(i)))},e.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},e.prototype.disconnReceiver_=function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}},e.prototype.connReceiver_=function(e){var t=this;return function(n){2!=t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}},e.prototype.sendRequest=function(e){var t={t:"d",d:e};this.sendData_(t)},e.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},e.prototype.onSecondaryControl_=function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},e.prototype.onSecondaryMessageReceived_=function(e){var t=r.requireKey("t",e),n=r.requireKey("d",e);if("c"==t)this.onSecondaryControl_(n);else{if("d"!=t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}},e.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},e.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},e.prototype.onPrimaryMessageReceived_=function(e){var t=r.requireKey("t",e),n=r.requireKey("d",e);"c"==t?this.onControl_(n):"d"==t&&this.onDataMessage_(n)},e.prototype.onDataMessage_=function(e){this.onPrimaryResponse_(),this.onMessage_(e)},e.prototype.onPrimaryResponse_=function(){this.isHealthy_||--this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy())},e.prototype.onControl_=function(e){var t=r.requireKey("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?r.error("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):r.error("Unknown control packet command: "+t)}},e.prototype.onHandshake_=function(e){var t=e.ts,n=e.v,o=e.h;this.sessionId=e.s,this.repoInfo_.updateHost(o),0==this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),i.PROTOCOL_VERSION!==n&&r.warn("Protocol version mismatch detected"),this.tryStartUpgrade_())},e.prototype.tryStartUpgrade_=function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)},e.prototype.startUpgrade_=function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),o=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,o),r.setTimeoutNonBlocking(function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())},Math.floor(6e4))},e.prototype.onReset_=function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.updateHost(e),1===this.state_?this.close():(this.closeConnections_(),this.start_())},e.prototype.onConnectionEstablished_=function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):r.setTimeoutNonBlocking(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},e.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},e.prototype.onSecondaryConnectionLost_=function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()},e.prototype.onConnectionLost_=function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(o.PersistentStorage.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},e.prototype.onConnectionShutdown_=function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()},e.prototype.sendData_=function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)},e.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},e.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},e}();t.Connection=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(112),i=n(66),a=n(290),s=n(38),u=n(0),l=n(0);t.FIREBASE_LONGPOLL_START_PARAM="start",t.FIREBASE_LONGPOLL_CLOSE_COMMAND="close",t.FIREBASE_LONGPOLL_COMMAND_CB_NAME="pLPCommand",t.FIREBASE_LONGPOLL_DATA_CB_NAME="pRTLPCB",t.FIREBASE_LONGPOLL_ID_PARAM="id",t.FIREBASE_LONGPOLL_PW_PARAM="pw",t.FIREBASE_LONGPOLL_SERIAL_PARAM="ser",t.FIREBASE_LONGPOLL_CALLBACK_ID_PARAM="cb",t.FIREBASE_LONGPOLL_SEGMENT_NUM_PARAM="seg",t.FIREBASE_LONGPOLL_SEGMENTS_IN_PACKET="ts",t.FIREBASE_LONGPOLL_DATA_PARAM="d",t.FIREBASE_LONGPOLL_DISCONN_FRAME_PARAM="disconn",t.FIREBASE_LONGPOLL_DISCONN_FRAME_REQUEST_PARAM="dframe";var c=function(){function e(e,t,n,o){this.connId=e,this.repoInfo=t,this.transportSessionId=n,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=r.logWrapper(e),this.stats_=i.StatsManager.getCollection(t),this.urlFn=function(e){return t.connectionURL(s.LONG_POLLING,e)}}return e.prototype.open=function(e,n){var o=this;this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new a.PacketReceiver(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){o.log_("Timed out trying to connect."),o.onClosed_(),o.connectTimeoutTimer_=null},Math.floor(3e4)),r.executeWhenDOMReady(function(){if(!o.isClosed_){o.scriptTagHolder=new p(function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e[0],i=e[1],a=e[2];e[3],e[4];if(o.incrementIncomingBytes_(e),o.scriptTagHolder)if(o.connectTimeoutTimer_&&(clearTimeout(o.connectTimeoutTimer_),o.connectTimeoutTimer_=null),o.everConnected_=!0,r==t.FIREBASE_LONGPOLL_START_PARAM)o.id=i,o.password=a;else{if(r!==t.FIREBASE_LONGPOLL_CLOSE_COMMAND)throw new Error("Unrecognized command received: "+r);i?(o.scriptTagHolder.sendNewPolls=!1,o.myPacketOrderer.closeAfter(i,function(){o.onClosed_()})):o.onClosed_()}},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[0],r=e[1];o.incrementIncomingBytes_(e),o.myPacketOrderer.handleResponse(n,r)},function(){o.onClosed_()},o.urlFn);var e={};e[t.FIREBASE_LONGPOLL_START_PARAM]="t",e[t.FIREBASE_LONGPOLL_SERIAL_PARAM]=Math.floor(1e8*Math.random()),o.scriptTagHolder.uniqueCallbackIdentifier&&(e[t.FIREBASE_LONGPOLL_CALLBACK_ID_PARAM]=o.scriptTagHolder.uniqueCallbackIdentifier),e[s.VERSION_PARAM]=s.PROTOCOL_VERSION,o.transportSessionId&&(e[s.TRANSPORT_SESSION_PARAM]=o.transportSessionId),o.lastSessionId&&(e[s.LAST_SESSION_PARAM]=o.lastSessionId),!l.isNodeSdk()&&"undefined"!==typeof location&&location.href&&-1!==location.href.indexOf(s.FORGE_DOMAIN)&&(e[s.REFERER_PARAM]=s.FORGE_REF);var n=o.urlFn(e);o.log_("Connecting via long-poll to "+n),o.scriptTagHolder.addTag(n,function(){})}})},e.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},e.forceAllow=function(){e.forceAllow_=!0},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){return e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!r.isChromeExtensionContentScript()&&!r.isWindowsStoreApp()&&!l.isNodeSdk()},e.prototype.markConnectionHealthy=function(){},e.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},e.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},e.prototype.send=function(e){var t=u.stringify(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=u.base64Encode(t),o=r.splitStringBySize(n,1840),i=0;i<o.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[i]),this.curSegmentNum++},e.prototype.addDisconnectPingFrame=function(e,n){if(!l.isNodeSdk()){this.myDisconnFrame=document.createElement("iframe");var r={};r[t.FIREBASE_LONGPOLL_DISCONN_FRAME_REQUEST_PARAM]="t",r[t.FIREBASE_LONGPOLL_ID_PARAM]=e,r[t.FIREBASE_LONGPOLL_PW_PARAM]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},e.prototype.incrementIncomingBytes_=function(e){var t=u.stringify(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)},e}();t.BrowserPollConnection=c;var p=function(){function e(n,i,a,s){if(this.onDisconnect=a,this.urlFn=s,this.outstandingRequests=new o.CountedSet,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,l.isNodeSdk())this.commandCB=n,this.onMessageCB=i;else{this.uniqueCallbackIdentifier=r.LUIDGenerator(),window[t.FIREBASE_LONGPOLL_COMMAND_CB_NAME+this.uniqueCallbackIdentifier]=n,window[t.FIREBASE_LONGPOLL_DATA_CB_NAME+this.uniqueCallbackIdentifier]=i,this.myIFrame=e.createIFrame_();var u="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)){u='<script>document.domain="'+document.domain+'";<\/script>'}var c="<html><body>"+u+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(e){r.log("frame writing exception"),e.stack&&r.log(e.stack),r.log(e)}}}return e.createIFrame_=function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||r.log("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},e.prototype.close=function(){var n=this;if(this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==n.myIFrame&&(document.body.removeChild(n.myIFrame),n.myIFrame=null)},Math.floor(0))),l.isNodeSdk()&&this.myID){var r={};r[t.FIREBASE_LONGPOLL_DISCONN_FRAME_PARAM]="t",r[t.FIREBASE_LONGPOLL_ID_PARAM]=this.myID,r[t.FIREBASE_LONGPOLL_PW_PARAM]=this.myPW;var o=this.urlFn(r);e.nodeRestRequest(o)}var i=this.onDisconnect;i&&(this.onDisconnect=null,i())},e.prototype.startLongPoll=function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););},e.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.count()<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e[t.FIREBASE_LONGPOLL_ID_PARAM]=this.myID,e[t.FIREBASE_LONGPOLL_PW_PARAM]=this.myPW,e[t.FIREBASE_LONGPOLL_SERIAL_PARAM]=this.currentSerial;for(var n=this.urlFn(e),r="",o=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+r.length<=1870))break;var i=this.pendingSegs.shift();r=r+"&"+t.FIREBASE_LONGPOLL_SEGMENT_NUM_PARAM+o+"="+i.seg+"&"+t.FIREBASE_LONGPOLL_SEGMENTS_IN_PACKET+o+"="+i.ts+"&"+t.FIREBASE_LONGPOLL_DATA_PARAM+o+"="+i.d,o++}return n+=r,this.addLongPollTag_(n,this.currentSerial),!0}return!1},e.prototype.enqueueSegment=function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()},e.prototype.addLongPollTag_=function(e,t){var n=this;this.outstandingRequests.add(t,1);var r=function(){n.outstandingRequests.remove(t),n.newRequest_()},o=setTimeout(r,Math.floor(25e3)),i=function(){clearTimeout(o),r()};this.addTag(e,i)},e.prototype.addTag=function(e,t){var n=this;l.isNodeSdk()?this.doNodeLongPoll(e,t):setTimeout(function(){try{if(!n.sendNewPolls)return;var o=n.myIFrame.doc.createElement("script");o.type="text/javascript",o.async=!0,o.src=e,o.onload=o.onreadystatechange=function(){var e=o.readyState;e&&"loaded"!==e&&"complete"!==e||(o.onload=o.onreadystatechange=null,o.parentNode&&o.parentNode.removeChild(o),t())},o.onerror=function(){r.log("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(o)}catch(e){}},Math.floor(1))},e}();t.FirebaseIFrameScriptHolder=p},function(e,t,n){"use strict";(function(e){function r(e){f=e}Object.defineProperty(t,"__esModule",{value:!0});var o=n(18),i=n(0),a=n(2),s=n(66),u=n(38),l=n(0),c=n(37),p=n(0),h=n(0),f=null;"undefined"!==typeof MozWebSocket?f=MozWebSocket:"undefined"!==typeof WebSocket&&(f=WebSocket),t.setWebSocketImpl=r;var d=function(){function t(e,n,r,o){this.connId=e,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=a.logWrapper(this.connId),this.stats_=s.StatsManager.getCollection(n),this.connURL=t.connectionURL_(n,r,o)}return t.connectionURL_=function(e,t,n){var r={};return r[u.VERSION_PARAM]=u.PROTOCOL_VERSION,!h.isNodeSdk()&&"undefined"!==typeof location&&location.href&&-1!==location.href.indexOf(u.FORGE_DOMAIN)&&(r[u.REFERER_PARAM]=u.FORGE_REF),t&&(r[u.TRANSPORT_SESSION_PARAM]=t),n&&(r[u.LAST_SESSION_PARAM]=n),e.connectionURL(u.WEBSOCKET,r)},t.prototype.open=function(t,n){var r=this;this.onDisconnect=n,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,c.PersistentStorage.set("previous_websocket_failure",!0);try{if(h.isNodeSdk()){var i=l.CONSTANTS.NODE_ADMIN?"AdminNode":"Node",a={headers:{"User-Agent":"Firebase/"+u.PROTOCOL_VERSION+"/"+o.default.SDK_VERSION+"/"+e.platform+"/"+i}},s=Object({NODE_ENV:"production",PUBLIC_URL:""}),p=0==this.connURL.indexOf("wss://")?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;p&&(a.proxy={origin:p}),this.mySock=new f(this.connURL,[],a)}else this.mySock=new f(this.connURL)}catch(e){this.log_("Error instantiating WebSocket.");var d=e.message||e.data;return d&&this.log_(d),void this.onClosed_()}this.mySock.onopen=function(){r.log_("Websocket connected."),r.everConnected_=!0},this.mySock.onclose=function(){r.log_("Websocket connection was disconnected."),r.mySock=null,r.onClosed_()},this.mySock.onmessage=function(e){r.handleIncomingFrame(e)},this.mySock.onerror=function(e){r.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&r.log_(t),r.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&null!==f&&!t.forceDisallow_},t.previouslyFailed=function(){return c.PersistentStorage.isInMemoryStorage||!0===c.PersistentStorage.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){c.PersistentStorage.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(e){if(this.frames.push(e),this.frames.length==this.totalFrames){var t=this.frames.join("");this.frames=null;var n=p.jsonEval(t);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(e){this.totalFrames=e,this.frames=[]},t.prototype.extractFrameCount_=function(e){if(i.assert(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e},t.prototype.handleIncomingFrame=function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(e){this.resetKeepAlive();var t=p.stringify(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=a.splitStringBySize(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()},Math.floor(45e3))},t.prototype.sendString_=function(e){try{this.mySock.send(e)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}();t.WebSocketConnection=d}).call(t,n(59))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.prototype.put=function(e,t,n,r){},e.prototype.merge=function(e,t,n,r){},e.prototype.refreshAuthToken=function(e){},e.prototype.onDisconnectPut=function(e,t,n){},e.prototype.onDisconnectMerge=function(e,t,n){},e.prototype.onDisconnectCancel=function(e,t){},e.prototype.reportStats=function(e){},e}();t.ServerActions=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(65),o=n(8),i=n(13),a=n(10),s=function(){function e(t){this.indexedFilter_=new r.IndexedFilter(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return e.prototype.getStartPost=function(){return this.startPost_},e.prototype.getEndPost=function(){return this.endPost_},e.prototype.matches=function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0},e.prototype.updateChild=function(e,t,n,r,o,s){return this.matches(new i.NamedNode(t,n))||(n=a.ChildrenNode.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,o,s)},e.prototype.updateFullNode=function(e,t,n){t.isLeafNode()&&(t=a.ChildrenNode.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(a.ChildrenNode.EMPTY_NODE);var s=this;return t.forEachChild(o.PRIORITY_INDEX,function(e,t){s.matches(new i.NamedNode(e,t))||(r=r.updateImmediateChild(e,a.ChildrenNode.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,n)},e.prototype.updatePriority=function(e,t){return e},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.indexedFilter_},e.prototype.getIndex=function(){return this.index_},e.getStartPost_=function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()},e.getEndPost_=function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()},e}();t.RangedFilter=s},function(e,t,n){"use strict";var r=n(0),o=(n.n(r),n(44)),i=n(301),a=n(126),s="messagingSenderId",u=function(){function e(e){var t=this;if(this.errorFactory_=new r.ErrorFactory("messaging","Messaging",o.a.map),!e.options[s]||"string"!==typeof e.options[s])throw this.errorFactory_.create(o.a.codes.BAD_SENDER_ID);this.messagingSenderId_=e.options[s],this.tokenManager_=new i.a,this.app=e,this.INTERNAL={},this.INTERNAL.delete=function(){return t.delete}}return e.prototype.getToken=function(){var e=this,t=this.getNotificationPermission_();return t!==a.a.granted?t===a.a.denied?Promise.reject(this.errorFactory_.create(o.a.codes.NOTIFICATIONS_BLOCKED)):Promise.resolve(null):this.getSWRegistration_().then(function(t){return e.tokenManager_.getSavedToken(e.messagingSenderId_,t).then(function(n){return n||e.tokenManager_.createToken(e.messagingSenderId_,t)})})},e.prototype.deleteToken=function(e){var t=this;return this.tokenManager_.deleteToken(e).then(function(){return t.getSWRegistration_().then(function(e){if(e)return e.pushManager.getSubscription()}).then(function(e){if(e)return e.unsubscribe()})})},e.prototype.getSWRegistration_=function(){throw this.errorFactory_.create(o.a.codes.SHOULD_BE_INHERITED)},e.prototype.requestPermission=function(){throw this.errorFactory_.create(o.a.codes.AVAILABLE_IN_WINDOW)},e.prototype.useServiceWorker=function(e){throw this.errorFactory_.create(o.a.codes.AVAILABLE_IN_WINDOW)},e.prototype.onMessage=function(e,t,n){throw this.errorFactory_.create(o.a.codes.AVAILABLE_IN_WINDOW)},e.prototype.onTokenRefresh=function(e,t,n){throw this.errorFactory_.create(o.a.codes.AVAILABLE_IN_WINDOW)},e.prototype.setBackgroundMessageHandler=function(e){throw this.errorFactory_.create(o.a.codes.AVAILABLE_IN_SW)},e.prototype.delete=function(){return this.tokenManager_.closeDatabase()},e.prototype.getNotificationPermission_=function(){return Notification.permission},e.prototype.getTokenManager=function(){return this.tokenManager_},e}();t.a=u},function(e,t,n){"use strict";var r=[4,51,148,247,223,161,235,177,220,3,162,94,21,113,219,72,211,46,237,237,178,52,219,183,71,58,12,143,196,204,225,111,60,140,132,223,171,182,102,62,242,12,212,139,254,227,249,118,47,20,28,99,8,106,111,45,177,26,149,176,206,55,192,156,110],o={userVisibleOnly:!0,applicationServerKey:new Uint8Array(r)};t.a={ENDPOINT:"https://fcm.googleapis.com",APPLICATION_SERVER_KEY:r,SUBSCRIPTION_OPTIONS:o}},function(e,t,n){"use strict";t.a={granted:"granted",default:"default",denied:"denied"}},function(e,t,n){"use strict";var r={TYPE_OF_MSG:"firebase-messaging-msg-type",DATA:"firebase-messaging-msg-data"},o={PUSH_MSG_RECEIVED:"push-msg-received",NOTIFICATION_CLICKED:"notification-clicked"},i=function(e,t){return n={},n[r.TYPE_OF_MSG]=e,n[r.DATA]=t,n;var n};t.a={PARAMS:r,TYPES_OF_MSG:o,createNewMsg:i}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r;!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(r=r||(r={}))},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n(68),o=n(131),i=n(17),a=n(46),s=n(69),u=n(25),l=n(130),c=n(132),p=n(33),h=n(14),f=n(312),d=function(){function e(e,t){this.authWrapper=e,t instanceof a.a?this.location=t:this.location=a.a.makeFromUrl(t)}return e.prototype.toString=function(){return r.g("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path},e.prototype.newRef=function(t,n){return new e(t,n)},e.prototype.mappings=function(){return s.b()},e.prototype.child=function(e){r.g("child",[r.e()],arguments);var t=l.a(this.location.path,e),n=new a.a(this.location.bucket,t);return this.newRef(this.authWrapper,n)},Object.defineProperty(e.prototype,"parent",{get:function(){var e=l.c(this.location.path);if(null===e)return null;var t=new a.a(this.location.bucket,e);return this.newRef(this.authWrapper,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){var e=new a.a(this.location.bucket,"");return this.newRef(this.authWrapper,e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return l.b(this.location.path)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"storage",{get:function(){return this.authWrapper.service()},enumerable:!0,configurable:!0}),e.prototype.put=function(e,t){return void 0===t&&(t=null),r.g("put",[r.f(),r.b(!0)],arguments),this.throwIfRoot_("put"),new f.a(this,this.authWrapper,this.location,this.mappings(),new o.a(e),t)},e.prototype.putString=function(e,t,n){void 0===t&&(t=p.a.RAW),r.g("putString",[r.e(),r.e(p.c,!0),r.b(!0)],arguments),this.throwIfRoot_("putString");var i=p.b(t,e),a=u.a(n);return!h.a(a.contentType)&&h.a(i.contentType)&&(a.contentType=i.contentType),new f.a(this,this.authWrapper,this.location,this.mappings(),new o.a(i.data,!0),a)},e.prototype.delete=function(){r.g("delete",[],arguments),this.throwIfRoot_("delete");var e=this;return this.authWrapper.getAuthToken().then(function(t){var n=c.d(e.authWrapper,e.location);return e.authWrapper.makeRequest(n,t).getPromise()})},e.prototype.getMetadata=function(){r.g("getMetadata",[],arguments),this.throwIfRoot_("getMetadata");var e=this;return this.authWrapper.getAuthToken().then(function(t){var n=c.e(e.authWrapper,e.location,e.mappings());return e.authWrapper.makeRequest(n,t).getPromise()})},e.prototype.updateMetadata=function(e){r.g("updateMetadata",[r.b()],arguments),this.throwIfRoot_("updateMetadata");var t=this;return this.authWrapper.getAuthToken().then(function(n){var r=c.i(t.authWrapper,t.location,e,t.mappings());return t.authWrapper.makeRequest(r,n).getPromise()})},e.prototype.getDownloadURL=function(){return r.g("getDownloadURL",[],arguments),this.throwIfRoot_("getDownloadURL"),this.getMetadata().then(function(e){var t=e.downloadURLs[0];if(h.a(t))return t;throw i.l()})},e.prototype.throwIfRoot_=function(e){if(""===this.location.path)throw i.j(e)},e}()},function(e,t,n){"use strict";function r(e){if(0==e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}function o(e,t){var n=t.split("/").filter(function(e){return e.length>0}).join("/");return 0===e.length?n:e+"/"+n}function i(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}t.c=r,t.a=o,t.b=i},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(310),o=n(33),i=n(14),a=function(){function e(e,t){var n=0,r="";i.d(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}return e.prototype.size=function(){return this.size_},e.prototype.type=function(){return this.type_},e.prototype.slice=function(t,n){if(i.d(this.data_)){var o=this.data_,a=r.b(o,t,n);return null===a?null:new e(a)}return new e(new Uint8Array(this.data_.buffer,t,n-t),!0)},e.getBlob=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(i.e()){var a=t.map(function(t){return t instanceof e?t.data_:t});return new e(r.a.apply(null,a))}var s=t.map(function(e){return i.j(e)?o.b(o.a.RAW,e).data:e.data_}),u=0;s.forEach(function(e){u+=e.byteLength});var l=new Uint8Array(u),c=0;return s.forEach(function(e){for(var t=0;t<e.length;t++)l[c++]=e[t]}),new e(l,!0)},e.prototype.uploadData=function(){return this.data_},e}()},function(e,t,n){"use strict";function r(e){if(!e)throw _.s()}function o(e,t){function n(n,o){var i=b.a(e,o,t);return r(null!==i),i}return n}function i(e){function t(t,n){var r;return r=401===t.getStatus()?_.q():402===t.getStatus()?_.n(e.bucket):403===t.getStatus()?_.r(e.path):n,r.setServerResponseProp(n.serverResponseProp()),r}return t}function a(e){function t(t,r){var o=n(t,r);return 404===t.getStatus()&&(o=_.m(e.path)),o.setServerResponseProp(r.serverResponseProp()),o}var n=i(e);return t}function s(e,t,n){var r=t.fullServerUrl(),i=C.b(r),s=e.maxOperationRetryTime(),u=new x.a(i,"GET",o(e,n),s);return u.errorHandler=a(t),u}function u(e,t,n,r){var i=t.fullServerUrl(),s=C.b(i),u=b.d(n,r),l={"Content-Type":"application/json; charset=utf-8"},c=e.maxOperationRetryTime(),p=new x.a(s,"PATCH",o(e,r),c);return p.headers=l,p.body=u,p.errorHandler=a(t),p}function l(e,t){function n(e,t){}var r=t.fullServerUrl(),o=C.b(r),i=e.maxOperationRetryTime(),s=new x.a(o,"DELETE",n,i);return s.successCodes=[200,204],s.errorHandler=a(t),s}function c(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function p(e,t,n){var r=w.a(n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=c(null,t)),r}function h(e,t,n,r,a){var s=t.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"},l=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();u["Content-Type"]="multipart/related; boundary="+l;var c=p(t,r,a),h=b.d(c,n),f="--"+l+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+h+"\r\n--"+l+"\r\nContent-Type: "+c.contentType+"\r\n\r\n",d="\r\n--"+l+"--",m=g.a.getBlob(f,r,d);if(null===m)throw _.d();var y={name:c.fullPath},v=C.d(s),w=e.maxUploadRetryTime(),E=new x.a(v,"POST",o(e,n),w);return E.urlParams=y,E.headers=u,E.body=m.uploadData(),E.errorHandler=i(t),E}function f(e,t){var n;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(e){r(!1)}var o=t||["active"];return r(v.b(o,n)),n}function d(e,t,n,o,a){function s(e,t){f(e);var n;try{n=e.getResponseHeader("X-Goog-Upload-URL")}catch(e){r(!1)}return r(E.j(n)),n}var u=t.bucketOnlyServerUrl(),l=p(t,o,a),c={name:l.fullPath},h=C.d(u),d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":o.size(),"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},m=b.d(l,n),y=e.maxUploadRetryTime(),v=new x.a(h,"POST",s,y);return v.urlParams=c,v.headers=d,v.body=m,v.errorHandler=i(t),v}function m(e,t,n,o){function a(e,t){var n,i=f(e,["active","final"]);try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(e){r(!1)}var a=parseInt(n,10);return r(!isNaN(a)),new T(a,o.size(),"final"===i)}var s={"X-Goog-Upload-Command":"query"},u=e.maxUploadRetryTime(),l=new x.a(n,"POST",a,u);return l.headers=s,l.errorHandler=i(t),l}function y(e,t,n,r,a,s,u,l){function c(e,n){var i,a=f(e,["active","final"]),u=p.current+d,l=r.size();return i="final"===a?o(t,s)(e,n):null,new T(u,l,"final"===a,i)}var p=new T(0,0);if(u?(p.current=u.current,p.total=u.total):(p.current=0,p.total=r.size()),r.size()!==p.total)throw _.p();var h=p.total-p.current,d=h;a>0&&(d=Math.min(d,a));var m=p.current,y=m+d,v=d===h?"upload, finalize":"upload",g={"X-Goog-Upload-Command":v,"X-Goog-Upload-Offset":p.current},b=r.slice(m,y);if(null===b)throw _.d();var w=t.maxUploadRetryTime(),E=new x.a(n,"POST",c,w);return E.headers=g,E.body=b.uploadData(),E.progressCallback=l||null,E.errorHandler=i(e),E}t.e=s,t.i=u,t.d=l,t.g=h,n.d(t,"a",function(){return T}),t.c=d,t.f=m,n.d(t,"h",function(){return S}),t.b=y;var v=n(71),g=n(131),_=n(17),b=n(69),w=n(25),x=n(311),E=n(14),C=n(70),T=function(){function e(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null}return e}(),S=262144},function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return a});var r=n(3),o=n.n(r),i=o.a.shape({trySubscribe:o.a.func.isRequired,tryUnsubscribe:o.a.func.isRequired,notifyNestedSubs:o.a.func.isRequired,isSubscribed:o.a.func.isRequired}),a=o.a.shape({subscribe:o.a.func.isRequired,dispatch:o.a.func.isRequired,getState:o.a.func.isRequired})},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function s(){}function u(e,t){var n={run:function(r){try{var o=e(t.getState(),r);(o!==n.props||n.error)&&(n.shouldComponentUpdate=!0,n.props=o,n.error=null)}catch(e){n.shouldComponentUpdate=!0,n.error=e}}};return n}function l(e){var t,n,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=l.getDisplayName,h=void 0===c?function(e){return"ConnectAdvanced("+e+")"}:c,b=l.methodName,w=void 0===b?"connectAdvanced":b,x=l.renderCountProp,E=void 0===x?void 0:x,C=l.shouldHandleStateChanges,T=void 0===C||C,S=l.storeKey,P=void 0===S?"store":S,O=l.withRef,A=void 0!==O&&O,k=a(l,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef"]),I=P+"Subscription",N=g++,R=(t={},t[P]=y.a,t[I]=y.b,t),M=(n={},n[I]=y.b,n);return function(t){f()("function"==typeof t,"You must pass a component to the function returned by connect. Instead received "+JSON.stringify(t));var n=t.displayName||t.name||"Component",a=h(n),l=v({},k,{getDisplayName:h,methodName:w,renderCountProp:E,shouldHandleStateChanges:T,storeKey:P,withRef:A,displayName:a,wrappedComponentName:n,WrappedComponent:t}),c=function(n){function c(e,t){r(this,c);var i=o(this,n.call(this,e,t));return i.version=N,i.state={},i.renderCount=0,i.store=e[P]||t[P],i.propsMode=Boolean(e[P]),i.setWrappedInstance=i.setWrappedInstance.bind(i),f()(i.store,'Could not find "'+P+'" in either the context or props of "'+a+'". Either wrap the root component in a <Provider>, or explicitly pass "'+P+'" as a prop to "'+a+'".'),i.initSelector(),i.initSubscription(),i}return i(c,n),c.prototype.getChildContext=function(){var e,t=this.propsMode?null:this.subscription;return e={},e[I]=t||this.context[I],e},c.prototype.componentDidMount=function(){T&&(this.subscription.trySubscribe(),this.selector.run(this.props),this.selector.shouldComponentUpdate&&this.forceUpdate())},c.prototype.componentWillReceiveProps=function(e){this.selector.run(e)},c.prototype.shouldComponentUpdate=function(){return this.selector.shouldComponentUpdate},c.prototype.componentWillUnmount=function(){this.subscription&&this.subscription.tryUnsubscribe(),this.subscription=null,this.notifyNestedSubs=s,this.store=null,this.selector.run=s,this.selector.shouldComponentUpdate=!1},c.prototype.getWrappedInstance=function(){return f()(A,"To access the wrapped instance, you need to specify { withRef: true } in the options argument of the "+w+"() call."),this.wrappedInstance},c.prototype.setWrappedInstance=function(e){this.wrappedInstance=e},c.prototype.initSelector=function(){var t=e(this.store.dispatch,l);this.selector=u(t,this.store),this.selector.run(this.props)},c.prototype.initSubscription=function(){if(T){var e=(this.propsMode?this.props:this.context)[I];this.subscription=new m.a(this.store,e,this.onStateChange.bind(this)),this.notifyNestedSubs=this.subscription.notifyNestedSubs.bind(this.subscription)}},c.prototype.onStateChange=function(){this.selector.run(this.props),this.selector.shouldComponentUpdate?(this.componentDidUpdate=this.notifyNestedSubsOnComponentDidUpdate,this.setState(_)):this.notifyNestedSubs()},c.prototype.notifyNestedSubsOnComponentDidUpdate=function(){this.componentDidUpdate=void 0,this.notifyNestedSubs()},c.prototype.isSubscribed=function(){return Boolean(this.subscription)&&this.subscription.isSubscribed()},c.prototype.addExtraProps=function(e){if(!A&&!E&&(!this.propsMode||!this.subscription))return e;var t=v({},e);return A&&(t.ref=this.setWrappedInstance),E&&(t[E]=this.renderCount++),this.propsMode&&this.subscription&&(t[I]=this.subscription),t},c.prototype.render=function(){var e=this.selector;if(e.shouldComponentUpdate=!1,e.error)throw e.error;return Object(d.createElement)(t,this.addExtraProps(e.props))},c}(d.Component);return c.WrappedComponent=t,c.displayName=a,c.childContextTypes=M,c.contextTypes=R,c.propTypes=R,p()(c,t)}}t.a=l;var c=n(85),p=n.n(c),h=n(11),f=n.n(h),d=n(1),m=(n.n(d),n(324)),y=n(133),v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g=0,_={}},function(e,t,n){"use strict";var r=n(136),o=(n(340),n(341)),i=n(342);n(139),n(138);n.d(t,"c",function(){return r.b}),n.d(t,"b",function(){return o.a}),n.d(t,"a",function(){return i.a})},function(e,t,n){"use strict";function r(e,t,n){function i(){v===y&&(v=y.slice())}function u(){return m}function l(e){if("function"!==typeof e)throw new Error("Expected listener to be a function.");var t=!0;return i(),v.push(e),function(){if(t){t=!1,i();var n=v.indexOf(e);v.splice(n,1)}}}function c(e){if(!Object(o.a)(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if("undefined"===typeof e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(g)throw new Error("Reducers may not dispatch actions.");try{g=!0,m=d(m,e)}finally{g=!1}for(var t=y=v,n=0;n<t.length;n++){(0,t[n])()}return e}function p(e){if("function"!==typeof e)throw new Error("Expected the nextReducer to be a function.");d=e,c({type:s.INIT})}function h(){var e,t=l;return e={subscribe:function(e){function n(){e.next&&e.next(u())}if("object"!==typeof e)throw new TypeError("Expected the observer to be an object.");return n(),{unsubscribe:t(n)}}},e[a.a]=function(){return this},e}var f;if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error("Expected the enhancer to be a function.");return n(r)(e,t)}if("function"!==typeof e)throw new Error("Expected the reducer to be a function.");var d=e,m=t,y=[],v=y,g=!1;return c({type:s.INIT}),f={dispatch:c,subscribe:l,getState:u,replaceReducer:p},f[a.a]=h,f}n.d(t,"a",function(){return s}),t.b=r;var o=n(74),i=n(336),a=n.n(i),s={INIT:"@@redux/INIT"}},function(e,t,n){"use strict";var r=n(329),o=r.a.Symbol;t.a=o},function(e,t,n){"use strict"},function(e,t,n){"use strict";function r(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}t.a=r},function(e,t,n){"use strict";function r(e){return function(t,n){function r(){return o}var o=e(t,n);return r.dependsOnOwnProps=!1,r}}function o(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function i(e,t){return function(t,n){var r=(n.displayName,function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e)});return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=o(e);var i=r(t,n);return"function"===typeof i&&(r.mapToProps=i,r.dependsOnOwnProps=o(i),i=r(t,n)),i},r}}t.a=r,t.b=i;n(141)},function(e,t,n){"use strict";n(74),n(73)},function(e,t,n){n(143),e.exports=n(150)},function(e,t,n){"use strict";"undefined"===typeof Promise&&(n(144).enable(),window.Promise=n(147)),n(148),Object.assign=n(149)},function(e,t,n){"use strict";function r(){l=!1,s._47=null,s._71=null}function o(e){function t(t){(e.allRejections||a(p[t].error,e.whitelist||u))&&(p[t].displayId=c++,e.onUnhandled?(p[t].logged=!0,e.onUnhandled(p[t].displayId,p[t].error)):(p[t].logged=!0,i(p[t].displayId,p[t].error)))}function n(t){p[t].logged&&(e.onHandled?e.onHandled(p[t].displayId,p[t].error):p[t].onUnhandled||(console.warn("Promise Rejection Handled (id: "+p[t].displayId+"):"),console.warn('  This means you can ignore any previous messages of the form "Possible Unhandled Promise Rejection" with id '+p[t].displayId+".")))}e=e||{},l&&r(),l=!0;var o=0,c=0,p={};s._47=function(e){2===e._83&&p[e._56]&&(p[e._56].logged?n(e._56):clearTimeout(p[e._56].timeout),delete p[e._56])},s._71=function(e,n){0===e._75&&(e._56=o++,p[e._56]={displayId:null,error:n,timeout:setTimeout(t.bind(null,e._56),a(n,u)?100:2e3),logged:!1})}}function i(e,t){console.warn("Possible Unhandled Promise Rejection (id: "+e+"):"),((t&&(t.stack||t))+"").split("\n").forEach(function(e){console.warn("  "+e)})}function a(e,t){return t.some(function(t){return e instanceof t})}var s=n(75),u=[ReferenceError,TypeError,RangeError],l=!1;t.disable=r,t.enable=o},function(e,t,n){"use strict";(function(t){function n(e){a.length||(i(),s=!0),a[a.length]=e}function r(){for(;u<a.length;){var e=u;if(u+=1,a[e].call(),u>l){for(var t=0,n=a.length-u;t<n;t++)a[t]=a[t+u];a.length-=u,u=0}}a.length=0,u=0,s=!1}function o(e){return function(){function t(){clearTimeout(n),clearInterval(r),e()}var n=setTimeout(t,0),r=setInterval(t,50)}}e.exports=n;var i,a=[],s=!1,u=0,l=1024,c="undefined"!==typeof t?t:self,p=c.MutationObserver||c.WebKitMutationObserver;i="function"===typeof p?function(e){var t=1,n=new p(e),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){t=-t,r.data=t}}(r):o(r),n.requestFlush=i,n.makeRequestCallFromTimer=o}).call(t,n(146))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"===typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";function r(e){var t=new o(o._44);return t._83=1,t._18=e,t}var o=n(75);e.exports=o;var i=r(!0),a=r(!1),s=r(null),u=r(void 0),l=r(0),c=r("");o.resolve=function(e){if(e instanceof o)return e;if(null===e)return s;if(void 0===e)return u;if(!0===e)return i;if(!1===e)return a;if(0===e)return l;if(""===e)return c;if("object"===typeof e||"function"===typeof e)try{var t=e.then;if("function"===typeof t)return new o(t.bind(e))}catch(e){return new o(function(t,n){n(e)})}return r(e)},o.all=function(e){var t=Array.prototype.slice.call(e);return new o(function(e,n){function r(a,s){if(s&&("object"===typeof s||"function"===typeof s)){if(s instanceof o&&s.then===o.prototype.then){for(;3===s._83;)s=s._18;return 1===s._83?r(a,s._18):(2===s._83&&n(s._18),void s.then(function(e){r(a,e)},n))}var u=s.then;if("function"===typeof u){return void new o(u.bind(s)).then(function(e){r(a,e)},n)}}t[a]=s,0===--i&&e(t)}if(0===t.length)return e([]);for(var i=t.length,a=0;a<t.length;a++)r(a,t[a])})},o.reject=function(e){return new o(function(t,n){n(e)})},o.race=function(e){return new o(function(t,n){e.forEach(function(e){o.resolve(e).then(t,n)})})},o.prototype.catch=function(e){return this.then(null,e)}},function(e,t){!function(e){"use strict";function t(e){if("string"!==typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function n(e){return"string"!==typeof e&&(e=String(e)),e}function r(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return v.iterable&&(t[Symbol.iterator]=function(){return t}),t}function o(e){this.map={},e instanceof o?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function i(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function a(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function s(e){var t=new FileReader,n=a(t);return t.readAsArrayBuffer(e),n}function u(e){var t=new FileReader,n=a(t);return t.readAsText(e),n}function l(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}function c(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function p(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"===typeof e)this._bodyText=e;else if(v.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(v.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(v.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(v.arrayBuffer&&v.blob&&_(e))this._bodyArrayBuffer=c(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!v.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!b(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=c(e)}else this._bodyText="";this.headers.get("content-type")||("string"===typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):v.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},v.blob&&(this.blob=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?i(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(s)}),this.text=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(l(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},v.formData&&(this.formData=function(){return this.text().then(d)}),this.json=function(){return this.text().then(JSON.parse)},this}function h(e){var t=e.toUpperCase();return w.indexOf(t)>-1?t:e}function f(e,t){t=t||{};var n=t.body;if(e instanceof f){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new o(e.headers)),this.method=e.method,this.mode=e.mode,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new o(t.headers)),this.method=h(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function d(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(o))}}),t}function m(e){var t=new o;return e.split(/\r?\n/).forEach(function(e){var n=e.split(":"),r=n.shift().trim();if(r){var o=n.join(":").trim();t.append(r,o)}}),t}function y(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new o(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var v={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(v.arrayBuffer)var g=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],_=function(e){return e&&DataView.prototype.isPrototypeOf(e)},b=ArrayBuffer.isView||function(e){return e&&g.indexOf(Object.prototype.toString.call(e))>-1};o.prototype.append=function(e,r){e=t(e),r=n(r);var o=this.map[e];this.map[e]=o?o+","+r:r},o.prototype.delete=function(e){delete this.map[t(e)]},o.prototype.get=function(e){return e=t(e),this.has(e)?this.map[e]:null},o.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},o.prototype.set=function(e,r){this.map[t(e)]=n(r)},o.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},o.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),r(e)},o.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),r(e)},o.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),r(e)},v.iterable&&(o.prototype[Symbol.iterator]=o.prototype.entries);var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];f.prototype.clone=function(){return new f(this,{body:this._bodyInit})},p.call(f.prototype),p.call(y.prototype),y.prototype.clone=function(){return new y(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new o(this.headers),url:this.url})},y.error=function(){var e=new y(null,{status:0,statusText:""});return e.type="error",e};var x=[301,302,303,307,308];y.redirect=function(e,t){if(-1===x.indexOf(t))throw new RangeError("Invalid status code");return new y(null,{status:t,headers:{location:e}})},e.Headers=o,e.Request=f,e.Response=y,e.fetch=function(e,t){return new Promise(function(n,r){var o=new f(e,t),i=new XMLHttpRequest;i.onload=function(){var e={status:i.status,statusText:i.statusText,headers:m(i.getAllResponseHeaders()||"")};e.url="responseURL"in i?i.responseURL:e.headers.get("X-Request-URL");var t="response"in i?i.response:i.responseText;n(new y(t,e))},i.onerror=function(){r(new TypeError("Network request failed"))},i.ontimeout=function(){r(new TypeError("Network request failed"))},i.open(o.method,o.url,!0),"include"===o.credentials&&(i.withCredentials=!0),"responseType"in i&&v.blob&&(i.responseType="blob"),o.headers.forEach(function(e,t){i.setRequestHeader(t,e)}),i.send("undefined"===typeof o._bodyInit?null:o._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!==typeof self?self:this)},function(e,t,n){"use strict";function r(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var o=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,s,u=r(e),l=1;l<arguments.length;l++){n=Object(arguments[l]);for(var c in n)i.call(n,c)&&(u[c]=n[c]);if(o){s=o(n);for(var p=0;p<s.length;p++)a.call(n,s[p])&&(u[s[p]]=n[s[p]])}}return u}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n.n(r),i=n(152),a=n.n(i),s=n(162),u=(n.n(s),n(163)),l=n(22),c=n(383),p=n(5),h=n(386);a.a.render(o.a.createElement(p.a,null,o.a.createElement(l.a,{store:c.a},o.a.createElement(u.a,null))),document.getElementById("root")),Object(h.a)()},function(e,t,n){"use strict";function r(e){for(var t=arguments.length-1,n="Minified React error #"+e+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);throw t=Error(n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."),t.name="Invariant Violation",t.framesToPop=1,t}function o(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||b}function i(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||b}function a(){}function s(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||b}function u(e,t,n,r,o,i,a){return{$$typeof:S,type:e,key:t,ref:n,props:a,_owner:i}}function l(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}function c(e,t,n,r){if(I.length){var o=I.pop();return o.result=e,o.keyPrefix=t,o.func=n,o.context=r,o.count=0,o}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function p(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>I.length&&I.push(e)}function h(e,t,n,o){var i=typeof e;if("undefined"!==i&&"boolean"!==i||(e=null),null===e||"string"===i||"number"===i||"object"===i&&e.$$typeof===A)return n(o,e,""===t?"."+f(e,0):t),1;var a=0;if(t=""===t?".":t+":",Array.isArray(e))for(var s=0;s<e.length;s++){i=e[s];var u=t+f(i,s);a+=h(i,u,n,o)}else if("function"===typeof(u=O&&e[O]||e["@@iterator"]))for(e=u.call(e),s=0;!(i=e.next()).done;)i=i.value,u=t+f(i,s++),a+=h(i,u,n,o);else"object"===i&&(n=""+e,r("31","[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n,""));return a}function f(e,t){return"object"===typeof e&&null!==e&&null!=e.key?l(e.key):t.toString(36)}function d(e,t){e.func.call(e.context,t,e.count++)}function m(e,t,n){var r=e.result,o=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?y(e,r,n,_.thatReturnsArgument):null!=e&&(u.isValidElement(e)&&(e=u.cloneAndReplaceKey(e,o+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(k,"$&/")+"/")+n)),r.push(e))}function y(e,t,n,r,o){var i="";null!=n&&(i=(""+n).replace(k,"$&/")+"/"),t=c(t,i,r,o),null==e||h(e,"",m,t),p(t)}var v=n(76),g=n(77);n(49);var _=n(35),b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}};o.prototype.isReactComponent={},o.prototype.setState=function(e,t){"object"!==typeof e&&"function"!==typeof e&&null!=e&&r("85"),this.updater.enqueueSetState(this,e,t,"setState")},o.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},a.prototype=o.prototype;var w=i.prototype=new a;w.constructor=i,v(w,o.prototype),w.isPureReactComponent=!0;var x=s.prototype=new a;x.constructor=s,v(x,o.prototype),x.unstable_isAsyncReactComponent=!0,x.render=function(){return this.props.children};var E={Component:o,PureComponent:i,AsyncComponent:s},C={current:null},T=Object.prototype.hasOwnProperty,S="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,P={key:!0,ref:!0,__self:!0,__source:!0};u.createElement=function(e,t,n){var r,o={},i=null,a=null,s=null,l=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(i=""+t.key),s=void 0===t.__self?null:t.__self,l=void 0===t.__source?null:t.__source,t)T.call(t,r)&&!P.hasOwnProperty(r)&&(o[r]=t[r]);var c=arguments.length-2;if(1===c)o.children=n;else if(1<c){for(var p=Array(c),h=0;h<c;h++)p[h]=arguments[h+2];o.children=p}if(e&&e.defaultProps)for(r in c=e.defaultProps)void 0===o[r]&&(o[r]=c[r]);return u(e,i,a,s,l,C.current,o)},u.createFactory=function(e){var t=u.createElement.bind(null,e);return t.type=e,t},u.cloneAndReplaceKey=function(e,t){return u(e.type,t,e.ref,e._self,e._source,e._owner,e.props)},u.cloneElement=function(e,t,n){var r=v({},e.props),o=e.key,i=e.ref,a=e._self,s=e._source,l=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,l=C.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(p in t)T.call(t,p)&&!P.hasOwnProperty(p)&&(r[p]=void 0===t[p]&&void 0!==c?c[p]:t[p])}var p=arguments.length-2;if(1===p)r.children=n;else if(1<p){c=Array(p);for(var h=0;h<p;h++)c[h]=arguments[h+2];r.children=c}return u(e.type,o,i,a,s,l,r)},u.isValidElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===S};var O="function"===typeof Symbol&&Symbol.iterator,A="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,k=/\/+/g,I=[],N={forEach:function(e,t,n){if(null==e)return e;t=c(null,null,t,n),null==e||h(e,"",d,t),p(t)},map:function(e,t,n){if(null==e)return e;var r=[];return y(e,r,null,t,n),r},count:function(e){return null==e?0:h(e,"",_.thatReturnsNull,null)},toArray:function(e){var t=[];return y(e,t,null,_.thatReturnsArgument),t}};e.exports={Children:{map:N.map,forEach:N.forEach,count:N.count,toArray:N.toArray,only:function(e){return u.isValidElement(e)||r("143"),e}},Component:E.Component,PureComponent:E.PureComponent,unstable_AsyncComponent:E.AsyncComponent,createElement:u.createElement,cloneElement:u.cloneElement,isValidElement:u.isValidElement,createFactory:u.createFactory,version:"16.0.0",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:C,assign:v}}},function(e,t,n){"use strict";function r(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}r(),e.exports=n(153)},function(e,t,n){"use strict";function r(e){for(var t=arguments.length-1,n="Minified React error #"+e+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);throw t=Error(n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."),t.name="Invariant Violation",t.framesToPop=1,t}function o(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function i(){if(Ot)for(var e in At){var t=At[e],n=Ot.indexOf(e);if(-1<n||r("96",e),!kt.plugins[n]){t.extractEvents||r("97",e),kt.plugins[n]=t,n=t.eventTypes;for(var o in n){var i=void 0,s=n[o],u=t,l=o;kt.eventNameDispatchConfigs.hasOwnProperty(l)&&r("99",l),kt.eventNameDispatchConfigs[l]=s;var c=s.phasedRegistrationNames;if(c){for(i in c)c.hasOwnProperty(i)&&a(c[i],u,l);i=!0}else s.registrationName?(a(s.registrationName,u,l),i=!0):i=!1;i||r("98",o,e)}}}}function a(e,t,n){kt.registrationNameModules[e]&&r("100",e),kt.registrationNameModules[e]=t,kt.registrationNameDependencies[e]=t.eventTypes[n].dependencies}function s(e,t){return(e&t)===t}function u(e){for(var t;t=e._renderedComponent;)e=t;return e}function l(e,t){e=u(e),e._hostNode=t,t[Ht]=e}function c(e,t){if(!(e._flags&Wt.hasCachedChildNodes)){var n=e._renderedChildren;t=t.firstChild;var o;e:for(o in n)if(n.hasOwnProperty(o)){var i=n[o],a=u(i)._domID;if(0!==a){for(;null!==t;t=t.nextSibling){var s=t,c=a;if(s.nodeType===Bt&&s.getAttribute(Vt)===""+c||s.nodeType===Ut&&s.nodeValue===" react-text: "+c+" "||s.nodeType===Ut&&s.nodeValue===" react-empty: "+c+" "){l(i,t);continue e}}r("32",a)}}e._flags|=Wt.hasCachedChildNodes}}function p(e){if(e[Ht])return e[Ht];for(var t=[];!e[Ht];){if(t.push(e),!e.parentNode)return null;e=e.parentNode}var n=e[Ht];if(n.tag===jt||n.tag===zt)return n;for(;e&&(n=e[Ht]);e=t.pop()){var r=n;t.length&&c(n,e)}return r}function h(e){if("function"===typeof e.getName)return e.getName();if("number"===typeof e.tag){if("string"===typeof(e=e.type))return e;if("function"===typeof e)return e.displayName||e.name}return null}function f(e){var t=e;if(e.alternate)for(;t.return;)t=t.return;else{if((t.effectTag&nn)!==tn)return 1;for(;t.return;)if(t=t.return,(t.effectTag&nn)!==tn)return 1}return t.tag===Jt?2:3}function d(e){2!==f(e)&&r("188")}function m(e){var t=e.alternate;if(!t)return t=f(e),3===t&&r("188"),1===t?null:e;for(var n=e,o=t;;){var i=n.return,a=i?i.alternate:null;if(!i||!a)break;if(i.child===a.child){for(var s=i.child;s;){if(s===n)return d(i),e;if(s===o)return d(i),t;s=s.sibling}r("188")}if(n.return!==o.return)n=i,o=a;else{s=!1;for(var u=i.child;u;){if(u===n){s=!0,n=i,o=a;break}if(u===o){s=!0,o=i,n=a;break}u=u.sibling}if(!s){for(u=a.child;u;){if(u===n){s=!0,n=a,o=i;break}if(u===o){s=!0,o=a,n=i;break}u=u.sibling}s||r("189")}}n.alternate!==o&&r("190")}return n.tag!==Jt&&r("188"),n.stateNode.current===n?e:t}function y(e,t,n,r,o,i,a,s,u){on._hasCaughtError=!1,on._caughtError=null;var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(e){on._caughtError=e,on._hasCaughtError=!0}}function v(){if(on._hasRethrowError){var e=on._rethrowError;throw on._rethrowError=null,on._hasRethrowError=!1,e}}function g(e,t,n,r){t=e.type||"unknown-event",e.currentTarget=sn.getNodeFromInstance(r),an.invokeGuardedCallbackAndCatchFirstError(t,n,void 0,e),e.currentTarget=null}function _(e){if(e=un.getInstanceFromNode(e))if("number"===typeof e.tag){ln&&"function"===typeof ln.restoreControlledState||r("194");var t=un.getFiberCurrentPropsFromNode(e.stateNode);ln.restoreControlledState(e.stateNode,e.type,t)}else"function"!==typeof e.restoreControlledState&&r("195"),e.restoreControlledState()}function b(e,t,n,r,o,i){return e(t,n,r,o,i)}function w(e,t){return e(t)}function x(e,t){return w(e,t)}function E(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===mn?e.parentNode:e}function C(e){var t=e.targetInst;do{if(!t){e.ancestors.push(t);break}var n=t;if("number"===typeof n.tag){for(;n.return;)n=n.return;n=n.tag!==yn?null:n.stateNode.containerInfo}else{for(;n._hostParent;)n=n._hostParent;n=Kt.getNodeFromInstance(n).parentNode}if(!n)break;e.ancestors.push(t),t=Kt.getClosestInstanceFromNode(n)}while(t);for(n=0;n<e.ancestors.length;n++)t=e.ancestors[n],gn._handleTopLevel(e.topLevelType,t,e.nativeEvent,E(e.nativeEvent))}function T(e,t){return null==t&&r("30"),null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function S(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}function P(e,t){e&&(un.executeDispatchesInOrder(e,t),e.isPersistent()||e.constructor.release(e))}function O(e){return P(e,!0)}function A(e){return P(e,!1)}function k(e,t,n){switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":return!(!n.disabled||"button"!==t&&"input"!==t&&"select"!==t&&"textarea"!==t);default:return!1}}function I(e,t){if(!yt.canUseDOM||t&&!("addEventListener"in document))return!1;t="on"+e;var n=t in document;return n||(n=document.createElement("div"),n.setAttribute(t,"return;"),n="function"===typeof n[t]),!n&&St&&"wheel"===e&&(n=document.implementation.hasFeature("Events.wheel","3.0")),n}function N(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n["ms"+e]="MS"+t,n["O"+e]="o"+t.toLowerCase(),n}function R(e){if(En[e])return En[e];if(!xn[e])return e;var t,n=xn[e];for(t in n)if(n.hasOwnProperty(t)&&t in Cn)return En[e]=n[t];return""}function M(e){return Object.prototype.hasOwnProperty.call(e,On)||(e[On]=Pn++,Sn[e[On]]={}),Sn[e[On]]}function D(e){return!!Bn.hasOwnProperty(e)||!zn.hasOwnProperty(e)&&(jn.test(e)?Bn[e]=!0:(zn[e]=!0,!1))}function L(){return null}function F(e){var t="";return mt.Children.forEach(e,function(e){null==e||"string"!==typeof e&&"number"!==typeof e||(t+=e)}),t}function j(e,t,n){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r)}else{for(n=""+n,t=null,r=0;r<e.length;r++){if(e[r].value===n)return void(e[r].selected=!0);null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function z(e,t){t&&(Jn[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML)&&r("137",e,""),null!=t.dangerouslySetInnerHTML&&(null!=t.children&&r("60"),"object"===typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML||r("61")),null!=t.style&&"object"!==typeof t.style&&r("62",""))}function B(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function U(e){var t=B(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"function"===typeof n.get&&"function"===typeof n.set)return Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:!0,get:function(){return n.get.call(this)},set:function(e){r=""+e,n.set.call(this,e)}}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}function V(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function W(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===rr)return void(n.nodeValue=t)}e.textContent=t}function q(e,t){sr(t,e.nodeType===ir||e.nodeType===ar?e:e.ownerDocument)}function H(e,t){return e!==Nr&&e!==Ir||t!==Nr&&t!==Ir?e===kr&&t!==kr?-255:e!==kr&&t===kr?255:e-t:0}function G(){return{first:null,last:null,hasForceUpdate:!1,callbackList:null}}function K(e,t,n,r){null!==n?n.next=t:(t.next=e.first,e.first=t),null!==r?t.next=r:e.last=t}function X(e,t){t=t.priorityLevel;var n=null;if(null!==e.last&&0>=H(e.last.priorityLevel,t))n=e.last;else for(e=e.first;null!==e&&0>=H(e.priorityLevel,t);)n=e,e=e.next;return n}function Y(e,t){var n=e.alternate,r=e.updateQueue;null===r&&(r=e.updateQueue=G()),null!==n?null===(e=n.updateQueue)&&(e=n.updateQueue=G()):e=null,Dr=r,Lr=e!==r?e:null;var o=Dr;n=Lr;var i=X(o,t),a=null!==i?i.next:o.first;return null===n?(K(o,t,i,a),null):(r=X(n,t),e=null!==r?r.next:n.first,K(o,t,i,a),a===e&&null!==a||i===r&&null!==i?(null===r&&(n.first=t),null===e&&(n.last=null),null):(t={priorityLevel:t.priorityLevel,partialState:t.partialState,callback:t.callback,isReplace:t.isReplace,isForced:t.isForced,isTopLevelUnmount:t.isTopLevelUnmount,next:null},K(n,t,r,e),t))}function Z(e,t,n,r){return e=e.partialState,"function"===typeof e?e.call(t,n,r):e}function Q(e,t,n){e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n}function J(e){return e.tag===Vr&&null!=e.type.childContextTypes}function $(e,t){var n=e.stateNode,o=e.type.childContextTypes;if("function"!==typeof n.getChildContext)return t;n=n.getChildContext();for(var i in n)i in o||r("108",h(e)||"Unknown",i);return vt({},t,n)}function ee(e,t,n){this.tag=e,this.key=t,this.stateNode=this.type=null,this.sibling=this.child=this.return=null,this.index=0,this.memoizedState=this.updateQueue=this.memoizedProps=this.pendingProps=this.ref=null,this.internalContextTag=n,this.effectTag=lo,this.lastEffect=this.firstEffect=this.nextEffect=null,this.pendingWorkPriority=so,this.alternate=null}function te(e,t,n){var o=void 0;return"function"===typeof e?(o=e.prototype&&e.prototype.isReactComponent?new ee($r,t,n):new ee(Jr,t,n),o.type=e):"string"===typeof e?(o=new ee(to,t,n),o.type=e):"object"===typeof e&&null!==e&&"number"===typeof e.tag?o=e:r("130",null==e?e:typeof e,""),o}function ne(e){return null===e||"undefined"===typeof e?null:(e=Uo&&e[Uo]||e["@@iterator"],"function"===typeof e?e:null)}function re(e,t){var n=t.ref;if(null!==n&&"function"!==typeof n){if(t._owner){t=t._owner;var o=void 0;t&&("number"===typeof t.tag?(t.tag!==No&&r("110"),o=t.stateNode):o=t.getPublicInstance()),o||r("147",n);var i=""+n;return null!==e&&null!==e.ref&&e.ref._stringRef===i?e.ref:(e=function(e){var t=o.refs===bt?o.refs={}:o.refs;null===e?delete t[i]:t[i]=e},e._stringRef=i,e)}"string"!==typeof n&&r("148"),t._owner||r("149",n)}return n}function oe(e,t){"textarea"!==e.type&&r("31","[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,"")}function ie(e,t){function n(n,r){if(t){if(!e){if(null===r.alternate)return;r=r.alternate}var o=n.lastEffect;null!==o?(o.nextEffect=r,n.lastEffect=r):n.firstEffect=n.lastEffect=r,r.nextEffect=null,r.effectTag=Bo}}function o(e,r){if(!t)return null;for(;null!==r;)n(e,r),r=r.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(t,n){return e?(t=Eo(t,n),t.index=0,t.sibling=null,t):(t.pendingWorkPriority=n,t.effectTag=jo,t.index=0,t.sibling=null,t)}function s(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index,r<n?(e.effectTag=zo,n):r):(e.effectTag=zo,n):n}function u(e){return t&&null===e.alternate&&(e.effectTag=zo),e}function l(e,t,n,r){return null===t||t.tag!==Ro?(n=So(n,e.internalContextTag,r),n.return=e,n):(t=a(t,r),t.pendingProps=n,t.return=e,t)}function c(e,t,n,r){return null===t||t.type!==n.type?(r=Co(n,e.internalContextTag,r),r.ref=re(t,n),r.return=e,r):(r=a(t,r),r.ref=re(t,n),r.pendingProps=n.props,r.return=e,r)}function p(e,t,n,r){return null===t||t.tag!==Do?(n=Po(n,e.internalContextTag,r),n.return=e,n):(t=a(t,r),t.pendingProps=n,t.return=e,t)}function h(e,t,n,r){return null===t||t.tag!==Lo?(t=Oo(n,e.internalContextTag,r),t.type=n.value,t.return=e,t):(t=a(t,r),t.type=n.value,t.return=e,t)}function f(e,t,n,r){return null===t||t.tag!==Mo||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?(n=Ao(n,e.internalContextTag,r),n.return=e,n):(t=a(t,r),t.pendingProps=n.children||[],t.return=e,t)}function d(e,t,n,r){return null===t||t.tag!==Fo?(n=To(n,e.internalContextTag,r),n.return=e,n):(t=a(t,r),t.pendingProps=n,t.return=e,t)}function m(e,t,n){if("string"===typeof t||"number"===typeof t)return t=So(""+t,e.internalContextTag,n),t.return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case Vo:return n=Co(t,e.internalContextTag,n),n.ref=re(null,t),n.return=e,n;case bo:return t=Po(t,e.internalContextTag,n),t.return=e,t;case wo:return n=Oo(t,e.internalContextTag,n),n.type=t.value,n.return=e,n;case xo:return t=Ao(t,e.internalContextTag,n),t.return=e,t}if(ko(t)||ne(t))return t=To(t,e.internalContextTag,n),t.return=e,t;oe(e,t)}return null}function y(e,t,n,r){var o=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==o?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case Vo:return n.key===o?c(e,t,n,r):null;case bo:return n.key===o?p(e,t,n,r):null;case wo:return null===o?h(e,t,n,r):null;case xo:return n.key===o?f(e,t,n,r):null}if(ko(n)||ne(n))return null!==o?null:d(e,t,n,r);oe(e,n)}return null}function v(e,t,n,r,o){if("string"===typeof r||"number"===typeof r)return e=e.get(n)||null,l(t,e,""+r,o);if("object"===typeof r&&null!==r){switch(r.$$typeof){case Vo:return e=e.get(null===r.key?n:r.key)||null,c(t,e,r,o);case bo:return e=e.get(null===r.key?n:r.key)||null,p(t,e,r,o);case wo:return e=e.get(n)||null,h(t,e,r,o);case xo:return e=e.get(null===r.key?n:r.key)||null,f(t,e,r,o)}if(ko(r)||ne(r))return e=e.get(n)||null,d(t,e,r,o);oe(t,r)}return null}function g(e,r,a,u){for(var l=null,c=null,p=r,h=r=0,f=null;null!==p&&h<a.length;h++){p.index>h?(f=p,p=null):f=p.sibling;var d=y(e,p,a[h],u);if(null===d){null===p&&(p=f);break}t&&p&&null===d.alternate&&n(e,p),r=s(d,r,h),null===c?l=d:c.sibling=d,c=d,p=f}if(h===a.length)return o(e,p),l;if(null===p){for(;h<a.length;h++)(p=m(e,a[h],u))&&(r=s(p,r,h),null===c?l=p:c.sibling=p,c=p);return l}for(p=i(e,p);h<a.length;h++)(f=v(p,e,h,a[h],u))&&(t&&null!==f.alternate&&p.delete(null===f.key?h:f.key),r=s(f,r,h),null===c?l=f:c.sibling=f,c=f);return t&&p.forEach(function(t){return n(e,t)}),l}function _(e,a,u,l){var c=ne(u);"function"!==typeof c&&r("150"),null==(u=c.call(u))&&r("151");for(var p=c=null,h=a,f=a=0,d=null,g=u.next();null!==h&&!g.done;f++,g=u.next()){h.index>f?(d=h,h=null):d=h.sibling;var _=y(e,h,g.value,l);if(null===_){h||(h=d);break}t&&h&&null===_.alternate&&n(e,h),a=s(_,a,f),null===p?c=_:p.sibling=_,p=_,h=d}if(g.done)return o(e,h),c;if(null===h){for(;!g.done;f++,g=u.next())null!==(g=m(e,g.value,l))&&(a=s(g,a,f),null===p?c=g:p.sibling=g,p=g);return c}for(h=i(e,h);!g.done;f++,g=u.next())null!==(g=v(h,e,f,g.value,l))&&(t&&null!==g.alternate&&h.delete(null===g.key?f:g.key),a=s(g,a,f),null===p?c=g:p.sibling=g,p=g);return t&&h.forEach(function(t){return n(e,t)}),c}return function(e,t,i,s){var l="object"===typeof i&&null!==i;if(l)switch(i.$$typeof){case Vo:e:{var c=i.key;for(l=t;null!==l;){if(l.key===c){if(l.type===i.type){o(e,l.sibling),t=a(l,s),t.ref=re(l,i),t.pendingProps=i.props,t.return=e,e=t;break e}o(e,l);break}n(e,l),l=l.sibling}s=Co(i,e.internalContextTag,s),s.ref=re(t,i),s.return=e,e=s}return u(e);case bo:e:{for(l=i.key;null!==t;){if(t.key===l){if(t.tag===Do){o(e,t.sibling),t=a(t,s),t.pendingProps=i,t.return=e,e=t;break e}o(e,t);break}n(e,t),t=t.sibling}i=Po(i,e.internalContextTag,s),i.return=e,e=i}return u(e);case wo:e:{if(null!==t){if(t.tag===Lo){o(e,t.sibling),t=a(t,s),t.type=i.value,t.return=e,e=t;break e}o(e,t)}t=Oo(i,e.internalContextTag,s),t.type=i.value,t.return=e,e=t}return u(e);case xo:e:{for(l=i.key;null!==t;){if(t.key===l){if(t.tag===Mo&&t.stateNode.containerInfo===i.containerInfo&&t.stateNode.implementation===i.implementation){o(e,t.sibling),t=a(t,s),t.pendingProps=i.children||[],t.return=e,e=t;break e}o(e,t);break}n(e,t),t=t.sibling}i=Ao(i,e.internalContextTag,s),i.return=e,e=i}return u(e)}if("string"===typeof i||"number"===typeof i)return i=""+i,null!==t&&t.tag===Ro?(o(e,t.sibling),t=a(t,s),t.pendingProps=i,t.return=e,e=t):(o(e,t),i=So(i,e.internalContextTag,s),i.return=e,e=i),u(e);if(ko(i))return g(e,t,i,s);if(ne(i))return _(e,t,i,s);if(l&&oe(e,i),"undefined"===typeof i)switch(e.tag){case No:case Io:i=e.type,r("152",i.displayName||i.name||"Component")}return o(e,t)}}function ae(e,t,n,o){function i(e,t){t.updater=a,e.stateNode=t,Xt.set(t,e)}var a={isMounted:oi,enqueueSetState:function(n,r,o){n=Xt.get(n);var i=t(n,!1);$o(n,r,void 0===o?null:o,i),e(n,i)},enqueueReplaceState:function(n,r,o){n=Xt.get(n);var i=t(n,!1);ei(n,r,void 0===o?null:o,i),e(n,i)},enqueueForceUpdate:function(n,r){n=Xt.get(n);var o=t(n,!1);ti(n,void 0===r?null:r,o),e(n,o)}};return{adoptClassInstance:i,constructClassInstance:function(e,t){var n=e.type,r=Qo(e),o=Jo(e),a=o?Zo(e,r):bt;return t=new n(t,a),i(e,t),o&&Yo(e,r,a),t},mountClassInstance:function(e,t){var n=e.alternate,o=e.stateNode,i=o.state||null,s=e.pendingProps;s||r("158");var u=Qo(e);o.props=s,o.state=i,o.refs=bt,o.context=Zo(e,u),Pr.enableAsyncSubtreeAPI&&null!=e.type&&null!=e.type.prototype&&!0===e.type.prototype.unstable_isAsyncReactComponent&&(e.internalContextTag|=Xo),"function"===typeof o.componentWillMount&&(u=o.state,o.componentWillMount(),u!==o.state&&a.enqueueReplaceState(o,o.state,null),null!==(u=e.updateQueue)&&(o.state=ni(n,e,u,o,i,s,t))),"function"===typeof o.componentDidMount&&(e.effectTag|=Ko)},updateClassInstance:function(e,t,i){var s=t.stateNode;s.props=t.memoizedProps,s.state=t.memoizedState;var u=t.memoizedProps,l=t.pendingProps;l||null==(l=u)&&r("159");var c=s.context,p=Qo(t);if(p=Zo(t,p),"function"!==typeof s.componentWillReceiveProps||u===l&&c===p||(c=s.state,s.componentWillReceiveProps(l,p),s.state!==c&&a.enqueueReplaceState(s,s.state,null)),c=t.memoizedState,i=null!==t.updateQueue?ni(e,t,t.updateQueue,s,c,l,i):c,!(u!==l||c!==i||ri()||null!==t.updateQueue&&t.updateQueue.hasForceUpdate))return"function"!==typeof s.componentDidUpdate||u===e.memoizedProps&&c===e.memoizedState||(t.effectTag|=Ko),!1;var h=l;if(null===u||null!==t.updateQueue&&t.updateQueue.hasForceUpdate)h=!0;else{var f=t.stateNode,d=t.type;h="function"===typeof f.shouldComponentUpdate?f.shouldComponentUpdate(h,i,p):!d.prototype||!d.prototype.isPureReactComponent||(!wt(u,h)||!wt(c,i))}return h?("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(l,i,p),"function"===typeof s.componentDidUpdate&&(t.effectTag|=Ko)):("function"!==typeof s.componentDidUpdate||u===e.memoizedProps&&c===e.memoizedState||(t.effectTag|=Ko),n(t,l),o(t,i)),s.props=l,s.state=i,s.context=p,h}}}function se(e,t,n,o,i){function a(e,t,n){s(e,t,n,t.pendingWorkPriority)}function s(e,t,n,r){t.child=null===e?ii(t,t.child,n,r):e.child===t.child?ai(t,t.child,n,r):si(t,t.child,n,r)}function u(e,t){var n=t.ref;null===n||e&&e.ref===n||(t.effectTag|=Ri)}function l(e,t,n,r){if(u(e,t),!n)return r&&mi(t,!1),p(e,t);n=t.stateNode,Mi.current=t;var o=n.render();return t.effectTag|=Ai,a(e,t,o),t.memoizedState=n.state,t.memoizedProps=n.props,r&&mi(t,!0),t.child}function c(e){var t=e.stateNode;t.pendingContext?di(e,t.pendingContext,t.pendingContext!==t.context):t.context&&di(e,t.context,!1),v(e,t.containerInfo)}function p(e,t){return ui(e,t),t.child}function h(e,t){switch(t.tag){case _i:c(t);break;case gi:fi(t);break;case xi:v(t,t.stateNode.containerInfo)}return null}var f=e.shouldSetTextContent,d=e.useSyncScheduling,m=e.shouldDeprioritizeSubtree,y=t.pushHostContext,v=t.pushHostContainer,g=n.enterHydrationState,_=n.resetHydrationState,b=n.tryToClaimNextHydratableInstance;e=ae(o,i,function(e,t){e.memoizedProps=t},function(e,t){e.memoizedState=t});var w=e.adoptClassInstance,x=e.constructClassInstance,E=e.mountClassInstance,C=e.updateClassInstance;return{beginWork:function(e,t,n){if(t.pendingWorkPriority===Pi||t.pendingWorkPriority>n)return h(e,t);switch(t.tag){case yi:null!==e&&r("155");var o=t.type,i=t.pendingProps,s=pi(t);return s=ci(t,s),o=o(i,s),t.effectTag|=Ai,"object"===typeof o&&null!==o&&"function"===typeof o.render?(t.tag=gi,i=fi(t),w(t,o),E(t,n),t=l(e,t,!0,i)):(t.tag=vi,a(e,t,o),t.memoizedProps=i,t=t.child),t;case vi:e:{if(i=t.type,n=t.pendingProps,o=t.memoizedProps,hi())null===n&&(n=o);else if(null===n||o===n){t=p(e,t);break e}o=pi(t),o=ci(t,o),i=i(n,o),t.effectTag|=Ai,a(e,t,i),t.memoizedProps=n,t=t.child}return t;case gi:return i=fi(t),o=void 0,null===e?t.stateNode?r("153"):(x(t,t.pendingProps),E(t,n),o=!0):o=C(e,t,n),l(e,t,o,i);case _i:return c(t),o=t.updateQueue,null!==o?(i=t.memoizedState,o=li(e,t,o,null,i,null,n),i===o?(_(),t=p(e,t)):(i=o.element,null!==e&&null!==e.child||!g(t)?(_(),a(e,t,i)):(t.effectTag|=ki,t.child=ii(t,t.child,i,n)),t.memoizedState=o,t=t.child)):(_(),t=p(e,t)),t;case bi:y(t),null===e&&b(t),i=t.type;var T=t.memoizedProps;return o=t.pendingProps,null===o&&null===(o=T)&&r("154"),s=null!==e?e.memoizedProps:null,hi()||null!==o&&T!==o?(T=o.children,f(i,o)?T=null:s&&f(i,s)&&(t.effectTag|=Ii),u(e,t),n!==Oi&&!d&&m(i,o)?(t.pendingWorkPriority=Oi,t=null):(a(e,t,T),t.memoizedProps=o,t=t.child)):t=p(e,t),t;case wi:return null===e&&b(t),e=t.pendingProps,null===e&&(e=t.memoizedProps),t.memoizedProps=e,null;case Ci:t.tag=Ei;case Ei:return n=t.pendingProps,hi()?null===n&&null===(n=e&&e.memoizedProps)&&r("154"):null!==n&&t.memoizedProps!==n||(n=t.memoizedProps),i=n.children,o=t.pendingWorkPriority,t.stateNode=null===e?ii(t,t.stateNode,i,o):e.child===t.child?ai(t,t.stateNode,i,o):si(t,t.stateNode,i,o),t.memoizedProps=n,t.stateNode;case Ti:return null;case xi:e:{if(v(t,t.stateNode.containerInfo),n=t.pendingWorkPriority,i=t.pendingProps,hi())null===i&&null==(i=e&&e.memoizedProps)&&r("154");else if(null===i||t.memoizedProps===i){t=p(e,t);break e}null===e?t.child=si(t,t.child,i,n):a(e,t,i),t.memoizedProps=i,t=t.child}return t;case Si:e:{if(n=t.pendingProps,hi())null===n&&(n=t.memoizedProps);else if(null===n||t.memoizedProps===n){t=p(e,t);break e}a(e,t,n),t.memoizedProps=n,t=t.child}return t;default:r("156")}},beginFailedWork:function(e,t,n){switch(t.tag){case gi:fi(t);break;case _i:c(t);break;default:r("157")}return t.effectTag|=Ni,null===e?t.child=null:t.child!==e.child&&(t.child=e.child),t.pendingWorkPriority===Pi||t.pendingWorkPriority>n?h(e,t):(t.firstEffect=null,t.lastEffect=null,s(e,t,null,n),t.tag===gi&&(e=t.stateNode,t.memoizedProps=e.props,t.memoizedState=e.state),t.child)}}}function ue(e,t,n){var o=e.createInstance,i=e.createTextInstance,a=e.appendInitialChild,s=e.finalizeInitialChildren,u=e.prepareUpdate,l=t.getRootHostContainer,c=t.popHostContext,p=t.getHostContext,h=t.popHostContainer,f=n.prepareToHydrateHostInstance,d=n.prepareToHydrateHostTextInstance,m=n.popHydrationState;return{completeWork:function(e,t,n){var y=t.pendingProps;switch(null===y?y=t.memoizedProps:t.pendingWorkPriority===Ji&&n!==Ji||(t.pendingProps=null),t.tag){case zi:return null;case Bi:return Li(t),null;case Ui:return h(t),Fi(t),y=t.stateNode,y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),null!==e&&null!==e.child||(m(t),t.effectTag&=~Yi),null;case Vi:c(t),n=l();var v=t.type;if(null!==e&&null!=t.stateNode){var g=e.memoizedProps,_=t.stateNode,b=p();y=u(_,v,g,y,n,b),(t.updateQueue=y)&&(t.effectTag|=Qi),e.ref!==t.ref&&(t.effectTag|=Zi)}else{if(!y)return null===t.stateNode&&r("166"),null;if(e=p(),m(t))f(t,n,e)&&(t.effectTag|=Qi);else{e=o(v,y,n,e,t);e:for(g=t.child;null!==g;){if(g.tag===Vi||g.tag===Wi)a(e,g.stateNode);else if(g.tag!==qi&&null!==g.child){g=g.child;continue}if(g===t)break e;for(;null===g.sibling;){if(null===g.return||g.return===t)break e;g=g.return}g=g.sibling}s(e,v,y,n)&&(t.effectTag|=Qi),t.stateNode=e}null!==t.ref&&(t.effectTag|=Zi)}return null;case Wi:if(e&&null!=t.stateNode)e.memoizedProps!==y&&(t.effectTag|=Qi);else{if("string"!==typeof y)return null===t.stateNode&&r("166"),null;e=l(),n=p(),m(t)?d(t)&&(t.effectTag|=Qi):t.stateNode=i(y,e,n,t)}return null;case Hi:(y=t.memoizedProps)||r("165"),t.tag=Gi,n=[];e:for((v=t.stateNode)&&(v.return=t);null!==v;){if(v.tag===Vi||v.tag===Wi||v.tag===qi)r("164");else if(v.tag===Ki)n.push(v.type);else if(null!==v.child){v.child.return=v,v=v.child;continue}for(;null===v.sibling;){if(null===v.return||v.return===t)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}return v=y.handler,y=v(y.props,n),t.child=Di(t,null!==e?e.child:null,y,t.pendingWorkPriority),t.child;case Gi:return t.tag=Hi,null;case Ki:case Xi:return null;case qi:return t.effectTag|=Qi,h(t),null;case ji:r("167");default:r("156")}}}}function le(e){return function(t){try{return e(t)}catch(e){}}}function ce(e,t){function n(e){var n=e.ref;if(null!==n)try{n(null)}catch(n){t(e,n)}}function o(e){return e.tag===oa||e.tag===ra||e.tag===aa}function i(e){for(var t=e;;)if(s(t),null!==t.child&&t.tag!==aa)t.child.return=t,t=t.child;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}}function a(e){for(var t=e,n=!1,o=void 0,a=void 0;;){if(!n){n=t.return;e:for(;;){switch(null===n&&r("160"),n.tag){case oa:o=n.stateNode,a=!1;break e;case ra:case aa:o=n.stateNode.containerInfo,a=!0;break e}n=n.return}n=!0}if(t.tag===oa||t.tag===ia)i(t),a?v(o,t.stateNode):y(o,t.stateNode);else if(t.tag===aa?o=t.stateNode.containerInfo:s(t),null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return;t=t.return,t.tag===aa&&(n=!1)}t.sibling.return=t.return,t=t.sibling}}function s(e){switch("function"===typeof la&&la(e),e.tag){case na:n(e);var r=e.stateNode;if("function"===typeof r.componentWillUnmount)try{r.props=e.memoizedProps,r.state=e.memoizedState,r.componentWillUnmount()}catch(n){t(e,n)}break;case oa:n(e);break;case sa:i(e.stateNode);break;case aa:a(e)}}var u=e.commitMount,l=e.commitUpdate,c=e.resetTextContent,p=e.commitTextUpdate,h=e.appendChild,f=e.appendChildToContainer,d=e.insertBefore,m=e.insertInContainerBefore,y=e.removeChild,v=e.removeChildFromContainer,g=e.getPublicInstance;return{commitPlacement:function(e){e:{for(var t=e.return;null!==t;){if(o(t)){var n=t;break e}t=t.return}r("160"),n=void 0}var i=t=void 0;switch(n.tag){case oa:t=n.stateNode,i=!1;break;case ra:case aa:t=n.stateNode.containerInfo,i=!0;break;default:r("161")}n.effectTag&fa&&(c(t),n.effectTag&=~fa);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||o(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==oa&&n.tag!==ia;){if(n.effectTag&ca)continue t;if(null===n.child||n.tag===aa)continue t;n.child.return=n,n=n.child}if(!(n.effectTag&ca)){n=n.stateNode;break e}}for(var a=e;;){if(a.tag===oa||a.tag===ia)n?i?m(t,a.stateNode,n):d(t,a.stateNode,n):i?f(t,a.stateNode):h(t,a.stateNode);else if(a.tag!==aa&&null!==a.child){a.child.return=a,a=a.child;continue}if(a===e)break;for(;null===a.sibling;){if(null===a.return||a.return===e)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},commitDeletion:function(e){a(e),e.return=null,e.child=null,e.alternate&&(e.alternate.child=null,e.alternate.return=null)},commitWork:function(e,t){switch(t.tag){case na:break;case oa:var n=t.stateNode;if(null!=n){var o=t.memoizedProps;e=null!==e?e.memoizedProps:o;var i=t.type,a=t.updateQueue;t.updateQueue=null,null!==a&&l(n,a,i,e,o,t)}break;case ia:null===t.stateNode&&r("162"),n=t.memoizedProps,p(t.stateNode,null!==e?e.memoizedProps:n,n);break;case ra:case aa:break;default:r("163")}},commitLifeCycles:function(e,t){switch(t.tag){case na:var n=t.stateNode;if(t.effectTag&pa)if(null===e)n.props=t.memoizedProps,n.state=t.memoizedState,n.componentDidMount();else{var o=e.memoizedProps;e=e.memoizedState,n.props=t.memoizedProps,n.state=t.memoizedState,n.componentDidUpdate(o,e)}t.effectTag&ha&&null!==t.updateQueue&&ua(t,t.updateQueue,n);break;case ra:e=t.updateQueue,null!==e&&ua(t,e,t.child&&t.child.stateNode);break;case oa:n=t.stateNode,null===e&&t.effectTag&pa&&u(n,t.type,t.memoizedProps,t);break;case ia:case aa:break;default:r("163")}},commitAttachRef:function(e){var t=e.ref;if(null!==t){var n=e.stateNode;switch(e.tag){case oa:t(g(n));break;default:t(n)}}},commitDetachRef:function(e){null!==(e=e.ref)&&e(null)}}}function pe(e){function t(e){return e===va&&r("174"),e}var n=e.getChildHostContext,o=e.getRootHostContext,i=da(va),a=da(va),s=da(va);return{getHostContext:function(){return t(i.current)},getRootHostContainer:function(){return t(s.current)},popHostContainer:function(e){ma(i,e),ma(a,e),ma(s,e)},popHostContext:function(e){a.current===e&&(ma(i,e),ma(a,e))},pushHostContainer:function(e,t){ya(s,t,e),t=o(t),ya(a,e,e),ya(i,t,e)},pushHostContext:function(e){var r=t(s.current),o=t(i.current);r=n(o,e.type,r),o!==r&&(ya(a,e,e),ya(i,r,e))},resetHostContainer:function(){i.current=va,s.current=va}}}function he(e){function t(e,t){var n=Ea();n.stateNode=t,n.return=e,n.effectTag=wa,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function n(e,t){switch(e.tag){case ga:return a(t,e.type,e.pendingProps);case _a:return s(t,e.pendingProps);default:return!1}}function o(e){for(e=e.return;null!==e&&e.tag!==ga&&e.tag!==ba;)e=e.return;d=e}var i=e.shouldSetTextContent,a=e.canHydrateInstance,s=e.canHydrateTextInstance,u=e.getNextHydratableSibling,l=e.getFirstHydratableChild,c=e.hydrateInstance,p=e.hydrateTextInstance,h=e.didNotHydrateInstance,f=e.didNotFindHydratableInstance;if(e=e.didNotFindHydratableTextInstance,!(a&&s&&u&&l&&c&&p&&h&&f&&e))return{enterHydrationState:function(){return!1},resetHydrationState:function(){},tryToClaimNextHydratableInstance:function(){},prepareToHydrateHostInstance:function(){r("175")},prepareToHydrateHostTextInstance:function(){r("176")},popHydrationState:function(){return!1}};var d=null,m=null,y=!1;return{enterHydrationState:function(e){return m=l(e.stateNode.containerInfo),d=e,y=!0},resetHydrationState:function(){m=d=null,y=!1},tryToClaimNextHydratableInstance:function(e){if(y){var r=m;if(r){if(!n(e,r)){if(!(r=u(r))||!n(e,r))return e.effectTag|=xa,y=!1,void(d=e);t(d,m)}e.stateNode=r,d=e,m=l(r)}else e.effectTag|=xa,y=!1,d=e}},prepareToHydrateHostInstance:function(e,t,n){return t=c(e.stateNode,e.type,e.memoizedProps,t,n,e),e.updateQueue=t,null!==t},prepareToHydrateHostTextInstance:function(e){return p(e.stateNode,e.memoizedProps,e)},popHydrationState:function(e){if(e!==d)return!1;if(!y)return o(e),y=!0,!1;var n=e.type;if(e.tag!==ga||"head"!==n&&"body"!==n&&!i(n,e.memoizedProps))for(n=m;n;)t(e,n),n=u(n);return o(e),m=d?u(e.stateNode):null,!0}}}function fe(e){function t(){for(;null!==G&&G.current.pendingWorkPriority===ka;){G.isScheduled=!1;var e=G.nextScheduledRoot;if(G.nextScheduledRoot=null,G===K)return K=G=null,W=ka,null;G=e}e=G;for(var t=null,n=ka;null!==e;)e.current.pendingWorkPriority!==ka&&(n===ka||n>e.current.pendingWorkPriority)&&(n=e.current.pendingWorkPriority,t=e),e=e.nextScheduledRoot;null!==t?(W=n,Ta(),Qa(),x(),V=Pa(t.current,n),t!==oe&&(re=0,oe=t)):(W=ka,oe=V=null)}function n(n){ee=!0,H=null;var o=n.stateNode;if(o.current===n&&r("177"),W!==Ia&&W!==Na||re++,Sa.current=null,n.effectTag>Fa)if(null!==n.lastEffect){n.lastEffect.nextEffect=n;var i=n.firstEffect}else i=n;else i=n.firstEffect;for(D(),q=i;null!==q;){var a=!1,s=void 0;try{for(;null!==q;){var u=q.effectTag;if(u&Va&&e.resetTextContent(q.stateNode),u&Ha){var l=q.alternate;null!==l&&N(l)}switch(u&~(Wa|qa|Va|Ha|Fa)){case ja:P(q),q.effectTag&=~ja;break;case Ba:P(q),q.effectTag&=~ja,A(q.alternate,q);break;case za:A(q.alternate,q);break;case Ua:te=!0,O(q),te=!1}q=q.nextEffect}}catch(e){a=!0,s=e}a&&(null===q&&r("178"),p(q,s),null!==q&&(q=q.nextEffect))}for(L(),o.current=n,q=i;null!==q;){o=!1,i=void 0;try{for(;null!==q;){var c=q.effectTag;if(c&(za|Wa)&&k(q.alternate,q),c&Ha&&I(q),c&qa)switch(a=q,s=void 0,null!==Y&&(s=Y.get(a),Y.delete(a),null==s&&null!==a.alternate&&(a=a.alternate,s=Y.get(a),Y.delete(a))),null==s&&r("184"),a.tag){case Ya:a.stateNode.componentDidCatch(s.error,{componentStack:s.componentStack});break;case Ga:null===J&&(J=s.error);break;default:r("157")}var h=q.nextEffect;q.nextEffect=null,q=h}}catch(e){o=!0,i=e}o&&(null===q&&r("178"),p(q,i),null!==q&&(q=q.nextEffect))}ee=!1,"function"===typeof Aa&&Aa(n.stateNode),Q&&(Q.forEach(v),Q=null),t()}function o(e){for(;;){var t=S(e.alternate,e,W),n=e.return,r=e.sibling,o=e;if(!(o.pendingWorkPriority!==ka&&o.pendingWorkPriority>W)){for(var i=Za(o),a=o.child;null!==a;)i=Oa(i,a.pendingWorkPriority),a=a.sibling;o.pendingWorkPriority=i}if(null!==t)return t;if(null!==n&&(null===n.firstEffect&&(n.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==n.lastEffect&&(n.lastEffect.nextEffect=e.firstEffect),n.lastEffect=e.lastEffect),e.effectTag>Fa&&(null!==n.lastEffect?n.lastEffect.nextEffect=e:n.firstEffect=e,n.lastEffect=e)),null!==r)return r;if(null===n){H=e;break}e=n}return null}function i(e){var t=C(e.alternate,e,W);return null===t&&(t=o(e)),Sa.current=null,t}function a(e){var t=T(e.alternate,e,W);return null===t&&(t=o(e)),Sa.current=null,t}function s(e){c(Da,e)}function u(){if(null!==Y&&0<Y.size&&W===Na)for(;null!==V;){var e=V;if(null===(V=null!==Y&&(Y.has(e)||null!==e.alternate&&Y.has(e.alternate))?a(V):i(V))&&(null===H&&r("179"),F=Na,n(H),F=W,null===Y||0===Y.size||W!==Na))break}}function l(e,o){if(null!==H?(F=Na,n(H),u()):null===V&&t(),!(W===ka||W>e)){F=W;e:for(;;){if(W<=Na)for(;null!==V&&!(null===(V=i(V))&&(null===H&&r("179"),F=Na,n(H),F=W,u(),W===ka||W>e||W>Na)););else if(null!==o)for(;null!==V&&!z;)if(1<o.timeRemaining()){if(null===(V=i(V)))if(null===H&&r("179"),1<o.timeRemaining()){if(F=Na,n(H),F=W,u(),W===ka||W>e||W<Ra)break}else z=!0}else z=!0;switch(W){case Ia:case Na:if(W<=e)continue e;break e;case Ra:case Ma:case Da:if(null===o)break e;if(!z&&W<=e)continue e;break e;case ka:break e;default:r("181")}}}}function c(e,t){j&&r("182"),j=!0;var n=F,o=!1,i=null;try{l(e,t)}catch(e){o=!0,i=e}for(;o;){if($){J=i;break}var u=V;if(null===u)$=!0;else{var c=p(u,i);if(null===c&&r("183"),!$){try{o=c,i=e,c=t;for(var h=o;null!==u;){switch(u.tag){case Ya:Ca(u);break;case Ka:w(u);break;case Ga:b(u);break;case Xa:b(u)}if(u===h||u.alternate===h)break;u=u.return}V=a(o),l(i,c)}catch(e){o=!0,i=e;continue}break}}}if(F=n,null!==t&&(X=!1),W>Na&&!X&&(R(s),X=!0),e=J,$=z=j=!1,oe=Z=Y=J=null,re=0,null!==e)throw e}function p(e,t){var n=Sa.current=null,r=!1,o=!1,i=null;if(e.tag===Ga)n=e,f(e)&&($=!0);else for(var a=e.return;null!==a&&null===n;){if(a.tag===Ya?"function"===typeof a.stateNode.componentDidCatch&&(r=!0,i=h(a),n=a,o=!0):a.tag===Ga&&(n=a),f(a)){if(te||null!==Q&&(Q.has(a)||null!==a.alternate&&Q.has(a.alternate)))return null;n=null,o=!1}a=a.return}if(null!==n){null===Z&&(Z=new Set),Z.add(n);var s="";a=e;do{e:switch(a.tag){case ho:case fo:case mo:case yo:var u=a._debugOwner,l=a._debugSource,c=h(a),p=null;u&&(p=h(u)),u=l,c="\n    in "+(c||"Unknown")+(u?" (at "+u.fileName.replace(/^.*[\\\/]/,"")+":"+u.lineNumber+")":p?" (created by "+p+")":"");break e;default:c=""}s+=c,a=a.return}while(a);a=s,e=h(e),null===Y&&(Y=new Map),t={componentName:e,componentStack:a,error:t,errorBoundary:r?n.stateNode:null,errorBoundaryFound:r,errorBoundaryName:i,willRetry:o},Y.set(n,t);try{console.error(t.error)}catch(e){console.error(e)}return ee?(null===Q&&(Q=new Set),Q.add(n)):v(n),n}return null===J&&(J=t),null}function f(e){return null!==Z&&(Z.has(e)||null!==e.alternate&&Z.has(e.alternate))}function d(e,t){return m(e,t,!1)}function m(e,t){re>ne&&($=!0,r("185")),!j&&t<=W&&(V=null);for(var n=!0;null!==e&&n;){if(n=!1,(e.pendingWorkPriority===ka||e.pendingWorkPriority>t)&&(n=!0,e.pendingWorkPriority=t),null!==e.alternate&&(e.alternate.pendingWorkPriority===ka||e.alternate.pendingWorkPriority>t)&&(n=!0,e.alternate.pendingWorkPriority=t),null===e.return){if(e.tag!==Ga)break;var o=e.stateNode;if(t===ka||o.isScheduled||(o.isScheduled=!0,K?K.nextScheduledRoot=o:G=o,K=o),!j)switch(t){case Ia:U?c(Ia,null):c(Na,null);break;case Na:B||r("186");break;default:X||(R(s),X=!0)}}e=e.return}}function y(e,t){var n=F;return n===ka&&(n=!M||e.internalContextTag&La||t?Ma:Ia),n===Ia&&(j||B)?Na:n}function v(e){m(e,Na,!0)}var g=pe(e),_=he(e),b=g.popHostContainer,w=g.popHostContext,x=g.resetHostContainer,E=se(e,g,_,d,y),C=E.beginWork,T=E.beginFailedWork,S=ue(e,g,_).completeWork;g=ce(e,p);var P=g.commitPlacement,O=g.commitDeletion,A=g.commitWork,k=g.commitLifeCycles,I=g.commitAttachRef,N=g.commitDetachRef,R=e.scheduleDeferredCallback,M=e.useSyncScheduling,D=e.prepareForCommit,L=e.resetAfterCommit,F=ka,j=!1,z=!1,B=!1,U=!1,V=null,W=ka,q=null,H=null,G=null,K=null,X=!1,Y=null,Z=null,Q=null,J=null,$=!1,ee=!1,te=!1,ne=1e3,re=0,oe=null;return{scheduleUpdate:d,getPriorityContext:y,batchedUpdates:function(e,t){var n=B;B=!0;try{return e(t)}finally{B=n,j||B||c(Na,null)}},unbatchedUpdates:function(e){var t=U,n=B;U=B,B=!1;try{return e()}finally{B=n,U=t}},flushSync:function(e){var t=B,n=F;B=!0,F=Ia;try{return e()}finally{B=t,F=n,j&&r("187"),c(Na,null)}},deferredUpdates:function(e){var t=F;F=Ma;try{return e()}finally{F=t}}}}function de(){r("196")}function me(e){return e?(e=Xt.get(e),"number"===typeof e.tag?de(e):e._processChildContext(e._context)):bt}function ye(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ve(e,t){var n=ye(e);e=0;for(var r;n;){if(n.nodeType===is){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ye(n)}}function ge(){return!as&&yt.canUseDOM&&(as="textContent"in document.documentElement?"textContent":"innerText"),as}function _e(){r("211")}function be(){r("212")}function we(e){if(null==e)return null;if(e.nodeType===ps)return e;var t=Xt.get(e);if(t)return"number"===typeof t.tag?_e(t):be(t);"function"===typeof e.render?r("188"):r("213",Object.keys(e))}function xe(e){if(void 0!==e._hostParent)return e._hostParent;if("number"===typeof e.tag){do{e=e.return}while(e&&e.tag!==hs);if(e)return e}return null}function Ee(e,t){for(var n=0,r=e;r;r=xe(r))n++;r=0;for(var o=t;o;o=xe(o))r++;for(;0<n-r;)e=xe(e),n--;for(;0<r-n;)t=xe(t),r--;for(;n--;){if(e===t||e===t.alternate)return e;e=xe(e),t=xe(t)}return null}function Ce(e,t,n){(t=ds(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=T(n._dispatchListeners,t),n._dispatchInstances=T(n._dispatchInstances,e))}function Te(e){e&&e.dispatchConfig.phasedRegistrationNames&&fs.traverseTwoPhase(e._targetInst,Ce,e)}function Se(e){if(e&&e.dispatchConfig.phasedRegistrationNames){var t=e._targetInst;t=t?fs.getParentInstance(t):null,fs.traverseTwoPhase(t,Ce,e)}}function Pe(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=ds(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=T(n._dispatchListeners,t),n._dispatchInstances=T(n._dispatchInstances,e))}function Oe(e){e&&e.dispatchConfig.registrationName&&Pe(e._targetInst,null,e)}function Ae(e,t,n,r){this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface;for(var o in e)e.hasOwnProperty(o)&&((t=e[o])?this[o]=t(n):"target"===o?this.target=r:this[o]=n[o]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?_t.thatReturnsTrue:_t.thatReturnsFalse,this.isPropagationStopped=_t.thatReturnsFalse,this}function ke(e,t,n,r){if(this.eventPool.length){var o=this.eventPool.pop();return this.call(o,e,t,n,r),o}return new this(e,t,n,r)}function Ie(e){e instanceof this||r("223"),e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function Ne(e){e.eventPool=[],e.getPooled=ke,e.release=Ie}function Re(e,t,n,r){return Ae.call(this,e,t,n,r)}function Me(e,t,n,r){return Ae.call(this,e,t,n,r)}function De(e,t){switch(e){case"topKeyUp":return-1!==ws.indexOf(t.keyCode);case"topKeyDown":return 229!==t.keyCode;case"topKeyPress":case"topMouseDown":case"topBlur":return!0;default:return!1}}function Le(e){return e=e.detail,"object"===typeof e&&"data"in e?e.data:null}function Fe(e,t){switch(e){case"topCompositionEnd":return Le(t);case"topKeyPress":return 32!==t.which?null:(ks=!0,Os);case"topTextInput":return e=t.data,e===Os&&ks?null:e;default:return null}}function je(e,t){if(Is)return"topCompositionEnd"===e||!xs&&De(e,t)?(e=gs.getData(),gs.reset(),Is=!1,e):null;switch(e){case"topPaste":return null;case"topKeyPress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"topCompositionEnd":return Ps?null:t.data;default:return null}}function ze(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Rs[e.type]:"textarea"===t}function Be(e,t,n){return e=Ae.getPooled(Ms.change,e,t,n),e.type="change",hn.enqueueStateRestore(n),ms.accumulateTwoPhaseDispatches(e),e}function Ue(e){wn.enqueueEvents(e),wn.processEventQueue(!1)}function Ve(e){var t=Kt.getNodeFromInstance(e);if($n.updateValueIfChanged(t))return e}function We(e,t){if("topChange"===e)return t}function qe(){Ds&&(Ds.detachEvent("onpropertychange",He),Ls=Ds=null)}function He(e){"value"===e.propertyName&&Ve(Ls)&&(e=Be(Ls,e,E(e)),dn.batchedUpdates(Ue,e))}function Ge(e,t,n){"topFocus"===e?(qe(),Ds=t,Ls=n,Ds.attachEvent("onpropertychange",He)):"topBlur"===e&&qe()}function Ke(e){if("topSelectionChange"===e||"topKeyUp"===e||"topKeyDown"===e)return Ve(Ls)}function Xe(e,t){if("topClick"===e)return Ve(t)}function Ye(e,t){if("topInput"===e||"topChange"===e)return Ve(t)}function Ze(e,t,n,r){return Ae.call(this,e,t,n,r)}function Qe(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=zs[e])&&!!t[e]}function Je(){return Qe}function $e(e,t,n,r){return Ae.call(this,e,t,n,r)}function et(e,t){if(Xs||null==Hs||Hs!==Ct())return null;var n=Hs;return"selectionStart"in n&&cs.hasSelectionCapabilities(n)?n={start:n.selectionStart,end:n.selectionEnd}:window.getSelection?(n=window.getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}):n=void 0,Ks&&wt(Ks,n)?null:(Ks=n,e=Ae.getPooled(qs.select,Gs,e,t),e.type="select",e.target=Hs,ms.accumulateTwoPhaseDispatches(e),e)}function tt(e,t,n,r){return Ae.call(this,e,t,n,r)}function nt(e,t,n,r){return Ae.call(this,e,t,n,r)}function rt(e,t,n,r){return Ae.call(this,e,t,n,r)}function ot(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,32<=e||13===e?e:0}function it(e,t,n,r){return Ae.call(this,e,t,n,r)}function at(e,t,n,r){return Ae.call(this,e,t,n,r)}function st(e,t,n,r){return Ae.call(this,e,t,n,r)}function ut(e,t,n,r){return Ae.call(this,e,t,n,r)}function lt(e,t,n,r){return Ae.call(this,e,t,n,r)}function ct(e){return e[1].toUpperCase()}function pt(e){return!(!e||e.nodeType!==fu&&e.nodeType!==yu&&e.nodeType!==vu&&(e.nodeType!==mu||" react-mount-point-unstable "!==e.nodeValue))}function ht(e){return!(!(e=e?e.nodeType===yu?e.documentElement:e.firstChild:null)||e.nodeType!==fu||!e.hasAttribute(gu))}function ft(e,t,n,o,i){pt(n)||r("200");var a=n._reactRootContainer;if(a)Du.updateContainer(t,a,e,i);else{if(!o&&!ht(n))for(o=void 0;o=n.lastChild;)n.removeChild(o);var s=Du.createContainer(n);a=n._reactRootContainer=s,Du.unbatchedUpdates(function(){Du.updateContainer(t,s,e,i)})}return Du.getPublicRootInstance(a)}function dt(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return pt(t)||r("200"),_o.createPortal(e,t,null,n)}var mt=n(1);n(49);var yt=n(154),vt=n(76),gt=n(155),_t=n(35),bt=n(77),wt=n(156),xt=n(157),Et=n(160),Ct=n(161);mt||r("227");var Tt,St,Pt={Namespaces:{html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"},getIntrinsicNamespace:o,getChildNamespace:function(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?o(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}},Ot=null,At={},kt={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},possibleRegistrationNames:null,injectEventPluginOrder:function(e){Ot&&r("101"),Ot=Array.prototype.slice.call(e),i()},injectEventPluginsByName:function(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var o=e[t];At.hasOwnProperty(t)&&At[t]===o||(At[t]&&r("102",t),At[t]=o,n=!0)}n&&i()}},It=kt,Nt={children:!0,dangerouslySetInnerHTML:!0,autoFocus:!0,defaultValue:!0,defaultChecked:!0,innerHTML:!0,suppressContentEditableWarning:!0,style:!0},Rt={MUST_USE_PROPERTY:1,HAS_BOOLEAN_VALUE:4,HAS_NUMERIC_VALUE:8,HAS_POSITIVE_NUMERIC_VALUE:24,HAS_OVERLOADED_BOOLEAN_VALUE:32,HAS_STRING_BOOLEAN_VALUE:64,injectDOMPropertyConfig:function(e){var t=Rt,n=e.Properties||{},o=e.DOMAttributeNamespaces||{},i=e.DOMAttributeNames||{};e=e.DOMMutationMethods||{};for(var a in n){Mt.properties.hasOwnProperty(a)&&r("48",a);var u=a.toLowerCase(),l=n[a];u={attributeName:u,attributeNamespace:null,propertyName:a,mutationMethod:null,mustUseProperty:s(l,t.MUST_USE_PROPERTY),hasBooleanValue:s(l,t.HAS_BOOLEAN_VALUE),hasNumericValue:s(l,t.HAS_NUMERIC_VALUE),hasPositiveNumericValue:s(l,t.HAS_POSITIVE_NUMERIC_VALUE),hasOverloadedBooleanValue:s(l,t.HAS_OVERLOADED_BOOLEAN_VALUE),hasStringBooleanValue:s(l,t.HAS_STRING_BOOLEAN_VALUE)},1>=u.hasBooleanValue+u.hasNumericValue+u.hasOverloadedBooleanValue||r("50",a),i.hasOwnProperty(a)&&(u.attributeName=i[a]),o.hasOwnProperty(a)&&(u.attributeNamespace=o[a]),e.hasOwnProperty(a)&&(u.mutationMethod=e[a]),Mt.properties[a]=u}}},Mt={ID_ATTRIBUTE_NAME:"data-reactid",ROOT_ATTRIBUTE_NAME:"data-reactroot",ATTRIBUTE_NAME_START_CHAR:":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",ATTRIBUTE_NAME_CHAR:":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",properties:{},shouldSetAttribute:function(e,t){if(Mt.isReservedProp(e)||!("o"!==e[0]&&"O"!==e[0]||"n"!==e[1]&&"N"!==e[1]))return!1;if(null===t)return!0;switch(typeof t){case"boolean":return Mt.shouldAttributeAcceptBooleanValue(e);case"undefined":case"number":case"string":case"object":return!0;default:return!1}},getPropertyInfo:function(e){return Mt.properties.hasOwnProperty(e)?Mt.properties[e]:null},shouldAttributeAcceptBooleanValue:function(e){if(Mt.isReservedProp(e))return!0;var t=Mt.getPropertyInfo(e);return t?t.hasBooleanValue||t.hasStringBooleanValue||t.hasOverloadedBooleanValue:"data-"===(e=e.toLowerCase().slice(0,5))||"aria-"===e},isReservedProp:function(e){return Nt.hasOwnProperty(e)},injection:Rt},Dt=Mt,Lt={IndeterminateComponent:0,FunctionalComponent:1,ClassComponent:2,HostRoot:3,HostPortal:4,HostComponent:5,HostText:6,CoroutineComponent:7,CoroutineHandlerPhase:8,YieldComponent:9,Fragment:10},Ft={ELEMENT_NODE:1,TEXT_NODE:3,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_FRAGMENT_NODE:11},jt=Lt.HostComponent,zt=Lt.HostText,Bt=Ft.ELEMENT_NODE,Ut=Ft.COMMENT_NODE,Vt=Dt.ID_ATTRIBUTE_NAME,Wt={hasCachedChildNodes:1},qt=Math.random().toString(36).slice(2),Ht="__reactInternalInstance$"+qt,Gt="__reactEventHandlers$"+qt,Kt={getClosestInstanceFromNode:p,getInstanceFromNode:function(e){var t=e[Ht];return t?t.tag===jt||t.tag===zt?t:t._hostNode===e?t:null:(t=p(e),null!=t&&t._hostNode===e?t:null)},getNodeFromInstance:function(e){if(e.tag===jt||e.tag===zt)return e.stateNode;if(void 0===e._hostNode&&r("33"),e._hostNode)return e._hostNode;for(var t=[];!e._hostNode;)t.push(e),e._hostParent||r("34"),e=e._hostParent;for(;t.length;e=t.pop())c(e,e._hostNode);return e._hostNode},precacheChildNodes:c,precacheNode:l,uncacheNode:function(e){var t=e._hostNode;t&&(delete t[Ht],e._hostNode=null)},precacheFiberNode:function(e,t){t[Ht]=e},getFiberCurrentPropsFromNode:function(e){return e[Gt]||null},updateFiberProps:function(e,t){e[Gt]=t}},Xt={remove:function(e){e._reactInternalFiber=void 0},get:function(e){return e._reactInternalFiber},has:function(e){return void 0!==e._reactInternalFiber},set:function(e,t){e._reactInternalFiber=t}},Yt={ReactCurrentOwner:mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner},Zt={NoEffect:0,PerformedWork:1,Placement:2,Update:4,PlacementAndUpdate:6,Deletion:8,ContentReset:16,Callback:32,Err:64,Ref:128},Qt=Lt.HostComponent,Jt=Lt.HostRoot,$t=Lt.HostPortal,en=Lt.HostText,tn=Zt.NoEffect,nn=Zt.Placement,rn={isFiberMounted:function(e){return 2===f(e)},isMounted:function(e){return!!(e=Xt.get(e))&&2===f(e)},findCurrentFiberUsingSlowPath:m,findCurrentHostFiber:function(e){if(!(e=m(e)))return null;for(var t=e;;){if(t.tag===Qt||t.tag===en)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null},findCurrentHostFiberWithNoPortals:function(e){if(!(e=m(e)))return null;for(var t=e;;){if(t.tag===Qt||t.tag===en)return t;if(t.child&&t.tag!==$t)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}},on={_caughtError:null,_hasCaughtError:!1,_rethrowError:null,_hasRethrowError:!1,injection:{injectErrorUtils:function(e){"function"!==typeof e.invokeGuardedCallback&&r("197"),y=e.invokeGuardedCallback}},invokeGuardedCallback:function(e,t,n,r,o,i,a,s,u){y.apply(on,arguments)},invokeGuardedCallbackAndCatchFirstError:function(e,t,n,r,o,i,a,s,u){if(on.invokeGuardedCallback.apply(this,arguments),on.hasCaughtError()){var l=on.clearCaughtError();on._hasRethrowError||(on._hasRethrowError=!0,on._rethrowError=l)}},rethrowCaughtError:function(){return v.apply(on,arguments)},hasCaughtError:function(){return on._hasCaughtError},clearCaughtError:function(){if(on._hasCaughtError){var e=on._caughtError;return on._caughtError=null,on._hasCaughtError=!1,e}r("198")}},an=on,sn={isEndish:function(e){return"topMouseUp"===e||"topTouchEnd"===e||"topTouchCancel"===e},isMoveish:function(e){return"topMouseMove"===e||"topTouchMove"===e},isStartish:function(e){return"topMouseDown"===e||"topTouchStart"===e},executeDirectDispatch:function(e){var t=e._dispatchListeners,n=e._dispatchInstances;return Array.isArray(t)&&r("103"),e.currentTarget=t?sn.getNodeFromInstance(n):null,t=t?t(e):null,e.currentTarget=null,e._dispatchListeners=null,e._dispatchInstances=null,t},executeDispatchesInOrder:function(e,t){var n=e._dispatchListeners,r=e._dispatchInstances;if(Array.isArray(n))for(var o=0;o<n.length&&!e.isPropagationStopped();o++)g(e,t,n[o],r[o]);else n&&g(e,t,n,r);e._dispatchListeners=null,e._dispatchInstances=null},executeDispatchesInOrderStopAtTrue:function(e){e:{var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t)){for(var r=0;r<t.length&&!e.isPropagationStopped();r++)if(t[r](e,n[r])){t=n[r];break e}}else if(t&&t(e,n)){t=n;break e}t=null}return e._dispatchInstances=null,e._dispatchListeners=null,t},hasDispatches:function(e){return!!e._dispatchListeners},getFiberCurrentPropsFromNode:function(e){return Tt.getFiberCurrentPropsFromNode(e)},getInstanceFromNode:function(e){return Tt.getInstanceFromNode(e)},getNodeFromInstance:function(e){return Tt.getNodeFromInstance(e)},injection:{injectComponentTree:function(e){Tt=e}}},un=sn,ln=null,cn=null,pn=null,hn={injection:{injectFiberControlledHostComponent:function(e){ln=e}},enqueueStateRestore:function(e){cn?pn?pn.push(e):pn=[e]:cn=e},restoreStateIfNeeded:function(){if(cn){var e=cn,t=pn;if(pn=cn=null,_(e),t)for(e=0;e<t.length;e++)_(t[e])}}},fn=!1,dn={batchedUpdates:function(e,t){if(fn)return b(x,e,t);fn=!0;try{return b(x,e,t)}finally{fn=!1,hn.restoreStateIfNeeded()}},injection:{injectStackBatchedUpdates:function(e){b=e},injectFiberBatchedUpdates:function(e){w=e}}},mn=Ft.TEXT_NODE,yn=Lt.HostRoot,vn=[],gn={_enabled:!0,_handleTopLevel:null,setHandleTopLevel:function(e){gn._handleTopLevel=e},setEnabled:function(e){gn._enabled=!!e},isEnabled:function(){return gn._enabled},trapBubbledEvent:function(e,t,n){return n?gt.listen(n,t,gn.dispatchEvent.bind(null,e)):null},trapCapturedEvent:function(e,t,n){return n?gt.capture(n,t,gn.dispatchEvent.bind(null,e)):null},dispatchEvent:function(e,t){if(gn._enabled){var n=E(t);if(n=Kt.getClosestInstanceFromNode(n),null===n||"number"!==typeof n.tag||rn.isFiberMounted(n)||(n=null),vn.length){var r=vn.pop();r.topLevelType=e,r.nativeEvent=t,r.targetInst=n,e=r}else e={topLevelType:e,nativeEvent:t,targetInst:n,ancestors:[]};try{dn.batchedUpdates(C,e)}finally{e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>vn.length&&vn.push(e)}}}},_n=gn,bn=null,wn={injection:{injectEventPluginOrder:It.injectEventPluginOrder,injectEventPluginsByName:It.injectEventPluginsByName},getListener:function(e,t){if("number"===typeof e.tag){var n=e.stateNode;if(!n)return null;var o=un.getFiberCurrentPropsFromNode(n);if(!o)return null;if(n=o[t],k(t,e.type,o))return null}else{if("string"===typeof(o=e._currentElement)||"number"===typeof o||!e._rootNodeID)return null;if(e=o.props,n=e[t],k(t,o.type,e))return null}return n&&"function"!==typeof n&&r("231",t,typeof n),n},extractEvents:function(e,t,n,r){for(var o,i=It.plugins,a=0;a<i.length;a++){var s=i[a];s&&(s=s.extractEvents(e,t,n,r))&&(o=T(o,s))}return o},enqueueEvents:function(e){e&&(bn=T(bn,e))},processEventQueue:function(e){var t=bn;bn=null,e?S(t,O):S(t,A),bn&&r("95"),an.rethrowCaughtError()}};yt.canUseDOM&&(St=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("",""));var xn={animationend:N("Animation","AnimationEnd"),animationiteration:N("Animation","AnimationIteration"),animationstart:N("Animation","AnimationStart"),transitionend:N("Transition","TransitionEnd")},En={},Cn={};yt.canUseDOM&&(Cn=document.createElement("div").style,"AnimationEvent"in window||(delete xn.animationend.animation,delete xn.animationiteration.animation,delete xn.animationstart.animation),"TransitionEvent"in window||delete xn.transitionend.transition);var Tn={topAbort:"abort",topAnimationEnd:R("animationend")||"animationend",topAnimationIteration:R("animationiteration")||"animationiteration",topAnimationStart:R("animationstart")||"animationstart",topBlur:"blur",topCancel:"cancel",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topChange:"change",topClick:"click",topClose:"close",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoadedData:"loadeddata",topLoad:"load",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topScroll:"scroll",topSeeked:"seeked",topSeeking:"seeking",topSelectionChange:"selectionchange",topStalled:"stalled",topSuspend:"suspend",topTextInput:"textInput",topTimeUpdate:"timeupdate",topToggle:"toggle",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topTransitionEnd:R("transitionend")||"transitionend",topVolumeChange:"volumechange",topWaiting:"waiting",topWheel:"wheel"},Sn={},Pn=0,On="_reactListenersID"+(""+Math.random()).slice(2),An=vt({},{handleTopLevel:function(e,t,n,r){e=wn.extractEvents(e,t,n,r),wn.enqueueEvents(e),wn.processEventQueue(!1)}},{setEnabled:function(e){_n&&_n.setEnabled(e)},isEnabled:function(){return!(!_n||!_n.isEnabled())},listenTo:function(e,t){var n=M(t);e=It.registrationNameDependencies[e];for(var r=0;r<e.length;r++){var o=e[r];n.hasOwnProperty(o)&&n[o]||("topWheel"===o?I("wheel")?_n.trapBubbledEvent("topWheel","wheel",t):I("mousewheel")?_n.trapBubbledEvent("topWheel","mousewheel",t):_n.trapBubbledEvent("topWheel","DOMMouseScroll",t):"topScroll"===o?_n.trapCapturedEvent("topScroll","scroll",t):"topFocus"===o||"topBlur"===o?(_n.trapCapturedEvent("topFocus","focus",t),_n.trapCapturedEvent("topBlur","blur",t),n.topBlur=!0,n.topFocus=!0):"topCancel"===o?(I("cancel",!0)&&_n.trapCapturedEvent("topCancel","cancel",t),n.topCancel=!0):"topClose"===o?(I("close",!0)&&_n.trapCapturedEvent("topClose","close",t),n.topClose=!0):Tn.hasOwnProperty(o)&&_n.trapBubbledEvent(o,Tn[o],t),n[o]=!0)}},isListeningToAllDependencies:function(e,t){t=M(t),e=It.registrationNameDependencies[e];for(var n=0;n<e.length;n++){var r=e[n];if(!t.hasOwnProperty(r)||!t[r])return!1}return!0},trapBubbledEvent:function(e,t,n){return _n.trapBubbledEvent(e,t,n)},trapCapturedEvent:function(e,t,n){return _n.trapCapturedEvent(e,t,n)}}),kn={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},In=["Webkit","ms","Moz","O"];Object.keys(kn).forEach(function(e){In.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),kn[t]=kn[e]})});var Nn={isUnitlessNumber:kn,shorthandPropertyExpansions:{background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}}},Rn=Nn.isUnitlessNumber,Mn=!1;if(yt.canUseDOM){var Dn=document.createElement("div").style;try{Dn.font=""}catch(e){Mn=!0}}var Ln,Fn={createDangerousStringForStyles:function(){},setValueForStyles:function(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),o=n,i=t[n];if(o=null==i||"boolean"===typeof i||""===i?"":r||"number"!==typeof i||0===i||Rn.hasOwnProperty(o)&&Rn[o]?(""+i).trim():i+"px","float"===n&&(n="cssFloat"),r)e.setProperty(n,o);else if(o)e[n]=o;else if(r=Mn&&Nn.shorthandPropertyExpansions[n])for(var a in r)e[a]="";else e[n]=""}}},jn=new RegExp("^["+Dt.ATTRIBUTE_NAME_START_CHAR+"]["+Dt.ATTRIBUTE_NAME_CHAR+"]*$"),zn={},Bn={},Un={setAttributeForID:function(e,t){e.setAttribute(Dt.ID_ATTRIBUTE_NAME,t)},setAttributeForRoot:function(e){e.setAttribute(Dt.ROOT_ATTRIBUTE_NAME,"")},getValueForProperty:function(){},getValueForAttribute:function(){},setValueForProperty:function(e,t,n){var r=Dt.getPropertyInfo(t);if(r&&Dt.shouldSetAttribute(t,n)){var o=r.mutationMethod;o?o(e,n):null==n||r.hasBooleanValue&&!n||r.hasNumericValue&&isNaN(n)||r.hasPositiveNumericValue&&1>n||r.hasOverloadedBooleanValue&&!1===n?Un.deleteValueForProperty(e,t):r.mustUseProperty?e[r.propertyName]=n:(t=r.attributeName,(o=r.attributeNamespace)?e.setAttributeNS(o,t,""+n):r.hasBooleanValue||r.hasOverloadedBooleanValue&&!0===n?e.setAttribute(t,""):e.setAttribute(t,""+n))}else Un.setValueForAttribute(e,t,Dt.shouldSetAttribute(t,n)?n:null)},setValueForAttribute:function(e,t,n){D(t)&&(null==n?e.removeAttribute(t):e.setAttribute(t,""+n))},deleteValueForAttribute:function(e,t){e.removeAttribute(t)},deleteValueForProperty:function(e,t){var n=Dt.getPropertyInfo(t);n?(t=n.mutationMethod)?t(e,void 0):n.mustUseProperty?e[n.propertyName]=!n.hasBooleanValue&&"":e.removeAttribute(n.attributeName):e.removeAttribute(t)}},Vn=Un,Wn=Yt.ReactDebugCurrentFrame,qn={current:null,phase:null,resetCurrentFiber:function(){Wn.getCurrentStack=null,qn.current=null,qn.phase=null},setCurrentFiber:function(e,t){Wn.getCurrentStack=L,qn.current=e,qn.phase=t},getCurrentFiberOwnerName:function(){return null},getCurrentFiberStackAddendum:L},Hn=qn,Gn={getHostProps:function(e,t){var n=t.value,r=t.checked;return vt({type:void 0,step:void 0,min:void 0,max:void 0},t,{defaultChecked:void 0,defaultValue:void 0,value:null!=n?n:e._wrapperState.initialValue,checked:null!=r?r:e._wrapperState.initialChecked})},initWrapperState:function(e,t){var n=t.defaultValue;e._wrapperState={initialChecked:null!=t.checked?t.checked:t.defaultChecked,initialValue:null!=t.value?t.value:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}},updateWrapper:function(e,t){var n=t.checked;null!=n&&Vn.setValueForProperty(e,"checked",n||!1),n=t.value,null!=n?0===n&&""===e.value?e.value="0":"number"===t.type?(t=parseFloat(e.value)||0,(n!=t||n==t&&e.value!=n)&&(e.value=""+n)):e.value!==""+n&&(e.value=""+n):(null==t.value&&null!=t.defaultValue&&e.defaultValue!==""+t.defaultValue&&(e.defaultValue=""+t.defaultValue),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked))},postMountWrapper:function(e,t){switch(t.type){case"submit":case"reset":break;case"color":case"date":case"datetime":case"datetime-local":case"month":case"time":case"week":e.value="",e.value=e.defaultValue;break;default:e.value=e.value}t=e.name,""!==t&&(e.name=""),e.defaultChecked=!e.defaultChecked,e.defaultChecked=!e.defaultChecked,""!==t&&(e.name=t)},restoreControlledState:function(e,t){Gn.updateWrapper(e,t);var n=t.name;if("radio"===t.type&&null!=n){for(t=e;t.parentNode;)t=t.parentNode;for(n=t.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),t=0;t<n.length;t++){var o=n[t];if(o!==e&&o.form===e.form){var i=Kt.getFiberCurrentPropsFromNode(o);i||r("90"),Gn.updateWrapper(o,i)}}}}},Kn=Gn,Xn={validateProps:function(){},postMountWrapper:function(e,t){null!=t.value&&e.setAttribute("value",t.value)},getHostProps:function(e,t){return e=vt({children:void 0},t),(t=F(t.children))&&(e.children=t),e}},Yn={getHostProps:function(e,t){return vt({},t,{value:void 0})},initWrapperState:function(e,t){var n=t.value;e._wrapperState={initialValue:null!=n?n:t.defaultValue,wasMultiple:!!t.multiple}},postMountWrapper:function(e,t){e.multiple=!!t.multiple;var n=t.value;null!=n?j(e,!!t.multiple,n):null!=t.defaultValue&&j(e,!!t.multiple,t.defaultValue)},postUpdateWrapper:function(e,t){e._wrapperState.initialValue=void 0;var n=e._wrapperState.wasMultiple;e._wrapperState.wasMultiple=!!t.multiple;var r=t.value;null!=r?j(e,!!t.multiple,r):n!==!!t.multiple&&(null!=t.defaultValue?j(e,!!t.multiple,t.defaultValue):j(e,!!t.multiple,t.multiple?[]:""))},restoreControlledState:function(e,t){var n=t.value;null!=n&&j(e,!!t.multiple,n)}},Zn={getHostProps:function(e,t){return null!=t.dangerouslySetInnerHTML&&r("91"),vt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})},initWrapperState:function(e,t){var n=t.value,o=n;null==n&&(n=t.defaultValue,t=t.children,null!=t&&(null!=n&&r("92"),Array.isArray(t)&&(1>=t.length||r("93"),t=t[0]),n=""+t),null==n&&(n=""),o=n),e._wrapperState={initialValue:""+o}},updateWrapper:function(e,t){var n=t.value;null!=n&&(n=""+n,n!==e.value&&(e.value=n),null==t.defaultValue&&(e.defaultValue=n)),null!=t.defaultValue&&(e.defaultValue=t.defaultValue)},postMountWrapper:function(e){var t=e.textContent;t===e._wrapperState.initialValue&&(e.value=t)},restoreControlledState:function(e,t){Zn.updateWrapper(e,t)}},Qn=Zn,Jn=vt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),$n={_getTrackerFromNode:function(e){return e._valueTracker},track:function(e){e._valueTracker||(e._valueTracker=U(e))},updateValueIfChanged:function(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=B(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)},stopTracking:function(e){(e=e._valueTracker)&&e.stopTracking()}},er=Pt.Namespaces,tr=function(e){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n)})}:e}(function(e,t){if(e.namespaceURI!==er.svg||"innerHTML"in e)e.innerHTML=t;else for(Ln=Ln||document.createElement("div"),Ln.innerHTML="<svg>"+t+"</svg>",t=Ln.firstChild;t.firstChild;)e.appendChild(t.firstChild)}),nr=/["'&<>]/,rr=Ft.TEXT_NODE;yt.canUseDOM&&("textContent"in document.documentElement||(W=function(e,t){if(e.nodeType===rr)e.nodeValue=t;else{if("boolean"===typeof t||"number"===typeof t)t=""+t;else{t=""+t;var n=nr.exec(t);if(n){var r,o="",i=0;for(r=n.index;r<t.length;r++){switch(t.charCodeAt(r)){case 34:n="&quot;";break;case 38:n="&amp;";break;case 39:n="&#x27;";break;case 60:n="&lt;";break;case 62:n="&gt;";break;default:continue}i!==r&&(o+=t.substring(i,r)),i=r+1,o+=n}t=i!==r?o+t.substring(i,r):o}}tr(e,t)}}));var or=W,ir=(Hn.getCurrentFiberOwnerName,Ft.DOCUMENT_NODE),ar=Ft.DOCUMENT_FRAGMENT_NODE,sr=An.listenTo,ur=It.registrationNameModules,lr=Pt.Namespaces.html,cr=Pt.getIntrinsicNamespace,pr={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"},hr={createElement:function(e,t,n,r){return n=n.nodeType===ir?n:n.ownerDocument,r===lr&&(r=cr(e)),r===lr?"script"===e?(e=n.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):e="string"===typeof t.is?n.createElement(e,{is:t.is}):n.createElement(e):e=n.createElementNS(r,e),e},createTextNode:function(e,t){return(t.nodeType===ir?t:t.ownerDocument).createTextNode(e)},setInitialProperties:function(e,t,n,r){var o=V(t,n);switch(t){case"iframe":case"object":An.trapBubbledEvent("topLoad","load",e);var i=n;break;case"video":case"audio":for(i in pr)pr.hasOwnProperty(i)&&An.trapBubbledEvent(i,pr[i],e);i=n;break;case"source":An.trapBubbledEvent("topError","error",e),i=n;break;case"img":case"image":An.trapBubbledEvent("topError","error",e),An.trapBubbledEvent("topLoad","load",e),i=n;break;case"form":An.trapBubbledEvent("topReset","reset",e),An.trapBubbledEvent("topSubmit","submit",e),i=n;break;case"details":An.trapBubbledEvent("topToggle","toggle",e),i=n;break;case"input":Kn.initWrapperState(e,n),i=Kn.getHostProps(e,n),An.trapBubbledEvent("topInvalid","invalid",e),q(r,"onChange");break;case"option":Xn.validateProps(e,n),i=Xn.getHostProps(e,n);break;case"select":Yn.initWrapperState(e,n),i=Yn.getHostProps(e,n),An.trapBubbledEvent("topInvalid","invalid",e),q(r,"onChange");break;case"textarea":Qn.initWrapperState(e,n),i=Qn.getHostProps(e,n),An.trapBubbledEvent("topInvalid","invalid",e),q(r,"onChange");break;default:i=n}z(t,i);var a,s=i;for(a in s)if(s.hasOwnProperty(a)){var u=s[a];"style"===a?Fn.setValueForStyles(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&tr(e,u):"children"===a?"string"===typeof u?or(e,u):"number"===typeof u&&or(e,""+u):"suppressContentEditableWarning"!==a&&(ur.hasOwnProperty(a)?null!=u&&q(r,a):o?Vn.setValueForAttribute(e,a,u):null!=u&&Vn.setValueForProperty(e,a,u))}switch(t){case"input":$n.track(e),Kn.postMountWrapper(e,n);break;case"textarea":$n.track(e),Qn.postMountWrapper(e,n);break;case"option":Xn.postMountWrapper(e,n);break;case"select":Yn.postMountWrapper(e,n);break;default:"function"===typeof i.onClick&&(e.onclick=_t)}},diffProperties:function(e,t,n,r,o){var i=null;switch(t){case"input":n=Kn.getHostProps(e,n),r=Kn.getHostProps(e,r),i=[];break;case"option":n=Xn.getHostProps(e,n),r=Xn.getHostProps(e,r),i=[];break;case"select":n=Yn.getHostProps(e,n),r=Yn.getHostProps(e,r),i=[];break;case"textarea":n=Qn.getHostProps(e,n),r=Qn.getHostProps(e,r),i=[];break;default:"function"!==typeof n.onClick&&"function"===typeof r.onClick&&(e.onclick=_t)}z(t,r);var a,s;e=null;for(a in n)if(!r.hasOwnProperty(a)&&n.hasOwnProperty(a)&&null!=n[a])if("style"===a)for(s in t=n[a])t.hasOwnProperty(s)&&(e||(e={}),e[s]="");else"dangerouslySetInnerHTML"!==a&&"children"!==a&&"suppressContentEditableWarning"!==a&&(ur.hasOwnProperty(a)?i||(i=[]):(i=i||[]).push(a,null));for(a in r){var u=r[a];if(t=null!=n?n[a]:void 0,r.hasOwnProperty(a)&&u!==t&&(null!=u||null!=t))if("style"===a)if(t){for(s in t)!t.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(e||(e={}),e[s]="");for(s in u)u.hasOwnProperty(s)&&t[s]!==u[s]&&(e||(e={}),e[s]=u[s])}else e||(i||(i=[]),i.push(a,e)),e=u;else"dangerouslySetInnerHTML"===a?(u=u?u.__html:void 0,t=t?t.__html:void 0,null!=u&&t!==u&&(i=i||[]).push(a,""+u)):"children"===a?t===u||"string"!==typeof u&&"number"!==typeof u||(i=i||[]).push(a,""+u):"suppressContentEditableWarning"!==a&&(ur.hasOwnProperty(a)?(null!=u&&q(o,a),i||t===u||(i=[])):(i=i||[]).push(a,u))}return e&&(i=i||[]).push("style",e),i},updateProperties:function(e,t,n,r,o){V(n,r),r=V(n,o);for(var i=0;i<t.length;i+=2){var a=t[i],s=t[i+1];"style"===a?Fn.setValueForStyles(e,s):"dangerouslySetInnerHTML"===a?tr(e,s):"children"===a?or(e,s):r?null!=s?Vn.setValueForAttribute(e,a,s):Vn.deleteValueForAttribute(e,a):null!=s?Vn.setValueForProperty(e,a,s):Vn.deleteValueForProperty(e,a)}switch(n){case"input":Kn.updateWrapper(e,o),$n.updateValueIfChanged(e);break;case"textarea":Qn.updateWrapper(e,o);break;case"select":Yn.postUpdateWrapper(e,o)}},diffHydratedProperties:function(e,t,n,r,o){switch(t){case"iframe":case"object":An.trapBubbledEvent("topLoad","load",e);break;case"video":case"audio":for(var i in pr)pr.hasOwnProperty(i)&&An.trapBubbledEvent(i,pr[i],e);break;case"source":An.trapBubbledEvent("topError","error",e);break;case"img":case"image":An.trapBubbledEvent("topError","error",e),An.trapBubbledEvent("topLoad","load",e);break;case"form":An.trapBubbledEvent("topReset","reset",e),An.trapBubbledEvent("topSubmit","submit",e);break;case"details":An.trapBubbledEvent("topToggle","toggle",e);break;case"input":Kn.initWrapperState(e,n),An.trapBubbledEvent("topInvalid","invalid",e),q(o,"onChange");break;case"option":Xn.validateProps(e,n);break;case"select":Yn.initWrapperState(e,n),An.trapBubbledEvent("topInvalid","invalid",e),q(o,"onChange");break;case"textarea":Qn.initWrapperState(e,n),An.trapBubbledEvent("topInvalid","invalid",e),q(o,"onChange")}z(t,n),r=null;for(var a in n)n.hasOwnProperty(a)&&(i=n[a],"children"===a?"string"===typeof i?e.textContent!==i&&(r=["children",i]):"number"===typeof i&&e.textContent!==""+i&&(r=["children",""+i]):ur.hasOwnProperty(a)&&null!=i&&q(o,a));switch(t){case"input":$n.track(e),Kn.postMountWrapper(e,n);break;case"textarea":$n.track(e),Qn.postMountWrapper(e,n);break;case"select":case"option":break;default:"function"===typeof n.onClick&&(e.onclick=_t)}return r},diffHydratedText:function(e,t){return e.nodeValue!==t},warnForDeletedHydratableElement:function(){},warnForDeletedHydratableText:function(){},warnForInsertedHydratedElement:function(){},warnForInsertedHydratedText:function(){},restoreControlledState:function(e,t,n){switch(t){case"input":Kn.restoreControlledState(e,n);break;case"textarea":Qn.restoreControlledState(e,n);break;case"select":Yn.restoreControlledState(e,n)}}},fr=void 0;if(yt.canUseDOM)if("function"!==typeof requestIdleCallback){var dr=null,mr=null,yr=!1,vr=!1,gr=0,_r=33,br=33,wr={timeRemaining:"object"===typeof performance&&"function"===typeof performance.now?function(){return gr-performance.now()}:function(){return gr-Date.now()}},xr="__reactIdleCallback$"+Math.random().toString(36).slice(2);window.addEventListener("message",function(e){e.source===window&&e.data===xr&&(yr=!1,e=mr,mr=null,null!==e&&e(wr))},!1);var Er=function(e){vr=!1;var t=e-gr+br;t<br&&_r<br?(8>t&&(t=8),br=t<_r?_r:t):_r=t,gr=e+br,yr||(yr=!0,window.postMessage(xr,"*")),t=dr,dr=null,null!==t&&t(e)};fr=function(e){return mr=e,vr||(vr=!0,requestAnimationFrame(Er)),0}}else fr=requestIdleCallback;else fr=function(e){return setTimeout(function(){e({timeRemaining:function(){return 1/0}})}),0};var Cr,Tr,Sr={rIC:fr},Pr={enableAsyncSubtreeAPI:!0},Or={NoWork:0,SynchronousPriority:1,TaskPriority:2,HighPriority:3,LowPriority:4,OffscreenPriority:5},Ar=Zt.Callback,kr=Or.NoWork,Ir=Or.SynchronousPriority,Nr=Or.TaskPriority,Rr=Lt.ClassComponent,Mr=Lt.HostRoot,Dr=void 0,Lr=void 0,Fr={addUpdate:function(e,t,n,r){Y(e,{priorityLevel:r,partialState:t,callback:n,isReplace:!1,isForced:!1,isTopLevelUnmount:!1,next:null})},addReplaceUpdate:function(e,t,n,r){Y(e,{priorityLevel:r,partialState:t,callback:n,isReplace:!0,isForced:!1,isTopLevelUnmount:!1,next:null})},addForceUpdate:function(e,t,n){Y(e,{priorityLevel:n,partialState:null,callback:t,isReplace:!1,isForced:!0,isTopLevelUnmount:!1,next:null})},getUpdatePriority:function(e){var t=e.updateQueue;return null===t||e.tag!==Rr&&e.tag!==Mr?kr:null!==t.first?t.first.priorityLevel:kr},addTopLevelUpdate:function(e,t,n,r){var o=null===t.element;t={priorityLevel:r,partialState:t,callback:n,isReplace:!1,isForced:!1,isTopLevelUnmount:o,next:null},e=Y(e,t),o&&(o=Dr,n=Lr,null!==o&&null!==t.next&&(t.next=null,o.last=t),null!==n&&null!==e&&null!==e.next&&(e.next=null,n.last=t))},beginUpdateQueue:function(e,t,n,r,o,i,a){null!==e&&e.updateQueue===n&&(n=t.updateQueue={first:n.first,last:n.last,callbackList:null,hasForceUpdate:!1}),e=n.callbackList;for(var s=n.hasForceUpdate,u=!0,l=n.first;null!==l&&0>=H(l.priorityLevel,a);){n.first=l.next,null===n.first&&(n.last=null);var c;l.isReplace?(o=Z(l,r,o,i),u=!0):(c=Z(l,r,o,i))&&(o=u?vt({},o,c):vt(o,c),u=!1),l.isForced&&(s=!0),null===l.callback||l.isTopLevelUnmount&&null!==l.next||(e=null!==e?e:[],e.push(l.callback),t.effectTag|=Ar),l=l.next}return n.callbackList=e,n.hasForceUpdate=s,null!==n.first||null!==e||s||(t.updateQueue=null),o},commitCallbacks:function(e,t,n){if(null!==(e=t.callbackList))for(t.callbackList=null,t=0;t<e.length;t++){var o=e[t];"function"!==typeof o&&r("191",o),o.call(n)}}},jr=[],zr=-1,Br={createCursor:function(e){return{current:e}},isEmpty:function(){return-1===zr},pop:function(e){0>zr||(e.current=jr[zr],jr[zr]=null,zr--)},push:function(e,t){zr++,jr[zr]=e.current,e.current=t},reset:function(){for(;-1<zr;)jr[zr]=null,zr--}},Ur=rn.isFiberMounted,Vr=Lt.ClassComponent,Wr=Lt.HostRoot,qr=Br.createCursor,Hr=Br.pop,Gr=Br.push,Kr=qr(bt),Xr=qr(!1),Yr=bt,Zr={getUnmaskedContext:function(e){return J(e)?Yr:Kr.current},cacheContext:Q,getMaskedContext:function(e,t){var n=e.type.contextTypes;if(!n)return bt;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o,i={};for(o in n)i[o]=t[o];return r&&Q(e,t,i),i},hasContextChanged:function(){return Xr.current},isContextConsumer:function(e){return e.tag===Vr&&null!=e.type.contextTypes},isContextProvider:J,popContextProvider:function(e){J(e)&&(Hr(Xr,e),Hr(Kr,e))},popTopLevelContextObject:function(e){Hr(Xr,e),Hr(Kr,e)},pushTopLevelContextObject:function(e,t,n){null!=Kr.cursor&&r("168"),Gr(Kr,t,e),Gr(Xr,n,e)},processChildContext:$,pushContextProvider:function(e){if(!J(e))return!1;var t=e.stateNode;return t=t&&t.__reactInternalMemoizedMergedChildContext||bt,Yr=Kr.current,Gr(Kr,t,e),Gr(Xr,Xr.current,e),!0},invalidateContextProvider:function(e,t){var n=e.stateNode;if(n||r("169"),t){var o=$(e,Yr);n.__reactInternalMemoizedMergedChildContext=o,Hr(Xr,e),Hr(Kr,e),Gr(Kr,o,e)}else Hr(Xr,e);Gr(Xr,t,e)},resetContext:function(){Yr=bt,Kr.current=bt,Xr.current=!1},findCurrentUnmaskedContext:function(e){for(Ur(e)&&e.tag===Vr?void 0:r("170");e.tag!==Wr;){if(J(e))return e.stateNode.__reactInternalMemoizedMergedChildContext;(e=e.return)||r("171")}return e.stateNode.context}},Qr={NoContext:0,AsyncUpdates:1},Jr=Lt.IndeterminateComponent,$r=Lt.ClassComponent,eo=Lt.HostRoot,to=Lt.HostComponent,no=Lt.HostText,ro=Lt.HostPortal,oo=Lt.CoroutineComponent,io=Lt.YieldComponent,ao=Lt.Fragment,so=Or.NoWork,uo=Qr.NoContext,lo=Zt.NoEffect,co={createWorkInProgress:function(e,t){var n=e.alternate;return null===n?(n=new ee(e.tag,e.key,e.internalContextTag),n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.effectTag=lo,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.pendingWorkPriority=t,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n},createHostRootFiber:function(){return new ee(eo,null,uo)},createFiberFromElement:function(e,t,n){return t=te(e.type,e.key,t),t.pendingProps=e.props,t.pendingWorkPriority=n,t},createFiberFromFragment:function(e,t,n){return t=new ee(ao,null,t),t.pendingProps=e,t.pendingWorkPriority=n,t},createFiberFromText:function(e,t,n){return t=new ee(no,null,t),t.pendingProps=e,t.pendingWorkPriority=n,t},createFiberFromElementType:te,createFiberFromHostInstanceForDeletion:function(){var e=new ee(to,null,uo);return e.type="DELETED",e},createFiberFromCoroutine:function(e,t,n){return t=new ee(oo,e.key,t),t.type=e.handler,t.pendingProps=e,t.pendingWorkPriority=n,t},createFiberFromYield:function(e,t){return new ee(io,null,t)},createFiberFromPortal:function(e,t,n){return t=new ee(ro,e.key,t),t.pendingProps=e.children||[],t.pendingWorkPriority=n,t.stateNode={containerInfo:e.containerInfo,implementation:e.implementation},t},largerPriority:function(e,t){return e!==so&&(t===so||t>e)?e:t}},po=co.createHostRootFiber,ho=Lt.IndeterminateComponent,fo=Lt.FunctionalComponent,mo=Lt.ClassComponent,yo=Lt.HostComponent;"function"===typeof Symbol&&Symbol.for?(Cr=Symbol.for("react.coroutine"),Tr=Symbol.for("react.yield")):(Cr=60104,Tr=60105);var vo={createCoroutine:function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Cr,key:null==r?null:""+r,children:e,handler:t,props:n}},createYield:function(e){return{$$typeof:Tr,value:e}},isCoroutine:function(e){return"object"===typeof e&&null!==e&&e.$$typeof===Cr},isYield:function(e){return"object"===typeof e&&null!==e&&e.$$typeof===Tr},REACT_YIELD_TYPE:Tr,REACT_COROUTINE_TYPE:Cr},go="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.portal")||60106,_o={createPortal:function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:go,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}},isPortal:function(e){return"object"===typeof e&&null!==e&&e.$$typeof===go},REACT_PORTAL_TYPE:go},bo=vo.REACT_COROUTINE_TYPE,wo=vo.REACT_YIELD_TYPE,xo=_o.REACT_PORTAL_TYPE,Eo=co.createWorkInProgress,Co=co.createFiberFromElement,To=co.createFiberFromFragment,So=co.createFiberFromText,Po=co.createFiberFromCoroutine,Oo=co.createFiberFromYield,Ao=co.createFiberFromPortal,ko=Array.isArray,Io=Lt.FunctionalComponent,No=Lt.ClassComponent,Ro=Lt.HostText,Mo=Lt.HostPortal,Do=Lt.CoroutineComponent,Lo=Lt.YieldComponent,Fo=Lt.Fragment,jo=Zt.NoEffect,zo=Zt.Placement,Bo=Zt.Deletion,Uo="function"===typeof Symbol&&Symbol.iterator,Vo="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,Wo=ie(!0,!0),qo=ie(!1,!0),Ho=ie(!1,!1),Go={reconcileChildFibers:Wo,reconcileChildFibersInPlace:qo,mountChildFibersInPlace:Ho,cloneChildFibers:function(e,t){if(null!==e&&t.child!==e.child&&r("153"),null!==t.child){e=t.child;var n=Eo(e,e.pendingWorkPriority);for(n.pendingProps=e.pendingProps,t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,n=n.sibling=Eo(e,e.pendingWorkPriority),n.pendingProps=e.pendingProps,n.return=t;n.sibling=null}}},Ko=Zt.Update,Xo=Qr.AsyncUpdates,Yo=Zr.cacheContext,Zo=Zr.getMaskedContext,Qo=Zr.getUnmaskedContext,Jo=Zr.isContextConsumer,$o=Fr.addUpdate,ei=Fr.addReplaceUpdate,ti=Fr.addForceUpdate,ni=Fr.beginUpdateQueue,ri=Zr.hasContextChanged,oi=rn.isMounted,ii=Go.mountChildFibersInPlace,ai=Go.reconcileChildFibers,si=Go.reconcileChildFibersInPlace,ui=Go.cloneChildFibers,li=Fr.beginUpdateQueue,ci=Zr.getMaskedContext,pi=Zr.getUnmaskedContext,hi=Zr.hasContextChanged,fi=Zr.pushContextProvider,di=Zr.pushTopLevelContextObject,mi=Zr.invalidateContextProvider,yi=Lt.IndeterminateComponent,vi=Lt.FunctionalComponent,gi=Lt.ClassComponent,_i=Lt.HostRoot,bi=Lt.HostComponent,wi=Lt.HostText,xi=Lt.HostPortal,Ei=Lt.CoroutineComponent,Ci=Lt.CoroutineHandlerPhase,Ti=Lt.YieldComponent,Si=Lt.Fragment,Pi=Or.NoWork,Oi=Or.OffscreenPriority,Ai=Zt.PerformedWork,ki=Zt.Placement,Ii=Zt.ContentReset,Ni=Zt.Err,Ri=Zt.Ref,Mi=Yt.ReactCurrentOwner,Di=Go.reconcileChildFibers,Li=Zr.popContextProvider,Fi=Zr.popTopLevelContextObject,ji=Lt.IndeterminateComponent,zi=Lt.FunctionalComponent,Bi=Lt.ClassComponent,Ui=Lt.HostRoot,Vi=Lt.HostComponent,Wi=Lt.HostText,qi=Lt.HostPortal,Hi=Lt.CoroutineComponent,Gi=Lt.CoroutineHandlerPhase,Ki=Lt.YieldComponent,Xi=Lt.Fragment,Yi=Zt.Placement,Zi=Zt.Ref,Qi=Zt.Update,Ji=Or.OffscreenPriority,$i=null,ea=null,ta={injectInternals:function(e){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!t.supportsFiber)return!0;try{var n=t.inject(e);$i=le(function(e){return t.onCommitFiberRoot(n,e)}),ea=le(function(e){return t.onCommitFiberUnmount(n,e)})}catch(e){}return!0},onCommitRoot:function(e){"function"===typeof $i&&$i(e)},onCommitUnmount:function(e){"function"===typeof ea&&ea(e)}},na=Lt.ClassComponent,ra=Lt.HostRoot,oa=Lt.HostComponent,ia=Lt.HostText,aa=Lt.HostPortal,sa=Lt.CoroutineComponent,ua=Fr.commitCallbacks,la=ta.onCommitUnmount,ca=Zt.Placement,pa=Zt.Update,ha=Zt.Callback,fa=Zt.ContentReset,da=Br.createCursor,ma=Br.pop,ya=Br.push,va={},ga=Lt.HostComponent,_a=Lt.HostText,ba=Lt.HostRoot,wa=Zt.Deletion,xa=Zt.Placement,Ea=co.createFiberFromHostInstanceForDeletion,Ca=Zr.popContextProvider,Ta=Br.reset,Sa=Yt.ReactCurrentOwner,Pa=co.createWorkInProgress,Oa=co.largerPriority,Aa=ta.onCommitRoot,ka=Or.NoWork,Ia=Or.SynchronousPriority,Na=Or.TaskPriority,Ra=Or.HighPriority,Ma=Or.LowPriority,Da=Or.OffscreenPriority,La=Qr.AsyncUpdates,Fa=Zt.PerformedWork,ja=Zt.Placement,za=Zt.Update,Ba=Zt.PlacementAndUpdate,Ua=Zt.Deletion,Va=Zt.ContentReset,Wa=Zt.Callback,qa=Zt.Err,Ha=Zt.Ref,Ga=Lt.HostRoot,Ka=Lt.HostComponent,Xa=Lt.HostPortal,Ya=Lt.ClassComponent,Za=Fr.getUpdatePriority,Qa=Zr.resetContext;me._injectFiber=function(e){de=e};var Ja=Fr.addTopLevelUpdate,$a=Zr.findCurrentUnmaskedContext,es=Zr.isContextProvider,ts=Zr.processChildContext,ns=Lt.HostComponent,rs=rn.findCurrentHostFiber,os=rn.findCurrentHostFiberWithNoPortals;me._injectFiber(function(e){var t=$a(e);return es(e)?ts(e,t,!1):t});var is=Ft.TEXT_NODE,as=null,ss={getOffsets:function(e){var t=window.getSelection&&window.getSelection();if(!t||0===t.rangeCount)return null;var n=t.anchorNode,r=t.anchorOffset,o=t.focusNode,i=t.focusOffset,a=t.getRangeAt(0);try{a.startContainer.nodeType,a.endContainer.nodeType}catch(e){return null}t=t.anchorNode===t.focusNode&&t.anchorOffset===t.focusOffset?0:a.toString().length;var s=a.cloneRange();return s.selectNodeContents(e),s.setEnd(a.startContainer,a.startOffset),e=s.startContainer===s.endContainer&&s.startOffset===s.endOffset?0:s.toString().length,a=e+t,t=document.createRange(),t.setStart(n,r),t.setEnd(o,i),n=t.collapsed,{start:n?a:e,end:n?e:a}},setOffsets:function(e,t){if(window.getSelection){var n=window.getSelection(),r=e[ge()].length,o=Math.min(t.start,r);if(t=void 0===t.end?o:Math.min(t.end,r),!n.extend&&o>t&&(r=t,t=o,o=r),r=ve(e,o),e=ve(e,t),r&&e){var i=document.createRange();i.setStart(r.node,r.offset),n.removeAllRanges(),o>t?(n.addRange(i),n.extend(e.node,e.offset)):(i.setEnd(e.node,e.offset),n.addRange(i))}}}},us=Ft.ELEMENT_NODE,ls={hasSelectionCapabilities:function(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&"text"===e.type||"textarea"===t||"true"===e.contentEditable)},getSelectionInformation:function(){var e=Ct();return{focusedElem:e,selectionRange:ls.hasSelectionCapabilities(e)?ls.getSelection(e):null}},restoreSelection:function(e){var t=Ct(),n=e.focusedElem;if(e=e.selectionRange,t!==n&&xt(document.documentElement,n)){for(ls.hasSelectionCapabilities(n)&&ls.setSelection(n,e),t=[],e=n;e=e.parentNode;)e.nodeType===us&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(Et(n),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}},getSelection:function(e){return("selectionStart"in e?{start:e.selectionStart,end:e.selectionEnd}:ss.getOffsets(e))||{start:0,end:0}},setSelection:function(e,t){var n=t.start,r=t.end;void 0===r&&(r=n),"selectionStart"in e?(e.selectionStart=n,e.selectionEnd=Math.min(r,e.value.length)):ss.setOffsets(e,t)}},cs=ls,ps=Ft.ELEMENT_NODE;we._injectFiber=function(e){_e=e},we._injectStack=function(e){be=e};var hs=Lt.HostComponent,fs={isAncestor:function(e,t){for(;t;){if(e===t||e===t.alternate)return!0;t=xe(t)}return!1},getLowestCommonAncestor:Ee,getParentInstance:function(e){return xe(e)},traverseTwoPhase:function(e,t,n){for(var r=[];e;)r.push(e),e=xe(e);for(e=r.length;0<e--;)t(r[e],"captured",n);for(e=0;e<r.length;e++)t(r[e],"bubbled",n)},traverseEnterLeave:function(e,t,n,r,o){for(var i=e&&t?Ee(e,t):null,a=[];e&&e!==i;)a.push(e),e=xe(e);for(e=[];t&&t!==i;)e.push(t),t=xe(t);for(t=0;t<a.length;t++)n(a[t],"bubbled",r);for(t=e.length;0<t--;)n(e[t],"captured",o)}},ds=wn.getListener,ms={accumulateTwoPhaseDispatches:function(e){S(e,Te)},accumulateTwoPhaseDispatchesSkipTarget:function(e){S(e,Se)},accumulateDirectDispatches:function(e){S(e,Oe)},accumulateEnterLeaveDispatches:function(e,t,n,r){fs.traverseEnterLeave(n,r,Pe,e,t)}},ys={_root:null,_startText:null,_fallbackText:null},vs={initialize:function(e){return ys._root=e,ys._startText=vs.getText(),!0},reset:function(){ys._root=null,ys._startText=null,ys._fallbackText=null},getData:function(){if(ys._fallbackText)return ys._fallbackText;var e,t,n=ys._startText,r=n.length,o=vs.getText(),i=o.length;for(e=0;e<r&&n[e]===o[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===o[i-t];t++);return ys._fallbackText=o.slice(e,1<t?1-t:void 0),ys._fallbackText},getText:function(){return"value"in ys._root?ys._root.value:ys._root[ge()]}},gs=vs,_s="dispatchConfig _targetInst nativeEvent isDefaultPrevented isPropagationStopped _dispatchListeners _dispatchInstances".split(" "),bs={type:null,target:null,currentTarget:_t.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};vt(Ae.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=_t.thatReturnsTrue)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=_t.thatReturnsTrue)},persist:function(){this.isPersistent=_t.thatReturnsTrue},isPersistent:_t.thatReturnsFalse,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;for(t=0;t<_s.length;t++)this[_s[t]]=null}}),Ae.Interface=bs,Ae.augmentClass=function(e,t){function n(){}n.prototype=this.prototype;var r=new n;vt(r,e.prototype),e.prototype=r,e.prototype.constructor=e,e.Interface=vt({},this.Interface,t),e.augmentClass=this.augmentClass,Ne(e)},Ne(Ae),Ae.augmentClass(Re,{data:null}),Ae.augmentClass(Me,{data:null});var ws=[9,13,27,32],xs=yt.canUseDOM&&"CompositionEvent"in window,Es=null;yt.canUseDOM&&"documentMode"in document&&(Es=document.documentMode);var Cs;if(Cs=yt.canUseDOM&&"TextEvent"in window&&!Es){var Ts=window.opera;Cs=!("object"===typeof Ts&&"function"===typeof Ts.version&&12>=parseInt(Ts.version(),10))}var Ss=Cs,Ps=yt.canUseDOM&&(!xs||Es&&8<Es&&11>=Es),Os=String.fromCharCode(32),As={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["topCompositionEnd","topKeyPress","topTextInput","topPaste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"topBlur topCompositionEnd topKeyDown topKeyPress topKeyUp topMouseDown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"topBlur topCompositionStart topKeyDown topKeyPress topKeyUp topMouseDown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"topBlur topCompositionUpdate topKeyDown topKeyPress topKeyUp topMouseDown".split(" ")}},ks=!1,Is=!1,Ns={eventTypes:As,extractEvents:function(e,t,n,r){var o;if(xs)e:{switch(e){case"topCompositionStart":var i=As.compositionStart;break e;case"topCompositionEnd":i=As.compositionEnd;break e;case"topCompositionUpdate":i=As.compositionUpdate;break e}i=void 0}else Is?De(e,n)&&(i=As.compositionEnd):"topKeyDown"===e&&229===n.keyCode&&(i=As.compositionStart);return i?(Ps&&(Is||i!==As.compositionStart?i===As.compositionEnd&&Is&&(o=gs.getData()):Is=gs.initialize(r)),i=Re.getPooled(i,t,n,r),o?i.data=o:null!==(o=Le(n))&&(i.data=o),ms.accumulateTwoPhaseDispatches(i),o=i):o=null,(e=Ss?Fe(e,n):je(e,n))?(t=Me.getPooled(As.beforeInput,t,n,r),t.data=e,ms.accumulateTwoPhaseDispatches(t)):t=null,[o,t]}},Rs={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0},Ms={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"topBlur topChange topClick topFocus topInput topKeyDown topKeyUp topSelectionChange".split(" ")}},Ds=null,Ls=null,Fs=!1;yt.canUseDOM&&(Fs=I("input")&&(!document.documentMode||9<document.documentMode));var js={eventTypes:Ms,_isInputEventSupported:Fs,extractEvents:function(e,t,n,r){var o=t?Kt.getNodeFromInstance(t):window,i=o.nodeName&&o.nodeName.toLowerCase();if("select"===i||"input"===i&&"file"===o.type)var a=We;else if(ze(o))if(Fs)a=Ye;else{a=Ke;var s=Ge}else!(i=o.nodeName)||"input"!==i.toLowerCase()||"checkbox"!==o.type&&"radio"!==o.type||(a=Xe);if(a&&(a=a(e,t)))return Be(a,n,r);s&&s(e,o,t),"topBlur"===e&&null!=t&&(e=t._wrapperState||o._wrapperState)&&e.controlled&&"number"===o.type&&(e=""+o.value,o.getAttribute("value")!==e&&o.setAttribute("value",e))}};Ae.augmentClass(Ze,{view:function(e){return e.view?e.view:(e=E(e),e.window===e?e:(e=e.ownerDocument)?e.defaultView||e.parentWindow:window)},detail:function(e){return e.detail||0}});var zs={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};Ze.augmentClass($e,{screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Je,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)}});var Bs={mouseEnter:{registrationName:"onMouseEnter",dependencies:["topMouseOut","topMouseOver"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["topMouseOut","topMouseOver"]}},Us={eventTypes:Bs,extractEvents:function(e,t,n,r){if("topMouseOver"===e&&(n.relatedTarget||n.fromElement)||"topMouseOut"!==e&&"topMouseOver"!==e)return null;var o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window;if("topMouseOut"===e?(e=t,t=(t=n.relatedTarget||n.toElement)?Kt.getClosestInstanceFromNode(t):null):e=null,e===t)return null;var i=null==e?o:Kt.getNodeFromInstance(e);o=null==t?o:Kt.getNodeFromInstance(t);var a=$e.getPooled(Bs.mouseLeave,e,n,r);return a.type="mouseleave",a.target=i,a.relatedTarget=o,n=$e.getPooled(Bs.mouseEnter,t,n,r),n.type="mouseenter",n.target=o,n.relatedTarget=i,ms.accumulateEnterLeaveDispatches(a,n,e,t),[a,n]}},Vs=Ft.DOCUMENT_NODE,Ws=yt.canUseDOM&&"documentMode"in document&&11>=document.documentMode,qs={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"topBlur topContextMenu topFocus topKeyDown topKeyUp topMouseDown topMouseUp topSelectionChange".split(" ")}},Hs=null,Gs=null,Ks=null,Xs=!1,Ys=An.isListeningToAllDependencies,Zs={eventTypes:qs,extractEvents:function(e,t,n,r){var o=r.window===r?r.document:r.nodeType===Vs?r:r.ownerDocument;if(!o||!Ys("onSelect",o))return null;switch(o=t?Kt.getNodeFromInstance(t):window,e){case"topFocus":(ze(o)||"true"===o.contentEditable)&&(Hs=o,Gs=t,Ks=null);break;case"topBlur":Ks=Gs=Hs=null;break;case"topMouseDown":Xs=!0;break;case"topContextMenu":case"topMouseUp":return Xs=!1,et(n,r);case"topSelectionChange":if(Ws)break;case"topKeyDown":case"topKeyUp":return et(n,r)}return null}};Ae.augmentClass(tt,{animationName:null,elapsedTime:null,pseudoElement:null}),Ae.augmentClass(nt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ze.augmentClass(rt,{relatedTarget:null});var Qs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Js={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};Ze.augmentClass(it,{key:function(e){if(e.key){var t=Qs[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?(e=ot(e),13===e?"Enter":String.fromCharCode(e)):"keydown"===e.type||"keyup"===e.type?Js[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Je,charCode:function(e){return"keypress"===e.type?ot(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?ot(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),$e.augmentClass(at,{dataTransfer:null}),Ze.augmentClass(st,{touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Je}),Ae.augmentClass(ut,{propertyName:null,elapsedTime:null,pseudoElement:null}),$e.augmentClass(lt,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null});var $s={},eu={};"abort animationEnd animationIteration animationStart blur cancel canPlay canPlayThrough click close contextMenu copy cut doubleClick drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error focus input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing progress rateChange reset scroll seeked seeking stalled submit suspend timeUpdate toggle touchCancel touchEnd touchMove touchStart transitionEnd volumeChange waiting wheel".split(" ").forEach(function(e){var t=e[0].toUpperCase()+e.slice(1),n="on"+t;t="top"+t,n={phasedRegistrationNames:{bubbled:n,captured:n+"Capture"},dependencies:[t]},$s[e]=n,eu[t]=n});var tu={eventTypes:$s,extractEvents:function(e,t,n,o){var i=eu[e];if(!i)return null;switch(e){case"topAbort":case"topCancel":case"topCanPlay":case"topCanPlayThrough":case"topClose":case"topDurationChange":case"topEmptied":case"topEncrypted":case"topEnded":case"topError":case"topInput":case"topInvalid":case"topLoad":case"topLoadedData":case"topLoadedMetadata":case"topLoadStart":case"topPause":case"topPlay":case"topPlaying":case"topProgress":case"topRateChange":case"topReset":case"topSeeked":case"topSeeking":case"topStalled":case"topSubmit":case"topSuspend":case"topTimeUpdate":case"topToggle":case"topVolumeChange":case"topWaiting":var a=Ae;break;case"topKeyPress":if(0===ot(n))return null;case"topKeyDown":case"topKeyUp":a=it;break;case"topBlur":case"topFocus":a=rt;break;case"topClick":if(2===n.button)return null;case"topDoubleClick":case"topMouseDown":case"topMouseMove":case"topMouseUp":case"topMouseOut":case"topMouseOver":case"topContextMenu":a=$e;break;case"topDrag":case"topDragEnd":case"topDragEnter":case"topDragExit":case"topDragLeave":case"topDragOver":case"topDragStart":case"topDrop":a=at;break;case"topTouchCancel":case"topTouchEnd":case"topTouchMove":case"topTouchStart":a=st;break;case"topAnimationEnd":case"topAnimationIteration":case"topAnimationStart":a=tt;break;case"topTransitionEnd":a=ut;break;case"topScroll":a=Ze;break;case"topWheel":a=lt;break;case"topCopy":case"topCut":case"topPaste":a=nt}return a||r("86",e),e=a.getPooled(i,t,n,o),ms.accumulateTwoPhaseDispatches(e),e}};_n.setHandleTopLevel(An.handleTopLevel),wn.injection.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin TapEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),un.injection.injectComponentTree(Kt),wn.injection.injectEventPluginsByName({SimpleEventPlugin:tu,EnterLeaveEventPlugin:Us,ChangeEventPlugin:js,SelectEventPlugin:Zs,BeforeInputEventPlugin:Ns});var nu=Dt.injection.MUST_USE_PROPERTY,ru=Dt.injection.HAS_BOOLEAN_VALUE,ou=Dt.injection.HAS_NUMERIC_VALUE,iu=Dt.injection.HAS_POSITIVE_NUMERIC_VALUE,au=Dt.injection.HAS_STRING_BOOLEAN_VALUE,su={Properties:{allowFullScreen:ru,allowTransparency:au,async:ru,autoPlay:ru,capture:ru,checked:nu|ru,cols:iu,contentEditable:au,controls:ru,default:ru,defer:ru,disabled:ru,download:Dt.injection.HAS_OVERLOADED_BOOLEAN_VALUE,draggable:au,formNoValidate:ru,hidden:ru,loop:ru,multiple:nu|ru,muted:nu|ru,noValidate:ru,open:ru,playsInline:ru,readOnly:ru,required:ru,reversed:ru,rows:iu,rowSpan:ou,scoped:ru,seamless:ru,selected:nu|ru,size:iu,start:ou,span:iu,spellCheck:au,style:0,itemScope:ru,acceptCharset:0,className:0,htmlFor:0,httpEquiv:0,value:au},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMMutationMethods:{value:function(e,t){if(null==t)return e.removeAttribute("value");"number"!==e.type||!1===e.hasAttribute("value")?e.setAttribute("value",""+t):e.validity&&!e.validity.badInput&&e.ownerDocument.activeElement!==e&&e.setAttribute("value",""+t)}}},uu=Dt.injection.HAS_STRING_BOOLEAN_VALUE,lu={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},cu={Properties:{autoReverse:uu,externalResourcesRequired:uu,preserveAlpha:uu},DOMAttributeNames:{autoReverse:"autoReverse",externalResourcesRequired:"externalResourcesRequired",preserveAlpha:"preserveAlpha"},DOMAttributeNamespaces:{xlinkActuate:lu.xlink,xlinkArcrole:lu.xlink,xlinkHref:lu.xlink,xlinkRole:lu.xlink,xlinkShow:lu.xlink,xlinkTitle:lu.xlink,xlinkType:lu.xlink,xmlBase:lu.xml,xmlLang:lu.xml,xmlSpace:lu.xml}},pu=/[\-\:]([a-z])/g;"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode x-height xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type xml:base xmlns:xlink xml:lang xml:space".split(" ").forEach(function(e){var t=e.replace(pu,ct);cu.Properties[t]=0,cu.DOMAttributeNames[t]=e}),Dt.injection.injectDOMPropertyConfig(su),Dt.injection.injectDOMPropertyConfig(cu);var hu=ta.injectInternals,fu=Ft.ELEMENT_NODE,du=Ft.TEXT_NODE,mu=Ft.COMMENT_NODE,yu=Ft.DOCUMENT_NODE,vu=Ft.DOCUMENT_FRAGMENT_NODE,gu=Dt.ROOT_ATTRIBUTE_NAME,_u=Pt.getChildNamespace,bu=hr.createElement,wu=hr.createTextNode,xu=hr.setInitialProperties,Eu=hr.diffProperties,Cu=hr.updateProperties,Tu=hr.diffHydratedProperties,Su=hr.diffHydratedText,Pu=hr.warnForDeletedHydratableElement,Ou=hr.warnForDeletedHydratableText,Au=hr.warnForInsertedHydratedElement,ku=hr.warnForInsertedHydratedText,Iu=Kt.precacheFiberNode,Nu=Kt.updateFiberProps;hn.injection.injectFiberControlledHostComponent(hr),we._injectFiber(function(e){return Du.findHostInstance(e)});var Ru=null,Mu=null,Du=function(e){var t=e.getPublicInstance;e=fe(e);var n=e.scheduleUpdate,r=e.getPriorityContext;return{createContainer:function(e){var t=po();return e={current:t,containerInfo:e,isScheduled:!1,nextScheduledRoot:null,context:null,pendingContext:null},t.stateNode=e},updateContainer:function(e,t,o,i){var a=t.current;o=me(o),null===t.context?t.context=o:t.pendingContext=o,t=i,i=r(a,Pr.enableAsyncSubtreeAPI&&null!=e&&null!=e.type&&null!=e.type.prototype&&!0===e.type.prototype.unstable_isAsyncReactComponent),e={element:e},Ja(a,e,void 0===t?null:t,i),n(a,i)},batchedUpdates:e.batchedUpdates,unbatchedUpdates:e.unbatchedUpdates,deferredUpdates:e.deferredUpdates,flushSync:e.flushSync,getPublicRootInstance:function(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case ns:return t(e.child.stateNode);default:return e.child.stateNode}},findHostInstance:function(e){return e=rs(e),null===e?null:e.stateNode},findHostInstanceWithNoPortals:function(e){return e=os(e),null===e?null:e.stateNode}}}({getRootHostContext:function(e){if(e.nodeType===yu)e=(e=e.documentElement)?e.namespaceURI:_u(null,"");else{var t=e.nodeType===mu?e.parentNode:e;e=t.namespaceURI||null,t=t.tagName,e=_u(e,t)}return e},getChildHostContext:function(e,t){return _u(e,t)},getPublicInstance:function(e){return e},prepareForCommit:function(){Ru=An.isEnabled(),Mu=cs.getSelectionInformation(),An.setEnabled(!1)},resetAfterCommit:function(){cs.restoreSelection(Mu),Mu=null,An.setEnabled(Ru),Ru=null},createInstance:function(e,t,n,r,o){return e=bu(e,t,n,r),Iu(o,e),Nu(e,t),e},appendInitialChild:function(e,t){e.appendChild(t)},finalizeInitialChildren:function(e,t,n,r){xu(e,t,n,r);e:{switch(t){case"button":case"input":case"select":case"textarea":e=!!n.autoFocus;break e}e=!1}return e},prepareUpdate:function(e,t,n,r,o){return Eu(e,t,n,r,o)},commitMount:function(e){e.focus()},commitUpdate:function(e,t,n,r,o){Nu(e,o),Cu(e,t,n,r,o)},shouldSetTextContent:function(e,t){return"textarea"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&"string"===typeof t.dangerouslySetInnerHTML.__html},resetTextContent:function(e){e.textContent=""},shouldDeprioritizeSubtree:function(e,t){return!!t.hidden},createTextInstance:function(e,t,n,r){return e=wu(e,t),Iu(r,e),e},commitTextUpdate:function(e,t,n){e.nodeValue=n},appendChild:function(e,t){e.appendChild(t)},appendChildToContainer:function(e,t){e.nodeType===mu?e.parentNode.insertBefore(t,e):e.appendChild(t)},insertBefore:function(e,t,n){e.insertBefore(t,n)},insertInContainerBefore:function(e,t,n){e.nodeType===mu?e.parentNode.insertBefore(t,n):e.insertBefore(t,n)},removeChild:function(e,t){e.removeChild(t)},removeChildFromContainer:function(e,t){e.nodeType===mu?e.parentNode.removeChild(t):e.removeChild(t)},canHydrateInstance:function(e,t){return e.nodeType===fu&&t===e.nodeName.toLowerCase()},canHydrateTextInstance:function(e,t){return""!==t&&e.nodeType===du},getNextHydratableSibling:function(e){for(e=e.nextSibling;e&&e.nodeType!==fu&&e.nodeType!==du;)e=e.nextSibling;return e},getFirstHydratableChild:function(e){for(e=e.firstChild;e&&e.nodeType!==fu&&e.nodeType!==du;)e=e.nextSibling;return e},hydrateInstance:function(e,t,n,r,o,i){return Iu(i,e),Nu(e,n),Tu(e,t,n,o,r)},hydrateTextInstance:function(e,t,n){return Iu(n,e),Su(e,t)},didNotHydrateInstance:function(e,t){1===t.nodeType?Pu(e,t):Ou(e,t)},didNotFindHydratableInstance:function(e,t,n){Au(e,t,n)},didNotFindHydratableTextInstance:function(e,t){ku(e,t)},scheduleDeferredCallback:Sr.rIC,useSyncScheduling:!0});dn.injection.injectFiberBatchedUpdates(Du.batchedUpdates);var Lu={createPortal:dt,hydrate:function(e,t,n){return ft(null,e,t,!0,n)},render:function(e,t,n){return ft(null,e,t,!1,n)},unstable_renderSubtreeIntoContainer:function(e,t,n,o){return null!=e&&Xt.has(e)||r("38"),ft(e,t,n,!1,o)},unmountComponentAtNode:function(e){return pt(e)||r("40"),!!e._reactRootContainer&&(Du.unbatchedUpdates(function(){ft(null,null,e,!1,function(){e._reactRootContainer=null})}),!0)},findDOMNode:we,unstable_createPortal:dt,unstable_batchedUpdates:dn.batchedUpdates,unstable_deferredUpdates:Du.deferredUpdates,flushSync:Du.flushSync,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{EventPluginHub:wn,EventPluginRegistry:It,EventPropagators:ms,ReactControlledComponent:hn,ReactDOMComponentTree:Kt,ReactDOMEventListener:_n}};hu({findFiberByHostInstance:Kt.getClosestInstanceFromNode,findHostInstanceByFiber:Du.findHostInstance,bundleType:0,version:"16.0.0",rendererPackageName:"react-dom"}),e.exports=Lu},function(e,t,n){"use strict";var r=!("undefined"===typeof window||!window.document||!window.document.createElement),o={canUseDOM:r,canUseWorkers:"undefined"!==typeof Worker,canUseEventListeners:r&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r};e.exports=o},function(e,t,n){"use strict";var r=n(35),o={listen:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!1),{remove:function(){e.removeEventListener(t,n,!1)}}):e.attachEvent?(e.attachEvent("on"+t,n),{remove:function(){e.detachEvent("on"+t,n)}}):void 0},capture:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!0),{remove:function(){e.removeEventListener(t,n,!0)}}):{remove:r}},registerDefault:function(){}};e.exports=o},function(e,t,n){"use strict";function r(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function o(e,t){if(r(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),o=Object.keys(t);if(n.length!==o.length)return!1;for(var a=0;a<n.length;a++)if(!i.call(t,n[a])||!r(e[n[a]],t[n[a]]))return!1;return!0}var i=Object.prototype.hasOwnProperty;e.exports=o},function(e,t,n){"use strict";function r(e,t){return!(!e||!t)&&(e===t||!o(e)&&(o(t)?r(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}var o=n(158);e.exports=r},function(e,t,n){"use strict";function r(e){return o(e)&&3==e.nodeType}var o=n(159);e.exports=r},function(e,t,n){"use strict";function r(e){var t=e?e.ownerDocument||e:document,n=t.defaultView||window;return!(!e||!("function"===typeof n.Node?e instanceof n.Node:"object"===typeof e&&"number"===typeof e.nodeType&&"string"===typeof e.nodeName))}e.exports=r},function(e,t,n){"use strict";function r(e){try{e.focus()}catch(e){}}e.exports=r},function(e,t,n){"use strict";function r(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}e.exports=r},function(e,t){},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(1),s=n.n(a),u=n(164),l=(n.n(u),n(165)),c=n(379),p=n(22),h=n(5),f=n(72),d=n(16),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),y=function(e){function t(e){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),m(t,[{key:"componentWillMount",value:function(){var e=this;d.a.auth().onAuthStateChanged(function(t){t?(console.log(t.uid),e.props.login(t.uid)):e.props.login("")})}},{key:"render",value:function(){return console.log(this.props),s.a.createElement("div",{className:"App"},s.a.createElement(c.a,null),l.a)}}]),t}(a.Component);t.a=Object(h.e)(Object(p.b)(function(e){return e},{login:f.c,getUserId:f.b})(y))},function(e,t){},function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(5),a=n(193),s=n(240),u=n(349),l=n(357),c=n(370);t.a=o.a.createElement(i.d,null,o.a.createElement(i.c,{exact:!0,path:"/",component:a.a}),o.a.createElement(i.c,{path:"/listings/:category/:tag",component:s.a}),o.a.createElement(i.c,{path:"/post/:post_id",component:u.a}),o.a.createElement(i.c,{path:"/form",component:l.a}),o.a.createElement(i.c,{path:"/myaccount",component:c.a}))},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(6),s=n.n(a),u=n(1),l=n.n(u),c=n(3),p=n.n(c),h=n(169),f=n.n(h),d=n(52),m=function(e){function t(){var n,i,a;r(this,t);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return n=i=o(this,e.call.apply(e,[this].concat(u))),i.history=f()(i.props),a=n,o(i,a)}return i(t,e),t.prototype.componentWillMount=function(){s()(!this.props.history,"<BrowserRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { BrowserRouter as Router }`.")},t.prototype.render=function(){return l.a.createElement(d.a,{history:this.history,children:this.props.children})},t}(l.a.Component);m.propTypes={basename:p.a.string,forceRefresh:p.a.bool,getUserConfirmation:p.a.func,keyLength:p.a.number,children:p.a.node},t.a=m},function(e,t,n){"use strict";var r=n(35),o=n(49),i=n(168);e.exports=function(){function e(e,t,n,r,a,s){s!==i&&o(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=r,n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(6),s=r(a),u=n(11),l=r(u),c=n(50),p=n(26),h=n(51),f=r(h),d=n(80),m=function(){try{return window.history.state||{}}catch(e){return{}}},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,l.default)(d.canUseDOM,"Browser history needs a DOM");var t=window.history,n=(0,d.supportsHistory)(),r=!(0,d.supportsPopStateOnHashChange)(),a=e.forceRefresh,u=void 0!==a&&a,h=e.getUserConfirmation,y=void 0===h?d.getConfirmation:h,v=e.keyLength,g=void 0===v?6:v,_=e.basename?(0,p.stripTrailingSlash)((0,p.addLeadingSlash)(e.basename)):"",b=function(e){var t=e||{},n=t.key,r=t.state,o=window.location,i=o.pathname,a=o.search,u=o.hash,l=i+a+u;return(0,s.default)(!_||(0,p.hasBasename)(l,_),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+l+'" to begin with "'+_+'".'),_&&(l=(0,p.stripBasename)(l,_)),(0,c.createLocation)(l,r,n)},w=function(){return Math.random().toString(36).substr(2,g)},x=(0,f.default)(),E=function(e){i(V,e),V.length=t.length,x.notifyListeners(V.location,V.action)},C=function(e){(0,d.isExtraneousPopstateEvent)(e)||P(b(e.state))},T=function(){P(b(m()))},S=!1,P=function(e){if(S)S=!1,E();else{x.confirmTransitionTo(e,"POP",y,function(t){t?E({action:"POP",location:e}):O(e)})}},O=function(e){var t=V.location,n=k.indexOf(t.key);-1===n&&(n=0);var r=k.indexOf(e.key);-1===r&&(r=0);var o=n-r;o&&(S=!0,M(o))},A=b(m()),k=[A.key],I=function(e){return _+(0,p.createPath)(e)},N=function(e,r){(0,s.default)(!("object"===("undefined"===typeof e?"undefined":o(e))&&void 0!==e.state&&void 0!==r),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var i=(0,c.createLocation)(e,r,w(),V.location);x.confirmTransitionTo(i,"PUSH",y,function(e){if(e){var r=I(i),o=i.key,a=i.state;if(n)if(t.pushState({key:o,state:a},null,r),u)window.location.href=r;else{var l=k.indexOf(V.location.key),c=k.slice(0,-1===l?0:l+1);c.push(i.key),k=c,E({action:"PUSH",location:i})}else(0,s.default)(void 0===a,"Browser history cannot push state in browsers that do not support HTML5 history"),window.location.href=r}})},R=function(e,r){(0,s.default)(!("object"===("undefined"===typeof e?"undefined":o(e))&&void 0!==e.state&&void 0!==r),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var i=(0,c.createLocation)(e,r,w(),V.location);x.confirmTransitionTo(i,"REPLACE",y,function(e){if(e){var r=I(i),o=i.key,a=i.state;if(n)if(t.replaceState({key:o,state:a},null,r),u)window.location.replace(r);else{var l=k.indexOf(V.location.key);-1!==l&&(k[l]=i.key),E({action:"REPLACE",location:i})}else(0,s.default)(void 0===a,"Browser history cannot replace state in browsers that do not support HTML5 history"),window.location.replace(r)}})},M=function(e){t.go(e)},D=function(){return M(-1)},L=function(){return M(1)},F=0,j=function(e){F+=e,1===F?((0,d.addEventListener)(window,"popstate",C),r&&(0,d.addEventListener)(window,"hashchange",T)):0===F&&((0,d.removeEventListener)(window,"popstate",C),r&&(0,d.removeEventListener)(window,"hashchange",T))},z=!1,B=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=x.setPrompt(e);return z||(j(1),z=!0),function(){return z&&(z=!1,j(-1)),t()}},U=function(e){var t=x.appendListener(e);return j(1),function(){j(-1),t()}},V={length:t.length,action:"POP",location:A,createHref:I,push:N,replace:R,go:M,goBack:D,goForward:L,block:B,listen:U};return V};t.default=y},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(6),s=n.n(a),u=n(1),l=n.n(u),c=n(3),p=n.n(c),h=n(171),f=n.n(h),d=n(52),m=function(e){function t(){var n,i,a;r(this,t);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return n=i=o(this,e.call.apply(e,[this].concat(u))),i.history=f()(i.props),a=n,o(i,a)}return i(t,e),t.prototype.componentWillMount=function(){s()(!this.props.history,"<HashRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { HashRouter as Router }`.")},t.prototype.render=function(){return l.a.createElement(d.a,{history:this.history,children:this.props.children})},t}(l.a.Component);m.propTypes={basename:p.a.string,getUserConfirmation:p.a.func,hashType:p.a.oneOf(["hashbang","noslash","slash"]),children:p.a.node}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(6),a=r(i),s=n(11),u=r(s),l=n(50),c=n(26),p=n(51),h=r(p),f=n(80),d={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+(0,c.stripLeadingSlash)(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:c.stripLeadingSlash,decodePath:c.addLeadingSlash},slash:{encodePath:c.addLeadingSlash,decodePath:c.addLeadingSlash}},m=function(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)},y=function(e){return window.location.hash=e},v=function(e){var t=window.location.href.indexOf("#");window.location.replace(window.location.href.slice(0,t>=0?t:0)+"#"+e)},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,u.default)(f.canUseDOM,"Hash history needs a DOM");var t=window.history,n=(0,f.supportsGoWithoutReloadUsingHash)(),r=e.getUserConfirmation,i=void 0===r?f.getConfirmation:r,s=e.hashType,p=void 0===s?"slash":s,g=e.basename?(0,c.stripTrailingSlash)((0,c.addLeadingSlash)(e.basename)):"",_=d[p],b=_.encodePath,w=_.decodePath,x=function(){var e=w(m());return(0,a.default)(!g||(0,c.hasBasename)(e,g),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+e+'" to begin with "'+g+'".'),g&&(e=(0,c.stripBasename)(e,g)),(0,l.createLocation)(e)},E=(0,h.default)(),C=function(e){o(H,e),H.length=t.length,E.notifyListeners(H.location,H.action)},T=!1,S=null,P=function(){var e=m(),t=b(e);if(e!==t)v(t);else{var n=x(),r=H.location;if(!T&&(0,l.locationsAreEqual)(r,n))return;if(S===(0,c.createPath)(n))return;S=null,O(n)}},O=function(e){if(T)T=!1,C();else{E.confirmTransitionTo(e,"POP",i,function(t){t?C({action:"POP",location:e}):A(e)})}},A=function(e){var t=H.location,n=R.lastIndexOf((0,c.createPath)(t));-1===n&&(n=0);var r=R.lastIndexOf((0,c.createPath)(e));-1===r&&(r=0);var o=n-r;o&&(T=!0,F(o))},k=m(),I=b(k);k!==I&&v(I);var N=x(),R=[(0,c.createPath)(N)],M=function(e){return"#"+b(g+(0,c.createPath)(e))},D=function(e,t){(0,a.default)(void 0===t,"Hash history cannot push state; it is ignored");var n=(0,l.createLocation)(e,void 0,void 0,H.location);E.confirmTransitionTo(n,"PUSH",i,function(e){if(e){var t=(0,c.createPath)(n),r=b(g+t);if(m()!==r){S=t,y(r);var o=R.lastIndexOf((0,c.createPath)(H.location)),i=R.slice(0,-1===o?0:o+1);i.push(t),R=i,C({action:"PUSH",location:n})}else(0,a.default)(!1,"Hash history cannot PUSH the same path; a new entry will not be added to the history stack"),C()}})},L=function(e,t){(0,a.default)(void 0===t,"Hash history cannot replace state; it is ignored");var n=(0,l.createLocation)(e,void 0,void 0,H.location);E.confirmTransitionTo(n,"REPLACE",i,function(e){if(e){var t=(0,c.createPath)(n),r=b(g+t);m()!==r&&(S=t,v(r));var o=R.indexOf((0,c.createPath)(H.location));-1!==o&&(R[o]=t),C({action:"REPLACE",location:n})}})},F=function(e){(0,a.default)(n,"Hash history go(n) causes a full page reload in this browser"),t.go(e)},j=function(){return F(-1)},z=function(){return F(1)},B=0,U=function(e){B+=e,1===B?(0,f.addEventListener)(window,"hashchange",P):0===B&&(0,f.removeEventListener)(window,"hashchange",P)},V=!1,W=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=E.setPrompt(e);return V||(U(1),V=!0),function(){return V&&(V=!1,U(-1)),t()}},q=function(e){var t=E.appendListener(e);return U(1),function(){U(-1),t()}},H={length:t.length,action:"POP",location:N,createHref:M,push:D,replace:L,go:F,goBack:j,goForward:z,block:W,listen:q};return H};t.default=g},function(e,t,n){"use strict";var r=n(173);r.a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(6),s=n.n(a),u=n(1),l=n.n(u),c=n(3),p=n.n(c),h=n(174),f=n.n(h),d=n(53),m=function(e){function t(){var n,i,a;r(this,t);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return n=i=o(this,e.call.apply(e,[this].concat(u))),i.history=f()(i.props),a=n,o(i,a)}return i(t,e),t.prototype.componentWillMount=function(){s()(!this.props.history,"<MemoryRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { MemoryRouter as Router }`.")},t.prototype.render=function(){return l.a.createElement(d.a,{history:this.history,children:this.props.children})},t}(l.a.Component);m.propTypes={initialEntries:p.a.array,initialIndex:p.a.number,getUserConfirmation:p.a.func,keyLength:p.a.number,children:p.a.node},t.a=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(6),s=r(a),u=n(26),l=n(50),c=n(51),p=r(c),h=function(e,t,n){return Math.min(Math.max(e,t),n)},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.getUserConfirmation,n=e.initialEntries,r=void 0===n?["/"]:n,a=e.initialIndex,c=void 0===a?0:a,f=e.keyLength,d=void 0===f?6:f,m=(0,p.default)(),y=function(e){i(A,e),A.length=A.entries.length,m.notifyListeners(A.location,A.action)},v=function(){return Math.random().toString(36).substr(2,d)},g=h(c,0,r.length-1),_=r.map(function(e){return"string"===typeof e?(0,l.createLocation)(e,void 0,v()):(0,l.createLocation)(e,void 0,e.key||v())}),b=u.createPath,w=function(e,n){(0,s.default)(!("object"===("undefined"===typeof e?"undefined":o(e))&&void 0!==e.state&&void 0!==n),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var r=(0,l.createLocation)(e,n,v(),A.location);m.confirmTransitionTo(r,"PUSH",t,function(e){if(e){var t=A.index,n=t+1,o=A.entries.slice(0);o.length>n?o.splice(n,o.length-n,r):o.push(r),y({action:"PUSH",location:r,index:n,entries:o})}})},x=function(e,n){(0,s.default)(!("object"===("undefined"===typeof e?"undefined":o(e))&&void 0!==e.state&&void 0!==n),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var r=(0,l.createLocation)(e,n,v(),A.location);m.confirmTransitionTo(r,"REPLACE",t,function(e){e&&(A.entries[A.index]=r,y({action:"REPLACE",location:r}))})},E=function(e){var n=h(A.index+e,0,A.entries.length-1),r=A.entries[n];m.confirmTransitionTo(r,"POP",t,function(e){e?y({action:"POP",location:r,index:n}):y()})},C=function(){return E(-1)},T=function(){return E(1)},S=function(e){var t=A.index+e;return t>=0&&t<A.entries.length},P=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return m.setPrompt(e)},O=function(e){return m.appendListener(e)},A={length:_.length,action:"POP",location:_[g],index:g,entries:_,createHref:b,push:w,replace:x,go:E,goBack:C,goForward:T,canGo:S,block:P,listen:O};return A};t.default=f},function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var o=n(1),i=n.n(o),a=n(3),s=n.n(a),u=n(82),l=n(81),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h=function(e){var t=e.to,n=e.exact,o=e.strict,a=e.location,s=e.activeClassName,h=e.className,f=e.activeStyle,d=e.style,m=e.isActive,y=e.ariaCurrent,v=r(e,["to","exact","strict","location","activeClassName","className","activeStyle","style","isActive","ariaCurrent"]);return i.a.createElement(u.a,{path:"object"===("undefined"===typeof t?"undefined":p(t))?t.pathname:t,exact:n,strict:o,location:a,children:function(e){var n=e.location,r=e.match,o=!!(m?m(r,n):r);return i.a.createElement(l.a,c({to:t,className:o?[h,s].filter(function(e){return e}).join(" "):h,style:o?c({},d,f):d,"aria-current":o&&y},v))}})};h.propTypes={to:l.a.propTypes.to,exact:s.a.bool,strict:s.a.bool,location:s.a.object,activeClassName:s.a.string,className:s.a.string,activeStyle:s.a.object,style:s.a.object,isActive:s.a.func,ariaCurrent:s.a.oneOf(["page","step","location","true"])},h.defaultProps={activeClassName:"active",ariaCurrent:"true"}},function(e,t,n){function r(e,t){for(var n,r=[],o=0,i=0,a="",s=t&&t.delimiter||"/";null!=(n=g.exec(e));){var c=n[0],p=n[1],h=n.index;if(a+=e.slice(i,h),i=h+c.length,p)a+=p[1];else{var f=e[i],d=n[2],m=n[3],y=n[4],v=n[5],_=n[6],b=n[7];a&&(r.push(a),a="");var w=null!=d&&null!=f&&f!==d,x="+"===_||"*"===_,E="?"===_||"*"===_,C=n[2]||s,T=y||v;r.push({name:m||o++,prefix:d||"",delimiter:C,optional:E,repeat:x,partial:w,asterisk:!!b,pattern:T?l(T):b?".*":"[^"+u(C)+"]+?"})}}return i<e.length&&(a+=e.substr(i)),a&&r.push(a),r}function o(e,t){return s(r(e,t))}function i(e){return encodeURI(e).replace(/[\/?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function a(e){return encodeURI(e).replace(/[?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function s(e){for(var t=new Array(e.length),n=0;n<e.length;n++)"object"===typeof e[n]&&(t[n]=new RegExp("^(?:"+e[n].pattern+")$"));return function(n,r){for(var o="",s=n||{},u=r||{},l=u.pretty?i:encodeURIComponent,c=0;c<e.length;c++){var p=e[c];if("string"!==typeof p){var h,f=s[p.name];if(null==f){if(p.optional){p.partial&&(o+=p.prefix);continue}throw new TypeError('Expected "'+p.name+'" to be defined')}if(v(f)){if(!p.repeat)throw new TypeError('Expected "'+p.name+'" to not repeat, but received `'+JSON.stringify(f)+"`");if(0===f.length){if(p.optional)continue;throw new TypeError('Expected "'+p.name+'" to not be empty')}for(var d=0;d<f.length;d++){if(h=l(f[d]),!t[c].test(h))throw new TypeError('Expected all "'+p.name+'" to match "'+p.pattern+'", but received `'+JSON.stringify(h)+"`");o+=(0===d?p.prefix:p.delimiter)+h}}else{if(h=p.asterisk?a(f):l(f),!t[c].test(h))throw new TypeError('Expected "'+p.name+'" to match "'+p.pattern+'", but received "'+h+'"');o+=p.prefix+h}}else o+=p}return o}}function u(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function l(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function c(e,t){return e.keys=t,e}function p(e){return e.sensitive?"":"i"}function h(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return c(e,t)}function f(e,t,n){for(var r=[],o=0;o<e.length;o++)r.push(y(e[o],t,n).source);return c(new RegExp("(?:"+r.join("|")+")",p(n)),t)}function d(e,t,n){return m(r(e,n),t,n)}function m(e,t,n){v(t)||(n=t||n,t=[]),n=n||{};for(var r=n.strict,o=!1!==n.end,i="",a=0;a<e.length;a++){var s=e[a];if("string"===typeof s)i+=u(s);else{var l=u(s.prefix),h="(?:"+s.pattern+")";t.push(s),s.repeat&&(h+="(?:"+l+h+")*"),h=s.optional?s.partial?l+"("+h+")?":"(?:"+l+"("+h+"))?":l+"("+h+")",i+=h}}var f=u(n.delimiter||"/"),d=i.slice(-f.length)===f;return r||(i=(d?i.slice(0,-f.length):i)+"(?:"+f+"(?=$))?"),i+=o?"$":r&&d?"":"(?="+f+"|$)",c(new RegExp("^"+i,p(n)),t)}function y(e,t,n){return v(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?h(e,t):v(e)?f(e,t,n):d(e,t,n)}var v=n(177);e.exports=y,e.exports.parse=r,e.exports.compile=o,e.exports.tokensToFunction=s,e.exports.tokensToRegExp=m;var g=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g")},function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t,n){"use strict";var r=n(179);r.a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(1),s=n.n(a),u=n(3),l=n.n(u),c=n(11),p=n.n(c),h=function(e){function t(){return r(this,t),o(this,e.apply(this,arguments))}return i(t,e),t.prototype.enable=function(e){this.unblock&&this.unblock(),this.unblock=this.context.router.history.block(e)},t.prototype.disable=function(){this.unblock&&(this.unblock(),this.unblock=null)},t.prototype.componentWillMount=function(){p()(this.context.router,"You should not use <Prompt> outside a <Router>"),this.props.when&&this.enable(this.props.message)},t.prototype.componentWillReceiveProps=function(e){e.when?this.props.when&&this.props.message===e.message||this.enable(e.message):this.disable()},t.prototype.componentWillUnmount=function(){this.disable()},t.prototype.render=function(){return null},t}(s.a.Component);h.propTypes={when:l.a.bool,message:l.a.oneOfType([l.a.func,l.a.string]).isRequired},h.defaultProps={when:!0},h.contextTypes={router:l.a.shape({history:l.a.shape({block:l.a.func.isRequired}).isRequired}).isRequired},t.a=h},function(e,t,n){"use strict";var r=n(181);r.a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(1),s=n.n(a),u=n(3),l=n.n(u),c=n(6),p=n.n(c),h=n(11),f=n.n(h),d=n(182),m=function(e){function t(){return r(this,t),o(this,e.apply(this,arguments))}return i(t,e),t.prototype.isStatic=function(){return this.context.router&&this.context.router.staticContext},t.prototype.componentWillMount=function(){f()(this.context.router,"You should not use <Redirect> outside a <Router>"),this.isStatic()&&this.perform()},t.prototype.componentDidMount=function(){this.isStatic()||this.perform()},t.prototype.componentDidUpdate=function(e){var t=Object(d.a)(e.to),n=Object(d.a)(this.props.to);if(Object(d.b)(t,n))return void p()(!1,"You tried to redirect to the same route you're currently on: \""+n.pathname+n.search+'"');this.perform()},t.prototype.perform=function(){var e=this.context.router.history,t=this.props,n=t.push,r=t.to;n?e.push(r):e.replace(r)},t.prototype.render=function(){return null},t}(s.a.Component);m.propTypes={push:l.a.bool,from:l.a.string,to:l.a.oneOfType([l.a.string,l.a.object]).isRequired},m.defaultProps={push:!1},m.contextTypes={router:l.a.shape({history:l.a.shape({push:l.a.func.isRequired,replace:l.a.func.isRequired}).isRequired,staticContext:l.a.object}).isRequired},t.a=m},function(e,t,n){"use strict";var r=(n(183),n(184),n(185),n(36));n.d(t,"a",function(){return r.a}),n.d(t,"b",function(){return r.b});n(27)},function(e,t,n){"use strict";var r=n(6),o=(n.n(r),n(11));n.n(o),n(36),n(27),n(55),n(84),"function"===typeof Symbol&&Symbol.iterator,Object.assign},function(e,t,n){"use strict";var r=n(6),o=(n.n(r),n(11)),i=(n.n(o),n(36),n(27));n(55),n(84),Object.assign,i.f,i.a,i.a,i.a},function(e,t,n){"use strict";var r=n(6);n.n(r),n(27),n(36),n(55),"function"===typeof Symbol&&Symbol.iterator,Object.assign},function(e,t,n){"use strict";var r=n(187);r.a},function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(6),u=n.n(s),l=n(11),c=n.n(l),p=n(1),h=n.n(p),f=n(3),d=n.n(f),m=n(26),y=(n.n(m),n(53)),v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g=function(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,o=void 0===r?"":r,i=e.hash,a=void 0===i?"":i;return{pathname:n,search:"?"===o?"":o,hash:"#"===a?"":a}},_=function(e,t){return e?v({},t,{pathname:Object(m.addLeadingSlash)(e)+t.pathname}):t},b=function(e,t){if(!e)return t;var n=Object(m.addLeadingSlash)(e);return 0!==t.pathname.indexOf(n)?t:v({},t,{pathname:t.pathname.substr(n.length)})},w=function(e){return"string"===typeof e?Object(m.parsePath)(e):g(e)},x=function(e){return"string"===typeof e?e:Object(m.createPath)(e)},E=function(e){return function(){c()(!1,"You cannot %s with <StaticRouter>",e)}},C=function(){},T=function(e){function t(){var n,r,a;o(this,t);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return n=r=i(this,e.call.apply(e,[this].concat(u))),r.createHref=function(e){return Object(m.addLeadingSlash)(r.props.basename+x(e))},r.handlePush=function(e){var t=r.props,n=t.basename,o=t.context;o.action="PUSH",o.location=_(n,w(e)),o.url=x(o.location)},r.handleReplace=function(e){var t=r.props,n=t.basename,o=t.context;o.action="REPLACE",o.location=_(n,w(e)),o.url=x(o.location)},r.handleListen=function(){return C},r.handleBlock=function(){return C},a=n,i(r,a)}return a(t,e),t.prototype.getChildContext=function(){return{router:{staticContext:this.props.context}}},t.prototype.componentWillMount=function(){u()(!this.props.history,"<StaticRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { StaticRouter as Router }`.")},t.prototype.render=function(){var e=this.props,t=e.basename,n=(e.context,e.location),o=r(e,["basename","context","location"]),i={createHref:this.createHref,action:"POP",location:b(t,w(n)),push:this.handlePush,replace:this.handleReplace,go:E("go"),goBack:E("goBack"),goForward:E("goForward"),listen:this.handleListen,block:this.handleBlock};return h.a.createElement(y.a,v({},o,{history:i}))},t}(h.a.Component);T.propTypes={basename:d.a.string,context:d.a.object.isRequired,location:d.a.oneOfType([d.a.string,d.a.object])},T.defaultProps={basename:"",location:"/"},T.childContextTypes={router:d.a.object.isRequired},t.a=T},function(e,t,n){"use strict";var r=n(189);t.a=r.a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(1),s=n.n(a),u=n(3),l=n.n(u),c=n(6),p=n.n(c),h=n(11),f=n.n(h),d=n(54),m=function(e){function t(){return r(this,t),o(this,e.apply(this,arguments))}return i(t,e),t.prototype.componentWillMount=function(){f()(this.context.router,"You should not use <Switch> outside a <Router>")},t.prototype.componentWillReceiveProps=function(e){p()(!(e.location&&!this.props.location),'<Switch> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),p()(!(!e.location&&this.props.location),'<Switch> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.')},t.prototype.render=function(){var e=this.context.router.route,t=this.props.children,n=this.props.location||e.location,r=void 0,o=void 0;return s.a.Children.forEach(t,function(t){if(s.a.isValidElement(t)){var i=t.props,a=i.path,u=i.exact,l=i.strict,c=i.sensitive,p=i.from,h=a||p;null==r&&(o=t,r=h?Object(d.a)(n.pathname,{path:h,exact:u,strict:l,sensitive:c}):e.match)}}),r?s.a.cloneElement(o,{location:n,computedMatch:r}):null},t}(s.a.Component);m.contextTypes={router:l.a.shape({route:l.a.object.isRequired}).isRequired},m.propTypes={children:l.a.node,location:l.a.object},t.a=m},function(e,t,n){"use strict";var r=n(54);r.a},function(e,t,n){"use strict";var r=n(192);t.a=r.a},function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var o=n(1),i=n.n(o),a=n(3),s=n.n(a),u=n(85),l=n.n(u),c=n(83),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h=function(e){var t=function(t){var n=t.wrappedComponentRef,o=r(t,["wrappedComponentRef"]);return i.a.createElement(c.a,{render:function(t){return i.a.createElement(e,p({},o,t,{ref:n}))}})};return t.displayName="withRouter("+(e.displayName||e.name)+")",t.WrappedComponent=e,t.propTypes={wrappedComponentRef:s.a.func},l()(t,e)};t.a=h},function(e,t,n){"use strict";function r(){return i.a.createElement("div",{className:"content-container"},i.a.createElement(h.a,null),i.a.createElement("div",{className:"grid"},i.a.createElement(p.a,null),i.a.createElement(a.a,null),i.a.createElement(s.a,null),i.a.createElement(u.a,null),i.a.createElement(l.a,null),i.a.createElement(c.a,null)))}t.a=r;var o=n(1),i=n.n(o),a=n(194),s=n(195),u=n(196),l=n(197),c=n(198),p=n(199),h=n(219),f=n(239);n.n(f)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(1),s=n.n(a),u=n(5),l=n(28),c=(n.n(l),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),p=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={tags:""},n}return i(t,e),c(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"card-container"},s.a.createElement(u.b,{to:"/listings/For Sale/all"},s.a.createElement("h2",{className:"card-header"},"For Sale")),s.a.createElement("hr",null),s.a.createElement("ul",null,s.a.createElement(u.b,{to:"/listings/For Sale/Outdoors",className:"tag"},"Outdoors"),s.a.createElement(u.b,{to:"/listings/For Sale/Books",className:"tag"},"Books"),s.a.createElement(u.b,{to:"/listings/For Sale/Household",className:"tag"},"Household"),s.a.createElement(u.b,{to:"/listings/For Sale/Atv & Motorcycles",className:"tag"},"Atv & Motorcycles"),s.a.createElement(u.b,{to:"/listings/For Sale/Cars & Trucks",className:"tag"},"Cars & Trucks"),s.a.createElement(u.b,{to:"/listings/For Sale/Business",className:"tag"},"Business"),s.a.createElement(u.b,{to:"/listings/For Sale/Music",className:"tag"},"Music"),s.a.createElement(u.b,{to:"/listings/For Sale/Tech",className:"tag"},"Tech"),s.a.createElement(u.b,{to:"/listings/For Sale/Toys & Games",className:"tag"},"Toys & Games"),s.a.createElement(u.b,{to:"/listings/For Sale/Garden & Tools",className:"tag"},"Garden & Tools"),s.a.createElement(u.b,{to:"/listings/For Sale/Tickets",className:"tag"},"Tickets"),s.a.createElement(u.b,{to:"/listings/For Sale/Garage Sale",className:"tag"},"Garage Sale")))}}]),t}(a.Component);t.a=p},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(1),s=n.n(a),u=n(5),l=n(28),c=(n.n(l),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),p=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={tags:""},n}return i(t,e),c(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"card-container"},s.a.createElement(u.b,{to:"/listings/Jobs/all"},s.a.createElement("h2",{className:"card-header"},"Jobs")),s.a.createElement("hr",null),s.a.createElement("ul",null,s.a.createElement(u.b,{to:"/listings/Jobs/Accounting & Finance",className:"tag"},"Accounting"),s.a.createElement(u.b,{to:"/listings/Jobs/Education",className:"tag"},"Education"),s.a.createElement(u.b,{to:"/listings/Jobs/Manufacturing",className:"tag"},"Manufacturing"),s.a.createElement(u.b,{to:"/listings/Jobs/Retail Wholesale",className:"tag"},"Retail Wholesale"),s.a.createElement(u.b,{to:"/listings/Jobs/Technical",className:"tag"},"Technical"),s.a.createElement(u.b,{to:"/listings/Jobs/Part-time",className:"tag"},"Part-time"),s.a.createElement(u.b,{to:"/listings/Jobs/Admin & Office",className:"tag"},"Admin & Office"),s.a.createElement(u.b,{to:"/listings/Jobs/Food & Bev",className:"tag"},"Food & Bev"),s.a.createElement(u.b,{to:"/listings/Jobs/Medical & Health",className:"tag"},"Medical & Health"),s.a.createElement(u.b,{to:"/listings/Jobs/Sales & Biz Dev",className:"tag"},"Sales & Biz Dev"),s.a.createElement(u.b,{to:"/listings/Jobs/Transport",className:"tag"},"Transport"),s.a.createElement(u.b,{to:"/listings/Jobs/Art & Media",className:"tag"},"Art & Media"),s.a.createElement(u.b,{to:"/listings/Jobs/General Labor",className:"tag"},"General Labor"),s.a.createElement(u.b,{to:"/listings/Jobs/Real Estate",className:"tag"},"Real Estate"),s.a.createElement(u.b,{to:"/listings/Jobs/Skilled Trade & Craft",className:"tag"},"Skilled Trade & Craft"),s.a.createElement(u.b,{to:"/listings/Jobs/Writing & Editng",className:"tag"},"Writing & Editng")))}}]),t}(a.Component);t.a=p},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(1),s=n.n(a),u=n(5),l=n(28),c=(n.n(l),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),p=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={tags:""},n}return i(t,e),c(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"card-container"},s.a.createElement(u.b,{to:"/listings/Services/all"},s.a.createElement("h2",{className:"card-header"},"Services")),s.a.createElement("hr",null),s.a.createElement("ul",null,s.a.createElement(u.b,{to:"/listings/Services/Automotive",className:"tag"},"Automotive"),s.a.createElement(u.b,{to:"/listings/Services/Computer",className:"tag"},"Computer"),s.a.createElement(u.b,{to:"/listings/Services/Labor & Move",className:"tag"},"Labor & Move"),s.a.createElement(u.b,{to:"/listings/Services/Real Estate",className:"tag"},"Real Estate"),s.a.createElement(u.b,{to:"/listings/Services/Beauty",className:"tag"},"Beauty"),s.a.createElement(u.b,{to:"/listings/Services/Event",className:"tag"},"Event"),s.a.createElement(u.b,{to:"/listings/Services/Lessons",className:"tag"},"Lessons"),s.a.createElement(u.b,{to:"/listings/Services/Skilled Trade",className:"tag"},"Skilled Trade"),s.a.createElement(u.b,{to:"/listings/Services/Cell & Mobile",className:"tag"},"Cell & Mobile"),s.a.createElement(u.b,{to:"/listings/Services/Household",className:"tag"},"Household"),s.a.createElement(u.b,{to:"/listings/Services/Pet",className:"tag"},"Pet"),s.a.createElement(u.b,{to:"/listings/Services/Writing & Editing",className:"tag"},"Writing & Editing")))}}]),t}(a.Component);t.a=p},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(1),s=n.n(a),u=n(5),l=n(28),c=(n.n(l),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),p=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={tags:""},n}return i(t,e),c(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"card-container"},s.a.createElement(u.b,{to:"/listings/Housing/all"},s.a.createElement("h2",{className:"card-header"},"Housing")),s.a.createElement("hr",null),s.a.createElement("ul",null,s.a.createElement(u.b,{to:"/listings/Housing/Apts & Housing",className:"tag"},"Apts & Housing"),s.a.createElement(u.b,{to:"/listings/Housing/Real Estate For Sale",className:"tag"},"Real Estate For Sale"),s.a.createElement(u.b,{to:"/listings/Housing/Sublets & Temporary",className:"tag"},"Sublets & Temporary"),s.a.createElement(u.b,{to:"/listings/Housing/Housing Wanted",className:"tag"},"Housing Wanted"),s.a.createElement(u.b,{to:"/listings/Housing/Rooms & Shared",className:"tag"},"Rooms & Shared"),s.a.createElement(u.b,{to:"/listings/Housing/Office & Commerical",className:"tag"},"Office & Commerical"),s.a.createElement(u.b,{to:"/listings/Housing/Rooms Wanted",className:"tag"},"Rooms Wanted"),s.a.createElement(u.b,{to:"/listings/Housing/Vacation Rentals",className:"tag"},"Vacation Rentals")))}}]),t}(a.Component);t.a=p},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(1),s=n.n(a),u=n(5),l=n(28),c=(n.n(l),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),p=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={tags:""},n}return i(t,e),c(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"card-container"},s.a.createElement(u.b,{to:"/listings/Community/all"},s.a.createElement("h2",{className:"card-header"},"Community")),s.a.createElement("hr",null),s.a.createElement("ul",null,s.a.createElement(u.b,{to:"/listings/Community/Activities",className:"tag"},"Activities"),s.a.createElement(u.b,{to:"/listings/Community/Classes",className:"tag"},"Classes"),s.a.createElement(u.b,{to:"/listings/Community/Groups",className:"tag"},"Groups"),s.a.createElement(u.b,{to:"/listings/Community/Musicians",className:"tag"},"Musicians"),s.a.createElement(u.b,{to:"/listings/Community/Artists",className:"tag"},"Artists"),s.a.createElement(u.b,{to:"/listings/Community/Events",className:"tag"},"Events"),s.a.createElement(u.b,{to:"/listings/Community/Local News",className:"tag"},"Local News"),s.a.createElement(u.b,{to:"/listings/Community/Pets",className:"tag"},"Pets"),s.a.createElement(u.b,{to:"/listings/Community/Childcare",className:"tag"},"Childcare"),s.a.createElement(u.b,{to:"/listings/Community/General",className:"tag"},"General"),s.a.createElement(u.b,{to:"/listings/Community/Lost & Found",className:"tag"},"Lost & Found"),s.a.createElement(u.b,{to:"/listings/Community/Volunteers",className:"tag"},"Volunteers")))}}]),t}(a.Component);t.a=p},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(1),s=n.n(a),u=n(200),l=n.n(u),c=n(216),p=(n.n(c),n(217)),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=function(e){function t(){var e,n,i,a;r(this,t);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return n=i=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),i.state={date:new Date},i.onChange=function(e){return i.setState({date:e})},a=n,o(i,a)}return i(t,e),h(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"time-container"},s.a.createElement(p.a,null),s.a.createElement("li",{className:"weekday-date"},s.a.createElement("ul",null,"S"),s.a.createElement("ul",null,"M"),s.a.createElement("ul",null,"T"),s.a.createElement("ul",null,"W"),s.a.createElement("ul",null,"T"),s.a.createElement("ul",null,"F"),s.a.createElement("ul",null,"S")),s.a.createElement(l.a,{onChange:this.onChange}))}}]),t}(a.Component);t.a=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.MonthView=t.YearView=t.DecadeView=t.CenturyView=t.Calendar=void 0;var o=n(201),i=r(o),a=n(86),s=r(a),u=n(87),l=r(u),c=n(88),p=r(c),h=n(89),f=r(h);n(215),t.default=i.default,t.Calendar=i.default,t.CenturyView=s.default,t.DecadeView=l.default,t.YearView=p.default,t.MonthView=f.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),p=r(c),h=n(3),f=r(h),d=n(202),m=r(d),y=n(203),v=r(y),g=n(86),_=r(g),b=n(87),w=r(b),x=n(88),E=r(x),C=n(89),T=r(C),S=n(9),P=n(57),O=n(7),A=n(30),k=["century","decade","year","month"],I=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(k.slice(1)),["day"]),N=function(e){function t(){var e,n,r,a;o(this,t);for(var s=arguments.length,l=Array(s),c=0;c<s;c++)l[c]=arguments[c];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.state={activeStartDate:r.getActiveStartDate(),view:r.getView()},r.setView=function(e){r.setState(function(t){var n=(0,S.getRange)(e,t.activeStartDate);return{activeStartDate:u(n,1)[0],view:e}})},r.setActiveStartDate=function(e){return r.setState({activeStartDate:e})},r.drillDown=function(e){if(r.drillDownAvailable){var t=r.getLimitedViews();r.setState(function(n){return{activeStartDate:e,view:t[t.indexOf(n.view)+1]}})}},r.drillUp=function(){if(r.drillUpAvailable){var e=r.getLimitedViews();r.setState(function(t){return{view:e[e.indexOf(t.view)-1]}})}},r.onChange=function(e){r.setState({value:e});var t=r.props.onChange;if(t){t(r.getProcessedValue(e))}},a=n,i(r,a)}return a(t,e),l(t,[{key:"getValueArray",value:function(e){return e instanceof Array?e:[this.getValueFrom(e),this.getValueTo(e)]}},{key:"getValueFrom",value:function(e){if(!e)return e;var t=this.props,n=t.maxDate,r=t.minDate,o=e instanceof Array?e[0]:e,i=(0,S.getBegin)(this.valueType,o);return r&&r>i?r:n&&n<i?n:i}},{key:"getValueTo",value:function(e){if(!e)return e;var t=this.props,n=t.maxDate,r=t.minDate,o=e instanceof Array?e[1]:e,i=(0,S.getEnd)(this.valueType,o);return r&&r>i?r:n&&n<i?n:i}},{key:"getLimitedViews",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.minDetail,n=e.maxDetail;return k.slice(k.indexOf(t),k.indexOf(n)+1)}},{key:"isViewAllowed",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.view;return-1!==this.getLimitedViews(e).indexOf(t)}},{key:"getProcessedValue",value:function(e){switch(this.props.returnValue){case"start":return this.getValueFrom(e);case"end":return this.getValueTo(e);case"range":return this.getValueArray(e);default:throw new Error("Invalid returnValue.")}}},{key:"componentWillMount",value:function(){(0,P.setLocale)(this.props.locale)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=e.minDetail!==t.minDetail||e.maxDetail!==t.maxDetail,r=this.getValueFrom(e.value),o=this.getValueFrom(t.value),i=r&&!o||r&&o&&r.getTime()!==o.getTime(),a=this.getValueTo(e.value),s=this.getValueTo(t.value),u=a&&!s||a&&s&&a.getTime()!==s.getTime(),l=i||u,c={};e.locale!==t.locale&&(0,P.setLocale)(e.locale),n&&(this.isViewAllowed(e)||(c.view=this.getView(e))),(n||l)&&(c.activeStartDate=this.getActiveStartDate(e)),this.setState(c)}},{key:"getActiveStartDate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=this.getView(e),n=this.getValueFrom(e.value)||new Date;return(0,S.getBegin)(t,n)}},{key:"getView",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.view;return t&&-1!==this.getLimitedViews(e).indexOf(t)?t:this.getLimitedViews(e).pop()}},{key:"renderContent",value:function(){var e=this.setView,t=this.valueType,n=this.props,r=n.calendarType,o=n.maxDate,i=n.minDate,a=n.renderChildren,u=n.value,l=this.state,c=l.activeStartDate,h=l.view,f={activeStartDate:c,maxDate:o,minDate:i,renderChildren:a,setView:e,value:u,valueType:t},d=this.drillDownAvailable?this.drillDown:this.onChange;switch(h){case"century":return p.default.createElement(_.default,s({onClick:(0,A.mergeFunctions)(d,this.props.onClickDecade)},f));case"decade":return p.default.createElement(w.default,s({onClick:(0,A.mergeFunctions)(d,this.props.onClickYear)},f));case"year":return p.default.createElement(E.default,s({onClick:(0,A.mergeFunctions)(d,this.props.onClickMonth)},f));case"month":return p.default.createElement(T.default,s({calendarType:r,onClick:(0,A.mergeFunctions)(d,this.props.onClickDay),showNeighboringMonth:this.props.showNeighboringMonth,showWeekNumbers:this.props.showWeekNumbers},f));default:throw new Error("Invalid view: "+h+".")}}},{key:"renderNavigation",value:function(){return this.props.showNavigation?p.default.createElement(v.default,{activeRange:this.state.activeRange,activeStartDate:this.state.activeStartDate,drillUp:this.drillUp,maxDate:this.props.maxDate,minDate:this.props.minDate,next2Label:this.props.next2Label,nextLabel:this.props.nextLabel,prev2Label:this.props.prev2Label,prevLabel:this.props.prevLabel,setActiveStartDate:this.setActiveStartDate,view:this.state.view,views:this.getLimitedViews()}):null}},{key:"render",value:function(){return p.default.createElement("div",{className:(0,m.default)("react-calendar",this.props.className)},this.renderNavigation(),this.renderContent())}},{key:"drillDownAvailable",get:function(){var e=this.getLimitedViews(),t=this.state.view;return e.indexOf(t)<e.length-1}},{key:"drillUpAvailable",get:function(){var e=this.getLimitedViews(),t=this.state.view;return e.indexOf(t)>0}},{key:"valueType",get:function(){var e=this.props.maxDetail;return I[k.indexOf(e)]}}]),t}(c.Component);t.default=N,N.defaultProps={maxDetail:"month",minDetail:"century",returnValue:"start",showNavigation:!0,showNeighboringMonth:!0,view:"month"},N.propTypes={calendarType:O.isCalendarType,className:f.default.oneOfType([f.default.string,f.default.arrayOf(f.default.string)]),locale:f.default.string,maxDate:O.isMaxDate,maxDetail:f.default.oneOf(k),minDate:O.isMinDate,minDetail:f.default.oneOf(k),next2Label:f.default.oneOfType([f.default.string,f.default.node]),nextLabel:f.default.oneOfType([f.default.string,f.default.node]),onChange:f.default.func,onClickDay:f.default.func,onClickDecade:f.default.func,onClickMonth:f.default.func,onClickYear:f.default.func,prev2Label:f.default.oneOfType([f.default.string,f.default.node]),prevLabel:f.default.oneOfType([f.default.string,f.default.node]),renderChildren:f.default.func,returnValue:f.default.oneOf(["start","end","range"]).isRequired,showNavigation:f.default.bool,showNeighboringMonth:f.default.bool,showWeekNumbers:f.default.bool,value:O.isValue,view:f.default.oneOf(k)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t){return"string"===typeof t||t instanceof Array?e.concat(t):e},[]).filter(function(e){return e}).join(" ")};t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),l=r(u),c=n(3),p=r(c),h=n(9),f=n(56),d=n(7),m=function(e){function t(){var e,n,r,a;o(this,t);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.onClickPrevious=function(){var e=r.props,t=e.activeStartDate,n=e.view;(0,e.setActiveStartDate)((0,h.getBeginPrevious)(n,t))},r.onClickNext=function(){var e=r.props,t=e.activeStartDate,n=e.view;(0,e.setActiveStartDate)((0,h.getBeginNext)(n,t))},r.onClickPrevious2=function(){var e=r.props,t=e.activeStartDate,n=e.view;(0,e.setActiveStartDate)((0,h.getBeginPrevious2)(n,t))},r.onClickNext2=function(){var e=r.props,t=e.activeStartDate,n=e.view;(0,e.setActiveStartDate)((0,h.getBeginNext2)(n,t))},a=n,i(r,a)}return a(t,e),s(t,[{key:"render",value:function(){var e=this.label,t=this.props,n=t.drillUp,r=t.view;return l.default.createElement("div",{className:"react-calendar__navigation",style:{display:"flex"}},"century"!==r&&l.default.createElement("button",{className:"react-calendar__navigation__arrow",disabled:this.prev2ButtonDisabled,onClick:this.onClickPrevious2,type:"button"},this.props.prev2Label),l.default.createElement("button",{className:"react-calendar__navigation__arrow",disabled:this.prevButtonDisabled,onClick:this.onClickPrevious,type:"button"},this.props.prevLabel),l.default.createElement("button",{className:"react-calendar__navigation__label",onClick:n,disabled:!this.drillUpAvailable,style:{flexGrow:1},type:"button"},e),l.default.createElement("button",{className:"react-calendar__navigation__arrow",disabled:this.nextButtonDisabled,onClick:this.onClickNext,type:"button"},this.props.nextLabel),"century"!==r&&l.default.createElement("button",{className:"react-calendar__navigation__arrow",disabled:this.next2ButtonDisabled,onClick:this.onClickNext2,type:"button"},this.props.next2Label))}},{key:"drillUpAvailable",get:function(){var e=this.props,t=e.view;return e.views.indexOf(t)>0}},{key:"prevButtonDisabled",get:function(){var e=this.props,t=e.activeStartDate,n=e.minDate,r=e.view;if((0,h.getBeginPrevious)(r,t).getFullYear()<1e3)return!0;var o=(0,h.getEndPrevious)(r,t);return n&&n>=o}},{key:"prev2ButtonDisabled",get:function(){var e=this.props,t=e.activeStartDate,n=e.minDate,r=e.view;if((0,h.getBeginPrevious2)(r,t).getFullYear()<1e3)return!0;var o=(0,h.getEndPrevious2)(r,t);return n&&n>=o}},{key:"nextButtonDisabled",get:function(){var e=this.props,t=e.activeStartDate,n=e.maxDate,r=e.view,o=(0,h.getBeginNext)(r,t);return n&&n<=o}},{key:"next2ButtonDisabled",get:function(){var e=this.props,t=e.activeStartDate,n=e.maxDate,r=e.view,o=(0,h.getBeginNext2)(r,t);return n&&n<=o}},{key:"label",get:function(){var e=this.props,t=e.activeStartDate,n=e.view;switch(n){case"century":return(0,h.getCenturyLabel)(t);case"decade":return(0,h.getDecadeLabel)(t);case"year":return(0,h.getYear)(t);case"month":return(0,f.formatMonthYear)(t);default:throw new Error("Invalid view: "+n+".")}}}]),t}(u.Component);t.default=m,m.defaultProps={next2Label:"\xbb",nextLabel:"\u203a",prev2Label:"\xab",prevLabel:"\u2039"},m.propTypes={activeStartDate:p.default.instanceOf(Date).isRequired,drillUp:p.default.func.isRequired,maxDate:p.default.instanceOf(Date),minDate:p.default.instanceOf(Date),next2Label:p.default.oneOfType([p.default.string,p.default.node]),nextLabel:p.default.oneOfType([p.default.string,p.default.node]),prev2Label:p.default.oneOfType([p.default.string,p.default.node]),prevLabel:p.default.oneOfType([p.default.string,p.default.node]),setActiveStartDate:p.default.func.isRequired,view:d.isView.isRequired,views:d.isViews.isRequired}},function(e,t){function n(e,t){var n;if("function"!=typeof t)throw new TypeError(c);return e=u(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}}function r(e){return n(2,e)}function o(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function i(e){return!!e&&"object"==typeof e}function a(e){return"symbol"==typeof e||i(e)&&w.call(e)==d}function s(e){if(!e)return 0===e?e:0;if((e=l(e))===p||e===-p){return(e<0?-1:1)*h}return e===e?e:0}function u(e){var t=s(e),n=t%1;return t===t?n?t-n:t:0}function l(e){if("number"==typeof e)return e;if(a(e))return f;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(m,"");var n=v.test(e);return n||g.test(e)?_(e.slice(2),n?2:8):y.test(e)?f:+e}var c="Expected a function",p=1/0,h=1.7976931348623157e308,f=NaN,d="[object Symbol]",m=/^\s+|\s+$/g,y=/^[-+]0x[0-9a-f]+$/i,v=/^0b[01]+$/i,g=/^0o[0-7]+$/i,_=parseInt,b=Object.prototype,w=b.toString;e.exports=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),c=r(l),p=n(3),h=r(p),f=n(29),d=r(f),m=n(206),y=r(m),v=n(9),g=n(30),_=n(7),b=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"render",value:function(){for(var e=this.end,t=this.start,n=this.props,r=n.maxDate,o=n.minDate,i=n.onClick,a=n.renderChildren,u=n.value,l=n.valueType,p={maxDate:r,minDate:o,onClick:i,renderChildren:a},h=[],f=t;f<=e;f+=10){var m=(0,v.getBeginOfDecade)(f);h.push(c.default.createElement(y.default,s({},(0,g.getTileActivityFlags)(u,l,m,"decade"),{date:m,decade:f,key:f},p)))}return c.default.createElement(d.default,{className:"react-calendar__century-view__decades",count:3,wrap:!0},h)}},{key:"start",get:function(){var e=this.props.activeStartDate;return(0,v.getBeginOfCenturyYear)(e)}},{key:"end",get:function(){return this.start+99}}]),t}(l.Component);t.default=b,b.propTypes={activeStartDate:h.default.instanceOf(Date).isRequired,maxDate:_.isMaxDate,minDate:_.isMinDate,onClick:h.default.func,renderChildren:h.default.func,value:_.isValue,valueType:h.default.string}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=r(o),a=n(3),s=r(a),u=n(9),l=n(7),c=function(e){var t=e.active,n=e.date,r=e.decade,o=e.hasActive,a=e.maxDate,s=e.minDate,l=e.onClick,c=e.renderChildren;return i.default.createElement("button",{className:["react-calendar__century-view__decades__decade",t?"react-calendar__tile--active":"",o?"react-calendar__tile--hasActive":"","react-calendar__tile"].join(" "),disabled:s&&(0,u.getBeginOfDecade)(s)>n||a&&(0,u.getEndOfDecade)(a)<n,onClick:l&&function(){return l(n)},style:{flexGrow:1},type:"button"},i.default.createElement("time",null,(0,u.getDecadeLabel)(r)),c&&c({date:n,view:"century"}))};c.propTypes={active:s.default.bool.isRequired,date:s.default.instanceOf(Date).isRequired,decade:s.default.number.isRequired,hasActive:s.default.bool.isRequired,maxDate:l.isMaxDate,minDate:l.isMinDate,onClick:s.default.func,renderChildren:s.default.func},t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),c=r(l),p=n(3),h=r(p),f=n(29),d=r(f),m=n(208),y=r(m),v=n(9),g=n(30),_=n(7),b=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"render",value:function(){for(var e=this.end,t=this.start,n=this.props,r=n.maxDate,o=n.minDate,i=n.onClick,a=n.renderChildren,u=n.value,l=n.valueType,p={maxDate:r,minDate:o,onClick:i,renderChildren:a},h=[],f=t;f<=e;f+=1){var m=new Date(f,0,1);h.push(c.default.createElement(y.default,s({},(0,g.getTileActivityFlags)(u,l,m,"year"),{date:m,key:f,year:f},p)))}return c.default.createElement(d.default,{className:"react-calendar__decade-view__years",count:3,wrap:!0},h)}},{key:"start",get:function(){var e=this.props.activeStartDate;return(0,v.getBeginOfDecadeYear)(e)}},{key:"end",get:function(){return this.start+9}}]),t}(l.Component);t.default=b,b.propTypes={activeStartDate:h.default.instanceOf(Date).isRequired,maxDate:_.isMaxDate,minDate:_.isMinDate,onClick:h.default.func,renderChildren:h.default.func,value:_.isValue,valueType:h.default.string}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=r(o),a=n(3),s=r(a),u=n(9),l=n(7),c=function(e){var t=e.active,n=e.date,r=e.hasActive,o=e.maxDate,a=e.minDate,s=e.onClick,l=e.renderChildren,c=e.year;return i.default.createElement("button",{className:["react-calendar__decade-view__years__year",t?"react-calendar__tile--active":"",r?"react-calendar__tile--hasActive":"","react-calendar__tile"].join(" "),disabled:a&&(0,u.getBeginOfYear)(a)>n||o&&(0,u.getEndOfYear)(o)<n,onClick:s&&function(){return s(n)},style:{flexGrow:1},type:"button"},i.default.createElement("time",{dateTime:c},c),l&&l({date:n,view:"decade"}))};c.propTypes={active:s.default.bool.isRequired,date:s.default.instanceOf(Date).isRequired,hasActive:s.default.bool.isRequired,maxDate:l.isMaxDate,minDate:l.isMinDate,onClick:s.default.func,renderChildren:s.default.func,year:s.default.number.isRequired},t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),c=r(l),p=n(3),h=r(p),f=n(29),d=r(f),m=n(210),y=r(m),v=n(9),g=n(30),_=n(7),b=function(e){function t(){var e,n,r,a;o(this,t);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.start=0,r.end=11,a=n,i(r,a)}return a(t,e),u(t,[{key:"render",value:function(){for(var e=this.end,t=this.start,n=this.year,r=this.props,o=r.maxDate,i=r.minDate,a=r.onClick,u=r.renderChildren,l=r.value,p=r.valueType,h={maxDate:o,minDate:i,onClick:a,renderChildren:u},f=[],m=t;m<=e;m+=1){var v=new Date(n,m,1);f.push(c.default.createElement(y.default,s({},(0,g.getTileActivityFlags)(l,p,v,"month"),{date:v,key:m},h)))}return c.default.createElement(d.default,{className:"react-calendar__year-view__months",count:3,wrap:!0},f)}},{key:"year",get:function(){var e=this.props.activeStartDate;return(0,v.getYear)(e)}}]),t}(l.Component);t.default=b,b.propTypes={activeStartDate:h.default.instanceOf(Date).isRequired,maxDate:_.isMaxDate,minDate:_.isMinDate,onClick:h.default.func,renderChildren:h.default.func,value:_.isValue,valueType:h.default.string}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=r(o),a=n(3),s=r(a),u=n(9),l=n(56),c=n(7),p=function(e){var t=e.active,n=e.date,r=e.hasActive,o=e.maxDate,a=e.minDate,s=e.onClick,c=e.renderChildren;return i.default.createElement("button",{className:["react-calendar__year-view__months__month",t?"react-calendar__tile--active":"",r?"react-calendar__tile--hasActive":"","react-calendar__tile"].join(" "),disabled:a&&(0,u.getBeginOfMonth)(a)>n||o&&(0,u.getEndOfMonth)(o)<n,onClick:s&&function(){return s(n)},style:{flexGrow:1},type:"button"},i.default.createElement("time",{dateTime:n.toISOString()},(0,l.formatMonth)(n)),c&&c({date:n,view:"year"}))};p.propTypes={active:s.default.bool.isRequired,date:s.default.instanceOf(Date).isRequired,hasActive:s.default.bool.isRequired,maxDate:c.isMaxDate,minDate:c.isMinDate,onClick:s.default.func,renderChildren:s.default.func},t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),c=r(l),p=n(3),h=r(p),f=n(29),d=r(f),m=n(212),y=r(m),v=n(9),g=n(7),_=n(30),b=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"render",value:function(){for(var e=this.start,t=this.end,n=this.year,r=this.monthIndex,o=this.props,i=o.maxDate,a=o.minDate,u=o.onClick,l=o.renderChildren,p=o.value,h=o.valueType,f={maxDate:i,minDate:a,onClick:u,renderChildren:l},m=[],v=e;v<=t;v+=1){var g=new Date(n,r,v);m.push(c.default.createElement(y.default,s({},(0,_.getTileActivityFlags)(p,h,g,"day"),{currentMonthIndex:r,date:g,key:v},f)))}return c.default.createElement(d.default,{className:"react-calendar__month-view__days",count:7,offset:this.offset,wrap:!0},m)}},{key:"offset",get:function(){if(this.props.showNeighboringMonth)return 0;var e=this.props,t=e.activeStartDate,n=e.calendarType;return(0,v.getDayOfWeek)(t,n)}},{key:"start",get:function(){if(this.props.showNeighboringMonth){var e=this.props,t=e.activeStartDate,n=e.calendarType;return 1-(0,v.getDayOfWeek)(t,n)}return 1}},{key:"end",get:function(){var e=this.props.activeStartDate,t=(0,v.getDaysInMonth)(e);if(this.props.showNeighboringMonth){var n=this.year,r=this.monthIndex,o=this.props.calendarType,i=new Date(n,r,t);return t+(7-(0,v.getDayOfWeek)(i,o)-1)}return t}},{key:"year",get:function(){var e=this.props.activeStartDate;return(0,v.getYear)(e)}},{key:"monthIndex",get:function(){var e=this.props.activeStartDate;return(0,v.getMonthIndex)(e)}}]),t}(l.Component);t.default=b,b.propTypes={activeStartDate:h.default.instanceOf(Date).isRequired,calendarType:g.isCalendarType.isRequired,maxDate:g.isMaxDate,minDate:g.isMinDate,onClick:h.default.func,renderChildren:h.default.func,showNeighboringMonth:h.default.bool,value:g.isValue,valueType:h.default.string}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=r(o),a=n(3),s=r(a),u=n(9),l=n(7),c="react-calendar__month-view__days__day",p=function(e){var t=e.active,n=e.currentMonthIndex,r=e.date,o=e.maxDate,a=e.minDate,s=e.onClick,l=e.renderChildren;return i.default.createElement("button",{className:[c,"react-calendar__tile",t?"react-calendar__tile--active":"",(0,u.isWeekend)(r)?c+"--weekend":"",r.getMonth()!==n?c+"--neighboringMonth":""].join(" "),disabled:a&&(0,u.getBeginOfDay)(a)>r||o&&(0,u.getEndOfDay)(o)<r,key:r,onClick:s&&function(){return s(r)},style:{flexGrow:1},type:"button"},i.default.createElement("time",{dateTime:r.toISOString()},(0,u.getDay)(r)),l&&l({date:r,view:"month"}))};p.propTypes={active:s.default.bool.isRequired,currentMonthIndex:s.default.number.isRequired,date:s.default.instanceOf(Date).isRequired,maxDate:l.isMaxDate,minDate:l.isMinDate,onClick:s.default.func,renderChildren:s.default.func},t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),l=r(u),c=n(3),p=r(c),h=n(29),f=r(h),d=n(9),m=n(56),y=n(7),v=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"render",value:function(){for(var e=this.beginOfMonth,t=this.year,n=this.monthIndex,r=this.props.calendarType,o=[],i=1;i<=7;i+=1){var a=new Date(t,n,i-(0,d.getDayOfWeek)(e,r));o.push(l.default.createElement("div",{className:"react-calendar__month-view__weekdays__weekday",key:i,style:{flexGrow:1}},(0,m.formatShortWeekday)(a).replace(".","")))}return l.default.createElement(f.default,{className:"react-calendar__month-view__weekdays",count:7},o)}},{key:"beginOfMonth",get:function(){var e=this.props.month;return(0,d.getBeginOfMonth)(e)}},{key:"year",get:function(){var e=this.beginOfMonth;return(0,d.getYear)(e)}},{key:"monthIndex",get:function(){var e=this.beginOfMonth;return(0,d.getMonthIndex)(e)}}]),t}(u.Component);t.default=v,v.propTypes={calendarType:y.isCalendarType.isRequired,month:p.default.oneOfType([p.default.string,p.default.number,p.default.instanceOf(Date)]).isRequired}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),l=r(u),c=n(3),p=r(c),h=n(9),f=n(7),d=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"render",value:function(){for(var e=this.year,t=this.monthIndex,n=this.day,r=this.props.calendarType,o=[],i=0;i<this.numberOfWeeks;i+=1){var a=new Date(e,t,n+7*i);o.push((0,h.getWeekNumber)(a,r))}return l.default.createElement("div",{className:"react-calendar__month-view__weekNumbers",style:{flexBasis:"calc(100% * (1 / 8)",flexShrink:0}},o.map(function(e){return l.default.createElement("div",{className:"react-calendar__tile",key:e},l.default.createElement("span",null,e))}))}},{key:"numberOfDays",get:function(){var e=this.props.activeStartDate;return(0,h.getDaysInMonth)(e)}},{key:"startWeekday",get:function(){var e=this.props,t=e.activeStartDate,n=e.calendarType;return(0,h.getDayOfWeek)(t,n)}},{key:"year",get:function(){var e=this.props.activeStartDate;return(0,h.getYear)(e)}},{key:"monthIndex",get:function(){var e=this.props.activeStartDate;return(0,h.getMonthIndex)(e)}},{key:"day",get:function(){var e=this.props.activeStartDate;return(0,h.getDay)(e)}},{key:"numberOfWeeks",get:function(){var e=this.numberOfDays-(7-this.startWeekday);return 1+Math.ceil(e/7)}}]),t}(u.Component);t.default=d,d.propTypes={activeStartDate:p.default.instanceOf(Date).isRequired,calendarType:f.isCalendarType.isRequired}},function(e,t){},function(e,t){},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(1),s=n.n(a),u=n(218),l=(n.n(u),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),c=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={date:new Date},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;this.timerID=setInterval(function(){return e.tick()},1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timerID)}},{key:"tick",value:function(){this.setState({date:new Date})}},{key:"render",value:function(){var e=["January","February","March","April","May","June","July","August","September","October","November","December"];return s.a.createElement("div",{className:"real-time-clock"},s.a.createElement("div",{className:"date-container-for-clock"},s.a.createElement("div",{className:"dayOfTheMonth"},s.a.createElement("p",null,this.state.date.getDate())),s.a.createElement("div",{className:"theMonthTime"},s.a.createElement("h2",null,e[this.state.date.getMonth()]),s.a.createElement("hr",null))),s.a.createElement("div",{className:"clock-time"},s.a.createElement("p",null,this.state.date.toLocaleTimeString())))}}]),t}(a.Component);t.a=c},function(e,t){},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(1),s=n.n(a),u=n(5),l=n(15),c=n.n(l),p=n(238),h=(n.n(p),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),f=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={topThree:[]},n}return i(t,e),h(t,[{key:"componentWillMount",value:function(){var e=this;c.a.get("/api/mostViewed").then(function(t){console.log(t),e.setState({topThree:t.data})})}},{key:"render",value:function(){var e=this.state.topThree.map(function(e,t){var n={backgroundImage:"url("+e.image_url+")"};return s.a.createElement(u.b,{to:"/post/"+e.post_id,key:t,className:"most-viewed-item"},s.a.createElement("div",{className:"most-viewed-content"},s.a.createElement("p",null,e.title),0!==e.price&&s.a.createElement("p",{className:"most-viewed-price"},"$",e.price)),s.a.createElement("div",{className:"most-viewed-image-container",style:n}))});return s.a.createElement("div",{className:"most-viewed-container"},e)}}]),t}(a.Component);t.a=f},function(e,t,n){"use strict";function r(e){var t=new a(e),n=i(a.prototype.request,t);return o.extend(n,a.prototype,t),o.extend(n,t),n}var o=n(12),i=n(90),a=n(222),s=n(58),u=r(s);u.Axios=a,u.create=function(e){return r(o.merge(s,e))},u.Cancel=n(94),u.CancelToken=n(236),u.isCancel=n(93),u.all=function(e){return Promise.all(e)},u.spread=n(237),e.exports=u,e.exports.default=u},function(e,t){function n(e){return!!e.constructor&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function r(e){return"function"===typeof e.readFloatLE&&"function"===typeof e.slice&&n(e.slice(0,0))}e.exports=function(e){return null!=e&&(n(e)||r(e)||!!e._isBuffer)}},function(e,t,n){"use strict";function r(e){this.defaults=e,this.interceptors={request:new a,response:new a}}var o=n(58),i=n(12),a=n(231),s=n(232);r.prototype.request=function(e){"string"===typeof e&&(e=i.merge({url:arguments[0]},arguments[1])),e=i.merge(o,this.defaults,{method:"get"},e),e.method=e.method.toLowerCase();var t=[s,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)n=n.then(t.shift(),t.shift());return n},i.forEach(["delete","get","head","options"],function(e){r.prototype[e]=function(t,n){return this.request(i.merge(n||{},{method:e,url:t}))}}),i.forEach(["post","put","patch"],function(e){r.prototype[e]=function(t,n,r){return this.request(i.merge(r||{},{method:e,url:t,data:n}))}}),e.exports=r},function(e,t,n){"use strict";var r=n(12);e.exports=function(e,t){r.forEach(e,function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])})}},function(e,t,n){"use strict";var r=n(92);e.exports=function(e,t,n){var o=n.config.validateStatus;n.status&&o&&!o(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,o){return e.config=t,n&&(e.code=n),e.request=r,e.response=o,e}},function(e,t,n){"use strict";function r(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var o=n(12);e.exports=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(o.isURLSearchParams(t))i=t.toString();else{var a=[];o.forEach(t,function(e,t){null!==e&&"undefined"!==typeof e&&(o.isArray(e)&&(t+="[]"),o.isArray(e)||(e=[e]),o.forEach(e,function(e){o.isDate(e)?e=e.toISOString():o.isObject(e)&&(e=JSON.stringify(e)),a.push(r(t)+"="+r(e))}))}),i=a.join("&")}return i&&(e+=(-1===e.indexOf("?")?"?":"&")+i),e}},function(e,t,n){"use strict";var r=n(12),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,i,a={};return e?(r.forEach(e.split("\n"),function(e){if(i=e.indexOf(":"),t=r.trim(e.substr(0,i)).toLowerCase(),n=r.trim(e.substr(i+1)),t){if(a[t]&&o.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([n]):a[t]?a[t]+", "+n:n}}),a):a}},function(e,t,n){"use strict";var r=n(12);e.exports=r.isStandardBrowserEnv()?function(){function e(e){var t=e;return n&&(o.setAttribute("href",t),t=o.href),o.setAttribute("href",t),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:"/"===o.pathname.charAt(0)?o.pathname:"/"+o.pathname}}var t,n=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a");return t=e(window.location.href),function(n){var o=r.isString(n)?e(n):n;return o.protocol===t.protocol&&o.host===t.host}}():function(){return function(){return!0}}()},function(e,t,n){"use strict";function r(){this.message="String contains an invalid character"}function o(e){for(var t,n,o=String(e),a="",s=0,u=i;o.charAt(0|s)||(u="=",s%1);a+=u.charAt(63&t>>8-s%1*8)){if((n=o.charCodeAt(s+=.75))>255)throw new r;t=t<<8|n}return a}var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.prototype=new Error,r.prototype.code=5,r.prototype.name="InvalidCharacterError",e.exports=o},function(e,t,n){"use strict";var r=n(12);e.exports=r.isStandardBrowserEnv()?function(){return{write:function(e,t,n,o,i,a){var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(o)&&s.push("path="+o),r.isString(i)&&s.push("domain="+i),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},function(e,t,n){"use strict";function r(){this.handlers=[]}var o=n(12);r.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},r.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},r.prototype.forEach=function(e){o.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=r},function(e,t,n){"use strict";function r(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var o=n(12),i=n(233),a=n(93),s=n(58),u=n(234),l=n(235);e.exports=function(e){return r(e),e.baseURL&&!u(e.url)&&(e.url=l(e.baseURL,e.url)),e.headers=e.headers||{},e.data=i(e.data,e.headers,e.transformRequest),e.headers=o.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),o.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||s.adapter)(e).then(function(t){return r(e),t.data=i(t.data,t.headers,e.transformResponse),t},function(t){return a(t)||(r(e),t&&t.response&&(t.response.data=i(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},function(e,t,n){"use strict";var r=n(12);e.exports=function(e,t,n){return r.forEach(n,function(n){e=n(e,t)}),e}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,n){"use strict";function r(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var n=this;e(function(e){n.reason||(n.reason=new o(e),t(n.reason))})}var o=n(94);r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.source=function(){var e;return{token:new r(function(t){e=t}),cancel:e}},e.exports=r},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t){},function(e,t){},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(1),s=n.n(a),u=(n(16),n(15)),l=n.n(u),c=n(5),p=n(47),h=n(347),f=n(348),d=(n.n(f),n(22)),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),y=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.showLoginModal=function(){n.setState({loginModal:!0})},n.closeLoginModal=function(){n.setState({loginModal:!1})},n.state={listArray:[],category:"",tag:"",value:"",uid:"",user:"",categoriesArray:[],tagsArray:[],list:!1,loginModal:!1,redirect:""},n.handleDateSort=n.handleDateSort.bind(n),n.handleScroll=n.handleScroll.bind(n),n}return i(t,e),m(t,[{key:"componentDidMount",value:function(){var e=this;console.log(this.props.userId),this.getListings(this.props.userId),this.setState({tag:this.props.match.params.tag}),l.a.get("/api/getCategories").then(function(t){e.setState({categoriesArray:t.data})});var t=this.props.match.params.category;l.a.post("/api/getCategoryTags",[t]).then(function(t){e.setState({tagsArray:t.data})}),window.addEventListener("scroll",this.handleScroll)}},{key:"getListings",value:function(e){var t=this,n=this.props.match.params;n.value=this.state.value,n.uid=e,this.setState({category:n.category}),l.a.post("/api/getListings/",n).then(function(e){t.setState({listArray:e.data,list:!0,redirect:"listings"}),console.log(t.state.listArray)})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"handleScroll",value:function(){window.scrollY>120?document.getElementById("searchbar-container").style.marginBottom="1em":window.scrollY<120&&(document.getElementById("searchbar-container").style.marginBottom="4.5em")}},{key:"renderCategoryItem",value:function(e,t){var n=this.props.match.params.category,r=!1;return e.name===n&&(r=!0),s.a.createElement("option",{value:e.name,selected:r,key:t},e.name)}},{key:"renderTagItem",value:function(e,t){var n=this.props.match.params.tag,r=!1;return e.tag===n&&(r=!0),s.a.createElement("option",{value:e.tag,selected:r,key:t},e.tag)}},{key:"renderListItem",value:function(e,t){var n={backgroundImage:"url("+e.image_url+")"};return s.a.createElement("div",{className:"list-item-container",key:t},s.a.createElement(c.b,{to:"/post/"+e.post_id},s.a.createElement("div",{className:"list-item-parent-image"},s.a.createElement("div",{className:"list-item-image-container",style:n}),0!=e.price&&s.a.createElement("p",{className:"list-item-price"},"$",e.price))),s.a.createElement("div",{className:"list-item-title-container"},s.a.createElement(c.b,{to:"/post/"+e.post_id},s.a.createElement("h3",null,e.title)),s.a.createElement(h.a,{item:e,login:this.showLoginModal.bind(this),onFav:this.handleFavPost.bind(this)})))}},{key:"handleSearchInput",value:function(e){var t=this;this.setState({value:e});var n={category:this.props.match.params.category,tag:this.state.tag,value:e,uid:this.props.userId};l.a.post("/api/getListings/",n).then(function(e){t.setState({listArray:e.data}),console.log(t.state.listArray)})}},{key:"handleFavPost",value:function(e,t){var n=this,r={uid:this.props.userId,post_id:e};this.state.user||this.setState({modal:!0}),console.log("FAV VALUE IN PARENT",t),"false"==t?l.a.post("/api/postFav",r).then(function(){var e=n.props.match.params;e.value=n.state.value,e.uid=n.props.userId,l.a.post("/api/getListings/",e).then(function(e){n.setState({listArray:e.data}),console.log(n.state.listArray)})}):l.a.post("/api/removeFav",r).then(function(){var e=n.props.match.params;e.value=n.state.value,e.uid=n.props.userId,l.a.post("/api/getListings/",e).then(function(e){n.setState({listArray:e.data}),console.log(n.state.listArray)})})}},{key:"handleCategoryChange",value:function(e){var t=this,n={category:e,tag:"all",uid:this.props.userId};this.setState({category:e,tag:"all"}),this.props.history.push("/listings/"+e+"/all"),n.value=this.state.value,l.a.post("/api/getListings/",n).then(function(n){t.setState({listArray:n.data}),l.a.post("/api/getCategoryTags",[e]).then(function(e){t.setState({tagsArray:e.data})})})}},{key:"handleTagSort",value:function(e){var t=this,n=this.state.category,r={category:n,tag:e,uid:this.props.userId};this.props.history.push("/listings/"+n+"/"+e),this.setState({tag:e}),r.value=this.state.value,l.a.post("/api/getListings/",r).then(function(e){t.setState({listArray:e.data}),console.log(t.state)})}},{key:"handleDateSort",value:function(e){var t=this.state.listArray.reverse().slice();"Oldest"===e?this.setState({listArray:t}):this.setState({})}},{key:"handlePriceSort",value:function(e){}},{key:"render",value:function(){var e=this;console.log(this.state);var t=void 0;"For Sale"===this.state.category&&(t=s.a.createElement("div",{id:"price-filter",className:"input-container"},s.a.createElement("select",{onChange:function(t){return e.handlePriceSort(t.target.value)}},s.a.createElement("option",{value:"Lowest"},"Lowest Price"),s.a.createElement("option",{value:"Newest"},"Highest Price")),s.a.createElement("img",{className:"down-arrow",src:n(48),alt:""})));var r=void 0;return 0===this.state.listArray.length&&this.state.list&&(r=s.a.createElement("h3",null,"Nothing found.")),s.a.createElement("div",{className:"listings-container"},s.a.createElement("div",{id:"searchbar-filter-container",className:"searchbar-filter-container"},s.a.createElement("div",{id:"searchbar-container",className:"searchbar-container"},s.a.createElement("div",{className:"searchbar-icon-container"},s.a.createElement("p",null,s.a.createElement("i",{className:"icon-heart-empty"})),s.a.createElement("svg",{className:"searchbar-icon",viewBox:"0 0 27 28",xmlns:"http://www.w3.org/2000/svg"},s.a.createElement("title",null,"Search"),s.a.createElement("path",{d:"M18.387 16.623C19.995 15.076 21 12.907 21 10.5 21 5.806 17.195 2 12.5 2 7.806 2 4 5.806 4 10.5S7.806 19 12.5 19c1.927 0 3.7-.65 5.125-1.73l4.4 5.153.76-.65-4.398-5.15zM12.5 18C8.364 18 5 14.636 5 10.5S8.364 3 12.5 3 20 6.364 20 10.5 16.636 18 12.5 18z",fill:"currentColor",fillRule:"evenodd"}))),s.a.createElement("input",{className:"input",placeholder:"Search",onChange:function(t){e.handleSearchInput(t.target.value)}})),s.a.createElement("div",{className:"filter-container"},s.a.createElement("div",{id:"category-filter",className:"input-container"},s.a.createElement("select",{onChange:function(t){return e.handleCategoryChange(t.target.value)}},this.state.categoriesArray.map(function(t,n){return e.renderCategoryItem(t,n)})),s.a.createElement("img",{className:"down-arrow",src:n(48),alt:""})),s.a.createElement("div",{id:"tag-filter",className:"input-container"},s.a.createElement("select",{onChange:function(t){return e.handleTagSort(t.target.value)}},s.a.createElement("option",{value:"all"},"All"),this.state.tagsArray.map(function(t,n){return e.renderTagItem(t,n)})),s.a.createElement("img",{className:"down-arrow",src:n(48),alt:""})),t,s.a.createElement("div",{id:"newest-oldest-filter",className:"input-container"},s.a.createElement("select",{onChange:function(t){return e.handleDateSort(t.target.value)}},s.a.createElement("option",{value:"Newest"},"Newest First"),s.a.createElement("option",{value:"Oldest"},"Oldest First")),s.a.createElement("img",{className:"down-arrow",src:n(48),alt:""})))),s.a.createElement("div",{id:"center",className:"content-container"},r,s.a.createElement("div",{className:"list-item-parent-container"},this.state.listArray.map(function(t,n){return e.renderListItem(t,n)}))),this.state.loginModal&&s.a.createElement(p.a,{state:this.state,listings:this.getListings.bind(this),closeModal:this.closeLoginModal}))}}]),t}(a.Component);t.a=Object(c.e)(Object(d.b)(function(e){return e})(y))},function(e,t,n){var r=n(242);n(261),n(263),n(298),n(305),e.exports=r},function(e,t,n){n(243),e.exports=n(18).default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(244),o=(n.n(r),n(247)),i=(n.n(o),n(248));n.n(i)},function(e,t,n){(function(e){var t=function(){if("undefined"!==typeof e)return e;if("undefined"!==typeof window)return window;if("undefined"!==typeof self)return self;throw new Error("unable to locate global object")}();"undefined"===typeof Promise&&(t.Promise=Promise=n(245))}).call(t,n(23))},function(e,t,n){(function(t){!function(n){function r(){}function o(e,t){return function(){e.apply(t,arguments)}}function i(e){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");if("function"!==typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],p(e,this)}function a(e,t){for(;3===e._state;)e=e._value;if(0===e._state)return void e._deferreds.push(t);e._handled=!0,i._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._state?s:u)(t.promise,e._value);var r;try{r=n(e._value)}catch(e){return void u(t.promise,e)}s(t.promise,r)})}function s(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"===typeof t||"function"===typeof t)){var n=t.then;if(t instanceof i)return e._state=3,e._value=t,void l(e);if("function"===typeof n)return void p(o(n,t),e)}e._state=1,e._value=t,l(e)}catch(t){u(e,t)}}function u(e,t){e._state=2,e._value=t,l(e)}function l(e){2===e._state&&0===e._deferreds.length&&i._immediateFn(function(){e._handled||i._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)a(e,e._deferreds[t]);e._deferreds=null}function c(e,t,n){this.onFulfilled="function"===typeof e?e:null,this.onRejected="function"===typeof t?t:null,this.promise=n}function p(e,t){var n=!1;try{e(function(e){n||(n=!0,s(t,e))},function(e){n||(n=!0,u(t,e))})}catch(e){if(n)return;n=!0,u(t,e)}}var h=setTimeout;i.prototype.catch=function(e){return this.then(null,e)},i.prototype.then=function(e,t){var n=new this.constructor(r);return a(this,new c(e,t,n)),n},i.all=function(e){var t=Array.prototype.slice.call(e);return new i(function(e,n){function r(i,a){try{if(a&&("object"===typeof a||"function"===typeof a)){var s=a.then;if("function"===typeof s)return void s.call(a,function(e){r(i,e)},n)}t[i]=a,0===--o&&e(t)}catch(e){n(e)}}if(0===t.length)return e([]);for(var o=t.length,i=0;i<t.length;i++)r(i,t[i])})},i.resolve=function(e){return e&&"object"===typeof e&&e.constructor===i?e:new i(function(t){t(e)})},i.reject=function(e){return new i(function(t,n){n(e)})},i.race=function(e){return new i(function(t,n){for(var r=0,o=e.length;r<o;r++)e[r].then(t,n)})},i._immediateFn="function"===typeof t&&function(e){t(e)}||function(e){h(e,0)},i._unhandledRejectionFn=function(e){"undefined"!==typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},i._setImmediateFn=function(e){i._immediateFn=e},i._setUnhandledRejectionFn=function(e){i._unhandledRejectionFn=e},"undefined"!==typeof e&&e.exports?e.exports=i:n.Promise||(n.Promise=i)}(this)}).call(t,n(60).setImmediate)},function(e,t,n){(function(e,t){!function(e,n){"use strict";function r(e){"function"!==typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return l[u]=r,s(u),u++}function o(e){delete l[e]}function i(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}function a(e){if(c)setTimeout(a,0,e);else{var t=l[e];if(t){c=!0;try{i(t)}finally{o(e),c=!1}}}}if(!e.setImmediate){var s,u=1,l={},c=!1,p=e.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(e);h=h&&h.setTimeout?h:e,"[object process]"==={}.toString.call(e.process)?function(){s=function(e){t.nextTick(function(){a(e)})}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"===typeof n.data&&0===n.data.indexOf(t)&&a(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),s=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){a(e.data)},s=function(t){e.port2.postMessage(t)}}():p&&"onreadystatechange"in p.createElement("script")?function(){var e=p.documentElement;s=function(t){var n=p.createElement("script");n.onreadystatechange=function(){a(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():function(){s=function(e){setTimeout(a,0,e)}}(),h.setImmediate=r,h.clearImmediate=o}}("undefined"===typeof self?"undefined"===typeof e?this:e:self)}).call(t,n(23),n(59))},function(e,t){Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!==typeof e)throw new TypeError("predicate must be a function");for(var r=arguments[1],o=0;o<n;){var i=t[o];if(e.call(r,i,o,t))return i;o++}}})},function(e,t){Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!==typeof e)throw new TypeError("predicate must be a function");for(var r=arguments[1],o=0;o<n;){var i=t[o];if(e.call(r,i,o,t))return o;o++}return-1}})},function(e,t,n){"use strict";function r(){function e(e){h(d[e],"delete"),delete d[e]}function t(e){return e=e||s,a(d,e)||o("no-app",{name:e}),d[e]}function n(e,t){void 0===t?t=s:"string"===typeof t&&""!==t||o("bad-app-name",{name:t+""}),a(d,t)&&o("duplicate-app",{name:t});var n=new l(e,t,v);return d[t]=n,h(n,"create"),n}function u(){return Object.keys(d).map(function(e){return d[e]})}function c(e,n,r,a,s){m[e]&&o("duplicate-service",{name:e}),m[e]=n,a&&(y[e]=a,u().forEach(function(e){a("create",e)}));var c=function(n){return void 0===n&&(n=t()),"function"!==typeof n[e]&&o("invalid-app-argument",{name:e}),n[e]()};return void 0!==r&&Object(i.deepExtend)(c,r),v[e]=c,l.prototype[e]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return this._getService.bind(this,e).apply(this,s?t:[])},c}function p(e){Object(i.deepExtend)(v,e)}function h(e,t){Object.keys(m).forEach(function(n){var r=f(e,n);null!==r&&y[r]&&y[r](t,e)})}function f(e,t){if("serverAuth"===t)return null;var n=t;e.options;return n}var d={},m={},y={},v={__esModule:!0,initializeApp:n,app:t,apps:null,Promise:Promise,SDK_VERSION:"4.6.1",INTERNAL:{registerService:c,createFirebaseNamespace:r,extendNamespace:p,createSubscribe:i.createSubscribe,ErrorFactory:i.ErrorFactory,removeApp:e,factories:m,useAsService:f,Promise:Promise,deepExtend:i.deepExtend}};return Object(i.patchProperty)(v,"default",v),Object.defineProperty(v,"apps",{get:u}),Object(i.patchProperty)(t,"App",l),v}function o(e,t){throw p.create(e,t)}t.a=r;var i=n(0),a=(n.n(i),function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}),s="[DEFAULT]",u=[],l=function(){function e(e,t,n){this.firebase_=n,this.isDeleted_=!1,this.services_={},this.name_=t,this.options_=Object(i.deepCopy)(e),this.INTERNAL={getUid:function(){return null},getToken:function(){return Promise.resolve(null)},addAuthTokenListener:function(e){u.push(e),setTimeout(function(){return e(null)},0)},removeAuthTokenListener:function(e){u=u.filter(function(t){return t!==e})}}}return Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),e.prototype.delete=function(){var e=this;return new Promise(function(t){e.checkDestroyed_(),t()}).then(function(){e.firebase_.INTERNAL.removeApp(e.name_);var t=[];return Object.keys(e.services_).forEach(function(n){Object.keys(e.services_[n]).forEach(function(r){t.push(e.services_[n][r])})}),Promise.all(t.map(function(e){return e.INTERNAL.delete()}))}).then(function(){e.isDeleted_=!0,e.services_={}})},e.prototype._getService=function(e,t){if(void 0===t&&(t=s),this.checkDestroyed_(),this.services_[e]||(this.services_[e]={}),!this.services_[e][t]){var n=t!==s?t:void 0,r=this.firebase_.INTERNAL.factories[e](this,this.extendApp.bind(this),n);this.services_[e][t]=r}return this.services_[e][t]},e.prototype.extendApp=function(e){var t=this;Object(i.deepExtend)(this,e),e.INTERNAL&&e.INTERNAL.addAuthTokenListener&&(u.forEach(function(e){t.INTERNAL.addAuthTokenListener(e)}),u=[])},e.prototype.checkDestroyed_=function(){this.isDeleted_&&o("app-deleted",{name:this.name_})},e}();l.prototype.name&&l.prototype.options||l.prototype.delete||console.log("dc");var c={"no-app":"No Firebase App '{$name}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$name}","duplicate-app":"Firebase App named '{$name}' already exists","app-deleted":"Firebase App named '{$name}' already deleted","duplicate-service":"Firebase service named '{$name}' already registered","sa-not-supported":"Initializing the Firebase SDK with a service account is only allowed in a Node.js environment. On client devices, you should instead initialize the SDK with an api key and auth domain","invalid-app-argument":"firebase.{$name}() takes either no argument or a Firebase App instance."},p=new i.ErrorFactory("app","Firebase",c)},function(e,t,n){"use strict";function r(e){return o(void 0,e)}function o(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:var n=t;return new Date(n.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var r in t)t.hasOwnProperty(r)&&(e[r]=o(e[r],t[r]));return e}function i(e,t,n){e[t]=n}Object.defineProperty(t,"__esModule",{value:!0}),t.deepCopy=r,t.deepExtend=o,t.patchProperty=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){var e=this;this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})}return e.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch(function(){}),1===e.length?e(n):e(n,r))}},e}();t.Deferred=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(61);t.getUA=function(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""},t.isMobileCordova=function(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(t.getUA())},t.isReactNative=function(){return"object"===typeof navigator&&"ReactNative"===navigator.product},t.isNodeSdk=function(){return!0===r.CONSTANTS.NODE_CLIENT||!0===r.CONSTANTS.NODE_ADMIN}},function(e,t,n){"use strict";function r(e){var t=i;return i=e,t}Object.defineProperty(t,"__esModule",{value:!0});var o="FirebaseError",i=Error.captureStackTrace;t.patchCapture=r;var a=function(){function e(e,t){this.code=e,this.message=t;if(i)i(this,s.prototype.create);else{var n=Error.apply(this,arguments);this.name=o,Object.defineProperty(this,"stack",{get:function(){return n.stack}})}}return e}();t.FirebaseError=a,a.prototype=Object.create(Error.prototype),a.prototype.constructor=a,a.prototype.name=o;var s=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n,this.pattern=/\{\$([^}]+)}/g}return e.prototype.create=function(e,t){void 0===t&&(t={});var n,r=this.errors[e],o=this.service+"/"+e;n=void 0===r?"Error":r.replace(this.pattern,function(e,n){var r=t[n];return void 0!==r?r.toString():"<"+n+"?>"}),n=this.serviceName+": "+n+" ("+o+").";var i=new a(o,n);for(var s in t)t.hasOwnProperty(s)&&"_"!==s.slice(-1)&&(i[s]=t[s]);return i},e}();t.ErrorFactory=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(96),o=n(97);t.decode=function(e){var t={},n={},i={},a="";try{var s=e.split(".");t=o.jsonEval(r.base64Decode(s[0])||""),n=o.jsonEval(r.base64Decode(s[1])||""),a=s[2],i=n.d||{},delete n.d}catch(e){}return{header:t,claims:n,data:i,signature:a}},t.isValidTimestamp=function(e){var n,r,o=t.decode(e).claims,i=Math.floor((new Date).getTime()/1e3);return"object"===typeof o&&(o.hasOwnProperty("nbf")?n=o.nbf:o.hasOwnProperty("iat")&&(n=o.iat),r=o.hasOwnProperty("exp")?o.exp:n+86400),i&&n&&r&&i>=n&&i<=r},t.issuedAtTime=function(e){var n=t.decode(e).claims;return"object"===typeof n&&n.hasOwnProperty("iat")?n.iat:null},t.isValidFormat=function(e){var n=t.decode(e),r=n.claims;return!!n.signature&&!!r&&"object"===typeof r&&r.hasOwnProperty("iat")},t.isAdmin=function(e){var n=t.decode(e).claims;return"object"===typeof n&&!0===n.admin}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(98);t.querystring=function(e){var t=[];return r.forEach(e,function(e,n){Array.isArray(n)?n.forEach(function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))}),t.length?"&"+t.join("&"):""},t.querystringDecode=function(e){var t={};return e.replace(/^\?/,"").split("&").forEach(function(e){if(e){var n=e.split("=");t[n[0]]=n[1]}}),t}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(257),i=function(e){function t(){var t=e.call(this)||this;t.chain_=[],t.buf_=[],t.W_=[],t.pad_=[],t.inbuf_=0,t.total_=0,t.blockSize=64,t.pad_[0]=128;for(var n=1;n<t.blockSize;++n)t.pad_[n]=0;return t.reset(),t}return r(t,e),t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var r=16;r<80;r++){var o=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(o<<1|o>>>31)}for(var i,a,s=this.chain_[0],u=this.chain_[1],l=this.chain_[2],c=this.chain_[3],p=this.chain_[4],r=0;r<80;r++){r<40?r<20?(i=c^u&(l^c),a=1518500249):(i=u^l^c,a=1859775393):r<60?(i=u&l|c&(u|l),a=2400959708):(i=u^l^c,a=3395469782);var o=(s<<5|s>>>27)+i+p+a+n[r]&4294967295;p=c,c=l,l=4294967295&(u<<30|u>>>2),u=s,s=o}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+p&4294967295},t.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,o=this.buf_,i=this.inbuf_;r<t;){if(0==i)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(o[i]=e.charCodeAt(r),++i,++r,i==this.blockSize){this.compress_(o),i=0;break}}else for(;r<t;)if(o[i]=e[r],++i,++r,i==this.blockSize){this.compress_(o),i=0;break}}this.inbuf_=i,this.total_+=t}},t.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,n=0;n<5;n++)for(var o=24;o>=0;o-=8)e[r]=this.chain_[n]>>o&255,++r;return e},t}(o.Hash);t.Sha1=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.blockSize=-1}return e}();t.Hash=r},function(e,t,n){"use strict";function r(e,t){var n=new s(e,t);return n.subscribe.bind(n)}function o(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then(function(){e.apply(void 0,n)}).catch(function(e){t&&t(e)})}}function i(e,t){if("object"!==typeof e||null===e)return!1;for(var n=0,r=t;n<r.length;n++){var o=r[n];if(o in e&&"function"===typeof e[o])return!0}return!1}function a(){}Object.defineProperty(t,"__esModule",{value:!0}),t.createSubscribe=r;var s=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(function(){e(n)}).catch(function(e){n.error(e)})}return e.prototype.next=function(e){this.forEachObserver(function(t){t.next(e)})},e.prototype.error=function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)},e.prototype.complete=function(){this.forEachObserver(function(e){e.complete()}),this.close()},e.prototype.subscribe=function(e,t,n){var r,o=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=i(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=a),void 0===r.error&&(r.error=a),void 0===r.complete&&(r.complete=a);var s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{o.finalError?r.error(o.finalError):r.complete()}catch(e){}}),this.observers.push(r),s},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(e){"undefined"!==typeof console&&console.error&&console.error(e)}})},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(function(){t.observers=void 0,t.onNoObservers=void 0}))},e}();t.async=o},function(e,t,n){"use strict";function r(e,t,n){var r="";switch(t){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var o=e+" failed: ";return o+=r+" argument "}function o(e,t,n,o){if((!o||n)&&"string"!==typeof n)throw new Error(r(e,t,o)+"must be a valid firebase namespace.")}function i(e,t,n,o){if((!o||n)&&"function"!==typeof n)throw new Error(r(e,t,o)+"must be a valid function.")}function a(e,t,n,o){if((!o||n)&&("object"!==typeof n||null===n))throw new Error(r(e,t,o)+"must be a valid context object.")}Object.defineProperty(t,"__esModule",{value:!0}),t.validateArgCount=function(e,t,n,r){var o;if(r<t?o="at least "+t:r>n&&(o=0===n?"none":"no more than "+n),o){var i=e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+o+".";throw new Error(i)}},t.errorPrefix=r,t.validateNamespace=o,t.validateCallback=i,t.validateContextObject=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(95);t.stringToByteArray=function(e){for(var t=[],n=0,o=0;o<e.length;o++){var i=e.charCodeAt(o);if(i>=55296&&i<=56319){var a=i-55296;o++,r.assert(o<e.length,"Surrogate pair missing trail surrogate.");i=65536+(a<<10)+(e.charCodeAt(o)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},t.stringLength=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t}},function(e,t,n){n(262)},function(e,t,n){(function(e){(function(){function e(e){return"string"==typeof e}function t(e){return"boolean"==typeof e}function r(){}function o(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&"undefined"!=typeof e.splice&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||"undefined"!=typeof e.call&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&"undefined"==typeof e.call)return"object";return t}function i(e){return null===e}function a(e){return"array"==o(e)}function s(e){var t=o(e);return"array"==t||"object"==t&&"number"==typeof e.length}function u(e){return"function"==o(e)}function l(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function c(e,t,n){return e.call.apply(e.bind,arguments)}function p(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function h(e,t,n){return h=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?c:p,h.apply(null,arguments)}function f(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.ib=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Nc=function(e,n,r){for(var o=Array(arguments.length-2),i=2;i<arguments.length;i++)o[i-2]=arguments[i];return t.prototype[n].apply(e,o)}}function m(e){if(Error.captureStackTrace)Error.captureStackTrace(this,m);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e))}function y(e,t){for(var n=e.split("%s"),r="",o=Array.prototype.slice.call(arguments,1);o.length&&1<n.length;)r+=n.shift()+o.shift();return r+n.join("%s")}function v(e){return _u.test(e)?(-1!=e.indexOf("&")&&(e=e.replace(fu,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(du,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(mu,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(yu,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(vu,"&#39;")),-1!=e.indexOf("\0")&&(e=e.replace(gu,"&#0;")),e):e}function g(e,t){return-1!=e.indexOf(t)}function _(e,t){return e<t?-1:e>t?1:0}function b(e,t){t.unshift(e),m.call(this,y.apply(null,t)),t.shift()}function w(e,t){throw new b("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1))}function x(t,n){var r=t.length,o=e(t)?t.split(""):t;for(--r;0<=r;--r)r in o&&n.call(void 0,o[r],r,t)}function E(t){e:{for(var n=En,r=t.length,o=e(t)?t.split(""):t,i=0;i<r;i++)if(i in o&&n.call(void 0,o[i],i,t)){n=i;break e}n=-1}return 0>n?null:e(t)?t.charAt(n):t[n]}function C(e,t){return 0<=wu(e,t)}function T(e,t){t=wu(e,t);var n;return(n=0<=t)&&Array.prototype.splice.call(e,t,1),n}function S(e,t){var n=0;x(e,function(r,o){t.call(void 0,r,o,e)&&1==Array.prototype.splice.call(e,o,1).length&&n++})}function P(e){return Array.prototype.concat.apply([],arguments)}function O(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function A(e){return g(bu,e)}function k(e,t){for(var n in e)t.call(void 0,e[n],n,e)}function I(e){var t,n=[],r=0;for(t in e)n[r++]=e[t];return n}function N(e){var t,n=[],r=0;for(t in e)n[r++]=t;return n}function R(e){for(var t in e)return!1;return!0}function M(e,t){for(var n in e)if(!(n in t)||e[n]!==t[n])return!1;for(n in t)if(!(n in e))return!1;return!0}function D(e){var t,n={};for(t in e)n[t]=e[t];return n}function L(e,t){for(var n,r,o=1;o<arguments.length;o++){r=arguments[o];for(n in r)e[n]=r[n];for(var i=0;i<Pu.length;i++)n=Pu[i],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function F(e){return F[" "](e),e}function j(e,t){var n=zu;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}function z(){var e=uu.document;return e?e.documentMode:void 0}function B(e){return j(e,function(){for(var t=0,n=hu(String(Ou)).split("."),r=hu(String(e)).split("."),o=Math.max(n.length,r.length),i=0;0==t&&i<o;i++){var a=n[i]||"",s=r[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;t=_(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||_(0==a[2].length,0==s[2].length)||_(a[2],s[2]),a=a[3],s=s[3]}while(0==t)}return 0<=t})}function U(e){e.prototype.then=e.prototype.then,e.prototype.$goog_Thenable=!0}function V(e){if(!e)return!1;try{return!!e.$goog_Thenable}catch(e){return!1}}function W(e,t,n){this.f=n,this.c=e,this.g=t,this.b=0,this.a=null}function q(e,t){e.g(t),e.b<e.f&&(e.b++,t.next=e.a,e.a=t)}function H(){var e=Hu,t=null;return e.a&&(t=e.a,e.a=e.a.next,e.a||(e.b=null),t.next=null),t}function G(){this.next=this.b=this.a=null}function K(e){uu.setTimeout(function(){throw e},0)}function X(){var e=uu.MessageChannel;if("undefined"===typeof e&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!A("Presto")&&(e=function(){var e=document.createElement("IFRAME");e.style.display="none",e.src="",document.documentElement.appendChild(e);var t=e.contentWindow;e=t.document,e.open(),e.write(""),e.close();var n="callImmediate"+Math.random(),r="file:"==t.location.protocol?"*":t.location.protocol+"//"+t.location.host;e=h(function(e){"*"!=r&&e.origin!=r||e.data!=n||this.port1.onmessage()},this),t.addEventListener("message",e,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(n,r)}}}),"undefined"!==typeof e&&!A("Trident")&&!A("MSIE")){var t=new e,n={},r=n;return t.port1.onmessage=function(){if(void 0!==n.next){n=n.next;var e=n.pb;n.pb=null,e()}},function(e){r.next={pb:e},r=r.next,t.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(e){var t=document.createElement("SCRIPT");t.onreadystatechange=function(){t.onreadystatechange=null,t.parentNode.removeChild(t),t=null,e(),e=null},document.documentElement.appendChild(t)}:function(e){uu.setTimeout(e,0)}}function Y(e,t){Wu||Z(),qu||(Wu(),qu=!0);var n=Hu,r=Uu.get();r.set(e,t),n.b?n.b.next=r:n.a=r,n.b=r}function Z(){if(-1!=String(uu.Promise).indexOf("[native code]")){var e=uu.Promise.resolve(void 0);Wu=function(){e.then(Q)}}else Wu=function(){var e=Q;!u(uu.setImmediate)||uu.Window&&uu.Window.prototype&&!A("Edge")&&uu.Window.prototype.setImmediate==uu.setImmediate?(Vu||(Vu=X()),Vu(e)):uu.setImmediate(e)}}function Q(){for(var e;e=H();){try{e.a.call(e.b)}catch(e){K(e)}q(Uu,e)}qu=!1}function J(e,t){if(this.a=Gu,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,e!=r)try{var n=this;e.call(t,function(e){ce(n,Ku,e)},function(e){if(!(e instanceof ge))try{if(e instanceof Error)throw e;throw Error("Promise rejected.")}catch(e){}ce(n,Xu,e)})}catch(e){ce(this,Xu,e)}}function $(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}function ee(e,t,n){var r=Yu.get();return r.g=e,r.b=t,r.f=n,r}function te(e){if(e instanceof J)return e;var t=new J(r);return ce(t,Ku,e),t}function ne(e){return new J(function(t,n){n(e)})}function re(e,t,n){pe(e,t,n,null)||Y(f(t,e))}function oe(e){return new J(function(t,n){var r=e.length,o=[];if(r)for(var i,a=function(e,n){r--,o[e]=n,0==r&&t(o)},s=function(e){n(e)},u=0;u<e.length;u++)i=e[u],re(i,f(a,u),s);else t(o)})}function ie(e){return new J(function(t){var n=e.length,r=[];if(n)for(var o,i=function(e,o,i){n--,r[e]=o?{Qb:!0,value:i}:{Qb:!1,reason:i},0==n&&t(r)},a=0;a<e.length;a++)o=e[a],re(o,f(i,a,!0),f(i,a,!1));else t(r)})}function ae(e,t){return t=ee(t,t,void 0),t.c=!0,ue(e,t),e}function se(e,t){if(e.a==Gu)if(e.c){var n=e.c;if(n.b){for(var r=0,o=null,i=null,a=n.b;a&&(a.c||(r++,a.a==e&&(o=a),!(o&&1<r)));a=a.next)o||(i=a);o&&(n.a==Gu&&1==r?se(n,t):(i?(r=i,r.next==n.f&&(n.f=r),r.next=r.next.next):de(n),me(n,o,Xu,t)))}e.c=null}else ce(e,Xu,t)}function ue(e,t){e.b||e.a!=Ku&&e.a!=Xu||fe(e),e.f?e.f.next=t:e.b=t,e.f=t}function le(e,t,n,r){var o=ee(null,null,null);return o.a=new J(function(e,i){o.g=t?function(n){try{var o=t.call(r,n);e(o)}catch(e){i(e)}}:e,o.b=n?function(t){try{var o=n.call(r,t);void 0===o&&t instanceof ge?i(t):e(o)}catch(e){i(e)}}:i}),o.a.c=e,ue(e,o),o.a}function ce(e,t,n){e.a==Gu&&(e===n&&(t=Xu,n=new TypeError("Promise cannot resolve to itself")),e.a=1,pe(n,e.wc,e.xc,e)||(e.i=n,e.a=t,e.c=null,fe(e),t!=Xu||n instanceof ge||ve(e,n)))}function pe(e,t,n,o){if(e instanceof J)return ue(e,ee(t||r,n||null,o)),!0;if(V(e))return e.then(t,n,o),!0;if(l(e))try{var i=e.then;if(u(i))return he(e,i,t,n,o),!0}catch(e){return n.call(o,e),!0}return!1}function he(e,t,n,r,o){function i(e){s||(s=!0,r.call(o,e))}function a(e){s||(s=!0,n.call(o,e))}var s=!1;try{t.call(e,a,i)}catch(e){i(e)}}function fe(e){e.h||(e.h=!0,Y(e.Mb,e))}function de(e){var t=null;return e.b&&(t=e.b,e.b=t.next,t.next=null),e.b||(e.f=null),t}function me(e,t,n,r){if(n==Xu&&t.b&&!t.c)for(;e&&e.g;e=e.c)e.g=!1;if(t.a)t.a.c=null,ye(t,n,r);else try{t.c?t.g.call(t.f):ye(t,n,r)}catch(e){Zu.call(null,e)}q(Yu,t)}function ye(e,t,n){t==Ku?e.g.call(e.f,n):e.b&&e.b.call(e.f,n)}function ve(e,t){e.g=!0,Y(function(){e.g&&Zu.call(null,t)})}function ge(e){m.call(this,e)}function _e(){this.a="",this.b=Ju}function be(e){return e instanceof _e&&e.constructor===_e&&e.b===Ju?e.a:(w("expected object of type Const, got '"+e+"'"),"type_error:Const")}function we(e){var t=new _e;return t.a=e,t}function xe(){this.a="",this.b=tl}function Ee(e){return e instanceof xe&&e.constructor===xe&&e.b===tl?e.a:(w("expected object of type TrustedResourceUrl, got '"+e+"' of type "+o(e)),"type_error:TrustedResourceUrl")}function Ce(e,t){return e=Te(e,t),t=new xe,t.a=e,t}function Te(e,t){var n=be(e);if(!el.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return n.replace($u,function(e,r){if(!Object.prototype.hasOwnProperty.call(t,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(t));return e=t[r],e instanceof _e?be(e):encodeURIComponent(String(e))})}function Se(){this.a="",this.b=rl}function Pe(e){return e instanceof Se&&e.constructor===Se&&e.b===rl?e.a:(w("expected object of type SafeUrl, got '"+e+"' of type "+o(e)),"type_error:SafeUrl")}function Oe(e){return e instanceof Se?e:(e=e.la?e.ja():String(e),nl.test(e)||(e="about:invalid#zClosurez"),Ae(e))}function Ae(e){var t=new Se;return t.a=e,t}function ke(){this.a="",this.b=ol}function Ie(e){return e instanceof ke&&e.constructor===ke&&e.b===ol?e.a:(w("expected object of type SafeHtml, got '"+e+"' of type "+o(e)),"type_error:SafeHtml")}function Ne(e){var t=new ke;return t.a=e,t}function Re(t){var n=document;return e(t)?n.getElementById(t):t}function Me(e,t){k(t,function(t,n){t&&t.la&&(t=t.ja()),"style"==n?e.style.cssText=t:"class"==n?e.className=t:"for"==n?e.htmlFor=t:il.hasOwnProperty(n)?e.setAttribute(il[n],t):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?e.setAttribute(n,t):e[n]=t})}function De(t,n,r){var o=arguments,i=document,s=String(o[0]),u=o[1];if(!Qu&&u&&(u.name||u.type)){if(s=["<",s],u.name&&s.push(' name="',v(u.name),'"'),u.type){s.push(' type="',v(u.type),'"');var l={};L(l,u),delete l.type,u=l}s.push(">"),s=s.join("")}return s=i.createElement(s),u&&(e(u)?s.className=u:a(u)?s.className=u.join(" "):Me(s,u)),2<o.length&&Le(i,s,o),s}function Le(t,n,r){function o(r){r&&n.appendChild(e(r)?t.createTextNode(r):r)}for(var i=2;i<r.length;i++){var a=r[i];!s(a)||l(a)&&0<a.nodeType?o(a):xu(Fe(a)?O(a):a,o)}}function Fe(e){if(e&&"number"==typeof e.length){if(l(e))return"function"==typeof e.item||"string"==typeof e.item;if(u(e))return"function"==typeof e.item}return!1}function je(e){var t=[];return Be(new ze,e,t),t.join("")}function ze(){}function Be(e,t,n){if(null==t)n.push("null");else{if("object"==typeof t){if(a(t)){var r=t;t=r.length,n.push("[");for(var o="",i=0;i<t;i++)n.push(o),Be(e,r[i],n),o=",";return void n.push("]")}if(!(t instanceof String||t instanceof Number||t instanceof Boolean)){n.push("{"),o="";for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&"function"!=typeof(i=t[r])&&(n.push(o),Ue(r,n),n.push(":"),Be(e,i,n),o=",");return void n.push("}")}t=t.valueOf()}switch(typeof t){case"string":Ue(t,n);break;case"number":n.push(isFinite(t)&&!isNaN(t)?String(t):"null");break;case"boolean":n.push(String(t));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof t)}}}function Ue(e,t){t.push('"',e.replace(sl,function(e){var t=al[e];return t||(t="\\u"+(65536|e.charCodeAt(0)).toString(16).substr(1),al[e]=t),t}),'"')}function Ve(){0!=ul&&(ll[this[lu]||(this[lu]=++cu)]=this),this.oa=this.oa,this.Fa=this.Fa}function We(e){e.oa||(e.oa=!0,e.ta(),0!=ul&&(e=e[lu]||(e[lu]=++cu),delete ll[e]))}function qe(e,t){this.type=e,this.b=this.target=t,this.Ab=!0}function He(t,n){if(qe.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var r=this.type=t.type,o=t.changedTouches?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=n,n=t.relatedTarget){if(Ru){e:{try{F(n.nodeName);var i=!0;break e}catch(e){}i=!1}i||(n=null)}}else"mouseover"==r?n=t.fromElement:"mouseout"==r&&(n=t.toElement);this.relatedTarget=n,null===o?(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0):(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=e(t.pointerType)?t.pointerType:dl[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.c()}}function Ge(e,t,n,r,o){this.listener=e,this.a=null,this.src=t,this.type=n,this.capture=!!r,this.La=o,this.key=++yl,this.ma=this.Ha=!1}function Ke(e){e.ma=!0,e.listener=null,e.a=null,e.src=null,e.La=null}function Xe(e){this.src=e,this.a={},this.b=0}function Ye(e,t,n,r,o,i){var a=t.toString();(t=e.a[a])||(t=e.a[a]=[],e.b++);var s=Qe(t,n,o,i);return-1<s?(e=t[s],r||(e.Ha=!1)):(e=new Ge(n,e.src,a,!!o,i),e.Ha=r,t.push(e)),e}function Ze(e,t){var n=t.type;n in e.a&&T(e.a[n],t)&&(Ke(t),0==e.a[n].length&&(delete e.a[n],e.b--))}function Qe(e,t,n,r){for(var o=0;o<e.length;++o){var i=e[o];if(!i.ma&&i.listener==t&&i.capture==!!n&&i.La==r)return o}return-1}function Je(e,t,n,r,o){if(r&&r.once)tt(e,t,n,r,o);else if(a(t))for(var i=0;i<t.length;i++)Je(e,t[i],n,r,o);else n=lt(n),e&&e[ml]?ht(e,t,n,l(r)?!!r.capture:!!r,o):$e(e,t,n,!1,r,o)}function $e(e,t,n,r,o,i){if(!t)throw Error("Invalid event type");var a=l(o)?!!o.capture:!!o,s=ut(e);if(s||(e[vl]=s=new Xe(e)),n=Ye(s,t,n,r,a,i),!n.a){if(r=et(),n.a=r,r.src=e,r.listener=n,e.addEventListener)fl||(o=a),void 0===o&&(o=!1),e.addEventListener(t.toString(),r,o);else{if(!e.attachEvent)throw Error("addEventListener and attachEvent are unavailable.");e.attachEvent(ot(t.toString()),r)}_l++}}function et(){var e=st,t=pl?function(n){return e.call(t.src,t.listener,n)}:function(n){if(!(n=e.call(t.src,t.listener,n)))return n};return t}function tt(e,t,n,r,o){if(a(t))for(var i=0;i<t.length;i++)tt(e,t[i],n,r,o);else n=lt(n),e&&e[ml]?ft(e,t,n,l(r)?!!r.capture:!!r,o):$e(e,t,n,!0,r,o)}function nt(e,t,n,r,o){if(a(t))for(var i=0;i<t.length;i++)nt(e,t[i],n,r,o);else r=l(r)?!!r.capture:!!r,n=lt(n),e&&e[ml]?(e=e.u,(t=String(t).toString())in e.a&&(i=e.a[t],-1<(n=Qe(i,n,r,o))&&(Ke(i[n]),Array.prototype.splice.call(i,n,1),0==i.length&&(delete e.a[t],e.b--)))):e&&(e=ut(e))&&(t=e.a[t.toString()],e=-1,t&&(e=Qe(t,n,r,o)),(n=-1<e?t[e]:null)&&rt(n))}function rt(e){if("number"!=typeof e&&e&&!e.ma){var t=e.src;if(t&&t[ml])Ze(t.u,e);else{var n=e.type,r=e.a;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent&&t.detachEvent(ot(n),r),_l--,(n=ut(t))?(Ze(n,e),0==n.b&&(n.src=null,t[vl]=null)):Ke(e)}}}function ot(e){return e in gl?gl[e]:gl[e]="on"+e}function it(e,t,n,r){var o=!0;if((e=ut(e))&&(t=e.a[t.toString()]))for(t=t.concat(),e=0;e<t.length;e++){var i=t[e];i&&i.capture==n&&!i.ma&&(i=at(i,r),o=o&&!1!==i)}return o}function at(e,t){var n=e.listener,r=e.La||e.src;return e.Ha&&rt(e),n.call(r,t)}function st(e,t){if(e.ma)return!0;if(!pl){if(!t)e:{t=["window","event"];for(var n=uu,r=0;r<t.length;r++)if(null==(n=n[t[r]])){t=null;break e}t=n}if(r=t,t=new He(r,this),n=!0,!(0>r.keyCode||void 0!=r.returnValue)){e:{var o=!1;if(0==r.keyCode)try{r.keyCode=-1;break e}catch(e){o=!0}(o||void 0==r.returnValue)&&(r.returnValue=!0)}for(r=[],o=t.b;o;o=o.parentNode)r.push(o);for(e=e.type,o=r.length-1;0<=o;o--){t.b=r[o];var i=it(r[o],e,!0,t);n=n&&i}for(o=0;o<r.length;o++)t.b=r[o],i=it(r[o],e,!1,t),n=n&&i}return n}return at(e,new He(t,this))}function ut(e){return e=e[vl],e instanceof Xe?e:null}function lt(e){return u(e)?e:(e[bl]||(e[bl]=function(t){return e.handleEvent(t)}),e[bl])}function ct(){Ve.call(this),this.u=new Xe(this),this.Eb=this,this.Ra=null}function pt(t,n){var r,o=t.Ra;if(o)for(r=[];o;o=o.Ra)r.push(o);if(t=t.Eb,o=n.type||n,e(n))n=new qe(n,t);else if(n instanceof qe)n.target=n.target||t;else{var i=n;n=new qe(o,t),L(n,i)}if(i=!0,r)for(var a=r.length-1;0<=a;a--){var s=n.b=r[a];i=dt(s,o,!0,n)&&i}if(s=n.b=t,i=dt(s,o,!0,n)&&i,i=dt(s,o,!1,n)&&i,r)for(a=0;a<r.length;a++)s=n.b=r[a],i=dt(s,o,!1,n)&&i}function ht(e,t,n,r,o){Ye(e.u,String(t),n,!1,r,o)}function ft(e,t,n,r,o){Ye(e.u,String(t),n,!0,r,o)}function dt(e,t,n,r){if(!(t=e.u.a[String(t)]))return!0;t=t.concat();for(var o=!0,i=0;i<t.length;++i){var a=t[i];if(a&&!a.ma&&a.capture==n){var s=a.listener,u=a.La||a.src;a.Ha&&Ze(e.u,a),o=!1!==s.call(u,r)&&o}}return o&&0!=r.Ab}function mt(e,t,n){if(u(e))n&&(e=h(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=h(e.handleEvent,e)}return 2147483647<Number(t)?-1:uu.setTimeout(e,t||0)}function yt(e){var t=null;return new J(function(n,r){-1==(t=mt(function(){n(void 0)},e))&&r(Error("Failed to schedule timer."))}).s(function(e){throw uu.clearTimeout(t),e})}function vt(e,t,n,r,o){this.reset(e,t,n,r,o)}function gt(e){this.f=e,this.b=this.c=this.a=null}function _t(e,t){this.name=e,this.value=t}function bt(e){return e.c?e.c:e.a?bt(e.a):(w("Root logger has no level set."),null)}function wt(e){Sl||(Sl=new gt(""),Tl[""]=Sl,Sl.c=El);var t;if(!(t=Tl[e])){t=new gt(e);var n=e.lastIndexOf("."),r=e.substr(n+1);n=wt(e.substr(0,n)),n.b||(n.b={}),n.b[r]=t,t.a=n,Tl[e]=t}return t}function xt(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e){e instanceof xt?(n=e.S(),r=e.P()):(n=N(e),r=I(e));for(var o=0;o<n.length;o++)this.set(n[o],r[o])}}function Et(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];Ct(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var o={};for(n=t=0;t<e.a.length;)r=e.a[t],Ct(o,r)||(e.a[n++]=r,o[r]=1),t++;e.a.length=n}}function Ct(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Tt(e,t){e&&e.log(Cl,t,void 0)}function St(e){return Eu(e,function(e){return e=e.toString(16),1<e.length?e:"0"+e}).join("")}function Pt(e){var t="";return Ot(e,function(e){t+=String.fromCharCode(e)}),t}function Ot(e,t){function n(t){for(;r<e.length;){var n=e.charAt(r++),o=Ol[n];if(null!=o)return o;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return t}At();for(var r=0;;){var o=n(-1),i=n(0),a=n(64),s=n(64);if(64===s&&-1===o)break;t(o<<2|i>>4),64!=a&&(t(i<<4&240|a>>2),64!=s&&t(a<<6&192|s))}}function At(){if(!Pl){Pl={},Ol={};for(var e=0;65>e;e++)Pl[e]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e),Ol[Pl[e]]=e,62<=e&&(Ol["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(e)]=e)}}function kt(e,t){this.g=[],this.v=e,this.o=t||null,this.f=this.a=!1,this.c=void 0,this.u=this.w=this.i=!1,this.h=0,this.b=null,this.l=0}function It(e,t,n){e.a=!0,e.c=n,e.f=!t,Lt(e)}function Nt(e){if(e.a){if(!e.u)throw new Ft;e.u=!1}}function Rt(e,t){Mt(e,null,t,void 0)}function Mt(e,t,n,r){e.g.push([t,n,r]),e.a&&Lt(e)}function Dt(e){return Cu(e.g,function(e){return u(e[1])})}function Lt(e){if(e.h&&e.a&&Dt(e)){var t=e.h,n=kl[t];n&&(uu.clearTimeout(n.a),delete kl[t]),e.h=0}e.b&&(e.b.l--,delete e.b),t=e.c;for(var r=n=!1;e.g.length&&!e.i;){var o=e.g.shift(),i=o[0],a=o[1];if(o=o[2],i=e.f?a:i)try{var s=i.call(o||e.o,t);void 0!==s&&(e.f=e.f&&(s==t||s instanceof Error),e.c=t=s),(V(t)||"function"===typeof uu.Promise&&t instanceof uu.Promise)&&(r=!0,e.i=!0)}catch(r){t=r,e.f=!0,Dt(e)||(n=!0)}}e.c=t,r&&(s=h(e.m,e,!0),r=h(e.m,e,!1),t instanceof kt?(Mt(t,s,r),t.w=!0):t.then(s,r)),n&&(t=new zt(t),kl[t.a]=t,e.h=t.a)}function Ft(){m.call(this)}function jt(){m.call(this)}function zt(e){this.a=uu.setTimeout(h(this.c,this),0),this.b=e}function Bt(){this.b=-1}function Ut(e,t){this.b=-1,this.b=Il,this.f=uu.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=e,this.h=t,this.l=uu.Int32Array?new Int32Array(64):Array(64),Al||(Al=uu.Int32Array?new Int32Array(Ll):Ll),this.reset()}function Vt(e){for(var t=e.f,n=e.l,r=0,o=0;o<t.length;)n[r++]=t[o]<<24|t[o+1]<<16|t[o+2]<<8|t[o+3],o=4*r;for(t=16;64>t;t++){o=0|n[t-15],r=0|n[t-2];var i=(0|n[t-16])+((o>>>7|o<<25)^(o>>>18|o<<14)^o>>>3)|0,a=(0|n[t-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[t]=i+a|0}r=0|e.a[0],o=0|e.a[1];var s=0|e.a[2],u=0|e.a[3],l=0|e.a[4],c=0|e.a[5],p=0|e.a[6];for(i=0|e.a[7],t=0;64>t;t++){var h=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&o^r&s^o&s)|0;a=l&c^~l&p,i=i+((l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7))|0,a=a+(0|Al[t])|0,a=i+(a+(0|n[t])|0)|0,i=p,p=c,c=l,l=u+a|0,u=s,s=o,o=r,r=a+h|0}e.a[0]=e.a[0]+r|0,e.a[1]=e.a[1]+o|0,e.a[2]=e.a[2]+s|0,e.a[3]=e.a[3]+u|0,e.a[4]=e.a[4]+l|0,e.a[5]=e.a[5]+c|0,e.a[6]=e.a[6]+p|0,e.a[7]=e.a[7]+i|0}function Wt(t,n,r){void 0===r&&(r=n.length);var o=0,i=t.c;if(e(n))for(;o<r;)t.f[i++]=n.charCodeAt(o++),i==t.b&&(Vt(t),i=0);else{if(!s(n))throw Error("message must be string or array");for(;o<r;){var a=n[o++];if(!("number"==typeof a&&0<=a&&255>=a&&a==(0|a)))throw Error("message must be a byte array");t.f[i++]=a,i==t.b&&(Vt(t),i=0)}}t.c=i,t.g+=r}function qt(){Ut.call(this,8,Fl)}function Ht(t){if(t.P&&"function"==typeof t.P)return t.P();if(e(t))return t.split("");if(s(t)){for(var n=[],r=t.length,o=0;o<r;o++)n.push(t[o]);return n}return I(t)}function Gt(t){if(t.S&&"function"==typeof t.S)return t.S();if(!t.P||"function"!=typeof t.P){if(s(t)||e(t)){var n=[];t=t.length;for(var r=0;r<t;r++)n.push(r);return n}return N(t)}}function Kt(t,n){if(t.forEach&&"function"==typeof t.forEach)t.forEach(n,void 0);else if(s(t)||e(t))xu(t,n,void 0);else for(var r=Gt(t),o=Ht(t),i=o.length,a=0;a<i;a++)n.call(void 0,o[a],r&&r[a],t)}function Xt(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),o=null;if(0<=r){var i=e[n].substring(0,r);o=e[n].substring(r+1)}else i=e[n];t(i,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}function Yt(e,t){if(this.b=this.l=this.c="",this.i=null,this.h=this.g="",this.f=!1,e instanceof Yt){this.f=void 0!==t?t:e.f,Zt(this,e.c),this.l=e.l,this.b=e.b,Qt(this,e.i),this.g=e.g,t=e.a;var n=new sn;n.c=t.c,t.a&&(n.a=new xt(t.a),n.b=t.b),Jt(this,n),this.h=e.h}else e&&(n=String(e).match(jl))?(this.f=!!t,Zt(this,n[1]||"",!0),this.l=rn(n[2]||""),this.b=rn(n[3]||"",!0),Qt(this,n[4]),this.g=rn(n[5]||"",!0),Jt(this,n[6]||"",!0),this.h=rn(n[7]||"")):(this.f=!!t,this.a=new sn(null,0,this.f))}function Zt(e,t,n){e.c=n?rn(t,!0):t,e.c&&(e.c=e.c.replace(/:$/,""))}function Qt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.i=t}else e.i=null}function Jt(e,t,n){t instanceof sn?(e.a=t,mn(e.a,e.f)):(n||(t=on(t,Vl)),e.a=new sn(t,0,e.f))}function $t(e,t,n){e.a.set(t,n)}function en(e,t){return e.a.get(t)}function tn(e){return e instanceof Yt?new Yt(e):new Yt(e,void 0)}function nn(e,t){var n=new Yt(null,void 0);return Zt(n,"https"),e&&(n.b=e),t&&(n.g=t),n}function rn(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function on(t,n,r){return e(t)?(t=encodeURI(t).replace(n,an),r&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function an(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(15&e).toString(16)}function sn(e,t,n){this.b=this.a=null,this.c=e||null,this.f=!!n}function un(e){e.a||(e.a=new xt,e.b=0,e.c&&Xt(e.c,function(t,n){cn(e,decodeURIComponent(t.replace(/\+/g," ")),n)}))}function ln(e){var t=Gt(e);if("undefined"==typeof t)throw Error("Keys are undefined");var n=new sn(null,0,void 0);e=Ht(e);for(var r=0;r<t.length;r++){var o=t[r],i=e[r];a(i)?fn(n,o,i):cn(n,o,i)}return n}function cn(e,t,n){un(e),e.c=null,t=dn(e,t);var r=e.a.get(t);r||e.a.set(t,r=[]),r.push(n),e.b+=1}function pn(e,t){un(e),t=dn(e,t),Ct(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,e=e.a,Ct(e.b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&Et(e)))}function hn(e,t){return un(e),t=dn(e,t),Ct(e.a.b,t)}function fn(e,t,n){pn(e,t),0<n.length&&(e.c=null,e.a.set(dn(e,t),O(n)),e.b+=n.length)}function dn(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}function mn(e,t){t&&!e.f&&(un(e),e.c=null,e.a.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(pn(this,t),fn(this,n,e))},e)),e.f=t}function yn(){}function vn(e){return e.c||(e.c=e.b())}function gn(){}function _n(e){if(!e.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var t=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<t.length;n++){var r=t[n];try{return new ActiveXObject(r),e.f=r}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return e.f}function bn(e){ct.call(this),this.headers=new xt,this.w=e||null,this.b=!1,this.v=this.a=null,this.g=this.I=this.i="",this.c=this.G=this.h=this.A=!1,this.f=0,this.m=null,this.l=Hl,this.o=this.N=!1}function wn(e,t,n,r,o){if(e.a)throw Error("[goog.net.XhrIo] Object is active with another request="+e.i+"; newUri="+t);n=n?n.toUpperCase():"GET",e.i=t,e.g="",e.I=n,e.A=!1,e.b=!0,e.a=e.w?e.w.a():ql.a(),e.v=vn(e.w?e.w:ql),e.a.onreadystatechange=h(e.zb,e);try{Tt(e.J,Nn(e,"Opening Xhr")),e.G=!0,e.a.open(n,String(t),!0),e.G=!1}catch(t){return Tt(e.J,Nn(e,"Error opening Xhr: "+t.message)),void Cn(e,t)}t=r||"";var i=new xt(e.headers);o&&Kt(o,function(e,t){i.set(t,e)}),o=E(i.S()),r=uu.FormData&&t instanceof uu.FormData,!C(Yl,n)||o||r||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(e,t){this.a.setRequestHeader(t,e)},e),e.l&&(e.a.responseType=e.l),"withCredentials"in e.a&&e.a.withCredentials!==e.N&&(e.a.withCredentials=e.N);try{On(e),0<e.f&&(e.o=xn(e.a),Tt(e.J,Nn(e,"Will abort after "+e.f+"ms if incomplete, xhr2 "+e.o)),e.o?(e.a.timeout=e.f,e.a.ontimeout=h(e.Ea,e)):e.m=mt(e.Ea,e.f,e)),Tt(e.J,Nn(e,"Sending request")),e.h=!0,e.a.send(t),e.h=!1}catch(t){Tt(e.J,Nn(e,"Send error: "+t.message)),Cn(e,t)}}function xn(e){return ku&&B(9)&&"number"==typeof e.timeout&&void 0!==e.ontimeout}function En(e){return"content-type"==e.toLowerCase()}function Cn(e,t){e.b=!1,e.a&&(e.c=!0,e.a.abort(),e.c=!1),e.g=t,Tn(e),Pn(e)}function Tn(e){e.A||(e.A=!0,pt(e,"complete"),pt(e,"error"))}function Sn(e){if(e.b&&"undefined"!=typeof su)if(e.v[1]&&4==An(e)&&2==kn(e))Tt(e.J,Nn(e,"Local request error detected and ignored"));else if(e.h&&4==An(e))mt(e.zb,0,e);else if(pt(e,"readystatechange"),4==An(e)){Tt(e.J,Nn(e,"Request complete")),e.b=!1;try{var t=kn(e);e:switch(t){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var n=!0;break e;default:n=!1}var r;if(!(r=n)){var o;if(o=0===t){var i=String(e.i).match(jl)[1]||null;if(!i&&uu.self&&uu.self.location){var a=uu.self.location.protocol;i=a.substr(0,a.length-1)}o=!Xl.test(i?i.toLowerCase():"")}r=o}if(r)pt(e,"complete"),pt(e,"success");else{try{var s=2<An(e)?e.a.statusText:""}catch(t){Tt(e.J,"Can not get status: "+t.message),s=""}e.g=s+" ["+kn(e)+"]",Tn(e)}}finally{Pn(e)}}}function Pn(e,t){if(e.a){On(e);var n=e.a,o=e.v[0]?r:null;e.a=null,e.v=null,t||pt(e,"ready");try{n.onreadystatechange=o}catch(t){(e=e.J)&&e.log(xl,"Problem encountered resetting onreadystatechange: "+t.message,void 0)}}}function On(e){e.a&&e.o&&(e.a.ontimeout=null),"number"==typeof e.m&&(uu.clearTimeout(e.m),e.m=null)}function An(e){return e.a?e.a.readyState:0}function kn(e){try{return 2<An(e)?e.a.status:-1}catch(e){return-1}}function In(e){try{return e.a?e.a.responseText:""}catch(t){return Tt(e.J,"Can not get responseText: "+t.message),""}}function Nn(e,t){return t+" ["+e.I+" "+e.i+" "+kn(e)+"]"}function Rn(e){var t={},n=t.document||document,r=Ee(e),o=document.createElement("SCRIPT"),i={Bb:o,Ea:void 0},a=new kt(Dn,i),s=null,u=null!=t.timeout?t.timeout:5e3;return 0<u&&(s=window.setTimeout(function(){Ln(o,!0);var e=new Fn(Jl,"Timeout reached for loading script "+r);Nt(a),It(a,!1,e)},u),i.Ea=s),o.onload=o.onreadystatechange=function(){o.readyState&&"loaded"!=o.readyState&&"complete"!=o.readyState||(Ln(o,t.Oc||!1,s),a.A(null))},o.onerror=function(){Ln(o,!0,s);var e=new Fn(Ql,"Error while loading script "+r);Nt(a),It(a,!1,e)},i=t.attributes||{},L(i,{type:"text/javascript",charset:"UTF-8"}),Me(o,i),o.src=Ee(e),Mn(n).appendChild(o),a}function Mn(e){var t;return(t=(e||document).getElementsByTagName("HEAD"))&&0!=t.length?t[0]:e.documentElement}function Dn(){if(this&&this.Bb){var e=this.Bb;e&&"SCRIPT"==e.tagName&&Ln(e,!0,this.Ea)}}function Ln(e,t,n){null!=n&&uu.clearTimeout(n),e.onload=r,e.onerror=r,e.onreadystatechange=r,t&&window.setTimeout(function(){e&&e.parentNode&&e.parentNode.removeChild(e)},0)}function Fn(e,t){var n="Jsloader error (code #"+e+")";t&&(n+=": "+t),m.call(this,n),this.code=e}function jn(){}function zn(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseText="",this.status=-1,this.statusText=this.responseXML=null,this.a.onload=h(this.Sb,this),this.a.onerror=h(this.wb,this),this.a.onprogress=h(this.Tb,this),this.a.ontimeout=h(this.Ub,this)}function Bn(e,t){e.readyState=t,e.onreadystatechange&&e.onreadystatechange()}function Un(){var e=or();return ku&&!!ju&&11==ju||/Edge\/\d+/.test(e)}function Vn(){return uu.window&&uu.window.location.href||""}function Wn(e,t){t=t||uu.window;var n="about:blank";e&&(n=Pe(Oe(e))),t.location.href=n}function qn(e,t){var n,r=[];for(n in e)n in t?typeof e[n]!=typeof t[n]?r.push(n):a(e[n])?M(e[n],t[n])||r.push(n):"object"==typeof e[n]&&null!=e[n]&&null!=t[n]?0<qn(e[n],t[n]).length&&r.push(n):e[n]!==t[n]&&r.push(n):r.push(n);for(n in t)n in e||r.push(n);return r}function Hn(){var e=or();return!((e=nr(e)!=tc?null:(e=e.match(/\sChrome\/(\d+)/i))&&2==e.length?parseInt(e[1],10):null)&&30>e)&&(!ku||!ju||9<ju)}function Gn(e){return e=(e||or()).toLowerCase(),!!(e.match(/android/)||e.match(/webos/)||e.match(/iphone|ipad|ipod/)||e.match(/blackberry/)||e.match(/windows phone/)||e.match(/iemobile/))}function Kn(e){e=e||uu.window;try{e.close()}catch(e){}}function Xn(e,t,n){var r=Math.floor(1e9*Math.random()).toString();t=t||500,n=n||600;var o=(window.screen.availHeight-n)/2,i=(window.screen.availWidth-t)/2;t={width:t,height:n,top:0<o?o:0,left:0<i?i:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=or().toLowerCase(),r&&(t.target=r,g(n,"crios/")&&(t.target="_blank")),nr(or())==ec&&(e=e||"http://localhost",t.scrollbars=!0),n=e||"",(r=t)||(r={}),e=window,t=n instanceof Se?n:Oe("undefined"!=typeof n.href?n.href:String(n)),n=r.target||n.target,o=[];for(a in r)switch(a){case"width":case"height":case"top":case"left":o.push(a+"="+r[a]);break;case"target":case"noreferrer":break;default:o.push(a+"="+(r[a]?1:0))}var a=o.join(",");if((A("iPhone")&&!A("iPod")&&!A("iPad")||A("iPad")||A("iPod"))&&e.navigator&&e.navigator.standalone&&n&&"_self"!=n?(a=e.document.createElement("A"),t instanceof Se||t instanceof Se||(t=t.la?t.ja():String(t),nl.test(t)||(t="about:invalid#zClosurez"),t=Ae(t)),a.href=Pe(t),a.setAttribute("target",n),r.noreferrer&&a.setAttribute("rel","noreferrer"),r=document.createEvent("MouseEvent"),r.initMouseEvent("click",!0,!0,e,1),a.dispatchEvent(r),a={}):r.noreferrer?(a=e.open("",n,a),e=Pe(t),a&&(Nu&&g(e,";")&&(e="'"+e.replace(/'/g,"%27")+"'"),a.opener=null,we("b/12014412, meta tag with sanitized URL"),e='<META HTTP-EQUIV="refresh" content="0; url='+v(e)+'">',e=Ne(e),a.document.write(Ie(e)),a.document.close())):a=e.open(Pe(t),n,a),a)try{a.focus()}catch(e){}return a}function Yn(e){return new J(function(t){function n(){yt(2e3).then(function(){if(e&&!e.closed)return n();t()})}return n()})}function Zn(){var e=null;return new J(function(t){"complete"==uu.document.readyState?t():(e=function(){t()},tt(window,"load",e))}).s(function(t){throw nt(window,"load",e),t})}function Qn(){return Jn(void 0)?Zn().then(function(){return new J(function(e,t){var n=uu.document,r=setTimeout(function(){t(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),e()},!1)})}):ne(Error("Cordova must run in an Android or iOS file scheme."))}function Jn(e){return e=e||or(),!("file:"!==lr()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function $n(){var e=uu.window;try{return!(!e||e==e.top)}catch(e){return!1}}function er(){return au.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":au.INTERNAL.hasOwnProperty("node")?"Node":"Browser"}function tr(){var e=er();return"ReactNative"===e||"Node"===e}function nr(e){var t=e.toLowerCase();return g(t,"opera/")||g(t,"opr/")||g(t,"opios/")?"Opera":g(t,"iemobile")?"IEMobile":g(t,"msie")||g(t,"trident/")?"IE":g(t,"edge/")?"Edge":g(t,"firefox/")?ec:g(t,"silk/")?"Silk":g(t,"blackberry")?"Blackberry":g(t,"webos")?"Webos":!g(t,"safari/")||g(t,"chrome/")||g(t,"crios/")||g(t,"android")?!g(t,"chrome/")&&!g(t,"crios/")||g(t,"edge/")?g(t,"android")?"Android":(e=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==e.length?e[1]:"Other":tc:"Safari"}function rr(e,t){t=t||[];var n,r=[],o={};for(n in nc)o[nc[n]]=!0;for(n=0;n<t.length;n++)"undefined"!==typeof o[t[n]]&&(delete o[t[n]],r.push(t[n]));return r.sort(),t=r,t.length||(t=["FirebaseCore-web"]),r=er(),o="",(o="Browser"===r?nr(or()):r)+"/JsCore/"+e+"/"+t.join(",")}function or(){return uu.navigator&&uu.navigator.userAgent||""}function ir(e,t){e=e.split("."),t=t||uu;for(var n=0;n<e.length&&"object"==typeof t&&null!=t;n++)t=t[e[n]];return n!=e.length&&(t=void 0),t}function ar(){try{var e=uu.localStorage,t=dr();if(e)return e.setItem(t,"1"),e.removeItem(t),!Un()||!!uu.indexedDB}catch(e){}return!1}function sr(){return(ur()||"chrome-extension:"===lr()||Jn())&&!tr()&&ar()}function ur(){return"http:"===lr()||"https:"===lr()}function lr(){return uu.location&&uu.location.protocol||null}function cr(e){return e=e||or(),!Gn(e)&&nr(e)!=ec}function pr(e){return"undefined"===typeof e?null:je(e)}function hr(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&null!==e[t]&&void 0!==e[t]&&(n[t]=e[t]);return n}function fr(e){if(null!==e)return JSON.parse(e)}function dr(e){return e||""+Math.floor(1e9*Math.random()).toString()}function mr(e){return e=e||or(),"Safari"!=nr(e)&&!e.toLowerCase().match(/iphone|ipad|ipod/)}function yr(){var e=uu.___jsl;if(e&&e.H)for(var t in e.H)if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=e.H[t].L.concat(),e.CP)for(var n=0;n<e.CP.length;n++)e.CP[n]=null}function vr(){var e=uu.navigator;return!e||"boolean"!==typeof e.onLine||!ur()&&"chrome-extension:"!==lr()&&"undefined"===typeof e.connection||e.onLine}function gr(e,t,n,r){if(e>t)throw Error("Short delay should be less than long delay!");this.c=e,this.b=t,e=n||or(),r=r||er(),this.a=Gn(e)||"ReactNative"===r}function _r(){var e=uu.document;return!e||"undefined"===typeof e.visibilityState||"visible"==e.visibilityState}function br(){var e=uu.document,t=null;return _r()||!e?te():new J(function(n){t=function(){_r()&&(e.removeEventListener("visibilitychange",t,!1),n())},e.addEventListener("visibilitychange",t,!1)}).s(function(n){throw e.removeEventListener("visibilitychange",t,!1),n})}function wr(e){try{var t=new Date(parseInt(e,10));if(!isNaN(t.getTime())&&!/[^0-9]/.test(e))return t.toUTCString()}catch(e){}return null}function xr(e,t,n){rc?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,value:n}):e[t]=n}function Er(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&xr(e,n,t[n])}function Cr(e){var t={};return Er(t,e),t}function Tr(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function Sr(e,t){if(!t||!t.length)return!0;if(!e)return!1;for(var n=0;n<t.length;n++){var r=e[t[n]];if(void 0===r||null===r||""===r)return!1}return!0}function Pr(e){var t=e;if("object"==typeof e&&null!=e){t="length"in e?[]:{};for(var n in e)xr(t,n,Pr(e[n]))}return t}function Or(e){var t={},n=e[ac],r=e[sc];if(e=e[uc],!n||!e)throw Error("Invalid provider user info!");t[cc]=r||null,t[lc]=n,xr(this,hc,e),xr(this,pc,Pr(t))}function Ar(e,t){this.code=fc+e,this.message=t||dc[e]||""}function kr(e){var t=e&&e.code;return t?new Ar(t.substring(fc.length),e.message):null}function Ir(e){var t=e[gc];if("undefined"===typeof t)throw new Ar("missing-continue-uri");if("string"!==typeof t||"string"===typeof t&&!t.length)throw new Ar("invalid-continue-uri");this.h=t,this.c=this.a=null,this.g=!1;var n=e[mc];if(n&&"object"===typeof n){t=n[wc];var r=n[_c];if(n=n[bc],"string"===typeof t&&t.length){if(this.a=t,"undefined"!==typeof r&&"boolean"!==typeof r)throw new Ar("argument-error",_c+" property must be a boolean when specified.");if(this.g=!!r,"undefined"!==typeof n&&("string"!==typeof n||"string"===typeof n&&!n.length))throw new Ar("argument-error",bc+" property must be a non empty string when specified.");this.c=n||null}else{if("undefined"!==typeof t)throw new Ar("argument-error",wc+" property must be a non empty string when specified.");if("undefined"!==typeof r||"undefined"!==typeof n)throw new Ar("missing-android-pkg-name")}}else if("undefined"!==typeof n)throw new Ar("argument-error",mc+" property must be a non null object when specified.");if(this.b=null,(t=e[vc])&&"object"===typeof t){if("string"===typeof(t=t[xc])&&t.length)this.b=t;else if("undefined"!==typeof t)throw new Ar("argument-error",xc+" property must be a non empty string when specified.")}else if("undefined"!==typeof t)throw new Ar("argument-error",vc+" property must be a non null object when specified.");if("undefined"!==typeof(e=e[yc])&&"boolean"!==typeof e)throw new Ar("argument-error",yc+" property must be a boolean when specified.");if((this.f=!!e)&&!this.b&&!this.a)throw new Ar("argument-error",yc+" property can't be true when no mobile application is provided.")}function Nr(e){var t={};t.continueUrl=e.h,t.canHandleCodeInApp=e.f,(t.androidPackageName=e.a)&&(t.androidMinimumVersion=e.c,t.androidInstallApp=e.g),t.iOSBundleId=e.b;for(var n in t)null===t[n]&&delete t[n];return t}function Rr(e){this.b=e.sub,pu(),this.a=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null}function Mr(e){if(e=e.split("."),3!=e.length)return null;e=e[1];for(var t=(4-e.length%4)%4,n=0;n<t;n++)e+=".";try{var r=JSON.parse(Pt(e));if(r.sub&&r.iss&&r.aud&&r.exp)return new Rr(r)}catch(e){}return null}function Dr(e){for(var t in Tc)if(Tc[t].Na==e)return Tc[t];return null}function Lr(e){var t={};t["facebook.com"]=zr,t["google.com"]=Ur,t["github.com"]=Br,t["twitter.com"]=Vr;var n=e&&e[Pc];try{if(n)return t[n]?new t[n](e):new jr(e);if("undefined"!==typeof e[Sc])return new Fr(e)}catch(e){}return null}function Fr(e){var t=e[Pc];if(!t&&e[Sc]){var n=Mr(e[Sc]);n&&n.a&&(t=n.a)}if(!t)throw Error("Invalid additional user info!");e=!!e.isNewUser,xr(this,"providerId",t),xr(this,"isNewUser",e)}function jr(e){Fr.call(this,e),e=fr(e.rawUserInfo||"{}"),xr(this,"profile",Pr(e||{}))}function zr(e){if(jr.call(this,e),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Br(e){if(jr.call(this,e),"github.com"!=this.providerId)throw Error("Invalid provider ID!");xr(this,"username",this.profile&&this.profile.login||null)}function Ur(e){if(jr.call(this,e),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Vr(e){if(jr.call(this,e),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");xr(this,"username",e.screenName||null)}function Wr(e,t){return e.then(function(e){if(e[Ac]){var n=Mr(e[Ac]);if(!n||t!=n.b)throw new Ar("user-mismatch");return e}throw new Ar("user-mismatch")}).s(function(e){throw e&&e.code&&e.code==fc+"user-not-found"?new Ar("user-mismatch"):e})}function qr(e,t){if(t.idToken||t.accessToken)t.idToken&&xr(this,"idToken",t.idToken),t.accessToken&&xr(this,"accessToken",t.accessToken);else{if(!t.oauthToken||!t.oauthTokenSecret)throw new Ar("internal-error","failed to construct a credential");xr(this,"accessToken",t.oauthToken),xr(this,"secret",t.oauthTokenSecret)}xr(this,"providerId",e)}function Hr(e){var t={};return e.idToken&&(t.id_token=e.idToken),e.accessToken&&(t.access_token=e.accessToken),e.secret&&(t.oauth_token_secret=e.secret),t.providerId=e.providerId,{postBody:ln(t).toString(),requestUri:"http://localhost"}}function Gr(e,t){this.nc=t||[],Er(this,{providerId:e,isOAuthProvider:!0}),this.qb={},this.Wa=(Dr(e)||{}).Ma||null,this.Ua=null}function Kr(e){Gr.call(this,e,Cc),this.a=[]}function Xr(){Kr.call(this,"facebook.com")}function Yr(e){if(!e)throw new Ar("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return l(e)&&(t=e.accessToken),(new Xr).credential(null,t)}function Zr(){Kr.call(this,"github.com")}function Qr(e){if(!e)throw new Ar("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return l(e)&&(t=e.accessToken),(new Zr).credential(null,t)}function Jr(){Kr.call(this,"google.com"),this.sa("profile")}function $r(e,t){var n=e;return l(e)&&(n=e.idToken,t=e.accessToken),(new Jr).credential(n,t)}function eo(){Gr.call(this,"twitter.com",Ec)}function to(e,t){var n=e;if(l(n)||(n={oauthToken:e,oauthTokenSecret:t}),!n.oauthToken||!n.oauthTokenSecret)throw new Ar("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new qr("twitter.com",n)}function no(e,t){this.a=e,this.f=t,xr(this,"providerId","password")}function ro(){Er(this,{providerId:"password",isOAuthProvider:!1})}function oo(e){if(!(e.Pa&&e.Oa||e.Da&&e.Y))throw new Ar("internal-error");this.a=e,xr(this,"providerId","phone")}function io(e){return e.a.Da&&e.a.Y?{temporaryProof:e.a.Da,phoneNumber:e.a.Y}:{sessionInfo:e.a.Pa,code:e.a.Oa}}function ao(e){try{this.a=e||au.auth()}catch(e){throw new Ar("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Er(this,{providerId:"phone",isOAuthProvider:!1})}function so(e,t){if(!e)throw new Ar("missing-verification-id");if(!t)throw new Ar("missing-verification-code");return new oo({Pa:e,Oa:t})}function uo(e){if(e.temporaryProof&&e.phoneNumber)return new oo({Da:e.temporaryProof,Y:e.phoneNumber});var t=e&&e.providerId;if(!t||"password"===t)return null;var n=e&&e.oauthAccessToken,r=e&&e.oauthTokenSecret;e=e&&e.oauthIdToken;try{switch(t){case"google.com":return $r(e,n);case"facebook.com":return Yr(n);case"github.com":return Qr(n);case"twitter.com":return to(n,r);default:return new Kr(t).credential(e,n)}}catch(e){return null}}function lo(e){if(!e.isOAuthProvider)throw new Ar("invalid-oauth-provider")}function co(e,t,n,r,o){if(this.b=e,this.c=t||null,this.f=n||null,this.g=r||null,this.a=o||null,!this.f&&!this.a)throw new Ar("invalid-auth-event");if(this.f&&this.a)throw new Ar("invalid-auth-event");if(this.f&&!this.g)throw new Ar("invalid-auth-event")}function po(e){return e=e||{},e.type?new co(e.type,e.eventId,e.urlResponse,e.sessionId,e.error&&kr(e.error)):null}function ho(e){var t="unauthorized-domain",n=void 0,r=tn(e);e=r.b,r=r.c,"chrome-extension"==r?n=y("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):"http"==r||"https"==r?n=y("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):t="operation-not-supported-in-this-environment",Ar.call(this,t,n)}function fo(e,t,n){Ar.call(this,e,n),e=t||{},e.rb&&xr(this,"email",e.rb),e.Y&&xr(this,"phoneNumber",e.Y),e.credential&&xr(this,"credential",e.credential)}function mo(e){if(e.code){var t=e.code||"";0==t.indexOf(fc)&&(t=t.substring(fc.length));var n={credential:uo(e)};if(e.email)n.rb=e.email;else{if(!e.phoneNumber)return new Ar(t,e.message||void 0);n.Y=e.phoneNumber}return new fo(t,n,e.message)}return null}function yo(e){this.f=e}function vo(e,t,n){var r="Node"==er();if(!(r=uu.XMLHttpRequest||r&&au.INTERNAL.node&&au.INTERNAL.node.XMLHttpRequest))throw new Ar("internal-error","The XMLHttpRequest compatibility library was not found.");this.b=e,e=t||{},this.i=e.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.l=e.secureTokenTimeout||kc,this.c=D(e.secureTokenHeaders||Ic),this.g=e.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.h=e.firebaseTimeout||Nc,this.a=D(e.firebaseHeaders||Rc),n&&(this.a["X-Client-Version"]=n,this.c["X-Client-Version"]=n),this.f=new jn,this.o=new yo(r)}function go(e,t){t?e.a["X-Firebase-Locale"]=t:delete e.a["X-Firebase-Locale"]}function _o(e,t){t?(e.a["X-Client-Version"]=t,e.c["X-Client-Version"]=t):(delete e.a["X-Client-Version"],delete e.c["X-Client-Version"])}function bo(e,t,n,r,o,i,a){vr()?(Hn()?e=h(e.m,e):(Oc||(Oc=new J(function(e,t){wo(e,t)})),e=h(e.u,e)),e(t,n,r,o,i,a)):n&&n(null)}function wo(e,t){if(((window.gapi||{}).client||{}).request)e();else{uu[Dc]=function(){((window.gapi||{}).client||{}).request?e():t(Error("CORS_UNSUPPORTED"))};Rt(Rn(Ce(Mc,{onload:Dc})),function(){t(Error("CORS_UNSUPPORTED"))})}}function xo(e,t){return new J(function(n,r){"refresh_token"==t.grant_type&&t.refresh_token||"authorization_code"==t.grant_type&&t.code?bo(e,e.i+"?key="+encodeURIComponent(e.b),function(e){e?e.error?r(Bo(e)):e.access_token&&e.refresh_token?n(e):r(new Ar("internal-error")):r(new Ar("network-request-failed"))},"POST",ln(t).toString(),e.c,e.l.get()):r(new Ar("internal-error"))})}function Eo(e,t,n,r,o,i){var a=tn(e.g+t);$t(a,"key",e.b),i&&$t(a,"cb",pu().toString());var s="GET"==n;if(s)for(var u in r)r.hasOwnProperty(u)&&$t(a,u,r[u]);return new J(function(t,i){bo(e,a.toString(),function(e){e?e.error?i(Bo(e,o||{})):t(e):i(new Ar("network-request-failed"))},n,s?void 0:je(hr(r)),e.a,e.h.get())})}function Co(e){if(!Zl.test(e.email))throw new Ar("invalid-email")}function To(e){"email"in e&&Co(e)}function So(e,t){return jo(e,Uc,{identifier:t,continueUri:ur()?Vn():"http://localhost"}).then(function(e){return e.allProviders||[]})}function Po(e){return jo(e,Kc,{}).then(function(e){return e.authorizedDomains||[]})}function Oo(e){if(!e[Ac])throw new Ar("internal-error")}function Ao(e){if(e.phoneNumber||e.temporaryProof){if(!e.phoneNumber||!e.temporaryProof)throw new Ar("internal-error")}else{if(!e.sessionInfo)throw new Ar("missing-verification-id");if(!e.code)throw new Ar("missing-verification-code")}}function ko(e,t){return jo(e,Zc,t)}function Io(e,t,n){return jo(e,Wc,{idToken:t,deleteProvider:n})}function No(e){if(!e.requestUri||!e.sessionId&&!e.postBody)throw new Ar("internal-error")}function Ro(e){var t=null;if(e.needConfirmation?(e.code="account-exists-with-different-credential",t=mo(e)):"FEDERATED_USER_ID_ALREADY_LINKED"==e.errorMessage?(e.code="credential-already-in-use",t=mo(e)):"EMAIL_EXISTS"==e.errorMessage?(e.code="email-already-in-use",t=mo(e)):e.errorMessage&&(t=zo(e.errorMessage)),t)throw t;if(!e[Ac])throw new Ar("internal-error")}function Mo(e,t){return t.returnIdpCredential=!0,jo(e,ep,t)}function Do(e,t){return t.returnIdpCredential=!0,jo(e,np,t)}function Lo(e,t){return t.returnIdpCredential=!0,t.autoCreate=!1,jo(e,tp,t)}function Fo(e){if(!e.oobCode)throw new Ar("invalid-action-code")}function jo(e,t,n){if(!Sr(n,t.ea))return ne(new Ar("internal-error"));var r,o=t.yb||"POST";return te(n).then(t.D).then(function(){return t.T&&(n.returnSecureToken=!0),Eo(e,t.endpoint,o,n,t.Lb,t.nb||!1)}).then(function(e){return r=e}).then(t.O).then(function(){if(!t.ga)return r;if(!(t.ga in r))throw new Ar("internal-error");return r[t.ga]})}function zo(e){return Bo({error:{errors:[{message:e}],code:400,message:e}})}function Bo(e,t){var n=(e.error&&e.error.errors&&e.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new Ar(r[n]):null)return n;n=e.error&&e.error.message||"",r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash"},L(r,t||{}),t=(t=n.match(/^[^\s]+\s*:\s*(.*)$/))&&1<t.length?t[1]:void 0;for(var o in r)if(0===n.indexOf(o))return new Ar(r[o],t);return!t&&e&&(t=pr(e)),new Ar("internal-error",t)}function Uo(e){for(var t in up)if(up[t].id===e)return e=up[t],{firebaseEndpoint:e.Va,secureTokenEndpoint:e.ab};return null}function Vo(e){this.b=e,this.a=null,this.Ya=Wo(this)}function Wo(e){return Go().then(function(){return new J(function(t,n){ir("gapi.iframes.getContext")().open({where:document.body,url:e.b,messageHandlersFilter:ir("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(r){function o(){clearTimeout(i),t()}e.a=r,e.a.restyle({setHideOnLeave:!1});var i=setTimeout(function(){n(Error("Network Error"))},pp.get());r.ping(o).then(o,function(){n(Error("Network Error"))})})})})}function qo(e,t){return e.Ya.then(function(){return new J(function(n){e.a.send(t.type,t,n,ir("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}function Ho(e,t){e.Ya.then(function(){e.a.register("authEvent",t,ir("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}function Go(){return hp||(hp=new J(function(e,t){if(vr()){var n=function(){yr(),ir("gapi.load")("gapi.iframes",{callback:e,ontimeout:function(){yr(),t(Error("Network Error"))},timeout:cp.get()})};if(ir("gapi.iframes.Iframe"))e();else if(ir("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();uu[r]=function(){ir("gapi.load")?n():t(Error("Network Error"))},r=Ce(lp,{onload:r}),te(Rn(r)).s(function(){t(Error("Network Error"))})}}else t(Error("Network Error"))}).s(function(e){throw hp=null,e}))}function Ko(e,t,n){this.i=e,this.g=t,this.h=n,this.f=null,this.a=nn(this.i,"/__/auth/iframe"),$t(this.a,"apiKey",this.g),$t(this.a,"appName",this.h),this.b=null,this.c=[]}function Xo(e,t,n,r,o){this.m=e,this.u=t,this.c=n,this.l=r,this.i=this.g=this.h=null,this.a=o,this.f=null}function Yo(e){try{return au.app(e).auth().Ka()}catch(e){return[]}}function Zo(e,t,n,r,o){this.u=e,this.f=t,this.b=n,this.c=r||null,this.h=o||null,this.m=this.o=this.v=null,this.g=[],this.l=this.a=null}function Qo(e){var t=Vn();return Po(e).then(function(e){e:{var n=tn(t),r=n.c;n=n.b;for(var o=0;o<e.length;o++){var i=e[o],a=n,s=r;if(0==i.indexOf("chrome-extension://")?a=tn(i).b==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:$l.test(i)?a=a==i:(i=i.split(".").join("\\."),a=new RegExp("^(.+\\."+i+"|"+i+")$","i").test(a)),a){e=!0;break e}}e=!1}if(!e)throw new ho(Vn())})}function Jo(e){return e.l?e.l:(e.l=Zn().then(function(){if(!e.o){var t=e.c,n=e.h,r=Yo(e.b),o=new Ko(e.u,e.f,e.b);o.f=t,o.b=n,o.c=O(r||[]),e.o=o.toString()}e.i=new Vo(e.o),ti(e)}),e.l)}function $o(e){return e.m||(e.v=e.c?rr(e.c,Yo(e.b)):null,e.m=new vo(e.f,Uo(e.h),e.v)),e.m}function ei(e,t,n,r,o,i,a,s,u,l){return e=new Xo(e,t,n,r,o),e.h=i,e.g=a,e.i=s,e.b=D(u||null),e.f=l,e.toString()}function ti(e){if(!e.i)throw Error("IfcHandler must be initialized!");Ho(e.i,function(t){var n={};if(t&&t.authEvent){var r=!1;for(t=po(t.authEvent),n=0;n<e.g.length;n++)r=e.g[n](t)||r;return n={},n.status=r?"ACK":"ERROR",te(n)}return n.status="ERROR",te(n)})}function ni(e){var t={type:"webStorageSupport"};return Jo(e).then(function(){return qo(e.i,t)}).then(function(e){if(e&&e.length&&"undefined"!==typeof e[0].webStorageSupport)return e[0].webStorageSupport;throw Error()})}function ri(e){if(this.a=e||au.INTERNAL.reactNative&&au.INTERNAL.reactNative.AsyncStorage,!this.a)throw new Ar("internal-error","The React Native compatibility library was not found.")}function oi(){this.a={}}function ii(e,t,n,r,o,i){try{var a=!!uu.indexedDB}catch(e){a=!1}if(!a)throw new Ar("web-storage-unsupported");this.u=e,this.h=t,this.g=n,this.l=r,this.m=o,this.f={},this.c=[],this.a=0,this.o=i||uu.indexedDB}function ai(e){return new J(function(t,n){var r=e.o.open(e.u,e.m);r.onerror=function(e){n(Error(e.target.errorCode))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore(e.h,{keyPath:e.g})}catch(e){n(e)}},r.onsuccess=function(e){t(e.target.result)}})}function si(e){return e.i||(e.i=ai(e)),e.i}function ui(e,t){return t.objectStore(e.h)}function li(e,t,n){return t.transaction([e.h],n?"readwrite":"readonly")}function ci(e){return new J(function(t,n){e.onsuccess=function(e){e&&e.target?t(e.target.result):t()},e.onerror=function(e){n(Error(e.target.errorCode))}})}function pi(e){function t(){return e.b=yt(800).then(h(e.vc,e)).then(function(t){0<t.length&&xu(e.c,function(e){e(t)})}).then(t).s(function(e){"STOP_EVENT"!=e.message&&t()}),e.b}e.b&&e.b.cancel("STOP_EVENT"),t()}function hi(){if(!di()){if("Node"==er())throw new Ar("internal-error","The LocalStorage compatibility library was not found.");throw new Ar("web-storage-unsupported")}this.a=fi()||au.INTERNAL.node.localStorage}function fi(){try{var e=uu.localStorage,t=dr();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(e){return null}}function di(){var e="Node"==er();if(!(e=fi()||e&&au.INTERNAL.node&&au.INTERNAL.node.localStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(e){return!1}}function mi(){}function yi(){if(!gi()){if("Node"==er())throw new Ar("internal-error","The SessionStorage compatibility library was not found.");throw new Ar("web-storage-unsupported")}this.a=vi()||au.INTERNAL.node.sessionStorage}function vi(){try{var e=uu.sessionStorage,t=dr();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(e){return null}}function gi(){var e="Node"==er();if(!(e=vi()||e&&au.INTERNAL.node&&au.INTERNAL.node.sessionStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(e){return!1}}function _i(){var e={};e.Browser=yp,e.Node=vp,e.ReactNative=gp,this.a=e[er()]}function bi(e){var t=new Ar("invalid-persistence-type"),n=new Ar("unsupported-persistence-type");e:{for(r in _p)if(_p[r]==e){var r=!0;break e}r=!1}if(!r||"string"!==typeof e)throw t;switch(er()){case"ReactNative":if("session"===e)throw n;break;case"Node":if("none"!==e)throw n;break;default:if(!ar()&&"none"!==e)throw n}}function wi(e,t,n,r,o){this.i=e,this.g=t,this.A=n,this.u=r,this.v=o,this.a={},dp||(dp=new _i),e=dp;try{if(Un()){fp||(fp=new ii("firebaseLocalStorageDb","firebaseLocalStorage","fbase_key","value",1));var i=fp}else i=new e.a.C;this.l=i}catch(e){this.l=new oi,this.u=!0}try{this.o=new e.a.jb}catch(e){this.o=new oi}this.w=new oi,this.h=h(this.m,this),this.b={}}function xi(){return mp||(mp=new wi("firebase",":",!(mr(or())||!$n()),cr(),ar())),mp}function Ei(e,t){switch(t){case"session":return e.o;case"none":return e.w;default:return e.l}}function Ci(e,t,n){return e.i+e.g+t.name+(n?e.g+n:"")}function Ti(e,t,n){return n=Ci(e,t,n),"local"==t.C&&(e.b[n]=null),Ei(e,t.C).X(n)}function Si(e,t,n,r){t=Ci(e,t,n),e.v&&(e.b[t]=uu.localStorage.getItem(t)),R(e.a)&&(Ei(e,"local").ia(e.h),e.u||Un()||!e.v||Oi(e)),e.a[t]||(e.a[t]=[]),e.a[t].push(r)}function Pi(e,t,n){t=Ci(e,ls("local"),t),e.a[t]&&(S(e.a[t],function(e){return e==n}),0==e.a[t].length&&delete e.a[t]),R(e.a)&&ki(e)}function Oi(e){Ai(e),e.f=setInterval(function(){for(var t in e.a){var n=uu.localStorage.getItem(t),r=e.b[t];n!=r&&(e.b[t]=n,n=new He({type:"storage",key:t,target:window,oldValue:r,newValue:n,a:!0}),e.m(n))}},1e3)}function Ai(e){e.f&&(clearInterval(e.f),e.f=null)}function ki(e){Ei(e,"local").da(e.h),Ai(e)}function Ii(e){this.a=e,this.b=xi()}function Ni(e){return e.b.get(bp,e.a).then(function(e){return po(e)})}function Ri(){this.a=xi()}function Mi(e,t,n,r,o,i,a){this.u=e,this.i=t,this.l=n,this.m=r||null,this.o=a||null,this.h=t+":"+n,this.A=new Ri,this.g=new Ii(this.h),this.f=null,this.b=[],this.v=o||500,this.w=i||2e3,this.a=this.c=null}function Di(e){return new Ar("invalid-cordova-configuration",e)}function Li(){for(var e=20,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}function Fi(e){var t=new qt;Wt(t,e),e=[];var n=8*t.g;56>t.c?Wt(t,Dl,56-t.c):Wt(t,Dl,t.b-(t.c-56));for(var r=63;56<=r;r--)t.f[r]=255&n,n/=256;for(Vt(t),r=n=0;r<t.i;r++)for(var o=24;0<=o;o-=8)e[n++]=t.a[r]>>o&255;return St(e)}function ji(e,t,n,r){var o=Li(),i=new co(t,r,null,o,new Ar("no-auth-event")),a=ir("BuildInfo.packageName",uu);if("string"!==typeof a)throw new Ar("invalid-cordova-configuration");var s=ir("BuildInfo.displayName",uu),u={};if(or().toLowerCase().match(/iphone|ipad|ipod/))u.ibi=a;else{if(!or().toLowerCase().match(/android/))return ne(new Ar("operation-not-supported-in-this-environment"));u.apn=a}s&&(u.appDisplayName=s),o=Fi(o),u.sessionId=o;var l=ei(e.u,e.i,e.l,t,n,null,r,e.m,u,e.o);return e.ba().then(function(){var t=e.h;return e.A.a.set(bp,i.B(),t)}).then(function(){var t=ir("cordova.plugins.browsertab.isAvailable",uu);if("function"!==typeof t)throw new Ar("invalid-cordova-configuration");var n=null;t(function(t){if(t){if("function"!==typeof(n=ir("cordova.plugins.browsertab.openUrl",uu)))throw new Ar("invalid-cordova-configuration");n(l)}else{if("function"!==typeof(n=ir("cordova.InAppBrowser.open",uu)))throw new Ar("invalid-cordova-configuration");t=or(),t=!(!t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)&&!t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)),e.a=n(l,t?"_blank":"_system","location=yes")}})})}function zi(e,t){for(var n=0;n<e.b.length;n++)try{e.b[n](t)}catch(e){}}function Bi(e){return e.f||(e.f=e.ba().then(function(){return new J(function(t){function n(r){return t(r),e.Ja(n),!1}e.ua(n),Vi(e)})})),e.f}function Ui(e){var t=null;return Ni(e.g).then(function(n){return t=n,n=e.g,Ti(n.b,bp,n.a)}).then(function(){return t})}function Vi(e){function t(t){o=!0,i&&i.cancel(),Ui(e).then(function(n){var o=r;if(n&&t&&t.url){o=null;var i=t.url,a=tn(i),s=en(a,"link"),u=en(tn(s),"link");a=en(a,"deep_link_id"),i=en(tn(a),"link")||a||u||s||i,-1!=i.indexOf("/__/auth/callback")&&(o=tn(i),o=fr(en(o,"firebaseError")||null),o=(o="object"===typeof o?kr(o):null)?new co(n.b,n.c,null,null,o):new co(n.b,n.c,i,n.g)),o=o||r}zi(e,o)})}var n=ir("universalLinks.subscribe",uu);if("function"!==typeof n)throw new Ar("invalid-cordova-configuration");var r=new co("unknown",null,null,null,new Ar("no-auth-event")),o=!1,i=yt(e.v).then(function(){return Ui(e).then(function(){o||zi(e,r)})}),a=uu.handleOpenURL;uu.handleOpenURL=function(e){if(0==e.toLowerCase().indexOf(ir("BuildInfo.packageName",uu).toLowerCase()+"://")&&t({url:e}),"function"===typeof a)try{a(e)}catch(e){console.error(e)}},n(null,t)}function Wi(e){this.a=e,this.b=xi()}function qi(e){return e.b.set(wp,"pending",e.a)}function Hi(e){return Ti(e.b,wp,e.a)}function Gi(e){return e.b.get(wp,e.a).then(function(e){return"pending"==e})}function Ki(e,t,n){this.v=e,this.l=t,this.u=n,this.h=[],this.f=!1,this.i=h(this.m,this),this.c=new ea,this.o=new sa,this.g=new Wi(this.l+":"+this.u),this.b={},this.b.unknown=this.c,this.b.signInViaRedirect=this.c,this.b.linkViaRedirect=this.c,this.b.reauthViaRedirect=this.c,this.b.signInViaPopup=this.o,this.b.linkViaPopup=this.o,this.b.reauthViaPopup=this.o,this.a=Xi(this.v,this.l,this.u,Fc)}function Xi(e,t,n,r){var o=au.SDK_VERSION||null;return Jn()?new Mi(e,t,n,o,void 0,void 0,r):new Zo(e,t,n,o,r)}function Yi(e){e.f||(e.f=!0,e.a.ua(e.i));var t=e.a;return e.a.ba().s(function(n){throw e.a==t&&e.reset(),n})}function Zi(e){e.a.Cb()&&Yi(e).s(function(t){var n=new co("unknown",null,null,null,new Ar("operation-not-supported-in-this-environment"));Ji(t)&&e.m(n)}),e.a.xb()||ta(e.c)}function Qi(e,t,n,r,o,i){return e.a.ub(t,n,r,function(){e.f||(e.f=!0,e.a.ua(e.i))},function(){e.reset()},o,i)}function Ji(e){return!(!e||"auth/cordova-not-ready"!=e.code)}function $i(e,t,n){var r=t+":"+n;return Cp[r]||(Cp[r]=new Ki(e,t,n)),Cp[r]}function ea(){this.b=null,this.f=[],this.c=[],this.a=null,this.g=!1}function ta(e){e.g||(e.g=!0,ia(e,!1,null,null))}function na(e,t,n){n=n.va(t.b,t.c);var r=t.f,o=t.g,i=!!t.b.match(/Redirect$/);return n(r,o).then(function(t){ia(e,i,t,null)}).s(function(t){ia(e,i,null,t)})}function ra(e,t){if(e.b=function(){return ne(t)},e.c.length)for(var n=0;n<e.c.length;n++)e.c[n](t)}function oa(e,t){if(e.b=function(){return te(t)},e.f.length)for(var n=0;n<e.f.length;n++)e.f[n](t)}function ia(e,t,n,r){t?r?ra(e,r):oa(e,n):oa(e,{user:null}),e.f=[],e.c=[]}function aa(e){var t=new Ar("timeout");e.a&&e.a.cancel(),e.a=yt(Ep.get()).then(function(){e.b||ia(e,!0,null,t)})}function sa(){}function ua(e,t){var n=e.c,r=e.b;return t.va(r,n)(e.f,e.g).then(function(e){t.fa(r,e,null,n)}).s(function(e){t.fa(r,null,e,n)})}function la(e,t){this.a=t,xr(this,"verificationId",e)}function ca(e,t,n,r){return new ao(e).Qa(t,n).then(function(e){return new la(e,r)})}function pa(e,t,n,r,o,i){if(this.h=e,this.i=t,this.g=n,this.c=r,this.f=o,this.l=!!i,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function ha(e,t){return t?(e.a=e.c,e.g()):(t=e.a,e.a*=2,e.a>e.f&&(e.a=e.f),t)}function fa(e,t){da(e),e.b=yt(ha(e,t)).then(function(){return e.l?te():br()}).then(function(){return e.h()}).then(function(){fa(e,!0)}).s(function(t){e.i(t)&&fa(e,!1)})}function da(e){e.b&&(e.b.cancel(),e.b=null)}function ma(e){this.f=e,this.b=this.a=null,this.c=0}function ya(e,t){var n=t[Ac],r=t.refreshToken;t=va(t.expiresIn),e.b=n,e.c=t,e.a=r}function va(e){return pu()+1e3*parseInt(e,10)}function ga(e,t){return xo(e.f,t).then(function(t){return e.b=t.access_token,e.c=va(t.expires_in),e.a=t.refresh_token,{accessToken:e.b,expirationTime:e.c,refreshToken:e.a}}).s(function(t){throw"auth/user-token-expired"==t.code&&(e.a=null),t})}function _a(e,t){this.a=e||null,this.b=t||null,Er(this,{lastSignInTime:wr(t||null),creationTime:wr(e||null)})}function ba(e){return new _a(e.a,e.b)}function wa(e,t,n,r,o,i){Er(this,{uid:e,displayName:r||null,photoURL:o||null,email:n||null,phoneNumber:i||null,providerId:t})}function xa(e,t){qe.call(this,e);for(var n in t)this[n]=t[n]}function Ea(e,t,n){this.A=[],this.G=e.apiKey,this.o=e.appName,this.w=e.authDomain||null,e=au.SDK_VERSION?rr(au.SDK_VERSION):null,this.c=new vo(this.G,Uo(Fc),e),this.h=new ma(this.c),Ia(this,t[Ac]),ya(this.h,t),xr(this,"refreshToken",this.h.a),Da(this,n||{}),ct.call(this),this.I=!1,this.w&&sr()&&(this.a=$i(this.w,this.G,this.o)),this.N=[],this.i=null,this.l=Oa(this),this.U=h(this.Ga,this);var r=this;this.ha=null,this.ra=function(e){r.na(e.h)},this.W=null,this.R=[],this.qa=function(e){Ta(r,e.f)},this.V=null}function Ca(e,t){e.W&&nt(e.W,"languageCodeChanged",e.ra),(e.W=t)&&Je(t,"languageCodeChanged",e.ra)}function Ta(e,t){e.R=t,_o(e.c,au.SDK_VERSION?rr(au.SDK_VERSION,e.R):null)}function Sa(e,t){e.V&&nt(e.V,"frameworkChanged",e.qa),(e.V=t)&&Je(t,"frameworkChanged",e.qa)}function Pa(e){try{return au.app(e.o).auth()}catch(t){throw new Ar("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.o+"'!")}}function Oa(e){return new pa(function(){return e.F(!0)},function(e){return!(!e||"auth/network-request-failed"!=e.code)},function(){var t=e.h.c-pu()-3e5;return 0<t?t:0},3e4,96e4,!1)}function Aa(e){e.m||e.l.b||(e.l.start(),nt(e,"tokenChanged",e.U),Je(e,"tokenChanged",e.U))}function ka(e){nt(e,"tokenChanged",e.U),da(e.l)}function Ia(e,t){e.pa=t,xr(e,"_lat",t)}function Na(e,t){S(e.N,function(e){return e==t})}function Ra(e){for(var t=[],n=0;n<e.N.length;n++)t.push(e.N[n](e));return ie(t).then(function(){return e})}function Ma(e){e.a&&!e.I&&(e.I=!0,e.a.subscribe(e))}function Da(e,t){Er(e,{uid:t.uid,displayName:t.displayName||null,photoURL:t.photoURL||null,email:t.email||null,emailVerified:t.emailVerified||!1,phoneNumber:t.phoneNumber||null,isAnonymous:t.isAnonymous||!1,metadata:new _a(t.createdAt,t.lastLoginAt),providerData:[]})}function La(){}function Fa(e){return te().then(function(){if(e.m)throw new Ar("app-deleted")})}function ja(e){return Eu(e.providerData,function(e){return e.providerId})}function za(e,t){t&&(Ba(e,t.providerId),e.providerData.push(t))}function Ba(e,t){S(e.providerData,function(e){return e.providerId==t})}function Ua(e,t,n){("uid"!=t||n)&&e.hasOwnProperty(t)&&xr(e,t,n)}function Va(e,t){e!=t&&(Er(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,providerData:[]}),t.metadata?xr(e,"metadata",ba(t.metadata)):xr(e,"metadata",new _a),xu(t.providerData,function(t){za(e,t)}),e.h=t.h,xr(e,"refreshToken",e.h.a))}function Wa(e){return e.F().then(function(t){var n=e.isAnonymous;return Ha(e,t).then(function(){return n||Ua(e,"isAnonymous",!1),t})})}function qa(e,t){t[Ac]&&e.pa!=t[Ac]&&(ya(e.h,t),pt(e,new xa("tokenChanged")),Ia(e,t[Ac]),Ua(e,"refreshToken",e.h.a))}function Ha(e,t){return jo(e.c,qc,{idToken:t}).then(h(e.gc,e))}function Ga(e){return(e=e.providerUserInfo)&&e.length?Eu(e,function(e){return new wa(e.rawId,e.providerId,e.email,e.displayName,e.photoUrl,e.phoneNumber)}):[]}function Ka(e,t){return Wa(e).then(function(){if(C(ja(e),t))return Ra(e).then(function(){throw new Ar("provider-already-linked")})})}function Xa(e,t,n){var r=uo(t);return t=Lr(t),Cr({user:e,credential:r,additionalUserInfo:t,operationType:n})}function Ya(e,t){return qa(e,t),e.reload().then(function(){return e})}function Za(e,t,n,r,o){if(!sr())return ne(new Ar("operation-not-supported-in-this-environment"));if(e.i&&!o)return ne(e.i);var i=Dr(n.providerId),a=dr(e.uid+":::"),s=null;(!cr()||$n())&&e.w&&n.isOAuthProvider&&(s=ei(e.w,e.G,e.o,t,n,null,a,au.SDK_VERSION||null));var u=Xn(s,i&&i.za,i&&i.ya);return r=r().then(function(){if(Ja(e),!o)return e.F().then(function(){})}).then(function(){return Qi(e.a,u,t,n,a,!!s)}).then(function(){return new J(function(n,r){e.fa(t,null,new Ar("cancelled-popup-request"),e.g||null),e.f=n,e.v=r,e.g=a,e.b=e.a.Ca(e,t,u,a)})}).then(function(e){return u&&Kn(u),e?Cr(e):null}).s(function(e){throw u&&Kn(u),e}),$a(e,r,o)}function Qa(e,t,n,r,o){if(!sr())return ne(new Ar("operation-not-supported-in-this-environment"));if(e.i&&!o)return ne(e.i);var i=null,a=dr(e.uid+":::");return r=r().then(function(){if(Ja(e),!o)return e.F().then(function(){})}).then(function(){return e.Z=a,Ra(e)}).then(function(t){return e.ca&&(t=e.ca,t=t.b.set(Tp,e.B(),t.a)),t}).then(function(){return e.a.Aa(t,n,a)}).s(function(t){if(i=t,e.ca)return os(e.ca);throw i}).then(function(){if(i)throw i}),$a(e,r,o)}function Ja(e){if(!e.a||!e.I){if(e.a&&!e.I)throw new Ar("internal-error");throw new Ar("auth-domain-config-required")}}function $a(e,t,n){var r=es(e,t,n);return e.A.push(r),ae(r,function(){T(e.A,r)}),r}function es(e,t,n){return e.i&&!n?(t.cancel(),ne(e.i)):t.s(function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(e.i||pt(e,new xa("userInvalidated")),e.i=t),t})}function ts(e){if(!e.apiKey)return null;var t={apiKey:e.apiKey,authDomain:e.authDomain,appName:e.appName},n={};if(!(e.stsTokenManager&&e.stsTokenManager.accessToken&&e.stsTokenManager.expirationTime))return null;n[Ac]=e.stsTokenManager.accessToken,n.refreshToken=e.stsTokenManager.refreshToken||null,n.expiresIn=(e.stsTokenManager.expirationTime-pu())/1e3;var r=new Ea(t,n,e);return e.providerData&&xu(e.providerData,function(e){e&&za(r,Cr(e))}),e.redirectEventId&&(r.Z=e.redirectEventId),r}function ns(e,t,n,r){var o=new Ea(e,t);return n&&(o.ca=n),r&&Ta(o,r),o.reload().then(function(){return o})}function rs(e){this.a=e,this.b=xi()}function os(e){return Ti(e.b,Tp,e.a)}function is(e,t){return e.b.get(Tp,e.a).then(function(e){return e&&t&&(e.authDomain=t),ts(e||{})})}function as(e,t){this.a=e,this.b=t||xi(),this.c=null,this.f=us(this),Si(this.b,ls("local"),this.a,h(this.g,this))}function ss(e,t){var n,r=[];for(n in _p)_p[n]!==t&&r.push(Ti(e.b,ls(_p[n]),e.a));return r.push(Ti(e.b,Sp,e.a)),oe(r)}function us(e){var t=ls("local"),n=ls("session"),r=ls("none");return e.b.get(n,e.a).then(function(o){return o?n:e.b.get(r,e.a).then(function(n){return n?r:e.b.get(t,e.a).then(function(n){return n?t:e.b.get(Sp,e.a).then(function(e){return e?ls(e):t})})})}).then(function(t){return e.c=t,ss(e,t.C)}).s(function(){e.c||(e.c=t)})}function ls(e){return{name:"authUser",C:e}}function cs(e){return ds(e,function(){return e.b.set(Sp,e.c.C,e.a)})}function ps(e,t){return ds(e,function(){return e.b.set(e.c,t.B(),e.a)})}function hs(e){return ds(e,function(){return Ti(e.b,e.c,e.a)})}function fs(e,t){return ds(e,function(){return e.b.get(e.c,e.a).then(function(e){return e&&t&&(e.authDomain=t),ts(e||{})})})}function ds(e,t){return e.f=e.f.then(t,t),e.f}function ms(e){if(this.l=!1,xr(this,"app",e),!Ps(this).options||!Ps(this).options.apiKey)throw new Ar("invalid-api-key");e=au.SDK_VERSION?rr(au.SDK_VERSION):null,this.c=new vo(Ps(this).options&&Ps(this).options.apiKey,Uo(Fc),e),this.N=[],this.m=[],this.I=[],this.Gb=au.INTERNAL.createSubscribe(h(this.Xb,this)),this.R=void 0,this.Hb=au.INTERNAL.createSubscribe(h(this.Yb,this)),xs(this,null),this.h=new as(Ps(this).options.apiKey+":"+Ps(this).name),this.G=new rs(Ps(this).options.apiKey+":"+Ps(this).name),this.U=Ns(this,Cs(this)),this.i=Ns(this,Ts(this)),this.W=!1,this.ha=h(this.uc,this),this.Ga=h(this.ka,this),this.pa=h(this.Pb,this),this.qa=h(this.Vb,this),this.ra=h(this.Wb,this),bs(this),this.INTERNAL={},this.INTERNAL.delete=h(this.delete,this),this.INTERNAL.logFramework=h(this.cc,this),this.o=0,ct.call(this),gs(this),this.A=[]}function ys(e){qe.call(this,"languageCodeChanged"),this.h=e}function vs(e){qe.call(this,"frameworkChanged"),this.f=e}function gs(e){Object.defineProperty(e,"lc",{get:function(){return this.$()},set:function(e){this.na(e)},enumerable:!1}),e.V=null}function _s(e){return e.Fb||ne(new Ar("auth-domain-config-required"))}function bs(e){var t=Ps(e).options.authDomain,n=Ps(e).options.apiKey;t&&sr()&&(e.Fb=e.U.then(function(){if(!e.l){if(e.a=$i(t,n,Ps(e).name),e.a.subscribe(e),Os(e)&&Ma(Os(e)),e.w){Ma(e.w);var r=e.w;r.na(e.$()),Ca(r,e),r=e.w,Ta(r,e.A),Sa(r,e),e.w=null}return e.a}}))}function ws(e,t){var n={};return n.apiKey=Ps(e).options.apiKey,n.authDomain=Ps(e).options.authDomain,n.appName=Ps(e).name,e.U.then(function(){return ns(n,t,e.G,e.Ka())}).then(function(t){return Os(e)&&t.uid==Os(e).uid?(Va(Os(e),t),e.ka(t)):(xs(e,t),Ma(t),e.ka(t))}).then(function(){ks(e)})}function xs(e,t){Os(e)&&(Na(Os(e),e.Ga),nt(Os(e),"tokenChanged",e.pa),nt(Os(e),"userDeleted",e.qa),nt(Os(e),"userInvalidated",e.ra),ka(Os(e))),t&&(t.N.push(e.Ga),Je(t,"tokenChanged",e.pa),Je(t,"userDeleted",e.qa),Je(t,"userInvalidated",e.ra),0<e.o&&Aa(t)),xr(e,"currentUser",t),t&&(t.na(e.$()),Ca(t,e),Ta(t,e.A),Sa(t,e))}function Es(e){var t=is(e.G,Ps(e).options.authDomain).then(function(t){return(e.w=t)&&(t.ca=e.G),os(e.G)});return Ns(e,t)}function Cs(e){var t=Ps(e).options.authDomain,n=Es(e).then(function(){return fs(e.h,t)}).then(function(t){return t?(t.ca=e.G,e.w&&(e.w.Z||null)==(t.Z||null)?t:t.reload().then(function(){return ps(e.h,t).then(function(){return t})}).s(function(n){return"auth/network-request-failed"==n.code?t:hs(e.h)})):null}).then(function(t){xs(e,t||null)});return Ns(e,n)}function Ts(e){return e.U.then(function(){return e.aa()}).s(function(){}).then(function(){if(!e.l)return e.ha()}).s(function(){}).then(function(){if(!e.l){e.W=!0;var t=e.h;Si(t.b,ls("local"),t.a,e.ha)}})}function Ss(e,t){var n=null,r=null;return Ns(e,t.then(function(t){return n=uo(t),r=Lr(t),ws(e,t)}).then(function(){return Cr({user:Os(e),credential:n,additionalUserInfo:r,operationType:"signIn"})}))}function Ps(e){return e.app}function Os(e){return e.currentUser}function As(e){return Os(e)&&Os(e)._lat||null}function ks(e){if(e.W){for(var t=0;t<e.m.length;t++)e.m[t]&&e.m[t](As(e));if(e.R!==e.getUid()&&e.I.length)for(e.R=e.getUid(),t=0;t<e.I.length;t++)e.I[t]&&e.I[t](As(e))}}function Is(e,t){e.I.push(t),Ns(e,e.i.then(function(){!e.l&&C(e.I,t)&&e.R!==e.getUid()&&(e.R=e.getUid(),t(As(e)))}))}function Ns(e,t){return e.N.push(t),ae(t,function(){T(e.N,t)}),t}function Rs(e,t,n,r){e:{n=Array.prototype.slice.call(n);for(var o=0,i=!1,a=0;a<t.length;a++)if(t[a].optional)i=!0;else{if(i)throw new Ar("internal-error","Argument validator encountered a required argument after an optional argument.");o++}if(i=t.length,n.length<o||i<n.length)r="Expected "+(o==i?1==o?"1 argument":o+" arguments":o+"-"+i+" arguments")+" but got "+n.length+".";else{for(o=0;o<n.length;o++)if(i=t[o].optional&&void 0===n[o],!t[o].M(n[o])&&!i){if(t=t[o],0>o||o>=Pp.length)throw new Ar("internal-error","Argument validator received an unsupported number of arguments.");n=Pp[o],r=(r?"":n+" argument ")+(t.name?'"'+t.name+'" ':"")+"must be "+t.K+".";break e}r=null}}if(r)throw new Ar("argument-error",e+" failed: "+r)}function Ms(t,n){return{name:t||"",K:"a valid string",optional:!!n,M:e}}function Ds(){return{name:"opt_forceRefresh",K:"a boolean",optional:!0,M:t}}function Ls(e,t){return{name:e||"",K:"a valid object",optional:!!t,M:l}}function Fs(e,t){return{name:e||"",K:"a function",optional:!!t,M:u}}function js(e,t){return{name:e||"",K:"null",optional:!!t,M:i}}function zs(){return{name:"",K:"an HTML element",optional:!1,M:function(e){return!!(e&&e instanceof Element)}}}function Bs(){return{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(e){return!!(e&&e instanceof ms)}}}function Us(){return{name:"app",K:"an instance of Firebase App",optional:!0,M:function(e){return!!(e&&e instanceof au.app.App)}}}function Vs(e){return{name:e?e+"Credential":"credential",K:e?"a valid "+e+" credential":"a valid credential",optional:!1,M:function(t){if(!t)return!1;var n=!e||t.providerId===e;return!(!t.wa||!n)}}}function Ws(){return{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}}function qs(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!!(t&&e(t.type)&&u(t.verify))}}}function Hs(e,t,n,r){return{name:n||"",K:e.K+" or "+t.K,optional:!!r,M:function(n){return e.M(n)||t.M(n)}}}function Gs(e,t,n,r,o,i){if(xr(this,"type","recaptcha"),this.b=this.c=null,this.m=!1,this.l=t,this.a=n||{theme:"light",type:"image"},this.g=[],this.a[kp])throw new Ar("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.h="invisible"===this.a[Ip],!Re(t)||!this.h&&Re(t).hasChildNodes())throw new Ar("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.u=new vo(e,i||null,o||null),this.o=r||function(){return null};var a=this;this.i=[];var s=this.a[Op];this.a[Op]=function(e){if(Ks(a,e),"function"===typeof s)s(e);else if("string"===typeof s){var t=ir(s,uu);"function"===typeof t&&t(e)}};var u=this.a[Ap];this.a[Ap]=function(){if(Ks(a,null),"function"===typeof u)u();else if("string"===typeof u){var e=ir(u,uu);"function"===typeof e&&e()}}}function Ks(e,t){for(var n=0;n<e.i.length;n++)try{e.i[n](t)}catch(e){}}function Xs(e,t){S(e.i,function(e){return e==t})}function Ys(e,t){return e.g.push(t),ae(t,function(){T(e.g,t)}),t}function Zs(e){if(e.m)throw new Ar("internal-error","RecaptchaVerifier instance has been destroyed.")}function Qs(){this.b=uu.grecaptcha?1/0:0,this.c=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}function Js(e,t){return new J(function(n,r){if(vr())if(!uu.grecaptcha||t!==e.c&&!e.b){uu[e.a]=function(){if(uu.grecaptcha){e.c=t;var o=uu.grecaptcha.render;uu.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},n()}else r(new Ar("internal-error"));delete uu[e.a]};var o=Ce(Np,{onload:e.a,hl:t||""});te(Rn(o)).s(function(){r(new Ar("internal-error","Unable to load external reCAPTCHA dependencies!"))})}else n();else r(new Ar("network-request-failed"))})}function $s(){return Rp||(Rp=new Qs),Rp}function eu(e,t,n){try{this.f=n||au.app()}catch(e){throw new Ar("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.f.options||!this.f.options.apiKey)throw new Ar("invalid-api-key");n=this.f.options.apiKey;var r=this,o=null;try{o=this.f.auth().Ka()}catch(e){}o=au.SDK_VERSION?rr(au.SDK_VERSION,o):null,Gs.call(this,n,e,t,function(){try{var e=r.f.auth().$()}catch(t){e=null}return e},o,Uo(Fc))}function tu(e,t){for(var n in t){var r=t[n].name;e[r]=ru(r,e[n],t[n].j)}}function nu(e,t,n,r){e[t]=ru(t,n,r)}function ru(e,t,n){function r(){var e=Array.prototype.slice.call(arguments);return Rs(i,n,e),t.apply(this,e)}if(!n)return t;var o,i=ou(e);for(o in t)r[o]=t[o];for(o in t.prototype)r.prototype[o]=t.prototype[o];return r}function ou(e){return e=e.split("."),e[e.length-1]}var iu,au=n(18).default,su=su||{},uu=this,lu="closure_uid_"+(1e9*Math.random()>>>0),cu=0,pu=Date.now||function(){return+new Date};d(m,Error),m.prototype.name="CustomError";var hu=String.prototype.trim?function(e){return e.trim()}:function(e){return e.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},fu=/&/g,du=/</g,mu=/>/g,yu=/"/g,vu=/'/g,gu=/\x00/g,_u=/[\x00&<>"']/;d(b,m),b.prototype.name="AssertionError";var bu,wu=Array.prototype.indexOf?function(e,t,n){return Array.prototype.indexOf.call(e,t,n)}:function(t,n,r){if(r=null==r?0:0>r?Math.max(0,t.length+r):r,e(t))return e(n)&&1==n.length?t.indexOf(n,r):-1;for(;r<t.length;r++)if(r in t&&t[r]===n)return r;return-1},xu=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(t,n,r){for(var o=t.length,i=e(t)?t.split(""):t,a=0;a<o;a++)a in i&&n.call(r,i[a],a,t)},Eu=Array.prototype.map?function(e,t,n){return Array.prototype.map.call(e,t,n)}:function(t,n,r){for(var o=t.length,i=Array(o),a=e(t)?t.split(""):t,s=0;s<o;s++)s in a&&(i[s]=n.call(r,a[s],s,t));return i},Cu=Array.prototype.some?function(e,t,n){return Array.prototype.some.call(e,t,n)}:function(t,n,r){for(var o=t.length,i=e(t)?t.split(""):t,a=0;a<o;a++)if(a in i&&n.call(r,i[a],a,t))return!0;return!1};e:{var Tu=uu.navigator;if(Tu){var Su=Tu.userAgent;if(Su){bu=Su;break e}}bu=""}var Pu="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");F[" "]=r;var Ou,Au=A("Opera"),ku=A("Trident")||A("MSIE"),Iu=A("Edge"),Nu=Iu||ku,Ru=A("Gecko")&&!(g(bu.toLowerCase(),"webkit")&&!A("Edge"))&&!(A("Trident")||A("MSIE"))&&!A("Edge"),Mu=g(bu.toLowerCase(),"webkit")&&!A("Edge");e:{var Du="",Lu=function(){var e=bu;return Ru?/rv\:([^\);]+)(\)|;)/.exec(e):Iu?/Edge\/([\d\.]+)/.exec(e):ku?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Mu?/WebKit\/(\S+)/.exec(e):Au?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Lu&&(Du=Lu?Lu[1]:""),ku){var Fu=z();if(null!=Fu&&Fu>parseFloat(Du)){Ou=String(Fu);break e}}Ou=Du}var ju,zu={},Bu=uu.document;ju=Bu&&ku?z()||("CSS1Compat"==Bu.compatMode?parseInt(Ou,10):5):void 0,W.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var Uu=new W(function(){return new G},function(e){e.reset()},100);G.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},G.prototype.reset=function(){this.next=this.b=this.a=null};var Vu,Wu,qu=!1,Hu=new function(){this.b=this.a=null},Gu=0,Ku=2,Xu=3;$.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Yu=new W(function(){return new $},function(e){e.reset()},100);J.prototype.then=function(e,t,n){return le(this,u(e)?e:null,u(t)?t:null,n)},U(J),iu=J.prototype,iu.s=function(e,t){return le(this,null,e,t)},iu.cancel=function(e){this.a==Gu&&Y(function(){se(this,new ge(e))},this)},iu.wc=function(e){this.a=Gu,ce(this,Ku,e)},iu.xc=function(e){this.a=Gu,ce(this,Xu,e)},iu.Mb=function(){for(var e;e=de(this);)me(this,e,this.a,this.i);this.h=!1};var Zu=K;d(ge,m),ge.prototype.name="cancel";var Qu=!ku||9<=Number(ju);_e.prototype.la=!0,_e.prototype.ja=function(){return this.a},_e.prototype.toString=function(){return"Const{"+this.a+"}"};var Ju={};we(""),xe.prototype.la=!0,xe.prototype.ja=function(){return this.a},xe.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var $u=/%{(\w+)}/g,el=/^(?:https:)?\/\/[0-9a-z.:[\]-]+\/|^\/[^\/\\]|^about:blank(#|$)/i,tl={};Se.prototype.la=!0,Se.prototype.ja=function(){return this.a},Se.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var nl=/^(?:(?:https?|mailto|ftp):|[^:\/?#]*(?:[\/?#]|$))/i,rl={};Ae("about:blank"),ke.prototype.la=!0,ke.prototype.ja=function(){return this.a},ke.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var ol={};Ne("<!DOCTYPE html>"),Ne(""),Ne("<br>");var il={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"},al={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},sl=/\uffff/.test("\uffff")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g,ul=0,ll={};Ve.prototype.oa=!1,Ve.prototype.ta=function(){if(this.Fa)for(;this.Fa.length;)this.Fa.shift()()};var cl=Object.freeze||function(e){return e},pl=!ku||9<=Number(ju),hl=ku&&!B("9"),fl=function(){if(!uu.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});return uu.addEventListener("test",r,t),uu.removeEventListener("test",r,t),e}();qe.prototype.c=function(){this.Ab=!1},d(He,qe);var dl=cl({2:"touch",3:"pen",4:"mouse"});He.prototype.c=function(){He.ib.c.call(this);var e=this.a;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,hl)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(e){}},He.prototype.g=function(){return this.a};var ml="closure_listenable_"+(1e6*Math.random()|0),yl=0,vl="closure_lm_"+(1e6*Math.random()|0),gl={},_l=0,bl="__closure_events_fn_"+(1e9*Math.random()>>>0);d(ct,Ve),ct.prototype[ml]=!0,ct.prototype.removeEventListener=function(e,t,n,r){nt(this,e,t,n,r)},ct.prototype.ta=function(){if(ct.ib.ta.call(this),this.u){var e,t=this.u,n=0;for(e in t.a){for(var r=t.a[e],o=0;o<r.length;o++)++n,Ke(r[o]);delete t.a[e],t.b--}}this.Ra=null},vt.prototype.a=null;var wl=0;vt.prototype.reset=function(e,t,n,r,o){"number"==typeof o||wl++,r||pu(),this.b=t,delete this.a},_t.prototype.toString=function(){return this.name};var xl=new _t("SEVERE",1e3),El=new _t("CONFIG",700),Cl=new _t("FINE",500);gt.prototype.log=function(e,t,n){if(e.value>=bt(this).value)for(u(t)&&(t=t()),e=new vt(e,String(t),this.f),n&&(e.a=n),n="log:"+e.b,(e=uu.console)&&e.timeStamp&&e.timeStamp(n),(e=uu.msWriteProfilerMark)&&e(n),n=this;n;)n=n.a};var Tl={},Sl=null;iu=xt.prototype,iu.P=function(){Et(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},iu.S=function(){return Et(this),this.a.concat()},iu.clear=function(){this.b={},this.c=this.a.length=0},iu.get=function(e,t){return Ct(this.b,e)?this.b[e]:t},iu.set=function(e,t){Ct(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},iu.forEach=function(e,t){for(var n=this.S(),r=0;r<n.length;r++){var o=n[r],i=this.get(o);e.call(t,i,o,this)}};var Pl=null,Ol=null;kt.prototype.cancel=function(e){if(this.a)this.c instanceof kt&&this.c.cancel();else{if(this.b){var t=this.b;delete this.b,e?t.cancel(e):0>=--t.l&&t.cancel()}this.v?this.v.call(this.o,this):this.u=!0,this.a||(e=new jt,Nt(this),It(this,!1,e))}},kt.prototype.m=function(e,t){this.i=!1,It(this,e,t)},kt.prototype.A=function(e){Nt(this),It(this,!0,e)},kt.prototype.then=function(e,t,n){var r,o,i=new J(function(e,t){r=e,o=t});return Mt(this,r,function(e){e instanceof jt?i.cancel():o(e)}),i.then(e,t,n)},U(kt),d(Ft,m),Ft.prototype.message="Deferred has already fired",Ft.prototype.name="AlreadyCalledError",d(jt,m),jt.prototype.message="Deferred was canceled",jt.prototype.name="CanceledError",zt.prototype.c=function(){throw delete kl[this.a],this.b};var Al,kl={};d(Ut,Bt);for(var Il=64,Nl=Il-1,Rl=[],Ml=0;Ml<Nl;Ml++)Rl[Ml]=0;var Dl=P(128,Rl);Ut.prototype.reset=function(){this.g=this.c=0,this.a=uu.Int32Array?new Int32Array(this.h):O(this.h)};var Ll=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];d(qt,Ut);var Fl=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],jl=/^(?:([^:\/?#.]+):)?(?:\/\/(?:([^\/?#]*)@)?([^\/#?]*?)(?::([0-9]+))?(?=[\/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;Yt.prototype.toString=function(){var e=[],t=this.c;t&&e.push(on(t,zl,!0),":");var n=this.b;return(n||"file"==t)&&(e.push("//"),(t=this.l)&&e.push(on(t,zl,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.i)&&e.push(":",String(n))),(n=this.g)&&(this.b&&"/"!=n.charAt(0)&&e.push("/"),e.push(on(n,"/"==n.charAt(0)?Ul:Bl,!0))),(n=this.a.toString())&&e.push("?",n),(n=this.h)&&e.push("#",on(n,Wl)),e.join("")};var zl=/[#\/\?@]/g,Bl=/[\#\?:]/g,Ul=/[\#\?]/g,Vl=/[\#\?@]/g,Wl=/#/g;iu=sn.prototype,iu.clear=function(){this.a=this.c=null,this.b=0},iu.forEach=function(e,t){un(this),this.a.forEach(function(n,r){xu(n,function(n){e.call(t,n,r,this)},this)},this)},iu.S=function(){un(this);for(var e=this.a.P(),t=this.a.S(),n=[],r=0;r<t.length;r++)for(var o=e[r],i=0;i<o.length;i++)n.push(t[r]);return n},iu.P=function(t){un(this);var n=[];if(e(t))hn(this,t)&&(n=P(n,this.a.get(dn(this,t))));else{t=this.a.P();for(var r=0;r<t.length;r++)n=P(n,t[r])}return n},iu.set=function(e,t){return un(this),this.c=null,e=dn(this,e),hn(this,e)&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},iu.get=function(e,t){return e=e?this.P(e):[],0<e.length?String(e[0]):t},iu.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.S(),n=0;n<t.length;n++){var r=t[n],o=encodeURIComponent(String(r));r=this.P(r);for(var i=0;i<r.length;i++){var a=o;""!==r[i]&&(a+="="+encodeURIComponent(String(r[i]))),e.push(a)}}return this.c=e.join("&")},yn.prototype.c=null;var ql;d(gn,yn),gn.prototype.a=function(){var e=_n(this);return e?new ActiveXObject(e):new XMLHttpRequest},gn.prototype.b=function(){var e={};return _n(this)&&(e[0]=!0,e[1]=!0),e},ql=new gn,d(bn,ct);var Hl="",Gl=bn.prototype,Kl=wt("goog.net.XhrIo");Gl.J=Kl;var Xl=/^https?$/i,Yl=["POST","PUT"];iu=bn.prototype,iu.Ea=function(){"undefined"!=typeof su&&this.a&&(this.g="Timed out after "+this.f+"ms, aborting",Tt(this.J,Nn(this,this.g)),pt(this,"timeout"),this.abort(8))},iu.abort=function(){this.a&&this.b&&(Tt(this.J,Nn(this,"Aborting")),this.b=!1,this.c=!0,this.a.abort(),this.c=!1,pt(this,"complete"),pt(this,"abort"),Pn(this))},iu.ta=function(){this.a&&(this.b&&(this.b=!1,this.c=!0,this.a.abort(),this.c=!1),Pn(this,!0)),bn.ib.ta.call(this)},iu.zb=function(){this.oa||(this.G||this.h||this.c?Sn(this):this.fc())},iu.fc=function(){Sn(this)},iu.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.l){case Hl:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var e=this.J;return e&&e.log(xl,"Response type "+this.l+" is not supported on this browser",void 0),null}catch(e){return Tt(this.J,"Can not get response: "+e.message),null}};var Zl=/^[+a-zA-Z0-9_.!#$%&'*\/=?^`{|}~-]+@([a-zA-Z0-9-]+\.)+[a-zA-Z0-9]{2,63}$/,Ql=0,Jl=1;d(Fn,m),d(jn,yn),jn.prototype.a=function(){var e=new XMLHttpRequest;if("withCredentials"in e)return e;if("undefined"!=typeof XDomainRequest)return new zn;throw Error("Unsupported browser")},jn.prototype.b=function(){return{}},iu=zn.prototype,iu.open=function(e,t,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(e,t)},iu.send=function(e){if(e){if("string"!=typeof e)throw Error("Only string data is supported");this.a.send(e)}else this.a.send()},iu.abort=function(){this.a.abort()},iu.setRequestHeader=function(){},iu.getResponseHeader=function(e){return"content-type"==e.toLowerCase()?this.a.contentType:""},iu.Sb=function(){this.status=200,this.responseText=this.a.responseText,Bn(this,4)},iu.wb=function(){this.status=500,this.responseText="",Bn(this,4)},iu.Ub=function(){this.wb()},iu.Tb=function(){this.status=200,Bn(this,1)},iu.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType};var $l=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ec="Firefox",tc="Chrome",nc={Cc:"FirebaseCore-web",Ec:"FirebaseUI-web"};gr.prototype.get=function(){return this.a?this.b:this.c};var rc,oc={};try{var ic={};Object.defineProperty(ic,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(ic,"abcd",{configurable:!0,enumerable:!0,value:2}),rc=2==ic.abcd}catch(e){rc=!1}var ac="email",sc="newEmail",uc="requestType",lc="email",cc="fromEmail",pc="data",hc="operation";d(Ar,Error),Ar.prototype.B=function(){return{code:this.code,message:this.message}},Ar.prototype.toJSON=function(){return this.B()};var fc="auth/",dc={"argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"The user's credential is no longer valid. The user must sign in again.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","user-cancelled":"User did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},mc="android",yc="handleCodeInApp",vc="iOS",gc="url",_c="installApp",bc="minimumVersion",wc="packageName",xc="bundleId",Ec="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Cc=["client_id","response_type","scope","redirect_uri","state"],Tc={Dc:{Ma:"locale",za:500,ya:600,Na:"facebook.com",$a:Cc},Fc:{Ma:null,za:500,ya:620,Na:"github.com",$a:Cc},Gc:{Ma:"hl",za:515,ya:680,Na:"google.com",$a:Cc},Mc:{Ma:"lang",za:485,ya:705,Na:"twitter.com",$a:Ec}},Sc="idToken",Pc="providerId";d(jr,Fr),d(zr,jr),d(Br,jr),d(Ur,jr),d(Vr,jr),qr.prototype.wa=function(e){return Mo(e,Hr(this))},qr.prototype.b=function(e,t){var n=Hr(this);return n.idToken=t,Do(e,n)},qr.prototype.c=function(e,t){return Wr(Lo(e,Hr(this)),t)},qr.prototype.B=function(){var e={providerId:this.providerId};return this.idToken&&(e.oauthIdToken=this.idToken),this.accessToken&&(e.oauthAccessToken=this.accessToken),this.secret&&(e.oauthTokenSecret=this.secret),e},Gr.prototype.Ba=function(e){return this.qb=D(e),this},d(Kr,Gr),Kr.prototype.sa=function(e){return C(this.a,e)||this.a.push(e),this},Kr.prototype.vb=function(){return O(this.a)},Kr.prototype.credential=function(e,t){if(!e&&!t)throw new Ar("argument-error","credential failed: must provide the ID token and/or the access token.");return new qr(this.providerId,{idToken:e||null,accessToken:t||null})},d(Xr,Kr),xr(Xr,"PROVIDER_ID","facebook.com"),d(Zr,Kr),xr(Zr,"PROVIDER_ID","github.com"),d(Jr,Kr),xr(Jr,"PROVIDER_ID","google.com"),d(eo,Gr),xr(eo,"PROVIDER_ID","twitter.com"),no.prototype.wa=function(e){return jo(e,op,{email:this.a,password:this.f})},no.prototype.b=function(e,t){return jo(e,Jc,{idToken:t,email:this.a,password:this.f})},no.prototype.c=function(e,t){return Wr(this.wa(e),t)},no.prototype.B=function(){return{email:this.a,password:this.f}},Er(ro,{PROVIDER_ID:"password"}),oo.prototype.wa=function(e){return e.Qa(io(this))},oo.prototype.b=function(e,t){var n=io(this);return n.idToken=t,jo(e,ap,n)},oo.prototype.c=function(e,t){var n=io(this);return n.operation="REAUTH",e=jo(e,sp,n),Wr(e,t)},oo.prototype.B=function(){var e={providerId:"phone"};return this.a.Pa&&(e.verificationId=this.a.Pa),this.a.Oa&&(e.verificationCode=this.a.Oa),this.a.Da&&(e.temporaryProof=this.a.Da),this.a.Y&&(e.phoneNumber=this.a.Y),e},ao.prototype.Qa=function(t,n){var r=this.a.c;return te(n.verify()).then(function(o){if(!e(o))throw new Ar("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(n.type){case"recaptcha":return ko(r,{phoneNumber:t,recaptchaToken:o}).then(function(e){return"function"===typeof n.reset&&n.reset(),e},function(e){throw"function"===typeof n.reset&&n.reset(),e});default:throw new Ar("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})},Er(ao,{PROVIDER_ID:"phone"}),co.prototype.B=function(){return{type:this.b,eventId:this.c,urlResponse:this.f,sessionId:this.g,error:this.a&&this.a.B()}},d(ho,Ar),d(fo,Ar),fo.prototype.B=function(){var e={code:this.code,message:this.message};this.email&&(e.email=this.email),this.phoneNumber&&(e.phoneNumber=this.phoneNumber);var t=this.credential&&this.credential.B();return t&&L(e,t),e},fo.prototype.toJSON=function(){return this.B()},d(yo,yn),yo.prototype.a=function(){return new this.f},yo.prototype.b=function(){return{}};var Oc,Ac="idToken",kc=new gr(3e4,6e4),Ic={"Content-Type":"application/x-www-form-urlencoded"},Nc=new gr(3e4,6e4),Rc={"Content-Type":"application/json"};vo.prototype.m=function(e,t,n,r,o,i){var a="Node"==er(),s=tr()?a?new bn(this.o):new bn:new bn(this.f);if(i){s.f=Math.max(0,i);var u=setTimeout(function(){pt(s,"timeout")},i)}ht(s,"complete",function(){u&&clearTimeout(u);var e=null;try{e=JSON.parse(In(this))||null}catch(t){e=null}t&&t(e)}),ft(s,"ready",function(){u&&clearTimeout(u),We(this)}),ft(s,"timeout",function(){u&&clearTimeout(u),We(this),t&&t(null)}),wn(s,e,n,r,o)};var Mc=we("https://apis.google.com/js/client.js?onload=%{onload}"),Dc="__fcb"+Math.floor(1e6*Math.random()).toString();vo.prototype.u=function(e,t,n,r,o){var i=this;Oc.then(function(){window.gapi.client.setApiKey(i.b);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:e,method:n,body:r,headers:o,authType:"none",callback:function(e){window.gapi.auth.setToken(a),t&&t(e)}})}).s(function(e){t&&t({error:{message:e&&e.message||"CORS_UNSUPPORTED"}})})},vo.prototype.gb=function(){return jo(this,$c,{})},vo.prototype.kb=function(e,t){return jo(this,Qc,{idToken:e,email:t})},vo.prototype.lb=function(e,t){return jo(this,Jc,{idToken:e,password:t})};var Lc={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};iu=vo.prototype,iu.mb=function(e,t){var n={idToken:e},r=[];return k(Lc,function(e,o){var i=t[o];null===i?r.push(e):o in t&&(n[o]=i)}),r.length&&(n.deleteAttribute=r),jo(this,Qc,n)},iu.cb=function(e,t){return e={requestType:"PASSWORD_RESET",email:e},L(e,t),jo(this,Gc,e)},iu.bb=function(e,t){return e={requestType:"VERIFY_EMAIL",idToken:e},L(e,t),jo(this,Hc,e)},iu.Qa=function(e){return jo(this,ip,e)},iu.Ta=function(e,t){return jo(this,Yc,{oobCode:e,newPassword:t})},iu.Ia=function(e){return jo(this,zc,{oobCode:e})},iu.Sa=function(e){return jo(this,jc,{oobCode:e})};var Fc,jc={endpoint:"setAccountInfo",D:Fo,ga:"email"},zc={endpoint:"resetPassword",D:Fo,O:function(e){if(!e.email||!e.requestType)throw new Ar("internal-error")}},Bc={endpoint:"signupNewUser",D:function(e){if(Co(e),!e.password)throw new Ar("weak-password")},O:Oo,T:!0},Uc={endpoint:"createAuthUri"},Vc={endpoint:"deleteAccount",ea:["idToken"]},Wc={endpoint:"setAccountInfo",ea:["idToken","deleteProvider"],D:function(e){if(!a(e.deleteProvider))throw new Ar("internal-error")}},qc={endpoint:"getAccountInfo"},Hc={endpoint:"getOobConfirmationCode",ea:["idToken","requestType"],D:function(e){if("VERIFY_EMAIL"!=e.requestType)throw new Ar("internal-error")},ga:"email"},Gc={endpoint:"getOobConfirmationCode",ea:["requestType"],D:function(e){if("PASSWORD_RESET"!=e.requestType)throw new Ar("internal-error");Co(e)},ga:"email"},Kc={nb:!0,endpoint:"getProjectConfig",yb:"GET"},Xc={nb:!0,endpoint:"getRecaptchaParam",yb:"GET",O:function(e){if(!e.recaptchaSiteKey)throw new Ar("internal-error")}},Yc={endpoint:"resetPassword",D:Fo,ga:"email"},Zc={endpoint:"sendVerificationCode",ea:["phoneNumber","recaptchaToken"],ga:"sessionInfo"},Qc={endpoint:"setAccountInfo",ea:["idToken"],D:To,T:!0},Jc={endpoint:"setAccountInfo",ea:["idToken"],D:function(e){if(To(e),!e.password)throw new Ar("weak-password")},O:Oo,T:!0},$c={endpoint:"signupNewUser",O:Oo,T:!0},ep={endpoint:"verifyAssertion",D:No,O:Ro,T:!0},tp={endpoint:"verifyAssertion",D:No,O:function(e){if(e.errorMessage&&"USER_NOT_FOUND"==e.errorMessage)throw new Ar("user-not-found");if(e.errorMessage)throw zo(e.errorMessage);if(!e[Ac])throw new Ar("internal-error")},T:!0},np={endpoint:"verifyAssertion",D:function(e){if(No(e),!e.idToken)throw new Ar("internal-error")},O:Ro,T:!0},rp={endpoint:"verifyCustomToken",D:function(e){if(!e.token)throw new Ar("invalid-custom-token")},O:Oo,T:!0},op={endpoint:"verifyPassword",D:function(e){if(Co(e),!e.password)throw new Ar("wrong-password")},O:Oo,T:!0},ip={endpoint:"verifyPhoneNumber",D:Ao,O:Oo},ap={endpoint:"verifyPhoneNumber",D:function(e){if(!e.idToken)throw new Ar("internal-error");Ao(e)},O:function(e){if(e.temporaryProof)throw e.code="credential-already-in-use",mo(e);Oo(e)}},sp={Lb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",D:Ao,O:Oo},up={Ic:{Va:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",ab:"https://securetoken.googleapis.com/v1/token",id:"p"},Kc:{Va:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",ab:"https://staging-securetoken.sandbox.googleapis.com/v1/token",id:"s"},Lc:{Va:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",ab:"https://test-securetoken.sandbox.googleapis.com/v1/token",id:"t"}};Fc=Uo("__EID__")?"__EID__":void 0;var lp=we("https://apis.google.com/js/api.js?onload=%{onload}"),cp=new gr(3e4,6e4),pp=new gr(5e3,15e3),hp=null;Ko.prototype.toString=function(){return this.f?$t(this.a,"v",this.f):pn(this.a.a,"v"),this.b?$t(this.a,"eid",this.b):pn(this.a.a,"eid"),this.c.length?$t(this.a,"fw",this.c.join(",")):pn(this.a.a,"fw"),this.a.toString()},Xo.prototype.toString=function(){var e=nn(this.m,"/__/auth/handler");if($t(e,"apiKey",this.u),$t(e,"appName",this.c),$t(e,"authType",this.l),this.a.isOAuthProvider){var t=this.a;try{var n=au.app(this.c).auth().$()}catch(e){n=null}t.Ua=n,$t(e,"providerId",this.a.providerId),t=this.a,n=hr(t.qb);for(var r in n)n[r]=n[r].toString();r=t.nc,n=D(n);for(var o=0;o<r.length;o++){var i=r[o];i in n&&delete n[i]}t.Wa&&t.Ua&&!n[t.Wa]&&(n[t.Wa]=t.Ua),R(n)||$t(e,"customParameters",pr(n))}if("function"===typeof this.a.vb&&(t=this.a.vb(),t.length&&$t(e,"scopes",t.join(","))),this.h?$t(e,"redirectUrl",this.h):pn(e.a,"redirectUrl"),this.g?$t(e,"eventId",this.g):pn(e.a,"eventId"),this.i?$t(e,"v",this.i):pn(e.a,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!en(e,a)&&$t(e,a,this.b[a]);return this.f?$t(e,"eid",this.f):pn(e.a,"eid"),a=Yo(this.c),a.length&&$t(e,"fw",a.join(",")),e.toString()},iu=Zo.prototype,iu.Ca=function(e,t,n){var r=new Ar("popup-closed-by-user"),o=new Ar("web-storage-unsupported"),i=this,a=!1;return this.ba().then(function(){ni(i).then(function(n){n||(e&&Kn(e),t(o),a=!0)})}).s(function(){}).then(function(){if(!a)return Yn(e)}).then(function(){if(!a)return yt(n).then(function(){t(r)})})},iu.Cb=function(){var e=or();return!cr(e)&&!mr(e)},iu.xb=function(){return!1},iu.ub=function(e,t,n,r,o,i,a){if(!e)return ne(new Ar("popup-blocked"));if(a&&!cr())return this.ba().s(function(t){Kn(e),o(t)}),r(),te();this.a||(this.a=Qo($o(this)));var s=this;return this.a.then(function(){var t=s.ba().s(function(t){throw Kn(e),o(t),t});return r(),t}).then(function(){if(lo(n),!a){Wn(ei(s.u,s.f,s.b,t,n,null,i,s.c,void 0,s.h),e)}}).s(function(e){throw"auth/network-request-failed"==e.code&&(s.a=null),e})},iu.Aa=function(e,t,n){this.a||(this.a=Qo($o(this)));var r=this;return this.a.then(function(){lo(t),Wn(ei(r.u,r.f,r.b,e,t,Vn(),n,r.c,void 0,r.h))}).s(function(e){throw"auth/network-request-failed"==e.code&&(r.a=null),e})},iu.ba=function(){var e=this;return Jo(this).then(function(){return e.i.Ya}).s(function(){throw e.a=null,new Ar("network-request-failed")})},iu.Db=function(){return!0},iu.ua=function(e){this.g.push(e)},iu.Ja=function(e){S(this.g,function(t){return t==e})},iu=ri.prototype,iu.get=function(e){return te(this.a.getItem(e)).then(function(e){return e&&fr(e)})},iu.set=function(e,t){return te(this.a.setItem(e,pr(t)))},iu.X=function(e){return te(this.a.removeItem(e))},iu.ia=function(){},iu.da=function(){},iu=oi.prototype,iu.get=function(e){return te(this.a[e])},iu.set=function(e,t){return this.a[e]=t,te()},iu.X=function(e){return delete this.a[e],te()},iu.ia=function(){},iu.da=function(){};var fp;iu=ii.prototype,iu.set=function(e,t){var n,r=!1,o=this;return ae(si(this).then(function(t){return n=t,t=ui(o,li(o,n,!0)),ci(t.get(e))}).then(function(i){var a=ui(o,li(o,n,!0));return i?(i.value=t,ci(a.put(i))):(o.a++,r=!0,i={},i[o.g]=e,i[o.l]=t,ci(a.add(i)))}).then(function(){o.f[e]=t}),function(){r&&o.a--})},iu.get=function(e){var t=this;return si(this).then(function(n){return ci(ui(t,li(t,n,!1)).get(e))}).then(function(e){return e&&e.value})},iu.X=function(e){var t=!1,n=this;return ae(si(this).then(function(r){return t=!0,n.a++,ci(ui(n,li(n,r,!0)).delete(e))}).then(function(){delete n.f[e]}),function(){t&&n.a--})},iu.vc=function(){var e=this;return si(this).then(function(t){var n=ui(e,li(e,t,!1));return n.getAll?ci(n.getAll()):new J(function(e,t){var r=[],o=n.openCursor();o.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t.continue()):e(r)},o.onerror=function(e){t(Error(e.target.errorCode))}})}).then(function(t){var n={},r=[];if(0==e.a){for(r=0;r<t.length;r++)n[t[r][e.g]]=t[r][e.l];r=qn(e.f,n),e.f=n}return r})},iu.ia=function(e){0==this.c.length&&pi(this),this.c.push(e)},iu.da=function(e){S(this.c,function(t){return t==e}),0==this.c.length&&this.b&&this.b.cancel("STOP_EVENT")},iu=hi.prototype,iu.get=function(e){var t=this;return te().then(function(){return fr(t.a.getItem(e))})},iu.set=function(e,t){var n=this;return te().then(function(){var r=pr(t);null===r?n.X(e):n.a.setItem(e,r)})},iu.X=function(e){var t=this;return te().then(function(){t.a.removeItem(e)})},iu.ia=function(e){uu.window&&Je(uu.window,"storage",e)},iu.da=function(e){uu.window&&nt(uu.window,"storage",e)},iu=mi.prototype,iu.get=function(){return te(null)},iu.set=function(){return te()},iu.X=function(){return te()},iu.ia=function(){},iu.da=function(){},iu=yi.prototype,iu.get=function(e){var t=this;return te().then(function(){return fr(t.a.getItem(e))})},iu.set=function(e,t){var n=this;return te().then(function(){var r=pr(t);null===r?n.X(e):n.a.setItem(e,r)})},iu.X=function(e){var t=this;return te().then(function(){t.a.removeItem(e)})},iu.ia=function(){},iu.da=function(){};var dp,mp,yp={C:hi,jb:yi},vp={C:hi,jb:yi},gp={C:ri,jb:mi},_p={Hc:"local",NONE:"none",Jc:"session"};wi.prototype.get=function(e,t){return Ei(this,e.C).get(Ci(this,e,t))},wi.prototype.set=function(e,t,n){var r=Ci(this,e,n),o=this,i=Ei(this,e.C);return i.set(r,t).then(function(){return i.get(r)}).then(function(t){"local"==e.C&&(o.b[r]=t)})},wi.prototype.m=function(e){if(e&&e.g){var t=e.a.key;if(null==t)for(var n in this.a){var r=this.b[n];"undefined"===typeof r&&(r=null);var o=uu.localStorage.getItem(n);o!==r&&(this.b[n]=o,this.c(n))}else if(0==t.indexOf(this.i+this.g)&&this.a[t]){if("undefined"!==typeof e.a.a?Ei(this,"local").da(this.h):Ai(this),this.A)if(n=uu.localStorage.getItem(t),(r=e.a.newValue)!==n)null!==r?uu.localStorage.setItem(t,r):uu.localStorage.removeItem(t);else if(this.b[t]===r&&"undefined"===typeof e.a.a)return;var i=this;n=function(){"undefined"===typeof e.a.a&&i.b[t]===uu.localStorage.getItem(t)||(i.b[t]=uu.localStorage.getItem(t),i.c(t))},ku&&ju&&10==ju&&uu.localStorage.getItem(t)!==e.a.newValue&&e.a.newValue!==e.a.oldValue?setTimeout(n,10):n()}}else xu(e,h(this.c,this))},wi.prototype.c=function(e){this.a[e]&&xu(this.a[e],function(e){e()})};var bp={name:"authEvent",C:"local"};iu=Mi.prototype,iu.ba=function(){return this.xa?this.xa:this.xa=Qn().then(function(){if("function"!==typeof ir("universalLinks.subscribe",uu))throw Di("cordova-universal-links-plugin is not installed");if("undefined"===typeof ir("BuildInfo.packageName",uu))throw Di("cordova-plugin-buildinfo is not installed");if("function"!==typeof ir("cordova.plugins.browsertab.openUrl",uu))throw Di("cordova-plugin-browsertab is not installed");if("function"!==typeof ir("cordova.InAppBrowser.open",uu))throw Di("cordova-plugin-inappbrowser is not installed")},function(){throw new Ar("cordova-not-ready")})},iu.Ca=function(e,t){return t(new Ar("operation-not-supported-in-this-environment")),te()},iu.ub=function(){return ne(new Ar("operation-not-supported-in-this-environment"))},iu.Db=function(){return!1},iu.Cb=function(){return!0},iu.xb=function(){return!0},iu.Aa=function(e,t,n){if(this.c)return ne(new Ar("redirect-operation-pending"));var r=this,o=uu.document,i=null,a=null,s=null,u=null;return this.c=ae(te().then(function(){return lo(t),Bi(r)}).then(function(){return ji(r,e,t,n)}).then(function(){return new J(function(e,t){a=function(){var t=ir("cordova.plugins.browsertab.close",uu);return e(),"function"===typeof t&&t(),r.a&&"function"===typeof r.a.close&&(r.a.close(),r.a=null),!1},r.ua(a),s=function(){i||(i=yt(r.w).then(function(){t(new Ar("redirect-cancelled-by-user"))}))},u=function(){_r()&&s()},o.addEventListener("resume",s,!1),or().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",u,!1)}).s(function(e){return Ui(r).then(function(){throw e})})}),function(){s&&o.removeEventListener("resume",s,!1),u&&o.removeEventListener("visibilitychange",u,!1),i&&i.cancel(),a&&r.Ja(a),r.c=null})},iu.ua=function(e){this.b.push(e),Bi(this).s(function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new co("unknown",null,null,null,new Ar("no-auth-event")),e(t))})},iu.Ja=function(e){S(this.b,function(t){return t==e})};var wp={name:"pendingRedirect",C:"session"};Ki.prototype.reset=function(){this.f=!1,this.a.Ja(this.i),this.a=Xi(this.v,this.l,this.u)},Ki.prototype.subscribe=function(e){if(C(this.h,e)||this.h.push(e),!this.f){var t=this;Gi(this.g).then(function(e){e?Hi(t.g).then(function(){Yi(t).s(function(e){var n=new co("unknown",null,null,null,new Ar("operation-not-supported-in-this-environment"));Ji(e)&&t.m(n)})}):Zi(t)}).s(function(){Zi(t)})}},Ki.prototype.unsubscribe=function(e){S(this.h,function(t){return t==e})},Ki.prototype.m=function(e){if(!e)throw new Ar("invalid-auth-event");for(var t=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.ob(e.b,e.c)){(t=this.b[e.b])&&t.h(e,r),t=!0;break}}return ta(this.c),t};var xp=new gr(2e3,1e4),Ep=new gr(3e4,6e4);Ki.prototype.aa=function(){return this.c.aa()},Ki.prototype.Aa=function(e,t,n){var r,o=this;return qi(this.g).then(function(){return o.a.Aa(e,t,n).s(function(e){if(Ji(e))throw new Ar("operation-not-supported-in-this-environment");return r=e,Hi(o.g).then(function(){throw r})}).then(function(){return o.a.Db()?new J(function(){}):Hi(o.g).then(function(){return o.aa()}).then(function(){}).s(function(){})})})},Ki.prototype.Ca=function(e,t,n,r){return this.a.Ca(n,function(n){e.fa(t,null,n,r)},xp.get())};var Cp={};ea.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},ea.prototype.h=function(e,t){if(!e)return ne(new Ar("invalid-auth-event"));this.reset(),this.g=!0;var n=e.b,r=e.c,o=e.a&&"auth/web-storage-unsupported"==e.a.code,i=e.a&&"auth/operation-not-supported-in-this-environment"==e.a.code;return"unknown"!=n||o||i?e.a?(ia(this,!0,null,e.a),e=te()):e=t.va(n,r)?na(this,e,t):ne(new Ar("invalid-auth-event")):(ia(this,!1,null,null),e=te()),e},ea.prototype.aa=function(){var e=this;return new J(function(t,n){e.b?e.b().then(t,n):(e.f.push(t),e.c.push(n),aa(e))})},sa.prototype.h=function(e,t){if(!e)return ne(new Ar("invalid-auth-event"));var n=e.b,r=e.c;return e.a?(t.fa(e.b,null,e.a,e.c),e=te()):e=t.va(n,r)?ua(e,t):ne(new Ar("invalid-auth-event")),e},la.prototype.confirm=function(e){return e=so(this.verificationId,e),this.a(e)},pa.prototype.start=function(){this.a=this.c,fa(this,!0)},ma.prototype.B=function(){return{apiKey:this.f.b,refreshToken:this.a,accessToken:this.b,expirationTime:this.c}},ma.prototype.getToken=function(e){return e=!!e,this.b&&!this.a?ne(new Ar("user-token-expired")):e||!this.b||pu()>this.c-3e4?this.a?ga(this,{grant_type:"refresh_token",refresh_token:this.a}):te(null):te({accessToken:this.b,expirationTime:this.c,refreshToken:this.a})},_a.prototype.B=function(){return{lastLoginAt:this.b,createdAt:this.a}},d(xa,qe),d(Ea,ct),Ea.prototype.na=function(e){this.ha=e,go(this.c,e)},Ea.prototype.$=function(){return this.ha},Ea.prototype.Ka=function(){return O(this.R)},Ea.prototype.Ga=function(){this.l.b&&(da(this.l),this.l.start())},xr(Ea.prototype,"providerId","firebase"),iu=Ea.prototype,iu.reload=function(){var e=this;return $a(this,Fa(this).then(function(){return Wa(e).then(function(){return Ra(e)}).then(La)}))},iu.F=function(e){var t=this;return $a(this,Fa(this).then(function(){return t.h.getToken(e)}).then(function(e){if(!e)throw new Ar("internal-error");return e.accessToken!=t.pa&&(Ia(t,e.accessToken),pt(t,new xa("tokenChanged"))),Ua(t,"refreshToken",e.refreshToken),e.accessToken}))},iu.getToken=function(e){return oc["firebase.User.prototype.getToken is deprecated. Please use firebase.User.prototype.getIdToken instead."]||(oc["firebase.User.prototype.getToken is deprecated. Please use firebase.User.prototype.getIdToken instead."]=!0,"undefined"!==typeof console&&"function"===typeof console.warn&&console.warn("firebase.User.prototype.getToken is deprecated. Please use firebase.User.prototype.getIdToken instead.")),this.F(e)},iu.gc=function(e){if(!(e=e.users)||!e.length)throw new Ar("internal-error");e=e[0],Da(this,{uid:e.localId,displayName:e.displayName,photoURL:e.photoUrl,email:e.email,emailVerified:!!e.emailVerified,phoneNumber:e.phoneNumber,lastLoginAt:e.lastLoginAt,createdAt:e.createdAt});for(var t=Ga(e),n=0;n<t.length;n++)za(this,t[n]);Ua(this,"isAnonymous",!(this.email&&e.passwordHash)&&!(this.providerData&&this.providerData.length))},iu.Za=function(e){var t=this,n=null;return $a(this,e.c(this.c,this.uid).then(function(e){return qa(t,e),n=Xa(t,e,"reauthenticate"),t.i=null,t.reload()}).then(function(){return n}),!0)},iu.hc=function(e){return this.Za(e).then(function(){})},iu.Xa=function(e){var t=this,n=null;return $a(this,Ka(this,e.providerId).then(function(){return t.F()}).then(function(n){return e.b(t.c,n)}).then(function(e){return n=Xa(t,e,"link"),Ya(t,e)}).then(function(){return n}))},iu.Zb=function(e){return this.Xa(e).then(function(e){return e.user})},iu.$b=function(e,t){var n=this;return $a(this,Ka(this,"phone").then(function(){return ca(Pa(n),e,t,h(n.Xa,n))}))},iu.ic=function(e,t){var n=this;return $a(this,te().then(function(){return ca(Pa(n),e,t,h(n.Za,n))}),!0)},iu.kb=function(e){var t=this;return $a(this,this.F().then(function(n){return t.c.kb(n,e)}).then(function(e){return qa(t,e),t.reload()}))},iu.zc=function(e){var t=this;return $a(this,this.F().then(function(n){return e.b(t.c,n)}).then(function(e){return qa(t,e),t.reload()}))},iu.lb=function(e){var t=this;return $a(this,this.F().then(function(n){return t.c.lb(n,e)}).then(function(e){return qa(t,e),t.reload()}))},iu.mb=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return Fa(this);var t=this;return $a(this,this.F().then(function(n){return t.c.mb(n,{displayName:e.displayName,photoUrl:e.photoURL})}).then(function(e){return qa(t,e),Ua(t,"displayName",e.displayName||null),Ua(t,"photoURL",e.photoUrl||null),xu(t.providerData,function(e){"password"===e.providerId&&(xr(e,"displayName",t.displayName),xr(e,"photoURL",t.photoURL))}),Ra(t)}).then(La))},iu.yc=function(e){var t=this;return $a(this,Wa(this).then(function(n){return C(ja(t),e)?Io(t.c,n,[e]).then(function(e){var n={};return xu(e.providerUserInfo||[],function(e){n[e.providerId]=!0}),xu(ja(t),function(e){n[e]||Ba(t,e)}),n[ao.PROVIDER_ID]||xr(t,"phoneNumber",null),Ra(t)}):Ra(t).then(function(){throw new Ar("no-such-provider")})}))},iu.delete=function(){var e=this;return $a(this,this.F().then(function(t){return jo(e.c,Vc,{idToken:t})}).then(function(){pt(e,new xa("userDeleted"))})).then(function(){for(var t=0;t<e.A.length;t++)e.A[t].cancel("app-deleted");Ca(e,null),Sa(e,null),e.A=[],e.m=!0,ka(e),xr(e,"refreshToken",null),e.a&&e.a.unsubscribe(e)})},iu.ob=function(e,t){return!!("linkViaPopup"==e&&(this.g||null)==t&&this.f||"reauthViaPopup"==e&&(this.g||null)==t&&this.f||"linkViaRedirect"==e&&(this.Z||null)==t||"reauthViaRedirect"==e&&(this.Z||null)==t)},iu.fa=function(e,t,n,r){"linkViaPopup"!=e&&"reauthViaPopup"!=e||r!=(this.g||null)||(n&&this.v?this.v(n):t&&!n&&this.f&&this.f(t),this.b&&(this.b.cancel(),this.b=null),delete this.f,delete this.v)},iu.va=function(e,t){return"linkViaPopup"==e&&t==(this.g||null)?h(this.sb,this):"reauthViaPopup"==e&&t==(this.g||null)?h(this.tb,this):"linkViaRedirect"==e&&(this.Z||null)==t?h(this.sb,this):"reauthViaRedirect"==e&&(this.Z||null)==t?h(this.tb,this):null},iu.ac=function(e){var t=this;return Za(this,"linkViaPopup",e,function(){return Ka(t,e.providerId).then(function(){return Ra(t)})},!1)},iu.jc=function(e){return Za(this,"reauthViaPopup",e,function(){return te()},!0)},iu.bc=function(e){var t=this;return Qa(this,"linkViaRedirect",e,function(){return Ka(t,e.providerId)},!1)},iu.kc=function(e){return Qa(this,"reauthViaRedirect",e,function(){return te()},!0)},iu.sb=function(e,t){var n=this;this.b&&(this.b.cancel(),this.b=null);var r=null;return $a(this,this.F().then(function(r){return Do(n.c,{requestUri:e,sessionId:t,idToken:r})}).then(function(e){return r=Xa(n,e,"link"),Ya(n,e)}).then(function(){return r}))},iu.tb=function(e,t){var n=this;this.b&&(this.b.cancel(),this.b=null);var r=null;return $a(this,te().then(function(){return Wr(Lo(n.c,{requestUri:e,sessionId:t}),n.uid)}).then(function(e){return r=Xa(n,e,"reauthenticate"),qa(n,e),n.i=null,n.reload()}).then(function(){return r}),!0)},iu.bb=function(e){var t=this,n=null;return $a(this,this.F().then(function(t){return n=t,"undefined"===typeof e||R(e)?{}:Nr(new Ir(e))}).then(function(e){return t.c.bb(n,e)}).then(function(e){if(t.email!=e)return t.reload()}).then(function(){}))},iu.toJSON=function(){return this.B()},iu.B=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,providerData:[],apiKey:this.G,appName:this.o,authDomain:this.w,stsTokenManager:this.h.B(),redirectEventId:this.Z||null};return this.metadata&&L(e,this.metadata.B()),xu(this.providerData,function(t){e.providerData.push(Tr(t))}),e};var Tp={name:"redirectUser",C:"session"};as.prototype.g=function(){var e=this,t=ls("local");ds(this,function(){return te().then(function(){return e.c&&"local"!=e.c.C?e.b.get(t,e.a):null}).then(function(n){if(n)return ss(e,"local").then(function(){e.c=t})})})};var Sp={name:"persistence",C:"session"};as.prototype.eb=function(e){var t=null,n=this;return bi(e),ds(this,function(){return e!=n.c.C?n.b.get(n.c,n.a).then(function(r){return t=r,ss(n,e)}).then(function(){if(n.c=ls(e),t)return n.b.set(n.c,t,n.a)}):te()})},d(ms,ct),d(ys,qe),d(vs,qe),iu=ms.prototype,iu.eb=function(e){return e=this.h.eb(e),Ns(this,e)},iu.na=function(e){this.V===e||this.l||(this.V=e,go(this.c,this.V),pt(this,new ys(this.$())))},iu.$=function(){return this.V},iu.Ac=function(){var e=uu.navigator;this.na(e?e.languages&&e.languages[0]||e.language||e.userLanguage||null:null)},iu.cc=function(e){this.A.push(e),_o(this.c,au.SDK_VERSION?rr(au.SDK_VERSION,this.A):null),pt(this,new vs(this.A))},iu.Ka=function(){return O(this.A)},iu.toJSON=function(){return{apiKey:Ps(this).options.apiKey,authDomain:Ps(this).options.authDomain,appName:Ps(this).name,currentUser:Os(this)&&Os(this).B()}},iu.ob=function(e,t){switch(e){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==t&&!!this.f;default:return!1}},iu.fa=function(e,t,n,r){"signInViaPopup"==e&&this.g==r&&(n&&this.v?this.v(n):t&&!n&&this.f&&this.f(t),this.b&&(this.b.cancel(),this.b=null),delete this.f,delete this.v)},iu.va=function(e,t){return"signInViaRedirect"==e||"signInViaPopup"==e&&this.g==t&&this.f?h(this.Ob,this):null},iu.Ob=function(e,t){var n=this;e={requestUri:e,sessionId:t},this.b&&(this.b.cancel(),this.b=null);var r=null,o=null,i=Mo(n.c,e).then(function(e){return r=uo(e),o=Lr(e),e});return e=n.U.then(function(){return i}).then(function(e){return ws(n,e)}).then(function(){return Cr({user:Os(n),credential:r,additionalUserInfo:o,operationType:"signIn"})}),Ns(this,e)},iu.sc=function(e){if(!sr())return ne(new Ar("operation-not-supported-in-this-environment"));var t=this,n=Dr(e.providerId),r=dr(),o=null;(!cr()||$n())&&Ps(this).options.authDomain&&e.isOAuthProvider&&(o=ei(Ps(this).options.authDomain,Ps(this).options.apiKey,Ps(this).name,"signInViaPopup",e,null,r,au.SDK_VERSION||null));var i=Xn(o,n&&n.za,n&&n.ya);return n=_s(this).then(function(t){return Qi(t,i,"signInViaPopup",e,r,!!o)}).then(function(){return new J(function(e,n){t.fa("signInViaPopup",null,new Ar("cancelled-popup-request"),t.g),t.f=e,t.v=n,t.g=r,t.b=t.a.Ca(t,"signInViaPopup",i,r)})}).then(function(e){return i&&Kn(i),e?Cr(e):null}).s(function(e){throw i&&Kn(i),e}),Ns(this,n)},iu.tc=function(e){if(!sr())return ne(new Ar("operation-not-supported-in-this-environment"));var t=this;return Ns(this,_s(this).then(function(){return cs(t.h)}).then(function(){return t.a.Aa("signInViaRedirect",e)}))},iu.aa=function(){if(!sr())return ne(new Ar("operation-not-supported-in-this-environment"));var e=this;return Ns(this,_s(this).then(function(){return e.a.aa()}).then(function(e){return e?Cr(e):null}))},iu.hb=function(){var e=this;return Ns(this,this.i.then(function(){return Os(e)?(xs(e,null),hs(e.h).then(function(){ks(e)})):te()}))},iu.uc=function(){var e=this;return fs(this.h,Ps(this).options.authDomain).then(function(t){if(!e.l){var n;if(n=Os(e)&&t){n=Os(e).uid;var r=t.uid;n=void 0!==n&&null!==n&&""!==n&&void 0!==r&&null!==r&&""!==r&&n==r}if(n)return Va(Os(e),t),Os(e).F();(Os(e)||t)&&(xs(e,t),t&&(Ma(t),t.ca=e.G),e.a&&e.a.subscribe(e),ks(e))}})},iu.ka=function(e){return ps(this.h,e)},iu.Pb=function(){ks(this),this.ka(Os(this))},iu.Vb=function(){this.hb()},iu.Wb=function(){this.hb()},iu.Xb=function(e){var t=this;this.addAuthTokenListener(function(){e.next(Os(t))})},iu.Yb=function(e){var t=this;Is(this,function(){e.next(Os(t))})},iu.ec=function(e,t,n){var r=this;return this.W&&au.Promise.resolve().then(function(){u(e)?e(Os(r)):u(e.next)&&e.next(Os(r))}),this.Gb(e,t,n)},iu.dc=function(e,t,n){var r=this;return this.W&&au.Promise.resolve().then(function(){r.R=r.getUid(),u(e)?e(Os(r)):u(e.next)&&e.next(Os(r))}),this.Hb(e,t,n)},iu.Rb=function(e){var t=this;return Ns(this,this.i.then(function(){return Os(t)?Os(t).F(e).then(function(e){return{accessToken:e}}):null}))},iu.pc=function(e){var t=this;return this.i.then(function(){return Ss(t,jo(t.c,rp,{token:e}))}).then(function(e){return e=e.user,Ua(e,"isAnonymous",!1),t.ka(e)}).then(function(){return Os(t)})},iu.qc=function(e,t){var n=this;return this.i.then(function(){return Ss(n,jo(n.c,op,{email:e,password:t}))}).then(function(e){return e.user})},iu.Kb=function(e,t){var n=this;return this.i.then(function(){return Ss(n,jo(n.c,Bc,{email:e,password:t}))}).then(function(e){return e.user})},iu.oc=function(e){return this.fb(e).then(function(e){return e.user})},iu.fb=function(e){var t=this;return this.i.then(function(){return Ss(t,e.wa(t.c))})},iu.gb=function(){var e=this;return this.i.then(function(){var t=Os(e);return t&&t.isAnonymous?t:Ss(e,e.c.gb()).then(function(t){return t=t.user,Ua(t,"isAnonymous",!0),e.ka(t)}).then(function(){return Os(e)})})},iu.getUid=function(){return Os(this)&&Os(this).uid||null},iu.Ib=function(e){this.addAuthTokenListener(e),0<++this.o&&Os(this)&&Aa(Os(this))},iu.mc=function(e){var t=this;xu(this.m,function(n){n==e&&t.o--}),0>this.o&&(this.o=0),0==this.o&&Os(this)&&ka(Os(this)),this.removeAuthTokenListener(e)},iu.addAuthTokenListener=function(e){var t=this;this.m.push(e),Ns(this,this.i.then(function(){t.l||C(t.m,e)&&e(As(t))}))},iu.removeAuthTokenListener=function(e){S(this.m,function(t){return t==e})},iu.delete=function(){this.l=!0;for(var e=0;e<this.N.length;e++)this.N[e].cancel("app-deleted");return this.N=[],this.h&&(e=this.h,Pi(e.b,e.a,this.ha)),this.a&&this.a.unsubscribe(this),au.Promise.resolve()},iu.Nb=function(e){return Ns(this,So(this.c,e))},iu.Bc=function(e){return this.Ia(e).then(function(e){return e.data.email})},iu.Ta=function(e,t){return Ns(this,this.c.Ta(e,t).then(function(){}))},iu.Ia=function(e){return Ns(this,this.c.Ia(e).then(function(e){return new Or(e)}))},iu.Sa=function(e){return Ns(this,this.c.Sa(e).then(function(){}))},iu.cb=function(e,t){var n=this;return Ns(this,te().then(function(){return"undefined"===typeof t||R(t)?{}:Nr(new Ir(t))}).then(function(t){return n.c.cb(e,t)}).then(function(){}))},iu.rc=function(e,t){return Ns(this,ca(this,e,t,h(this.fb,this)))};var Pp="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" "),Op="callback",Ap="expired-callback",kp="sitekey",Ip="size";iu=Gs.prototype,iu.xa=function(){var e=this;return this.c?this.c:this.c=Ys(this,te().then(function(){if(ur())return Zn();throw new Ar("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return Js($s(),e.o())}).then(function(){return jo(e.u,Xc,{})}).then(function(t){e.a[kp]=t.recaptchaSiteKey}).s(function(t){throw e.c=null,t}))},iu.render=function(){Zs(this);var e=this;return Ys(this,this.xa().then(function(){if(null===e.b){var t=e.l;if(!e.h){var n=Re(t);t=De("DIV"),n.appendChild(t)}e.b=grecaptcha.render(t,e.a)}return e.b}))},iu.verify=function(){Zs(this);var e=this;return Ys(this,this.render().then(function(t){return new J(function(n){var r=grecaptcha.getResponse(t);if(r)n(r);else{var o=function(t){t&&(Xs(e,o),n(t))};e.i.push(o),e.h&&grecaptcha.execute(e.b)}})}))},iu.reset=function(){Zs(this),null!==this.b&&grecaptcha.reset(this.b)},iu.clear=function(){Zs(this),this.m=!0,$s().b--;for(var e=0;e<this.g.length;e++)this.g[e].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.h){e=Re(this.l);for(var t;t=e.firstChild;)e.removeChild(t)}};var Np=we("https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Rp=null;d(eu,Gs),tu(ms.prototype,{Sa:{name:"applyActionCode",j:[Ms("code")]},Ia:{name:"checkActionCode",j:[Ms("code")]},Ta:{name:"confirmPasswordReset",j:[Ms("code"),Ms("newPassword")]},Kb:{name:"createUserWithEmailAndPassword",j:[Ms("email"),Ms("password")]},Nb:{name:"fetchProvidersForEmail",j:[Ms("email")]},aa:{name:"getRedirectResult",j:[]},dc:{name:"onAuthStateChanged",j:[Hs(Ls(),Fs(),"nextOrObserver"),Fs("opt_error",!0),Fs("opt_completed",!0)]},ec:{name:"onIdTokenChanged",j:[Hs(Ls(),Fs(),"nextOrObserver"),Fs("opt_error",!0),Fs("opt_completed",!0)]},cb:{name:"sendPasswordResetEmail",j:[Ms("email"),Hs(Ls("opt_actionCodeSettings",!0),js(null,!0),"opt_actionCodeSettings",!0)]},eb:{name:"setPersistence",j:[Ms("persistence")]},fb:{name:"signInAndRetrieveDataWithCredential",j:[Vs()]},gb:{name:"signInAnonymously",j:[]},oc:{name:"signInWithCredential",j:[Vs()]},pc:{name:"signInWithCustomToken",j:[Ms("token")]},qc:{name:"signInWithEmailAndPassword",j:[Ms("email"),Ms("password")]},rc:{name:"signInWithPhoneNumber",j:[Ms("phoneNumber"),qs()]},sc:{name:"signInWithPopup",j:[Ws()]},tc:{name:"signInWithRedirect",j:[Ws()]},hb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Ms(null,!0)]},Ac:{name:"useDeviceLanguage",j:[]},Bc:{name:"verifyPasswordResetCode",j:[Ms("code")]}}),function(e,t){for(var n in t){var r=t[n].name;if(r!==n){var o=t[n].Jb;Object.defineProperty(e,r,{get:function(){return this[n]},set:function(e){Rs(r,[o],[e],!0),this[n]=e},enumerable:!0})}}}(ms.prototype,{lc:{name:"languageCode",Jb:Hs(Ms(),js(),"languageCode")}}),ms.Persistence=_p,ms.Persistence.LOCAL="local",ms.Persistence.SESSION="session",ms.Persistence.NONE="none",tu(Ea.prototype,{delete:{name:"delete",j:[]},F:{name:"getIdToken",j:[Ds()]},getToken:{name:"getToken",j:[Ds()]},Xa:{name:"linkAndRetrieveDataWithCredential",j:[Vs()]},Zb:{name:"linkWithCredential",j:[Vs()]},$b:{name:"linkWithPhoneNumber",j:[Ms("phoneNumber"),qs()]},ac:{name:"linkWithPopup",j:[Ws()]},bc:{name:"linkWithRedirect",j:[Ws()]},Za:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Vs()]},hc:{name:"reauthenticateWithCredential",j:[Vs()]},ic:{name:"reauthenticateWithPhoneNumber",j:[Ms("phoneNumber"),qs()]},jc:{name:"reauthenticateWithPopup",j:[Ws()]},kc:{name:"reauthenticateWithRedirect",j:[Ws()]},reload:{name:"reload",j:[]},bb:{name:"sendEmailVerification",j:[Hs(Ls("opt_actionCodeSettings",!0),js(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Ms(null,!0)]},yc:{name:"unlink",j:[Ms("provider")]},kb:{name:"updateEmail",j:[Ms("email")]},lb:{name:"updatePassword",j:[Ms("password")]},zc:{name:"updatePhoneNumber",j:[Vs("phone")]},mb:{name:"updateProfile",j:[Ls("profile")]}}),tu(J.prototype,{s:{name:"catch"},then:{name:"then"}}),tu(la.prototype,{confirm:{name:"confirm",j:[Ms("verificationCode")]}}),nu(ro,"credential",function(e,t){return new no(e,t)},[Ms("email"),Ms("password")]),tu(Xr.prototype,{sa:{name:"addScope",j:[Ms("scope")]},Ba:{name:"setCustomParameters",j:[Ls("customOAuthParameters")]}}),nu(Xr,"credential",Yr,[Hs(Ms(),Ls(),"token")]),tu(Zr.prototype,{sa:{name:"addScope",j:[Ms("scope")]},Ba:{name:"setCustomParameters",j:[Ls("customOAuthParameters")]}}),nu(Zr,"credential",Qr,[Hs(Ms(),Ls(),"token")]),tu(Jr.prototype,{sa:{name:"addScope",j:[Ms("scope")]},Ba:{name:"setCustomParameters",j:[Ls("customOAuthParameters")]}}),nu(Jr,"credential",$r,[Hs(Ms(),Hs(Ls(),js()),"idToken"),Hs(Ms(),js(),"accessToken",!0)]),tu(eo.prototype,{Ba:{name:"setCustomParameters",j:[Ls("customOAuthParameters")]}}),nu(eo,"credential",to,[Hs(Ms(),Ls(),"token"),Ms("secret",!0)]),tu(Kr.prototype,{sa:{name:"addScope",j:[Ms("scope")]},credential:{name:"credential",j:[Hs(Ms(),js(),"idToken",!0),Hs(Ms(),js(),"accessToken",!0)]},Ba:{name:"setCustomParameters",j:[Ls("customOAuthParameters")]}}),nu(ao,"credential",so,[Ms("verificationId"),Ms("verificationCode")]),tu(ao.prototype,{Qa:{name:"verifyPhoneNumber",j:[Ms("phoneNumber"),qs()]}}),tu(Ar.prototype,{toJSON:{name:"toJSON",j:[Ms(null,!0)]}}),tu(fo.prototype,{toJSON:{name:"toJSON",j:[Ms(null,!0)]}}),tu(ho.prototype,{toJSON:{name:"toJSON",j:[Ms(null,!0)]}}),tu(eu.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),function(){if("undefined"===typeof au||!au.INTERNAL||!au.INTERNAL.registerService)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var e={Auth:ms,Error:Ar};nu(e,"EmailAuthProvider",ro,[]),nu(e,"FacebookAuthProvider",Xr,[]),nu(e,"GithubAuthProvider",Zr,[]),nu(e,"GoogleAuthProvider",Jr,[]),nu(e,"TwitterAuthProvider",eo,[]),nu(e,"OAuthProvider",Kr,[Ms("providerId")]),nu(e,"PhoneAuthProvider",ao,[Bs()]),nu(e,"RecaptchaVerifier",eu,[Hs(Ms(),zs(),"recaptchaContainer"),Ls("recaptchaParameters",!0),Us()]),au.INTERNAL.registerService("auth",function(e,t){return e=new ms(e),t({INTERNAL:{getUid:h(e.getUid,e),getToken:h(e.Rb,e),addAuthTokenListener:h(e.Ib,e),removeAuthTokenListener:h(e.mc,e)}}),e},e,function(e,t){if("create"===e)try{t.auth()}catch(e){}}),au.INTERNAL.extendNamespace({User:Ea})}()}).call("undefined"!==typeof e?e:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})}).call(t,n(23))},function(e,t,n){e.exports=n(264)},function(e,t,n){"use strict";function r(t){var n=t.INTERNAL.registerService("database",function(e,t,n){return l.RepoManager.getInstance().databaseFromApp(e,n)},{Reference:s.Reference,Query:a.Query,Database:i.Database,enableLogging:u.enableLogging,INTERNAL:c,ServerValue:f,TEST_ACCESS:p},null,!0);h.isNodeSdk()&&(e.exports=n)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(18),i=n(99);t.Database=i.Database;var a=n(103);t.Query=a.Query;var s=n(62);t.Reference=s.Reference;var u=n(2);t.enableLogging=u.enableLogging;var l=n(67),c=n(296),p=n(297),h=n(0),f=i.Database.ServerValue;t.ServerValue=f,t.registerDatabase=r,r(o.default);var d=n(63);t.DataSnapshot=d.DataSnapshot;var m=n(102);t.OnDisconnect=m.OnDisconnect},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=function(){function e(e){this.domStorage_=e,this.prefix_="firebase:"}return e.prototype.set=function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),r.stringify(t))},e.prototype.get=function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:r.jsonEval(t)},e.prototype.remove=function(e){this.domStorage_.removeItem(this.prefixedName_(e))},e.prototype.prefixedName_=function(e){return this.prefix_+e},e.prototype.toString=function(){return this.domStorage_.toString()},e}();t.DOMStorageWrapper=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=function(){function e(){this.cache_={},this.isInMemoryStorage=!0}return e.prototype.set=function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t},e.prototype.get=function(e){return r.contains(this.cache_,e)?this.cache_[e]:null},e.prototype.remove=function(e){delete this.cache_[e]},e}();t.MemoryStorage=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=function(){function e(e,t){this.committed=e,this.snapshot=t}return e.prototype.toJSON=function(){return r.validateArgCount("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},e}();t.TransactionResult=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.nextPushId=function(){var e="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",t=0,n=[];return function(o){var i=o===t;t=o;var a,s=new Array(8);for(a=7;a>=0;a--)s[a]=e.charAt(o%64),o=Math.floor(o/64);r.assert(0===o,"Cannot push at time == 0");var u=s.join("");if(i){for(a=11;a>=0&&63===n[a];a--)n[a]=0;n[a]++}else for(a=0;a<12;a++)n[a]=Math.floor(64*Math.random());for(a=0;a<12;a++)u+=e.charAt(n[a]);return r.assert(20===u.length,"nextPushId: Length should be 20."),u}}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(63),o=n(270),i=n(0),a=n(0),s=function(){function e(e,t,n){this.callback_=e,this.cancelCallback_=t,this.context_=n}return e.prototype.respondsTo=function(e){return"value"===e},e.prototype.createEvent=function(e,t){var n=t.getQueryParams().getIndex();return new o.DataEvent("value",this,new r.DataSnapshot(e.snapshotNode,t.getRef(),n))},e.prototype.getEventRunner=function(e){var t=this.context_;if("cancel"===e.getEventType()){a.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(t,e.error)}}var r=this.callback_;return function(){r.call(t,e.snapshot)}},e.prototype.createCancelEvent=function(e,t){return this.cancelCallback_?new o.CancelEvent(this,e,t):null},e.prototype.matches=function(t){return t instanceof e&&(!t.callback_||!this.callback_||t.callback_===this.callback_&&t.context_===this.context_)},e.prototype.hasAnyCallback=function(){return null!==this.callback_},e}();t.ValueEventRegistration=s;var u=function(){function e(e,t,n){this.callbacks_=e,this.cancelCallback_=t,this.context_=n}return e.prototype.respondsTo=function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,i.contains(this.callbacks_,t)},e.prototype.createCancelEvent=function(e,t){return this.cancelCallback_?new o.CancelEvent(this,e,t):null},e.prototype.createEvent=function(e,t){a.assert(null!=e.childName,"Child events should have a childName.");var n=t.getRef().child(e.childName),i=t.getQueryParams().getIndex();return new o.DataEvent(e.type,this,new r.DataSnapshot(e.snapshotNode,n,i),e.prevName)},e.prototype.getEventRunner=function(e){var t=this.context_;if("cancel"===e.getEventType()){a.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(t,e.error)}}var r=this.callbacks_[e.eventType];return function(){r.call(t,e.snapshot,e.prevName)}},e.prototype.matches=function(t){if(t instanceof e){if(!this.callbacks_||!t.callbacks_)return!0;if(this.context_===t.context_){var n=i.getCount(t.callbacks_);if(n===i.getCount(this.callbacks_)){if(1===n){var r=i.getAnyKey(t.callbacks_),o=i.getAnyKey(this.callbacks_);return o===r&&(!t.callbacks_[r]||!this.callbacks_[o]||t.callbacks_[r]===this.callbacks_[o])}return i.every(this.callbacks_,function(e,n){return t.callbacks_[e]===n})}}}return!1},e.prototype.hasAnyCallback=function(){return null!==this.callbacks_},e}();t.ChildEventRegistration=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=function(){function e(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}return e.prototype.getPath=function(){var e=this.snapshot.getRef();return"value"===this.eventType?e.path:e.getParent().path},e.prototype.getEventType=function(){return this.eventType},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+r.stringify(this.snapshot.exportVal())},e}();t.DataEvent=o;var i=function(){function e(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}return e.prototype.getPath=function(){return this.path},e.prototype.getEventType=function(){return"cancel"},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.path.toString()+":cancel"},e}();t.CancelEvent=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(2),i=n(272),a=n(10),s=n(0),u=n(64),l=n(273),c=n(274),p=n(20),h=n(113),f=n(4),d=n(114),m=n(280),y=function(){function e(e){this.listenProvider_=e,this.syncPointTree_=u.ImmutableTree.Empty,this.pendingWriteTree_=new m.WriteTree,this.tagToQueryMap_={},this.queryToTagMap_={}}return e.prototype.applyUserOverwrite=function(e,t,n,r){return this.pendingWriteTree_.addOverwrite(e,t,n,r),r?this.applyOperationToSyncPoints_(new h.Overwrite(p.OperationSource.User,e,t)):[]},e.prototype.applyUserMerge=function(e,t,n){this.pendingWriteTree_.addMerge(e,t,n);var r=u.ImmutableTree.fromObject(t);return this.applyOperationToSyncPoints_(new c.Merge(p.OperationSource.User,e,r))},e.prototype.ackUserWrite=function(e,t){void 0===t&&(t=!1);var n=this.pendingWriteTree_.getWrite(e);if(this.pendingWriteTree_.removeWrite(e)){var r=u.ImmutableTree.Empty;return null!=n.snap?r=r.set(f.Path.Empty,!0):s.forEach(n.children,function(e,t){r=r.set(new f.Path(e),t)}),this.applyOperationToSyncPoints_(new i.AckUserWrite(n.path,r,t))}return[]},e.prototype.applyServerOverwrite=function(e,t){return this.applyOperationToSyncPoints_(new h.Overwrite(p.OperationSource.Server,e,t))},e.prototype.applyServerMerge=function(e,t){var n=u.ImmutableTree.fromObject(t);return this.applyOperationToSyncPoints_(new c.Merge(p.OperationSource.Server,e,n))},e.prototype.applyListenComplete=function(e){return this.applyOperationToSyncPoints_(new l.ListenComplete(p.OperationSource.Server,e))},e.prototype.applyTaggedQueryOverwrite=function(t,n,r){var o=this.queryKeyForTag_(r);if(null!=o){var i=e.parseQueryKey_(o),a=i.path,s=i.queryId,u=f.Path.relativePath(a,t),l=new h.Overwrite(p.OperationSource.forServerTaggedQuery(s),u,n);return this.applyTaggedOperation_(a,l)}return[]},e.prototype.applyTaggedQueryMerge=function(t,n,r){var o=this.queryKeyForTag_(r);if(o){var i=e.parseQueryKey_(o),a=i.path,s=i.queryId,l=f.Path.relativePath(a,t),h=u.ImmutableTree.fromObject(n),d=new c.Merge(p.OperationSource.forServerTaggedQuery(s),l,h);return this.applyTaggedOperation_(a,d)}return[]},e.prototype.applyTaggedListenComplete=function(t,n){var r=this.queryKeyForTag_(n);if(r){var o=e.parseQueryKey_(r),i=o.path,a=o.queryId,s=f.Path.relativePath(i,t),u=new l.ListenComplete(p.OperationSource.forServerTaggedQuery(a),s);return this.applyTaggedOperation_(i,u)}return[]},e.prototype.addEventRegistration=function(t,n){var o=t.path,i=null,s=!1;this.syncPointTree_.foreachOnPath(o,function(e,t){var n=f.Path.relativePath(e,o);i=i||t.getCompleteServerCache(n),s=s||t.hasCompleteView()});var u=this.syncPointTree_.get(o);u?(s=s||u.hasCompleteView(),i=i||u.getCompleteServerCache(f.Path.Empty)):(u=new d.SyncPoint,this.syncPointTree_=this.syncPointTree_.set(o,u));var l;if(null!=i)l=!0;else{l=!1,i=a.ChildrenNode.EMPTY_NODE;this.syncPointTree_.subtree(o).foreachChild(function(e,t){var n=t.getCompleteServerCache(f.Path.Empty);n&&(i=i.updateImmediateChild(e,n))})}var c=u.viewExistsForQuery(t);if(!c&&!t.getQueryParams().loadsAllData()){var p=e.makeQueryKey_(t);r.assert(!(p in this.queryToTagMap_),"View does not exist, but we have a tag");var h=e.getNextQueryTag_();this.queryToTagMap_[p]=h,this.tagToQueryMap_["_"+h]=p}var m=this.pendingWriteTree_.childWrites(o),y=u.addEventRegistration(t,n,m,i,l);if(!c&&!s){var v=u.viewForQuery(t);y=y.concat(this.setupListener_(t,v))}return y},e.prototype.removeEventRegistration=function(t,n,r){var o=this,i=t.path,a=this.syncPointTree_.get(i),s=[];if(a&&("default"===t.queryIdentifier()||a.viewExistsForQuery(t))){var u=a.removeEventRegistration(t,n,r);a.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(i));var l=u.removed;s=u.events;var c=-1!==l.findIndex(function(e){return e.getQueryParams().loadsAllData()}),p=this.syncPointTree_.findOnPath(i,function(e,t){return t.hasCompleteView()});if(c&&!p){var h=this.syncPointTree_.subtree(i);if(!h.isEmpty())for(var f=this.collectDistinctViewsForSubTree_(h),d=0;d<f.length;++d){var m=f[d],y=m.getQuery(),v=this.createListenerForView_(m);this.listenProvider_.startListening(e.queryForListening_(y),this.tagForQuery_(y),v.hashFn,v.onComplete)}}if(!p&&l.length>0&&!r)if(c){this.listenProvider_.stopListening(e.queryForListening_(t),null)}else l.forEach(function(t){var n=o.queryToTagMap_[e.makeQueryKey_(t)];o.listenProvider_.stopListening(e.queryForListening_(t),n)});this.removeTags_(l)}return s},e.prototype.calcCompleteEventCache=function(e,t){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(e,function(t,n){var r=f.Path.relativePath(t,e),o=n.getCompleteServerCache(r);if(o)return o});return n.calcCompleteEventCache(e,r,t,!0)},e.prototype.collectDistinctViewsForSubTree_=function(e){return e.fold(function(e,t,n){if(t&&t.hasCompleteView()){return[t.getCompleteView()]}var r=[];return t&&(r=t.getQueryViews()),s.forEach(n,function(e,t){r=r.concat(t)}),r})},e.prototype.removeTags_=function(t){for(var n=0;n<t.length;++n){var r=t[n];if(!r.getQueryParams().loadsAllData()){var o=e.makeQueryKey_(r),i=this.queryToTagMap_[o];delete this.queryToTagMap_[o],delete this.tagToQueryMap_["_"+i]}}},e.queryForListening_=function(e){return e.getQueryParams().loadsAllData()&&!e.getQueryParams().isDefault()?e.getRef():e},e.prototype.setupListener_=function(t,n){var o=t.path,i=this.tagForQuery_(t),a=this.createListenerForView_(n),u=this.listenProvider_.startListening(e.queryForListening_(t),i,a.hashFn,a.onComplete),l=this.syncPointTree_.subtree(o);if(i)r.assert(!l.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var c=l.fold(function(e,t,n){if(!e.isEmpty()&&t&&t.hasCompleteView())return[t.getCompleteView().getQuery()];var r=[];return t&&(r=r.concat(t.getQueryViews().map(function(e){return e.getQuery()}))),s.forEach(n,function(e,t){r=r.concat(t)}),r}),p=0;p<c.length;++p){var h=c[p];this.listenProvider_.stopListening(e.queryForListening_(h),this.tagForQuery_(h))}return u},e.prototype.createListenerForView_=function(e){var t=this,n=e.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(e.getServerCache()||a.ChildrenNode.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return r?t.applyTaggedListenComplete(n.path,r):t.applyListenComplete(n.path);var i=o.errorForServerCode(e,n);return t.removeEventRegistration(n,null,i)}}},e.makeQueryKey_=function(e){return e.path.toString()+"$"+e.queryIdentifier()},e.parseQueryKey_=function(e){var t=e.indexOf("$");return r.assert(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new f.Path(e.substr(0,t))}},e.prototype.queryKeyForTag_=function(e){return this.tagToQueryMap_["_"+e]},e.prototype.tagForQuery_=function(t){var n=e.makeQueryKey_(t);return s.safeGet(this.queryToTagMap_,n)},e.getNextQueryTag_=function(){return e.nextQueryTag_++},e.prototype.applyTaggedOperation_=function(e,t){var n=this.syncPointTree_.get(e);r.assert(n,"Missing sync point for query tag that we're tracking");var o=this.pendingWriteTree_.childWrites(e);return n.applyOperation(t,o,null)},e.prototype.applyOperationToSyncPoints_=function(e){return this.applyOperationHelper_(e,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(f.Path.Empty))},e.prototype.applyOperationHelper_=function(e,t,n,r){if(e.path.isEmpty())return this.applyOperationDescendantsHelper_(e,t,n,r);var o=t.get(f.Path.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(f.Path.Empty));var i=[],a=e.path.getFront(),s=e.operationForChild(a),u=t.children.get(a);if(u&&s){var l=n?n.getImmediateChild(a):null,c=r.child(a);i=i.concat(this.applyOperationHelper_(s,u,l,c))}return o&&(i=i.concat(o.applyOperation(e,r,n))),i},e.prototype.applyOperationDescendantsHelper_=function(e,t,n,r){var o=this,i=t.get(f.Path.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(f.Path.Empty));var a=[];return t.children.inorderTraversal(function(t,i){var s=n?n.getImmediateChild(t):null,u=r.child(t),l=e.operationForChild(t);l&&(a=a.concat(o.applyOperationDescendantsHelper_(l,i,s,u)))}),i&&(a=a.concat(i.applyOperation(e,r,n))),a},e.nextQueryTag_=1,e}();t.SyncTree=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(4),i=n(20),a=function(){function e(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=i.OperationType.ACK_USER_WRITE,this.source=i.OperationSource.User}return e.prototype.operationForChild=function(t){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return r.assert(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new o.Path(t));return new e(o.Path.Empty,n,this.revert)}return r.assert(this.path.getFront()===t,"operationForChild called for unrelated child."),new e(this.path.popFront(),this.affectedTree,this.revert)},e}();t.AckUserWrite=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),o=n(20),i=function(){function e(e,t){this.source=e,this.path=t,this.type=o.OperationType.LISTEN_COMPLETE}return e.prototype.operationForChild=function(t){return this.path.isEmpty()?new e(this.source,r.Path.Empty):new e(this.source,this.path.popFront())},e}();t.ListenComplete=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(20),o=n(113),i=n(4),a=n(0),s=function(){function e(e,t,n){this.source=e,this.path=t,this.children=n,this.type=r.OperationType.MERGE}return e.prototype.operationForChild=function(t){if(this.path.isEmpty()){var n=this.children.subtree(new i.Path(t));return n.isEmpty()?null:n.value?new o.Overwrite(this.source,i.Path.Empty,n.value):new e(this.source,i.Path.Empty,n)}return a.assert(this.path.getFront()===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,this.path.popFront(),this.children)},e.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},e}();t.Merge=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(65),o=n(276),i=n(10),a=n(43),s=n(115),u=n(279),l=n(0),c=n(20),p=n(24),h=n(8),f=function(){function e(e,t){this.query_=e,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),l=new r.IndexedFilter(n.getIndex()),c=n.getNodeFilter();this.processor_=new o.ViewProcessor(c);var p=t.getServerCache(),h=t.getEventCache(),f=l.updateFullNode(i.ChildrenNode.EMPTY_NODE,p.getNode(),null),d=c.updateFullNode(i.ChildrenNode.EMPTY_NODE,h.getNode(),null),m=new a.CacheNode(f,p.isFullyInitialized(),l.filtersNodes()),y=new a.CacheNode(d,h.isFullyInitialized(),c.filtersNodes());this.viewCache_=new s.ViewCache(y,m),this.eventGenerator_=new u.EventGenerator(this.query_)}return e.prototype.getQuery=function(){return this.query_},e.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},e.prototype.getCompleteServerCache=function(e){var t=this.viewCache_.getCompleteServerSnap();return t&&(this.query_.getQueryParams().loadsAllData()||!e.isEmpty()&&!t.getImmediateChild(e.getFront()).isEmpty())?t.getChild(e):null},e.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},e.prototype.addEventRegistration=function(e){this.eventRegistrations_.push(e)},e.prototype.removeEventRegistration=function(e,t){var n=[];if(t){l.assert(null==e,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach(function(e){t=t;var o=e.createCancelEvent(t,r);o&&n.push(o)})}if(e){for(var o=[],i=0;i<this.eventRegistrations_.length;++i){var a=this.eventRegistrations_[i];if(a.matches(e)){if(e.hasAnyCallback()){o=o.concat(this.eventRegistrations_.slice(i+1));break}}else o.push(a)}this.eventRegistrations_=o}else this.eventRegistrations_=[];return n},e.prototype.applyOperation=function(e,t,n){e.type===c.OperationType.MERGE&&null!==e.source.queryId&&(l.assert(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),l.assert(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,o=this.processor_.applyOperation(r,e,t,n);return this.processor_.assertIndexed(o.viewCache),l.assert(o.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=o.viewCache,this.generateEventsForChanges_(o.changes,o.viewCache.getEventCache().getNode(),null)},e.prototype.getInitialEvents=function(e){var t=this.viewCache_.getEventCache(),n=[];if(!t.getNode().isLeafNode()){t.getNode().forEachChild(h.PRIORITY_INDEX,function(e,t){n.push(p.Change.childAddedChange(e,t))})}return t.isFullyInitialized()&&n.push(p.Change.valueChange(t.getNode())),this.generateEventsForChanges_(n,t.getNode(),e)},e.prototype.generateEventsForChanges_=function(e,t,n){var r=n?[n]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(e,t,r)},e}();t.View=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(20),o=n(0),i=n(277),a=n(24),s=n(10),u=n(31),l=n(64),c=n(4),p=n(278),h=function(){function e(e,t){this.viewCache=e,this.changes=t}return e}();t.ProcessorResult=h;var f=function(){function e(e){this.filter_=e}return e.prototype.assertIndexed=function(e){o.assert(e.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),o.assert(e.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},e.prototype.applyOperation=function(t,n,a,s){var u,l,c=new i.ChildChangeAccumulator;if(n.type===r.OperationType.OVERWRITE){var p=n;p.source.fromUser?u=this.applyUserOverwrite_(t,p.path,p.snap,a,s,c):(o.assert(p.source.fromServer,"Unknown source."),l=p.source.tagged||t.getServerCache().isFiltered()&&!p.path.isEmpty(),u=this.applyServerOverwrite_(t,p.path,p.snap,a,s,l,c))}else if(n.type===r.OperationType.MERGE){var f=n;f.source.fromUser?u=this.applyUserMerge_(t,f.path,f.children,a,s,c):(o.assert(f.source.fromServer,"Unknown source."),l=f.source.tagged||t.getServerCache().isFiltered(),u=this.applyServerMerge_(t,f.path,f.children,a,s,l,c))}else if(n.type===r.OperationType.ACK_USER_WRITE){var d=n;u=d.revert?this.revertUserWrite_(t,d.path,a,s,c):this.ackUserWrite_(t,d.path,d.affectedTree,a,s,c)}else{if(n.type!==r.OperationType.LISTEN_COMPLETE)throw o.assertionError("Unknown operation type: "+n.type);u=this.listenComplete_(t,n.path,a,c)}var m=c.getChanges();return e.maybeAddValueEvent_(t,u,m),new h(u,m)},e.maybeAddValueEvent_=function(e,t,n){var r=t.getEventCache();if(r.isFullyInitialized()){var o=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=e.getCompleteEventSnap();(n.length>0||!e.getEventCache().isFullyInitialized()||o&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(a.Change.valueChange(t.getCompleteEventSnap()))}},e.prototype.generateEventCacheAfterServerEvent_=function(e,t,n,r,i){var a=e.getEventCache();if(null!=n.shadowingWrite(t))return e;var u=void 0,l=void 0;if(t.isEmpty())if(o.assert(e.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),e.getServerCache().isFiltered()){var c=e.getCompleteServerSnap(),p=c instanceof s.ChildrenNode?c:s.ChildrenNode.EMPTY_NODE,h=n.calcCompleteEventChildren(p);u=this.filter_.updateFullNode(e.getEventCache().getNode(),h,i)}else{var f=n.calcCompleteEventCache(e.getCompleteServerSnap());u=this.filter_.updateFullNode(e.getEventCache().getNode(),f,i)}else{var d=t.getFront();if(".priority"==d){o.assert(1==t.getLength(),"Can't have a priority with additional path components");var m=a.getNode();l=e.getServerCache().getNode();var y=n.calcEventCacheAfterServerOverwrite(t,m,l);u=null!=y?this.filter_.updatePriority(m,y):a.getNode()}else{var v=t.popFront(),g=void 0;if(a.isCompleteForChild(d)){l=e.getServerCache().getNode();var _=n.calcEventCacheAfterServerOverwrite(t,a.getNode(),l);g=null!=_?a.getNode().getImmediateChild(d).updateChild(v,_):a.getNode().getImmediateChild(d)}else g=n.calcCompleteChild(d,e.getServerCache());u=null!=g?this.filter_.updateChild(a.getNode(),d,g,v,r,i):a.getNode()}}return e.updateEventSnap(u,a.isFullyInitialized()||t.isEmpty(),this.filter_.filtersNodes())},e.prototype.applyServerOverwrite_=function(e,t,n,r,o,i,a){var s,u=e.getServerCache(),l=i?this.filter_:this.filter_.getIndexedFilter();if(t.isEmpty())s=l.updateFullNode(u.getNode(),n,null);else if(l.filtersNodes()&&!u.isFiltered()){var c=u.getNode().updateChild(t,n);s=l.updateFullNode(u.getNode(),c,null)}else{var h=t.getFront();if(!u.isCompleteForPath(t)&&t.getLength()>1)return e;var f=t.popFront(),d=u.getNode().getImmediateChild(h),m=d.updateChild(f,n);s=".priority"==h?l.updatePriority(u.getNode(),m):l.updateChild(u.getNode(),h,m,f,p.NO_COMPLETE_CHILD_SOURCE,null)}var y=e.updateServerSnap(s,u.isFullyInitialized()||t.isEmpty(),l.filtersNodes()),v=new p.WriteTreeCompleteChildSource(r,y,o);return this.generateEventCacheAfterServerEvent_(y,t,r,v,a)},e.prototype.applyUserOverwrite_=function(e,t,n,r,o,i){var a,u,l=e.getEventCache(),c=new p.WriteTreeCompleteChildSource(r,e,o);if(t.isEmpty())u=this.filter_.updateFullNode(e.getEventCache().getNode(),n,i),a=e.updateEventSnap(u,!0,this.filter_.filtersNodes());else{var h=t.getFront();if(".priority"===h)u=this.filter_.updatePriority(e.getEventCache().getNode(),n),a=e.updateEventSnap(u,l.isFullyInitialized(),l.isFiltered());else{var f=t.popFront(),d=l.getNode().getImmediateChild(h),m=void 0;if(f.isEmpty())m=n;else{var y=c.getCompleteChild(h);m=null!=y?".priority"===f.getBack()&&y.getChild(f.parent()).isEmpty()?y:y.updateChild(f,n):s.ChildrenNode.EMPTY_NODE}if(d.equals(m))a=e;else{var v=this.filter_.updateChild(l.getNode(),h,m,f,c,i);a=e.updateEventSnap(v,l.isFullyInitialized(),this.filter_.filtersNodes())}}}return a},e.cacheHasChild_=function(e,t){return e.getEventCache().isCompleteForChild(t)},e.prototype.applyUserMerge_=function(t,n,r,o,i,a){var s=this,u=t;return r.foreach(function(r,l){var c=n.child(r);e.cacheHasChild_(t,c.getFront())&&(u=s.applyUserOverwrite_(u,c,l,o,i,a))}),r.foreach(function(r,l){var c=n.child(r);e.cacheHasChild_(t,c.getFront())||(u=s.applyUserOverwrite_(u,c,l,o,i,a))}),u},e.prototype.applyMerge_=function(e,t){return t.foreach(function(t,n){e=e.updateChild(t,n)}),e},e.prototype.applyServerMerge_=function(e,t,n,r,o,i,a){var s=this;if(e.getServerCache().getNode().isEmpty()&&!e.getServerCache().isFullyInitialized())return e;var u,p=e;u=t.isEmpty()?n:l.ImmutableTree.Empty.setTree(t,n);var h=e.getServerCache().getNode();return u.children.inorderTraversal(function(t,n){if(h.hasChild(t)){var u=e.getServerCache().getNode().getImmediateChild(t),l=s.applyMerge_(u,n);p=s.applyServerOverwrite_(p,new c.Path(t),l,r,o,i,a)}}),u.children.inorderTraversal(function(t,n){var u=!e.getServerCache().isCompleteForChild(t)&&null==n.value;if(!h.hasChild(t)&&!u){var l=e.getServerCache().getNode().getImmediateChild(t),f=s.applyMerge_(l,n);p=s.applyServerOverwrite_(p,new c.Path(t),f,r,o,i,a)}}),p},e.prototype.ackUserWrite_=function(e,t,n,r,o,i){if(null!=r.shadowingWrite(t))return e;var a=e.getServerCache().isFiltered(),s=e.getServerCache();if(null!=n.value){if(t.isEmpty()&&s.isFullyInitialized()||s.isCompleteForPath(t))return this.applyServerOverwrite_(e,t,s.getNode().getChild(t),r,o,a,i);if(t.isEmpty()){var p=l.ImmutableTree.Empty;return s.getNode().forEachChild(u.KEY_INDEX,function(e,t){p=p.set(new c.Path(e),t)}),this.applyServerMerge_(e,t,p,r,o,a,i)}return e}var h=l.ImmutableTree.Empty;return n.foreach(function(e,n){var r=t.child(e);s.isCompleteForPath(r)&&(h=h.set(e,s.getNode().getChild(r)))}),this.applyServerMerge_(e,t,h,r,o,a,i)},e.prototype.listenComplete_=function(e,t,n,r){var o=e.getServerCache(),i=e.updateServerSnap(o.getNode(),o.isFullyInitialized()||t.isEmpty(),o.isFiltered());return this.generateEventCacheAfterServerEvent_(i,t,n,p.NO_COMPLETE_CHILD_SOURCE,r)},e.prototype.revertUserWrite_=function(e,t,n,r,i){var a;if(null!=n.shadowingWrite(t))return e;var u=new p.WriteTreeCompleteChildSource(n,e,r),l=e.getEventCache().getNode(),h=void 0;if(t.isEmpty()||".priority"===t.getFront()){var f=void 0;if(e.getServerCache().isFullyInitialized())f=n.calcCompleteEventCache(e.getCompleteServerSnap());else{var d=e.getServerCache().getNode();o.assert(d instanceof s.ChildrenNode,"serverChildren would be complete if leaf node"),f=n.calcCompleteEventChildren(d)}f=f,h=this.filter_.updateFullNode(l,f,i)}else{var m=t.getFront(),y=n.calcCompleteChild(m,e.getServerCache());null==y&&e.getServerCache().isCompleteForChild(m)&&(y=l.getImmediateChild(m)),h=null!=y?this.filter_.updateChild(l,m,y,t.popFront(),u,i):e.getEventCache().getNode().hasChild(m)?this.filter_.updateChild(l,m,s.ChildrenNode.EMPTY_NODE,t.popFront(),u,i):l,h.isEmpty()&&e.getServerCache().isFullyInitialized()&&(a=n.calcCompleteEventCache(e.getCompleteServerSnap()),a.isLeafNode()&&(h=this.filter_.updateFullNode(h,a,i)))}return a=e.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(c.Path.Empty),e.updateEventSnap(h,a,this.filter_.filtersNodes())},e}();t.ViewProcessor=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(24),i=n(0),a=function(){function e(){this.changeMap_={}}return e.prototype.trackChildChange=function(e){var t=e.type,n=e.childName;i.assert(t==o.Change.CHILD_ADDED||t==o.Change.CHILD_CHANGED||t==o.Change.CHILD_REMOVED,"Only child changes supported for tracking"),i.assert(".priority"!==n,"Only non-priority child changes can be tracked.");var a=r.safeGet(this.changeMap_,n);if(a){var s=a.type;if(t==o.Change.CHILD_ADDED&&s==o.Change.CHILD_REMOVED)this.changeMap_[n]=o.Change.childChangedChange(n,e.snapshotNode,a.snapshotNode);else if(t==o.Change.CHILD_REMOVED&&s==o.Change.CHILD_ADDED)delete this.changeMap_[n];else if(t==o.Change.CHILD_REMOVED&&s==o.Change.CHILD_CHANGED)this.changeMap_[n]=o.Change.childRemovedChange(n,a.oldSnap);else if(t==o.Change.CHILD_CHANGED&&s==o.Change.CHILD_ADDED)this.changeMap_[n]=o.Change.childAddedChange(n,e.snapshotNode);else{if(t!=o.Change.CHILD_CHANGED||s!=o.Change.CHILD_CHANGED)throw i.assertionError("Illegal combination of changes: "+e+" occurred after "+a);this.changeMap_[n]=o.Change.childChangedChange(n,e.snapshotNode,a.oldSnap)}}else this.changeMap_[n]=e},e.prototype.getChanges=function(){return r.getValues(this.changeMap_)},e}();t.ChildChangeAccumulator=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(43),o=function(){function e(){}return e.prototype.getCompleteChild=function(e){return null},e.prototype.getChildAfterChild=function(e,t,n){return null},e}();t.NoCompleteChildSource_=o,t.NO_COMPLETE_CHILD_SOURCE=new o;var i=function(){function e(e,t,n){void 0===n&&(n=null),this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}return e.prototype.getCompleteChild=function(e){var t=this.viewCache_.getEventCache();if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new r.CacheNode(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(e,n)},e.prototype.getChildAfterChild=function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),o=this.writes_.calcIndexedSlice(r,t,1,n,e);return 0===o.length?null:o[0]},e}();t.WriteTreeCompleteChildSource=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(13),o=n(24),i=n(0),a=function(){function e(e){this.query_=e,this.index_=this.query_.getQueryParams().getIndex()}return e.prototype.generateEventsForChanges=function(e,t,n){var r=this,i=[],a=[];return e.forEach(function(e){e.type===o.Change.CHILD_CHANGED&&r.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&a.push(o.Change.childMovedChange(e.childName,e.snapshotNode))}),this.generateEventsForType_(i,o.Change.CHILD_REMOVED,e,n,t),this.generateEventsForType_(i,o.Change.CHILD_ADDED,e,n,t),this.generateEventsForType_(i,o.Change.CHILD_MOVED,a,n,t),this.generateEventsForType_(i,o.Change.CHILD_CHANGED,e,n,t),this.generateEventsForType_(i,o.Change.VALUE,e,n,t),i},e.prototype.generateEventsForType_=function(e,t,n,r,o){var i=this,a=n.filter(function(e){return e.type===t});a.sort(this.compareChanges_.bind(this)),a.forEach(function(t){var n=i.materializeSingleChange_(t,o);r.forEach(function(r){r.respondsTo(t.type)&&e.push(r.createEvent(n,i.query_))})})},e.prototype.materializeSingleChange_=function(e,t){return"value"===e.type||"child_removed"===e.type?e:(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,this.index_),e)},e.prototype.compareChanges_=function(e,t){if(null==e.childName||null==t.childName)throw i.assertionError("Should only compare child_ events.");var n=new r.NamedNode(e.childName,e.snapshotNode),o=new r.NamedNode(t.childName,t.snapshotNode);return this.index_.compare(n,o)},e}();t.EventGenerator=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(0),i=n(4),a=n(281),s=n(8),u=n(10),l=function(){function e(){this.visibleWrites_=a.CompoundWrite.Empty,this.allWrites_=[],this.lastWriteId_=-1}return e.prototype.childWrites=function(e){return new c(e,this)},e.prototype.addOverwrite=function(e,t,n,r){o.assert(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:e,snap:t,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(e,t)),this.lastWriteId_=n},e.prototype.addMerge=function(e,t,n){o.assert(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:e,children:t,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(e,t),this.lastWriteId_=n},e.prototype.getWrite=function(e){for(var t=0;t<this.allWrites_.length;t++){var n=this.allWrites_[t];if(n.writeId===e)return n}return null},e.prototype.removeWrite=function(e){var t=this,n=this.allWrites_.findIndex(function(t){return t.writeId===e});o.assert(n>=0,"removeWrite called with nonexistent writeId.");var i=this.allWrites_[n];this.allWrites_.splice(n,1);for(var a=i.visible,s=!1,u=this.allWrites_.length-1;a&&u>=0;){var l=this.allWrites_[u];l.visible&&(u>=n&&this.recordContainsPath_(l,i.path)?a=!1:i.path.contains(l.path)&&(s=!0)),u--}if(a){if(s)return this.resetTree_(),!0;if(i.snap)this.visibleWrites_=this.visibleWrites_.removeWrite(i.path);else{var c=i.children;r.forEach(c,function(e){t.visibleWrites_=t.visibleWrites_.removeWrite(i.path.child(e))})}return!0}return!1},e.prototype.getCompleteWriteData=function(e){return this.visibleWrites_.getCompleteNode(e)},e.prototype.calcCompleteEventCache=function(t,n,r,o){if(r||o){var a=this.visibleWrites_.childCompoundWrite(t);if(!o&&a.isEmpty())return n;if(o||null!=n||a.hasCompleteWrite(i.Path.Empty)){var s=function(e){return(e.visible||o)&&(!r||!~r.indexOf(e.writeId))&&(e.path.contains(t)||t.contains(e.path))},l=e.layerTree_(this.allWrites_,s,t),c=n||u.ChildrenNode.EMPTY_NODE;return l.apply(c)}return null}var p=this.visibleWrites_.getCompleteNode(t);if(null!=p)return p;var h=this.visibleWrites_.childCompoundWrite(t);if(h.isEmpty())return n;if(null!=n||h.hasCompleteWrite(i.Path.Empty)){var c=n||u.ChildrenNode.EMPTY_NODE;return h.apply(c)}return null},e.prototype.calcCompleteEventChildren=function(e,t){var n=u.ChildrenNode.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(e);if(r)return r.isLeafNode()||r.forEachChild(s.PRIORITY_INDEX,function(e,t){n=n.updateImmediateChild(e,t)}),n;if(t){var o=this.visibleWrites_.childCompoundWrite(e);return t.forEachChild(s.PRIORITY_INDEX,function(e,t){var r=o.childCompoundWrite(new i.Path(e)).apply(t);n=n.updateImmediateChild(e,r)}),o.getCompleteChildren().forEach(function(e){n=n.updateImmediateChild(e.name,e.node)}),n}return this.visibleWrites_.childCompoundWrite(e).getCompleteChildren().forEach(function(e){n=n.updateImmediateChild(e.name,e.node)}),n},e.prototype.calcEventCacheAfterServerOverwrite=function(e,t,n,r){o.assert(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=e.child(t);if(this.visibleWrites_.hasCompleteWrite(i))return null;var a=this.visibleWrites_.childCompoundWrite(i);return a.isEmpty()?r.getChild(t):a.apply(r.getChild(t))},e.prototype.calcCompleteChild=function(e,t,n){var r=e.child(t),o=this.visibleWrites_.getCompleteNode(r);if(null!=o)return o;if(n.isCompleteForChild(t)){return this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(t))}return null},e.prototype.shadowingWrite=function(e){return this.visibleWrites_.getCompleteNode(e)},e.prototype.calcIndexedSlice=function(e,t,n,r,o,a){var s,u=this.visibleWrites_.childCompoundWrite(e),l=u.getCompleteNode(i.Path.Empty);if(null!=l)s=l;else{if(null==t)return[];s=u.apply(t)}if(s=s.withIndex(a),s.isEmpty()||s.isLeafNode())return[];for(var c=[],p=a.getCompare(),h=o?s.getReverseIteratorFrom(n,a):s.getIteratorFrom(n,a),f=h.getNext();f&&c.length<r;)0!==p(f,n)&&c.push(f),f=h.getNext();return c},e.prototype.recordContainsPath_=function(e,t){return e.snap?e.path.contains(t):!!r.findKey(e.children,function(n,r){return e.path.child(r).contains(t)})},e.prototype.resetTree_=function(){this.visibleWrites_=e.layerTree_(this.allWrites_,e.DefaultFilter_,i.Path.Empty),this.allWrites_.length>0?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},e.DefaultFilter_=function(e){return e.visible},e.layerTree_=function(e,t,n){for(var s=a.CompoundWrite.Empty,u=0;u<e.length;++u){var l=e[u];if(t(l)){var c=l.path,p=void 0;if(l.snap)n.contains(c)?(p=i.Path.relativePath(n,c),s=s.addWrite(p,l.snap)):c.contains(n)&&(p=i.Path.relativePath(c,n),s=s.addWrite(i.Path.Empty,l.snap.getChild(p)));else{if(!l.children)throw o.assertionError("WriteRecord should have .snap or .children");if(n.contains(c))p=i.Path.relativePath(n,c),s=s.addWrites(p,l.children);else if(c.contains(n))if(p=i.Path.relativePath(c,n),p.isEmpty())s=s.addWrites(i.Path.Empty,l.children);else{var h=r.safeGet(l.children,p.getFront());if(h){var f=h.getChild(p.popFront());s=s.addWrite(i.Path.Empty,f)}}}}}return s},e}();t.WriteTree=l;var c=function(){function e(e,t){this.treePath_=e,this.writeTree_=t}return e.prototype.calcCompleteEventCache=function(e,t,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,e,t,n)},e.prototype.calcCompleteEventChildren=function(e){return this.writeTree_.calcCompleteEventChildren(this.treePath_,e)},e.prototype.calcEventCacheAfterServerOverwrite=function(e,t,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,e,t,n)},e.prototype.shadowingWrite=function(e){return this.writeTree_.shadowingWrite(this.treePath_.child(e))},e.prototype.calcIndexedSlice=function(e,t,n,r,o){return this.writeTree_.calcIndexedSlice(this.treePath_,e,t,n,r,o)},e.prototype.calcCompleteChild=function(e,t){return this.writeTree_.calcCompleteChild(this.treePath_,e,t)},e.prototype.child=function(t){return new e(this.treePath_.child(t),this.writeTree_)},e}();t.WriteTreeRef=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(64),o=n(4),i=n(0),a=n(13),s=n(8),u=n(0),l=function(){function e(e){this.writeTree_=e}return e.prototype.addWrite=function(t,n){if(t.isEmpty())return new e(new r.ImmutableTree(n));var i=this.writeTree_.findRootMostValueAndPath(t);if(null!=i){var a=i.path,s=i.value,u=o.Path.relativePath(a,t);return s=s.updateChild(u,n),new e(this.writeTree_.set(a,s))}var l=new r.ImmutableTree(n);return new e(this.writeTree_.setTree(t,l))},e.prototype.addWrites=function(e,t){var n=this;return i.forEach(t,function(t,r){n=n.addWrite(e.child(t),r)}),n},e.prototype.removeWrite=function(t){return t.isEmpty()?e.Empty:new e(this.writeTree_.setTree(t,r.ImmutableTree.Empty))},e.prototype.hasCompleteWrite=function(e){return null!=this.getCompleteNode(e)},e.prototype.getCompleteNode=function(e){var t=this.writeTree_.findRootMostValueAndPath(e);return null!=t?this.writeTree_.get(t.path).getChild(o.Path.relativePath(t.path,e)):null},e.prototype.getCompleteChildren=function(){var e=[],t=this.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(s.PRIORITY_INDEX,function(t,n){e.push(new a.NamedNode(t,n))}):this.writeTree_.children.inorderTraversal(function(t,n){null!=n.value&&e.push(new a.NamedNode(t,n.value))}),e},e.prototype.childCompoundWrite=function(t){if(t.isEmpty())return this;var n=this.getCompleteNode(t);return new e(null!=n?new r.ImmutableTree(n):this.writeTree_.subtree(t))},e.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},e.prototype.apply=function(t){return e.applySubtreeWrite_(o.Path.Empty,this.writeTree_,t)},e.Empty=new e(new r.ImmutableTree(null)),e.applySubtreeWrite_=function(t,n,r){if(null!=n.value)return r.updateChild(t,n.value);var o=null;return n.children.inorderTraversal(function(n,i){".priority"===n?(u.assert(null!==i.value,"Priority writes must always be leaf nodes"),o=i.value):r=e.applySubtreeWrite_(t.child(n),i,r)}),r.getChild(t).isEmpty()||null===o||(r=r.updateChild(t.child(".priority"),o)),r},e}();t.CompoundWrite=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(10),o=function(){function e(){this.rootNode_=r.ChildrenNode.EMPTY_NODE}return e.prototype.getNode=function(e){return this.rootNode_.getChild(e)},e.prototype.updateSnapshot=function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)},e}();t.SnapshotHolder=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=function(){function e(e){this.app_=e}return e.prototype.getToken=function(e){return this.app_.INTERNAL.getToken(e).then(null,function(e){return e&&"auth/token-not-initialized"===e.code?(r.log("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})},e.prototype.addTokenChangeListener=function(e){this.app_.INTERNAL.addAuthTokenListener(e)},e.prototype.removeTokenChangeListener=function(e){this.app_.INTERNAL.removeAuthTokenListener(e)},e.prototype.notifyForInvalidToken=function(){var e='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',r.warn(e)},e}();t.AuthTokenProvider=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(0),i=function(){function e(){this.counters_={}}return e.prototype.incrementCounter=function(e,t){void 0===t&&(t=1),o.contains(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t},e.prototype.get=function(){return r.deepCopy(this.counters_)},e}();t.StatsCollection=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(2),i=n(116),a=1e4,s=3e4,u=function(){function e(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new i.StatsListener(e);var n=a+(s-a)*Math.random();o.setTimeoutNonBlocking(this.reportStats_.bind(this),Math.floor(n))}return e.prototype.includeStat=function(e){this.statsToReport_[e]=!0},e.prototype.reportStats_=function(){var e=this,t=this.statsListener_.get(),n={},i=!1;r.forEach(t,function(t,o){o>0&&r.contains(e.statsToReport_,t)&&(n[t]=o,i=!0)}),i&&this.server_.reportStats(n),o.setTimeoutNonBlocking(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},e}();t.StatsReporter=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=function(){function e(){this.eventLists_=[],this.recursionDepth_=0}return e.prototype.queueEvents=function(e){for(var t=null,n=0;n<e.length;n++){var r=e[n],o=r.getPath();null===t||o.equals(t.getPath())||(this.eventLists_.push(t),t=null),null===t&&(t=new i(o)),t.add(r)}t&&this.eventLists_.push(t)},e.prototype.raiseEventsAtPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_(function(t){return t.equals(e)})},e.prototype.raiseEventsForChangedPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_(function(t){return t.contains(e)||e.contains(t)})},e.prototype.raiseQueuedEventsMatchingPredicate_=function(e){this.recursionDepth_++;for(var t=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];if(r){e(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):t=!1}}t&&(this.eventLists_=[]),this.recursionDepth_--},e}();t.EventQueue=o;var i=function(){function e(e){this.path_=e,this.events_=[]}return e.prototype.add=function(e){this.events_.push(e)},e.prototype.raise=function(){for(var e=0;e<this.events_.length;e++){var t=this.events_[e];if(null!==t){this.events_[e]=null;var n=t.getEventRunner();r.logger&&r.log("event: "+t.toString()),r.exceptionGuard(n)}}},e.prototype.getPath=function(){return this.path_},e}();t.EventList=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(118),i=n(0),a=function(e){function t(){var t,n,r=e.call(this,["visible"])||this;return"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(n="visibilitychange",t="hidden"):"undefined"!==typeof document.mozHidden?(n="mozvisibilitychange",t="mozHidden"):"undefined"!==typeof document.msHidden?(n="msvisibilitychange",t="msHidden"):"undefined"!==typeof document.webkitHidden&&(n="webkitvisibilitychange",t="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,function(){var e=!document[t];e!==r.visible_&&(r.visible_=e,r.trigger("visible",e))},!1),r}return r(t,e),t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(e){return i.assert("visible"===e,"Unknown event type: "+e),[this.visible_]},t}(o.EventEmitter);t.VisibilityMonitor=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=n(118),a=n(0),s=function(e){function t(){var t=e.call(this,["online"])||this;return t.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||a.isMobileCordova()||(window.addEventListener("online",function(){t.online_||(t.online_=!0,t.trigger("online",!0))},!1),window.addEventListener("offline",function(){t.online_&&(t.online_=!1,t.trigger("online",!1))},!1)),t}return r(t,e),t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(e){return o.assert("online"===e,"Unknown event type: "+e),[this.online_]},t.prototype.currentlyOnline=function(){return this.online_},t}(i.EventEmitter);t.OnlineMonitor=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(120),o=n(121),i=n(2),a=function(){function e(e){this.initTransports_(e)}return Object.defineProperty(e,"ALL_TRANSPORTS",{get:function(){return[r.BrowserPollConnection,o.WebSocketConnection]},enumerable:!0,configurable:!0}),e.prototype.initTransports_=function(t){var n=o.WebSocketConnection&&o.WebSocketConnection.isAvailable(),r=n&&!o.WebSocketConnection.previouslyFailed();if(t.webSocketOnly&&(n||i.warn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[o.WebSocketConnection];else{var a=this.transports_=[];i.each(e.ALL_TRANSPORTS,function(e,t){t&&t.isAvailable()&&a.push(t)})}},e.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},e.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},e}();t.TransportManager=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=function(){function e(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return e.prototype.closeAfter=function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},e.prototype.handleResponse=function(e,t){var n=this;this.pendingResponses[e]=t;for(var o=this;this.pendingResponses[this.currentResponseNum];){if("break"===function(){var e=o.pendingResponses[o.currentResponseNum];delete o.pendingResponses[o.currentResponseNum];for(var t=0;t<e.length;++t)!function(t){e[t]&&r.exceptionGuard(function(){n.onMessage_(e[t])})}(t);if(o.currentResponseNum===o.closeAfterResponse)return o.onClose&&(o.onClose(),o.onClose=null),"break";o.currentResponseNum++}())break}},e}();t.PacketReceiver=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=n(2),a=n(0),s=n(0),u=n(0),l=n(122),c=function(e){function t(t,n,r){var o=e.call(this)||this;return o.repoInfo_=t,o.onDataUpdate_=n,o.authTokenProvider_=r,o.log_=i.logWrapper("p:rest:"),o.listens_={},o}return r(t,e),t.prototype.reportStats=function(e){throw new Error("Method not implemented.")},t.getListenId_=function(e,t){return void 0!==t?"tag$"+t:(o.assert(e.getQueryParams().isDefault(),"should have a tag if it's not a default query."),e.path.toString())},t.prototype.listen=function(e,n,r,o){var i=this,a=e.path.toString();this.log_("Listen called for "+a+" "+e.queryIdentifier());var u=t.getListenId_(e,r),l={};this.listens_[u]=l;var c=e.getQueryParams().toRestQueryStringParameters();this.restRequest_(a+".json",c,function(e,t){var n=t;if(404===e&&(n=null,e=null),null===e&&i.onDataUpdate_(a,n,!1,r),s.safeGet(i.listens_,u)===l){var c;c=e?401==e?"permission_denied":"rest_error:"+e:"ok",o(c,null)}})},t.prototype.unlisten=function(e,n){var r=t.getListenId_(e,n);delete this.listens_[r]},t.prototype.refreshAuthToken=function(e){},t.prototype.restRequest_=function(e,t,n){var r=this;void 0===t&&(t={}),t.format="export",this.authTokenProvider_.getToken(!1).then(function(o){var s=o&&o.accessToken;s&&(t.auth=s);var l=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+e+"?"+u.querystring(t);r.log_("Sending REST request for "+l);var c=new XMLHttpRequest;c.onreadystatechange=function(){if(n&&4===c.readyState){r.log_("REST Response for "+l+" received. status:",c.status,"response:",c.responseText);var e=null;if(c.status>=200&&c.status<300){try{e=a.jsonEval(c.responseText)}catch(e){i.warn("Failed to parse JSON response for "+l+": "+c.responseText)}n(null,e)}else 401!==c.status&&404!==c.status&&i.warn("Got unsuccessful REST response for "+l+" Status: "+c.status),n(c.status);n=null}},c.open("GET",l,!0),c.send()})},t}(l.ServerActions);t.ReadonlyRestClient=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(2),i=n(31),a=n(8),s=n(105),u=n(109),l=n(65),c=n(293),p=n(123),h=n(0),f=function(){function e(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=a.PRIORITY_INDEX}return e.prototype.hasStart=function(){return this.startSet_},e.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===e.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},e.prototype.getIndexStartValue=function(){return r.assert(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},e.prototype.getIndexStartName=function(){return r.assert(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:o.MIN_NAME},e.prototype.hasEnd=function(){return this.endSet_},e.prototype.getIndexEndValue=function(){return r.assert(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},e.prototype.getIndexEndName=function(){return r.assert(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:o.MAX_NAME},e.prototype.hasLimit=function(){return this.limitSet_},e.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},e.prototype.getLimit=function(){return r.assert(this.limitSet_,"Only valid if limit has been set"),this.limit_},e.prototype.getIndex=function(){return this.index_},e.prototype.copy_=function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},e.prototype.limit=function(e){var t=this.copy_();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="",t},e.prototype.limitToFirst=function(t){var n=this.copy_();return n.limitSet_=!0,n.limit_=t,n.viewFrom_=e.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},e.prototype.limitToLast=function(t){var n=this.copy_();return n.limitSet_=!0,n.limit_=t,n.viewFrom_=e.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},e.prototype.startAt=function(e,t){var n=this.copy_();return n.startSet_=!0,void 0===e&&(e=null),n.indexStartValue_=e,null!=t?(n.startNameSet_=!0,n.indexStartName_=t):(n.startNameSet_=!1,n.indexStartName_=""),n},e.prototype.endAt=function(e,t){var n=this.copy_();return n.endSet_=!0,void 0===e&&(e=null),n.indexEndValue_=e,void 0!==t?(n.endNameSet_=!0,n.indexEndName_=t):(n.endNameSet_=!1,n.indexEndName_=""),n},e.prototype.orderBy=function(e){var t=this.copy_();return t.index_=e,t},e.prototype.getQueryObject=function(){var t=e.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[t.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[t.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[t.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[t.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[t.LIMIT]=this.limit_;var r=this.viewFrom_;""===r&&(r=this.isViewFromLeft()?t.VIEW_FROM_LEFT:t.VIEW_FROM_RIGHT),n[t.VIEW_FROM]=r}return this.index_!==a.PRIORITY_INDEX&&(n[t.INDEX]=this.index_.toString()),n},e.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},e.prototype.isDefault=function(){return this.loadsAllData()&&this.index_==a.PRIORITY_INDEX},e.prototype.getNodeFilter=function(){return this.loadsAllData()?new l.IndexedFilter(this.getIndex()):this.hasLimit()?new c.LimitedFilter(this):new p.RangedFilter(this)},e.prototype.toRestQueryStringParameters=function(){var t=e.REST_QUERY_CONSTANTS_,n={};if(this.isDefault())return n;var o;return this.index_===a.PRIORITY_INDEX?o=t.PRIORITY_INDEX:this.index_===s.VALUE_INDEX?o=t.VALUE_INDEX:this.index_===i.KEY_INDEX?o=t.KEY_INDEX:(r.assert(this.index_ instanceof u.PathIndex,"Unrecognized index type!"),o=this.index_.toString()),n[t.ORDER_BY]=h.stringify(o),this.startSet_&&(n[t.START_AT]=h.stringify(this.indexStartValue_),this.startNameSet_&&(n[t.START_AT]+=","+h.stringify(this.indexStartName_))),this.endSet_&&(n[t.END_AT]=h.stringify(this.indexEndValue_),this.endNameSet_&&(n[t.END_AT]+=","+h.stringify(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?n[t.LIMIT_TO_FIRST]=this.limit_:n[t.LIMIT_TO_LAST]=this.limit_),n},e.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},e.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},e.DEFAULT=new e,e}();t.QueryParams=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(123),o=n(10),i=n(13),a=n(0),s=n(24),u=function(){function e(e){this.rangedFilter_=new r.RangedFilter(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}return e.prototype.updateChild=function(e,t,n,r,a,s){return this.rangedFilter_.matches(new i.NamedNode(t,n))||(n=o.ChildrenNode.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,a,s):this.fullLimitUpdateChild_(e,t,n,a,s)},e.prototype.updateFullNode=function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=o.ChildrenNode.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){r=o.ChildrenNode.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var a=0;i.hasNext()&&a<this.limit_;){var s=i.getNext(),u=void 0;if(!(u=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),a++}}else{r=t.withIndex(this.index_),r=r.updatePriority(o.ChildrenNode.EMPTY_NODE);var l=void 0,c=void 0,p=void 0,i=void 0;if(this.reverse_){i=r.getReverseIterator(this.index_),l=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();var h=this.index_.getCompare();p=function(e,t){return h(t,e)}}else i=r.getIterator(this.index_),l=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),p=this.index_.getCompare();for(var a=0,f=!1;i.hasNext();){var s=i.getNext();!f&&p(l,s)<=0&&(f=!0);var u=f&&a<this.limit_&&p(s,c)<=0;u?a++:r=r.updateImmediateChild(s.name,o.ChildrenNode.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)},e.prototype.updatePriority=function(e,t){return e},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},e.prototype.getIndex=function(){return this.index_},e.prototype.fullLimitUpdateChild_=function(e,t,n,r,u){var l;if(this.reverse_){var c=this.index_.getCompare();l=function(e,t){return c(t,e)}}else l=this.index_.getCompare();var p=e;a.assert(p.numChildren()==this.limit_,"");var h=new i.NamedNode(t,n),f=this.reverse_?p.getFirstChild(this.index_):p.getLastChild(this.index_),d=this.rangedFilter_.matches(h);if(p.hasChild(t)){for(var m=p.getImmediateChild(t),y=r.getChildAfterChild(this.index_,f,this.reverse_);null!=y&&(y.name==t||p.hasChild(y.name));)y=r.getChildAfterChild(this.index_,y,this.reverse_);var v=null==y?1:l(y,h);if(d&&!n.isEmpty()&&v>=0)return null!=u&&u.trackChildChange(s.Change.childChangedChange(t,n,m)),p.updateImmediateChild(t,n);null!=u&&u.trackChildChange(s.Change.childRemovedChange(t,m));var g=p.updateImmediateChild(t,o.ChildrenNode.EMPTY_NODE);return null!=y&&this.rangedFilter_.matches(y)?(null!=u&&u.trackChildChange(s.Change.childAddedChange(y.name,y.node)),g.updateImmediateChild(y.name,y.node)):g}return n.isEmpty()?e:d&&l(f,h)>=0?(null!=u&&(u.trackChildChange(s.Change.childRemovedChange(f.name,f.node)),u.trackChildChange(s.Change.childAddedChange(t,n))),p.updateImmediateChild(t,n).updateImmediateChild(f.name,o.ChildrenNode.EMPTY_NODE)):e},e}();t.LimitedFilter=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(0),i=n(62),a=n(63),s=n(4),u=n(295),l=n(8),c=n(2),p=n(110),h=n(19),f=n(0),d=n(32),m=n(10),y=n(42);!function(e){e[e.RUN=0]="RUN",e[e.SENT=1]="SENT",e[e.COMPLETED=2]="COMPLETED",e[e.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",e[e.NEEDS_ABORT=4]="NEEDS_ABORT"}(r=t.TransactionStatus||(t.TransactionStatus={})),y.Repo.MAX_TRANSACTION_RETRIES_=25,y.Repo.prototype.transactions_init_=function(){this.transactionQueueTree_=new u.Tree},y.Repo.prototype.startTransaction=function(e,t,n,s){this.log_("transaction on "+e);var u=function(){},y=new i.Reference(this,e);y.on("value",u);var v=function(){y.off("value",u)},g={path:e,update:t,onComplete:n,status:null,order:c.LUIDGenerator(),applyLocally:s,retryCount:0,unwatcher:v,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},_=this.getLatestState_(e);g.currentInputSnapshot=_;var b=g.update(_.val());if(void 0===b){if(g.unwatcher(),g.currentOutputSnapshotRaw=null,g.currentOutputSnapshotResolved=null,g.onComplete){var w=new a.DataSnapshot(g.currentInputSnapshot,new i.Reference(this,g.path),l.PRIORITY_INDEX);g.onComplete(null,!1,w)}}else{h.validateFirebaseData("transaction failed: Data returned ",b,g.path),g.status=r.RUN;var x=this.transactionQueueTree_.subTree(e),E=x.getValue()||[];E.push(g),x.setValue(E);var C=void 0;if("object"===typeof b&&null!==b&&f.contains(b,".priority"))C=f.safeGet(b,".priority"),o.assert(h.isValidPriority(C),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else{C=(this.serverSyncTree_.calcCompleteEventCache(e)||m.ChildrenNode.EMPTY_NODE).getPriority().val()}C=C;var T=this.generateServerValues(),S=d.nodeFromJSON(b,C),P=p.resolveDeferredValueSnapshot(S,T);g.currentOutputSnapshotRaw=S,g.currentOutputSnapshotResolved=P,g.currentWriteId=this.getNextWriteId_();var O=this.serverSyncTree_.applyUserOverwrite(e,P,g.currentWriteId,g.applyLocally);this.eventQueue_.raiseEventsForChangedPath(e,O),this.sendReadyTransactions_()}},y.Repo.prototype.getLatestState_=function(e,t){return this.serverSyncTree_.calcCompleteEventCache(e,t)||m.ChildrenNode.EMPTY_NODE},y.Repo.prototype.sendReadyTransactions_=function(e){var t=this;if(void 0===e&&(e=this.transactionQueueTree_),e||this.pruneCompletedTransactionsBelowNode_(e),null!==e.getValue()){var n=this.buildTransactionQueue_(e);o.assert(n.length>0,"Sending zero length transaction queue");n.every(function(e){return e.status===r.RUN})&&this.sendTransactionQueue_(e.path(),n)}else e.hasChildren()&&e.forEachChild(function(e){t.sendReadyTransactions_(e)})},y.Repo.prototype.sendTransactionQueue_=function(e,t){for(var n=this,u=t.map(function(e){return e.currentWriteId}),p=this.getLatestState_(e,u),h=p,f=p.hash(),d=0;d<t.length;d++){var m=t[d];o.assert(m.status===r.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),m.status=r.SENT,m.retryCount++;var y=s.Path.relativePath(e,m.path);h=h.updateChild(y,m.currentOutputSnapshotRaw)}var v=h.val(!0),g=e;this.server_.put(g.toString(),v,function(o){n.log_("transaction put response",{path:g.toString(),status:o});var s=[];if("ok"===o){for(var u=[],p=0;p<t.length;p++){if(t[p].status=r.COMPLETED,s=s.concat(n.serverSyncTree_.ackUserWrite(t[p].currentWriteId)),t[p].onComplete){var h=t[p].currentOutputSnapshotResolved,f=new i.Reference(n,t[p].path),d=new a.DataSnapshot(h,f,l.PRIORITY_INDEX);u.push(t[p].onComplete.bind(null,null,!0,d))}t[p].unwatcher()}n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(e)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(e,s);for(var p=0;p<u.length;p++)c.exceptionGuard(u[p])}else{if("datastale"===o)for(var p=0;p<t.length;p++)t[p].status===r.SENT_NEEDS_ABORT?t[p].status=r.NEEDS_ABORT:t[p].status=r.RUN;else{c.warn("transaction at "+g.toString()+" failed: "+o);for(var p=0;p<t.length;p++)t[p].status=r.NEEDS_ABORT,t[p].abortReason=o}n.rerunTransactions_(e)}},f)},y.Repo.prototype.rerunTransactions_=function(e){var t=this.getAncestorTransactionNode_(e),n=t.path(),r=this.buildTransactionQueue_(t);return this.rerunTransactionQueue_(r,n),n},y.Repo.prototype.rerunTransactionQueue_=function(e,t){if(0!==e.length){for(var n=[],u=[],m=e.filter(function(e){return e.status===r.RUN}),v=m.map(function(e){return e.currentWriteId}),g=0;g<e.length;g++){var _=e[g],b=s.Path.relativePath(t,_.path),w=!1,x=void 0;if(o.assert(null!==b,"rerunTransactionsUnderNode_: relativePath should not be null."),_.status===r.NEEDS_ABORT)w=!0,x=_.abortReason,u=u.concat(this.serverSyncTree_.ackUserWrite(_.currentWriteId,!0));else if(_.status===r.RUN)if(_.retryCount>=y.Repo.MAX_TRANSACTION_RETRIES_)w=!0,x="maxretry",u=u.concat(this.serverSyncTree_.ackUserWrite(_.currentWriteId,!0));else{var E=this.getLatestState_(_.path,v);_.currentInputSnapshot=E;var C=e[g].update(E.val());if(void 0!==C){h.validateFirebaseData("transaction failed: Data returned ",C,_.path);var T=d.nodeFromJSON(C),S="object"===typeof C&&null!=C&&f.contains(C,".priority");S||(T=T.updatePriority(E.getPriority()));var P=_.currentWriteId,O=this.generateServerValues(),A=p.resolveDeferredValueSnapshot(T,O);_.currentOutputSnapshotRaw=T,_.currentOutputSnapshotResolved=A,_.currentWriteId=this.getNextWriteId_(),v.splice(v.indexOf(P),1),u=u.concat(this.serverSyncTree_.applyUserOverwrite(_.path,A,_.currentWriteId,_.applyLocally)),u=u.concat(this.serverSyncTree_.ackUserWrite(P,!0))}else w=!0,x="nodata",u=u.concat(this.serverSyncTree_.ackUserWrite(_.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(t,u),u=[],w&&(e[g].status=r.COMPLETED,function(e){setTimeout(e,Math.floor(0))}(e[g].unwatcher),e[g].onComplete))if("nodata"===x){var k=new i.Reference(this,e[g].path),I=e[g].currentInputSnapshot,N=new a.DataSnapshot(I,k,l.PRIORITY_INDEX);n.push(e[g].onComplete.bind(null,null,!1,N))}else n.push(e[g].onComplete.bind(null,new Error(x),!1,null))}this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);for(var g=0;g<n.length;g++)c.exceptionGuard(n[g]);this.sendReadyTransactions_()}},y.Repo.prototype.getAncestorTransactionNode_=function(e){for(var t,n=this.transactionQueueTree_;null!==(t=e.getFront())&&null===n.getValue();)n=n.subTree(t),e=e.popFront();return n},y.Repo.prototype.buildTransactionQueue_=function(e){var t=[];return this.aggregateTransactionQueuesForNode_(e,t),t.sort(function(e,t){return e.order-t.order}),t},y.Repo.prototype.aggregateTransactionQueuesForNode_=function(e,t){var n=this,r=e.getValue();if(null!==r)for(var o=0;o<r.length;o++)t.push(r[o]);e.forEachChild(function(e){n.aggregateTransactionQueuesForNode_(e,t)})},y.Repo.prototype.pruneCompletedTransactionsBelowNode_=function(e){var t=this,n=e.getValue();if(n){for(var o=0,i=0;i<n.length;i++)n[i].status!==r.COMPLETED&&(n[o]=n[i],o++);n.length=o,e.setValue(n.length>0?n:null)}e.forEachChild(function(e){t.pruneCompletedTransactionsBelowNode_(e)})},y.Repo.prototype.abortTransactions_=function(e){var t=this,n=this.getAncestorTransactionNode_(e).path(),r=this.transactionQueueTree_.subTree(e);return r.forEachAncestor(function(e){t.abortTransactionsOnNode_(e)}),this.abortTransactionsOnNode_(r),r.forEachDescendant(function(e){t.abortTransactionsOnNode_(e)}),n},y.Repo.prototype.abortTransactionsOnNode_=function(e){var t=e.getValue();if(null!==t){for(var n=[],i=[],a=-1,s=0;s<t.length;s++)if(t[s].status===r.SENT_NEEDS_ABORT);else if(t[s].status===r.SENT)o.assert(a===s-1,"All SENT items should be at beginning of queue."),a=s,t[s].status=r.SENT_NEEDS_ABORT,t[s].abortReason="set";else if(o.assert(t[s].status===r.RUN,"Unexpected transaction status in abort"),t[s].unwatcher(),i=i.concat(this.serverSyncTree_.ackUserWrite(t[s].currentWriteId,!0)),t[s].onComplete){n.push(t[s].onComplete.bind(null,new Error("set"),!1,null))}-1===a?e.setValue(null):t.length=a+1,this.eventQueue_.raiseEventsForChangedPath(e.path(),i);for(var s=0;s<n.length;s++)c.exceptionGuard(n[s])}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(4),i=n(0),a=function(){function e(){this.children={},this.childCount=0,this.value=null}return e}();t.TreeNode=a;var s=function(){function e(e,t,n){void 0===e&&(e=""),void 0===t&&(t=null),void 0===n&&(n=new a),this.name_=e,this.parent_=t,this.node_=n}return e.prototype.subTree=function(t){for(var n,r=t instanceof o.Path?t:new o.Path(t),s=this;null!==(n=r.getFront());){s=new e(n,s,i.safeGet(s.node_.children,n)||new a),r=r.popFront()}return s},e.prototype.getValue=function(){return this.node_.value},e.prototype.setValue=function(e){r.assert("undefined"!==typeof e,"Cannot set value to undefined"),this.node_.value=e,this.updateParents_()},e.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},e.prototype.hasChildren=function(){return this.node_.childCount>0},e.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},e.prototype.forEachChild=function(t){var n=this;i.forEach(this.node_.children,function(r,o){t(new e(r,n,o))})},e.prototype.forEachDescendant=function(e,t,n){t&&!n&&e(this),this.forEachChild(function(t){t.forEachDescendant(e,!0,n)}),t&&n&&e(this)},e.prototype.forEachAncestor=function(e,t){for(var n=t?this:this.parent();null!==n;){if(e(n))return!0;n=n.parent()}return!1},e.prototype.forEachImmediateDescendantWithValue=function(e){this.forEachChild(function(t){null!==t.getValue()?e(t):t.forEachImmediateDescendantWithValue(e)})},e.prototype.path=function(){return new o.Path(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},e.prototype.name=function(){return this.name_},e.prototype.parent=function(){return this.parent_},e.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},e.prototype.updateChild_=function(e,t){var n=t.isEmpty(),r=i.contains(this.node_.children,e);n&&r?(delete this.node_.children[e],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[e]=t.node_,this.node_.childCount++,this.updateParents_())},e}();t.Tree=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(121),o=n(120);t.forceLongPolling=function(){r.WebSocketConnection.forceDisallow(),o.BrowserPollConnection.forceAllow()},t.forceWebSockets=function(){o.BrowserPollConnection.forceDisallow()},t.isWebSocketsAvailable=function(){return r.WebSocketConnection.isAvailable()},t.setSecurityDebugCallback=function(e,t){e.repo.persistentConnection_.securityDebugCallback_=t},t.stats=function(e,t){e.repo.stats(t)},t.statsIncrementCounter=function(e,t){e.repo.statsIncrementCounter(t)},t.dataUpdateCount=function(e){return e.repo.dataUpdateCount},t.interceptServerData=function(e,t){return e.repo.interceptServerData_(t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(101),o=n(117),i=n(67),a=n(119);t.DataConnection=o.PersistentConnection,o.PersistentConnection.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},o.PersistentConnection.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)},t.RealTimeConnection=a.Connection,t.hijackHash=function(e){var t=o.PersistentConnection.prototype.put;return o.PersistentConnection.prototype.put=function(n,r,o,i){void 0!==i&&(i=e()),t.call(this,n,r,o,i)},function(){o.PersistentConnection.prototype.put=t}},t.ConnectionTarget=r.RepoInfo,t.queryIdentifier=function(e){return e.queryIdentifier()},t.listens=function(e){return e.repo.persistentConnection_.listens_},t.forceRestClient=function(e){i.RepoManager.getInstance().forceRestClient(e)}},function(e,t,n){n(299)},function(e,t,n){"use strict";function r(e){var t=function(e){return self&&"ServiceWorkerGlobalScope"in self?new i.a(e):new o.a(e)},n={Messaging:o.a};e.INTERNAL.registerService("messaging",t,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.registerMessaging=r;var o=n(300),i=n(304);r(n(18).default)},function(e,t,n){"use strict";var r=n(124),o=n(44),i=n(127),a=n(303),s=n(126),u=n(0),l=(n.n(u),this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),c=function(e){function t(t){var n=e.call(this,t)||this;return n.registrationToUse_,n.manifestCheckPromise_,n.messageObserver_=null,n.onMessage_=Object(u.createSubscribe)(function(e){n.messageObserver_=e}),n.tokenRefreshObserver_=null,n.onTokenRefresh_=Object(u.createSubscribe)(function(e){n.tokenRefreshObserver_=e}),n.setupSWMessageListener_(),n}return l(t,e),t.prototype.getToken=function(){var t=this;return this.isSupported_()?this.manifestCheck_().then(function(){return e.prototype.getToken.call(t)}):Promise.reject(this.errorFactory_.create(o.a.codes.UNSUPPORTED_BROWSER))},t.prototype.manifestCheck_=function(){var e=this;if(this.manifestCheckPromise_)return this.manifestCheckPromise_;var t=document.querySelector('link[rel="manifest"]');return this.manifestCheckPromise_=t?fetch(t.href).then(function(e){return e.json()}).catch(function(){return Promise.resolve()}).then(function(t){if(t&&t.gcm_sender_id&&"103953800507"!==t.gcm_sender_id)throw e.errorFactory_.create(o.a.codes.INCORRECT_GCM_SENDER_ID)}):Promise.resolve(),this.manifestCheckPromise_},t.prototype.requestPermission=function(){var e=this;return Notification.permission===s.a.granted?Promise.resolve():new Promise(function(t,n){var r=function(r){return r===s.a.granted?t():n(r===s.a.denied?e.errorFactory_.create(o.a.codes.PERMISSION_BLOCKED):e.errorFactory_.create(o.a.codes.PERMISSION_DEFAULT))},i=Notification.requestPermission(function(e){i||r(e)});i&&i.then(r)})},t.prototype.useServiceWorker=function(e){if(!(e instanceof ServiceWorkerRegistration))throw this.errorFactory_.create(o.a.codes.SW_REGISTRATION_EXPECTED);if("undefined"!==typeof this.registrationToUse_)throw this.errorFactory_.create(o.a.codes.USE_SW_BEFORE_GET_TOKEN);this.registrationToUse_=e},t.prototype.onMessage=function(e,t,n){return this.onMessage_(e,t,n)},t.prototype.onTokenRefresh=function(e,t,n){return this.onTokenRefresh_(e,t,n)},t.prototype.waitForRegistrationToActivate_=function(e){var t=this,n=e.installing||e.waiting||e.active;return new Promise(function(r,i){if(!n)return void i(t.errorFactory_.create(o.a.codes.NO_SW_IN_REG));if("activated"===n.state)return void r(e);if("redundant"===n.state)return void i(t.errorFactory_.create(o.a.codes.SW_REG_REDUNDANT));var a=function(){if("activated"===n.state)r(e);else{if("redundant"!==n.state)return;i(t.errorFactory_.create(o.a.codes.SW_REG_REDUNDANT))}n.removeEventListener("statechange",a)};n.addEventListener("statechange",a)})},t.prototype.getSWRegistration_=function(){var e=this;return this.registrationToUse_?this.waitForRegistrationToActivate_(this.registrationToUse_):(this.registrationToUse_=null,navigator.serviceWorker.register(a.a.path,{scope:a.a.scope}).catch(function(t){throw e.errorFactory_.create(o.a.codes.FAILED_DEFAULT_REGISTRATION,{browserErrorMessage:t.message})}).then(function(t){return e.waitForRegistrationToActivate_(t).then(function(){return e.registrationToUse_=t,t.update(),t})}))},t.prototype.setupSWMessageListener_=function(){var e=this;"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",function(t){if(t.data&&t.data[i.a.PARAMS.TYPE_OF_MSG]){var n=t.data;switch(n[i.a.PARAMS.TYPE_OF_MSG]){case i.a.TYPES_OF_MSG.PUSH_MSG_RECEIVED:case i.a.TYPES_OF_MSG.NOTIFICATION_CLICKED:var r=n[i.a.PARAMS.DATA];e.messageObserver_.next(r)}}},!1)},t.prototype.isSupported_=function(){return"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")},t}(r.a);t.a=c},function(e,t,n){"use strict";var r=n(0),o=(n.n(r),n(44)),i=n(302),a=n(125),s="fcm_token_object_Store",u=function(){function e(){this.errorFactory_=new r.ErrorFactory("messaging","Messaging",o.a.map),this.openDbPromise_=null}return e.prototype.openDatabase_=function(){return this.openDbPromise_?this.openDbPromise_:(this.openDbPromise_=new Promise(function(t,n){var r=indexedDB.open(e.DB_NAME,1);r.onerror=function(e){n(e.target.error)},r.onsuccess=function(e){t(e.target.result)},r.onupgradeneeded=function(e){var t=e.target.result,n=t.createObjectStore(s,{keyPath:"swScope"});n.createIndex("fcmSenderId","fcmSenderId",{unique:!1}),n.createIndex("fcmToken","fcmToken",{unique:!0})}}),this.openDbPromise_)},e.prototype.closeDatabase=function(){var e=this;return this.openDbPromise_?this.openDbPromise_.then(function(t){t.close(),e.openDbPromise_=null}):Promise.resolve()},e.prototype.getTokenDetailsFromToken=function(e){return this.openDatabase_().then(function(t){return new Promise(function(n,r){var o=t.transaction([s]),i=o.objectStore(s),a=i.index("fcmToken"),u=a.get(e);u.onerror=function(e){r(e.target.error)},u.onsuccess=function(e){n(e.target.result)}})})},e.prototype.getTokenDetailsFromSWScope_=function(e){return this.openDatabase_().then(function(t){return new Promise(function(n,r){var o=t.transaction([s]),i=o.objectStore(s),a=i.get(e);a.onerror=function(e){r(e.target.error)},a.onsuccess=function(e){n(e.target.result)}})})},e.prototype.getAllTokenDetailsForSenderId_=function(e){return this.openDatabase_().then(function(t){return new Promise(function(n,r){var o=t.transaction([s]),i=o.objectStore(s),a=[],u=i.openCursor();u.onerror=function(e){r(e.target.error)},u.onsuccess=function(t){var r=t.target.result;r?(r.value.fcmSenderId===e&&a.push(r.value),r.continue()):n(a)}})})},e.prototype.subscribeToFCM=function(e,t,n){var r=this,s=Object(i.a)(t.getKey("p256dh")),u=Object(i.a)(t.getKey("auth")),l="authorized_entity="+e+"&endpoint="+t.endpoint+"&encryption_key="+s+"&encryption_auth="+u;n&&(l+="&pushSet="+n);var c=new Headers;c.append("Content-Type","application/x-www-form-urlencoded");var p={method:"POST",headers:c,body:l};return fetch(a.a.ENDPOINT+"/fcm/connect/subscribe",p).then(function(e){return e.json()}).then(function(e){var t=e;if(t.error){var n=t.error.message;throw r.errorFactory_.create(o.a.codes.TOKEN_SUBSCRIBE_FAILED,{message:n})}if(!t.token)throw r.errorFactory_.create(o.a.codes.TOKEN_SUBSCRIBE_NO_TOKEN);if(!t.pushSet)throw r.errorFactory_.create(o.a.codes.TOKEN_SUBSCRIBE_NO_PUSH_SET);return{token:t.token,pushSet:t.pushSet}})},e.prototype.isSameSubscription_=function(e,t){return e.endpoint===t.endpoint&&Object(i.a)(e.getKey("auth"))===t.auth&&Object(i.a)(e.getKey("p256dh"))===t.p256dh},e.prototype.saveTokenDetails_=function(e,t,n,r,o){var a={swScope:t.scope,endpoint:n.endpoint,auth:Object(i.a)(n.getKey("auth")),p256dh:Object(i.a)(n.getKey("p256dh")),fcmToken:r,fcmPushSet:o,fcmSenderId:e};return this.openDatabase_().then(function(e){return new Promise(function(t,n){var r=e.transaction([s],"readwrite"),o=r.objectStore(s),i=o.put(a);i.onerror=function(e){n(e.target.error)},i.onsuccess=function(e){t()}})})},e.prototype.getSavedToken=function(e,t){var n=this;return t instanceof ServiceWorkerRegistration?"string"!==typeof e||0===e.length?Promise.reject(this.errorFactory_.create(o.a.codes.BAD_SENDER_ID)):this.getAllTokenDetailsForSenderId_(e).then(function(n){if(0!==n.length){var r=n.findIndex(function(n){return t.scope===n.swScope&&e===n.fcmSenderId});if(-1!==r)return n[r]}}).then(function(e){if(e)return t.pushManager.getSubscription().catch(function(e){throw n.errorFactory_.create(o.a.codes.GET_SUBSCRIPTION_FAILED)}).then(function(t){if(t&&n.isSameSubscription_(t,e))return e.fcmToken})}):Promise.reject(this.errorFactory_.create(o.a.codes.SW_REGISTRATION_EXPECTED))},e.prototype.createToken=function(e,t){var n=this;if("string"!==typeof e||0===e.length)return Promise.reject(this.errorFactory_.create(o.a.codes.BAD_SENDER_ID));if(!(t instanceof ServiceWorkerRegistration))return Promise.reject(this.errorFactory_.create(o.a.codes.SW_REGISTRATION_EXPECTED));var r,i;return t.pushManager.getSubscription().then(function(e){return e||t.pushManager.subscribe(a.a.SUBSCRIPTION_OPTIONS)}).then(function(t){return r=t,n.subscribeToFCM(e,r)}).then(function(o){return i=o,n.saveTokenDetails_(e,t,r,i.token,i.pushSet)}).then(function(){return i.token})},e.prototype.deleteToken=function(e){var t=this;return"string"!==typeof e||0===e.length?Promise.reject(this.errorFactory_.create(o.a.codes.INVALID_DELETE_TOKEN)):this.getTokenDetailsFromToken(e).then(function(e){if(!e)throw t.errorFactory_.create(o.a.codes.DELETE_TOKEN_NOT_FOUND);return t.openDatabase_().then(function(n){return new Promise(function(r,i){var a=n.transaction([s],"readwrite"),u=a.objectStore(s),l=u.delete(e.swScope);l.onerror=function(e){i(e.target.error)},l.onsuccess=function(n){if(0===n.target.result)return void i(t.errorFactory_.create(o.a.codes.FAILED_TO_DELETE_TOKEN));r(e)}})})})},e}();t.a=u},function(e,t,n){"use strict";function r(e){var t=new Uint8Array(e);return window.btoa(String.fromCharCode.apply(null,t))}t.a=function(e){return r(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}},function(e,t,n){"use strict";t.a={path:"/firebase-messaging-sw.js",scope:"/firebase-cloud-messaging-push-scope"}},function(e,t,n){"use strict";var r=n(124),o=n(44),i=n(127),a=n(125),s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),u=function(e){function t(t){var n=e.call(this,t)||this;return self.addEventListener("push",function(e){return n.onPush_(e)},!1),self.addEventListener("pushsubscriptionchange",function(e){return n.onSubChange_(e)},!1),self.addEventListener("notificationclick",function(e){return n.onNotificationClick_(e)},!1),n.bgMessageHandler_=null,n}return s(t,e),t.prototype.onPush_=function(e){var t,n=this;try{t=e.data.json()}catch(e){return}var r=this.hasVisibleClients_().then(function(e){if(e){if(t.notification||n.bgMessageHandler_)return n.sendMessageToWindowClients_(t)}else{var r=n.getNotificationData_(t);if(r){var o=r.title||"";return self.registration.showNotification(o,r)}if(n.bgMessageHandler_)return n.bgMessageHandler_(t)}});e.waitUntil(r)},t.prototype.onSubChange_=function(e){var t=this,n=this.getToken().then(function(e){if(!e)throw t.errorFactory_.create(o.a.codes.NO_FCM_TOKEN_FOR_RESUBSCRIBE);var n=null,r=t.getTokenManager();return r.getTokenDetailsFromToken(e).then(function(e){if(!(n=e))throw t.errorFactory_.create(o.a.codes.INVALID_SAVED_TOKEN);return self.registration.pushManager.subscribe(a.a.SUBSCRIPTION_OPTIONS)}).then(function(e){return r.subscribeToFCM(n.fcmSenderId,e,n.fcmPushSet)}).catch(function(e){return r.deleteToken(n.fcmToken).then(function(){throw t.errorFactory_.create(o.a.codes.UNABLE_TO_RESUBSCRIBE,{message:e})})})});e.waitUntil(n)},t.prototype.onNotificationClick_=function(e){var t=this;if(e.notification&&e.notification.data&&e.notification.data.FCM_MSG){e.stopImmediatePropagation(),e.notification.close();var n=e.notification.data.FCM_MSG,r=n.notification.click_action;if(r){var o=this.getWindowClient_(r).then(function(e){return e||self.clients.openWindow(r)}).then(function(e){if(e){n.notification;delete n.notification;var r=i.a.createNewMsg(i.a.TYPES_OF_MSG.NOTIFICATION_CLICKED,n);return t.attemptToMessageClient_(e,r)}});e.waitUntil(o)}}},t.prototype.getNotificationData_=function(e){if(e&&"object"===typeof e.notification){var t=Object.assign({},e.notification);return t.data=(n={},n.FCM_MSG=e,n),t;var n}},t.prototype.setBackgroundMessageHandler=function(e){if(e&&"function"!==typeof e)throw this.errorFactory_.create(o.a.codes.BG_HANDLER_FUNCTION_EXPECTED);this.bgMessageHandler_=e},t.prototype.getWindowClient_=function(e){var t=new URL(e).href;return self.clients.matchAll({type:"window",includeUncontrolled:!0}).then(function(e){for(var n=null,r=0;r<e.length;r++){if(new URL(e[r].url).href===t){n=e[r];break}}if(n)return n.focus(),n})},t.prototype.attemptToMessageClient_=function(e,t){var n=this;return new Promise(function(r,i){if(!e)return i(n.errorFactory_.create(o.a.codes.NO_WINDOW_CLIENT_TO_MSG));e.postMessage(t),r()})},t.prototype.hasVisibleClients_=function(){return self.clients.matchAll({type:"window",includeUncontrolled:!0}).then(function(e){return e.some(function(e){return"visible"===e.visibilityState})})},t.prototype.sendMessageToWindowClients_=function(e){var t=this;return self.clients.matchAll({type:"window",includeUncontrolled:!0}).then(function(n){var r=i.a.createNewMsg(i.a.TYPES_OF_MSG.PUSH_MSG_RECEIVED,e);return Promise.all(n.map(function(e){return t.attemptToMessageClient_(e,r)}))})},t.prototype.getSWRegistration_=function(){return Promise.resolve(self.registration)},t}(r.a);t.a=u},function(e,t,n){n(306)},function(e,t,n){"use strict";function r(e,t,n){return new c.a(e,new u.a,n)}function o(e){var t={TaskState:s.c,TaskEvent:s.b,StringFormat:a.a,Storage:c.a,Reference:l.a};e.INTERNAL.registerService(p,r,t,void 0,!0)}Object.defineProperty(t,"__esModule",{value:!0}),t.registerStorage=o;var i=n(18),a=n(33),s=n(34),u=n(307),l=n(129),c=n(316),p="storage";o(i.default)},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(308),o=function(){function e(){}return e.prototype.createXhrIo=function(){return new r.a},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(17),o=n(25),i=n(21),a=n(14),s=n(128),u=function(){function e(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=s.a.NO_ERROR,this.sendPromise_=i.a(function(t,n){e.xhr_.addEventListener("abort",function(n){e.errorCode_=s.a.ABORT,t(e)}),e.xhr_.addEventListener("error",function(n){e.errorCode_=s.a.NETWORK_ERROR,t(e)}),e.xhr_.addEventListener("load",function(n){t(e)})})}return e.prototype.send=function(e,t,n,i){var s=this;if(this.sent_)throw r.e("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),a.a(i)){var u=i;o.b(u,function(e,t){s.xhr_.setRequestHeader(e,t.toString())})}return a.a(n)?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},e.prototype.getErrorCode=function(){if(!this.sent_)throw r.e("cannot .getErrorCode() before sending");return this.errorCode_},e.prototype.getStatus=function(){if(!this.sent_)throw r.e("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}},e.prototype.getResponseText=function(){if(!this.sent_)throw r.e("cannot .getResponseText() before sending");return this.xhr_.responseText},e.prototype.abort=function(){this.xhr_.abort()},e.prototype.getResponseHeader=function(e){return this.xhr_.getResponseHeader(e)},e.prototype.addUploadProgressListener=function(e){a.a(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",e)},e.prototype.removeUploadProgressListener=function(e){a.a(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",e)},e}()},function(e,t,n){"use strict";function r(e){var t;try{t=JSON.parse(e)}catch(e){return null}return o.f(t)?t:null}t.a=r;var o=n(14)},function(e,t,n){"use strict";function r(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function o(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=r();if(void 0!==n){for(var o=new n,i=0;i<e.length;i++)o.append(e[i]);return o.getBlob()}if(a.e())return new Blob(e);throw Error("This browser doesn't seem to support creating Blobs")}function i(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}t.a=o,t.b=i;var a=n(14)},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){function e(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}return e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n(34),o=n(313),i=n(314),a=n(68),s=n(71),u=n(315),l=n(17),c=n(21),p=n(132),h=n(14),f=function(){function e(e,t,n,o,i,a){void 0===a&&(a=null);var s=this;this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=e,this.authWrapper_=t,this.location_=n,this.blob_=i,this.metadata_=a,this.mappings_=o,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_=r.a.RUNNING,this.errorHandler_=function(e){s.request_=null,s.chunkMultiplier_=1,e.codeEquals(l.a.CANCELED)?(s.needToFetchStatus_=!0,s.completeTransitions_()):(s.error_=e,s.transition_(r.a.ERROR))},this.metadataErrorHandler_=function(e){s.request_=null,e.codeEquals(l.a.CANCELED)?s.completeTransitions_():(s.error_=e,s.transition_(r.a.ERROR))},this.promise_=c.a(function(e,t){s.resolve_=e,s.reject_=t,s.start_()}),this.promise_.then(null,function(){})}return e.prototype.makeProgressCallback_=function(){var e=this,t=this.transferred_;return function(n,r){e.updateProgress_(t+n)}},e.prototype.shouldDoResumable_=function(e){return e.size()>262144},e.prototype.start_=function(){this.state_===r.a.RUNNING&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},e.prototype.resolveToken_=function(e){var t=this;this.authWrapper_.getAuthToken().then(function(n){switch(t.state_){case r.a.RUNNING:e(n);break;case r.a.CANCELING:t.transition_(r.a.CANCELED);break;case r.a.PAUSING:t.transition_(r.a.PAUSED)}})},e.prototype.createResumable_=function(){var e=this;this.resolveToken_(function(t){var n=p.c(e.authWrapper_,e.location_,e.mappings_,e.blob_,e.metadata_),r=e.authWrapper_.makeRequest(n,t);e.request_=r,r.getPromise().then(function(t){e.request_=null,e.uploadUrl_=t,e.needToFetchStatus_=!1,e.completeTransitions_()},e.errorHandler_)})},e.prototype.fetchStatus_=function(){var e=this,t=this.uploadUrl_;this.resolveToken_(function(n){var r=p.f(e.authWrapper_,e.location_,t,e.blob_),o=e.authWrapper_.makeRequest(r,n);e.request_=o,o.getPromise().then(function(t){t=t,e.request_=null,e.updateProgress_(t.current),e.needToFetchStatus_=!1,t.finalized&&(e.needToFetchMetadata_=!0),e.completeTransitions_()},e.errorHandler_)})},e.prototype.continueUpload_=function(){var e=this,t=p.h*this.chunkMultiplier_,n=new p.a(this.transferred_,this.blob_.size()),o=this.uploadUrl_;this.resolveToken_(function(i){var a;try{a=p.b(e.location_,e.authWrapper_,o,e.blob_,t,e.mappings_,n,e.makeProgressCallback_())}catch(t){return e.error_=t,void e.transition_(r.a.ERROR)}var s=e.authWrapper_.makeRequest(a,i);e.request_=s,s.getPromise().then(function(t){e.increaseMultiplier_(),e.request_=null,e.updateProgress_(t.current),t.finalized?(e.metadata_=t.metadata,e.transition_(r.a.SUCCESS)):e.completeTransitions_()},e.errorHandler_)})},e.prototype.increaseMultiplier_=function(){p.h*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},e.prototype.fetchMetadata_=function(){var e=this;this.resolveToken_(function(t){var n=p.e(e.authWrapper_,e.location_,e.mappings_),o=e.authWrapper_.makeRequest(n,t);e.request_=o,o.getPromise().then(function(t){e.request_=null,e.metadata_=t,e.transition_(r.a.SUCCESS)},e.metadataErrorHandler_)})},e.prototype.oneShotUpload_=function(){var e=this;this.resolveToken_(function(t){var n=p.g(e.authWrapper_,e.location_,e.mappings_,e.blob_,e.metadata_),o=e.authWrapper_.makeRequest(n,t);e.request_=o,o.getPromise().then(function(t){e.request_=null,e.metadata_=t,e.updateProgress_(e.blob_.size()),e.transition_(r.a.SUCCESS)},e.errorHandler_)})},e.prototype.updateProgress_=function(e){var t=this.transferred_;this.transferred_=e,this.transferred_!==t&&this.notifyObservers_()},e.prototype.transition_=function(e){if(this.state_!==e)switch(e){case r.a.CANCELING:case r.a.PAUSING:this.state_=e,null!==this.request_&&this.request_.cancel();break;case r.a.RUNNING:var t=this.state_===r.a.PAUSED;this.state_=e,t&&(this.notifyObservers_(),this.start_());break;case r.a.PAUSED:this.state_=e,this.notifyObservers_();break;case r.a.CANCELED:this.error_=l.c(),this.state_=e,this.notifyObservers_();break;case r.a.ERROR:case r.a.SUCCESS:this.state_=e,this.notifyObservers_()}},e.prototype.completeTransitions_=function(){switch(this.state_){case r.a.PAUSING:this.transition_(r.a.PAUSED);break;case r.a.CANCELING:this.transition_(r.a.CANCELED);break;case r.a.RUNNING:this.start_()}},Object.defineProperty(e.prototype,"snapshot",{get:function(){var e=r.d(this.state_);return new i.a(this.transferred_,this.blob_.size(),e,this.metadata_,this,this.ref_)},enumerable:!0,configurable:!0}),e.prototype.on=function(e,t,n,i){function s(t){if(e!==r.b.STATE_CHANGED)throw"Expected one of the event types: ["+r.b.STATE_CHANGED+"]."}function u(e){try{return void f(e)}catch(e){}try{d(e);if(!(h.c(e.next)||h.c(e.error)||h.c(e.complete)))throw"";return}catch(e){throw p}}function l(e){function t(t,n,r){null!==e&&a.g("on",e,arguments);var s=new o.a(t,n,i);return y.addObserver_(s),function(){y.removeObserver_(s)}}return t}function c(e){if(null===e)throw p;u(e)}void 0===t&&(t=void 0),void 0===n&&(n=void 0),void 0===i&&(i=void 0);var p="Expected a function or an Object with one of `next`, `error`, `complete` properties.",f=a.d(!0).validator,d=a.a(null,!0).validator,m=[a.e(s),a.a(u,!0),a.d(!0),a.d(!0)];a.g("on",m,arguments);var y=this,v=[a.a(c),a.d(!0),a.d(!0)];return h.c(t)||h.c(n)||h.c(i)?l(null)(t,n,i):l(v)},e.prototype.then=function(e,t){return this.promise_.then(e,t)},e.prototype.catch=function(e){return this.then(null,e)},e.prototype.addObserver_=function(e){this.observers_.push(e),this.notifyObserver_(e)},e.prototype.removeObserver_=function(e){s.c(this.observers_,e)},e.prototype.notifyObservers_=function(){var e=this;this.finishPromise_(),s.a(this.observers_).forEach(function(t){e.notifyObserver_(t)})},e.prototype.finishPromise_=function(){if(null!==this.resolve_){var e=!0;switch(r.d(this.state_)){case r.c.SUCCESS:Object(u.a)(this.resolve_.bind(null,this.snapshot))();break;case r.c.CANCELED:case r.c.ERROR:var t=this.reject_;Object(u.a)(t.bind(null,this.error_))();break;default:e=!1}e&&(this.resolve_=null,this.reject_=null)}},e.prototype.notifyObserver_=function(e){switch(r.d(this.state_)){case r.c.RUNNING:case r.c.PAUSED:null!==e.next&&Object(u.a)(e.next.bind(e,this.snapshot))();break;case r.c.SUCCESS:null!==e.complete&&Object(u.a)(e.complete.bind(e))();break;case r.c.CANCELED:case r.c.ERROR:null!==e.error&&Object(u.a)(e.error.bind(e,this.error_))();break;default:null!==e.error&&Object(u.a)(e.error.bind(e,this.error_))()}},e.prototype.resume=function(){a.g("resume",[],arguments);var e=this.state_===r.a.PAUSED||this.state_===r.a.PAUSING;return e&&this.transition_(r.a.RUNNING),e},e.prototype.pause=function(){a.g("pause",[],arguments);var e=this.state_===r.a.RUNNING;return e&&this.transition_(r.a.PAUSING),e},e.prototype.cancel=function(){a.g("cancel",[],arguments);var e=this.state_===r.a.RUNNING||this.state_===r.a.PAUSING;return e&&this.transition_(r.a.CANCELING),e},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(14),o=function(){function e(e,t,n){if(r.b(e)||r.a(t)||r.a(n))this.next=e,this.error=t||null,this.complete=n||null;else{var o=e;this.next=o.next||null,this.error=o.error||null,this.complete=o.complete||null}}return e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){function e(e,t,n,r,o,i){this.bytesTransferred=e,this.totalBytes=t,this.state=n,this.metadata=r,this.task=o,this.ref=i}return Object.defineProperty(e.prototype,"downloadURL",{get:function(){if(null!==this.metadata){var e=this.metadata.downloadURLs;return null!=e&&null!=e[0]?e[0]:null}return null},enumerable:!0,configurable:!0}),e}()},function(e,t,n){"use strict";function r(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];o.c(!0).then(function(){e.apply(null,t)})}}t.a=r;var o=n(21)},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(68),o=n(317),i=n(46),a=n(21),s=n(320),u=n(129),l=function(){function e(e,t,n){function r(e,t){return new u.a(e,t)}if(this.bucket_=null,this.authWrapper_=new o.a(e,r,s.a,this,t),this.app_=e,null!=n)this.bucket_=i.a.makeFromBucketSpec(n);else{var a=this.authWrapper_.bucket();null!=a&&(this.bucket_=new i.a(a,""))}this.internals_=new c(this)}return e.prototype.ref=function(e){function t(e){if(/^[A-Za-z]+:\/\//.test(e))throw"Expected child path but got a URL, use refFromURL instead."}if(r.g("ref",[r.e(t,!0)],arguments),null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var n=new u.a(this.authWrapper_,this.bucket_);return null!=e?n.child(e):n},e.prototype.refFromURL=function(e){function t(e){if(!/^[A-Za-z]+:\/\//.test(e))throw"Expected full URL but got a child path, use ref instead.";try{i.a.makeFromUrl(e)}catch(e){throw"Expected valid full URL but got an invalid one."}}return r.g("refFromURL",[r.e(t,!1)],arguments),new u.a(this.authWrapper_,e)},Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this.authWrapper_.maxUploadRetryTime()},enumerable:!0,configurable:!0}),e.prototype.setMaxUploadRetryTime=function(e){r.g("setMaxUploadRetryTime",[r.c()],arguments),this.authWrapper_.setMaxUploadRetryTime(e)},Object.defineProperty(e.prototype,"maxOperationRetryTime",{get:function(){return this.authWrapper_.maxOperationRetryTime()},enumerable:!0,configurable:!0}),e.prototype.setMaxOperationRetryTime=function(e){r.g("setMaxOperationRetryTime",[r.c()],arguments),this.authWrapper_.setMaxOperationRetryTime(e)},Object.defineProperty(e.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!0,configurable:!0}),e}(),c=function(){function e(e){this.service_=e}return e.prototype.delete=function(){return this.service_.authWrapper_.deleteApp(),a.c(void 0)},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(45),o=n(17),i=n(318),a=n(46),s=n(21),u=n(319),l=n(14),c=function(){function e(t,n,o,i,a){if(this.bucket_=null,this.deleted_=!1,this.app_=t,null!==this.app_){var s=this.app_.options;l.a(s)&&(this.bucket_=e.extractBucket_(s))}this.storageRefMaker_=n,this.requestMaker_=o,this.pool_=a,this.service_=i,this.maxOperationRetryTime_=r.d,this.maxUploadRetryTime_=r.e,this.requestMap_=new u.a}return e.extractBucket_=function(e){var t=e[r.c]||null;return null==t?null:a.a.makeFromBucketSpec(t).bucket},e.prototype.getAuthToken=function(){return null!==this.app_&&l.a(this.app_.INTERNAL)&&l.a(this.app_.INTERNAL.getToken)?this.app_.INTERNAL.getToken().then(function(e){return null!==e?e.accessToken:null},function(e){return null}):s.c(null)},e.prototype.bucket=function(){if(this.deleted_)throw o.b();return this.bucket_},e.prototype.service=function(){return this.service_},e.prototype.makeStorageReference=function(e){return this.storageRefMaker_(this,e)},e.prototype.makeRequest=function(e,t){if(this.deleted_)return new i.a(o.b());var n=this.requestMaker_(e,t,this.pool_);return this.requestMap_.addRequest(n),n},e.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requestMap_.clear()},e.prototype.maxUploadRetryTime=function(){return this.maxUploadRetryTime_},e.prototype.setMaxUploadRetryTime=function(e){this.maxUploadRetryTime_=e},e.prototype.maxOperationRetryTime=function(){return this.maxOperationRetryTime_},e.prototype.setMaxOperationRetryTime=function(e){this.maxOperationRetryTime_=e},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(21),o=function(){function e(e){this.promise_=r.b(e)}return e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){void 0===e&&(e=!1)},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(25),o=n(45),i=function(){function e(){this.map_={},this.id_=o.h}return e.prototype.addRequest=function(e){function t(){delete r.map_[n]}var n=this.id_;this.id_++,this.map_[n]=e;var r=this;e.getPromise().then(t,t)},e.prototype.clear=function(){r.b(this.map_,function(e,t){t&&t.cancel(!0)}),this.map_={}},e}()},function(e,t,n){"use strict";function r(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}function o(e){var t="undefined"!==typeof a.default?a.default.SDK_VERSION:"AppManager";e["X-Firebase-Storage-Version"]="webjs/"+t}function i(e,t,n){var i=f.c(e.urlParams),a=e.url+i,s=c.a(e.headers);return r(s,t),o(s),new m(a,e.method,s,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,n)}t.a=i;var a=n(18),s=n(71),u=n(321),l=n(17),c=n(25),p=n(21),h=n(14),f=n(70),d=n(128),m=function(){function e(e,t,n,r,o,i,a,s,u,l,c){this.pendingXhr_=null,this.backoffId_=null,this.resolve_=null,this.reject_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=o.slice(),this.additionalRetryCodes_=i.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=l,this.timeout_=u,this.pool_=c;var h=this;this.promise_=p.a(function(e,t){h.resolve_=e,h.reject_=t,h.start_()})}return e.prototype.start_=function(){function e(e,t){function r(e){var t=e.loaded,r=e.lengthComputable?e.total:-1;null!==n.progressCallback_&&n.progressCallback_(t,r)}if(t)return void e(!1,new y(!1,null,!0));var o=n.pool_.createXhrIo();n.pendingXhr_=o,null!==n.progressCallback_&&o.addUploadProgressListener(r),o.send(n.url_,n.method_,n.body_,n.headers_).then(function(t){null!==n.progressCallback_&&t.removeUploadProgressListener(r),n.pendingXhr_=null,t=t;var o=t.getErrorCode()===d.a.NO_ERROR,i=t.getStatus();if(!o||n.isRetryStatusCode_(i)){var a=t.getErrorCode()===d.a.ABORT;return void e(!1,new y(!1,null,a))}var u=s.b(n.successCodes_,i);e(!0,new y(u,t))})}function t(e,t){var r=n.resolve_,o=n.reject_,i=t.xhr;if(t.wasSuccessCode)try{var a=n.callback_(i,i.getResponseText());h.c(a)?r(a):r()}catch(e){o(e)}else if(null!==i){var s=l.s();s.setServerResponseProp(i.getResponseText()),o(n.errorCallback_?n.errorCallback_(i,s):s)}else if(t.canceled){var s=n.appDelete_?l.b():l.c();o(s)}else{var s=l.o();o(s)}}var n=this;this.canceled_?t(!1,new y(!1,null,!0)):this.backoffId_=u.a(e,t,this.timeout_)},e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&u.b(this.backoffId_),null!==this.pendingXhr_&&this.pendingXhr_.abort()},e.prototype.isRetryStatusCode_=function(e){var t=e>=500&&e<600,n=[408,429],r=s.b(n,e),o=s.b(this.additionalRetryCodes_,e);return t||r||o},e}(),y=function(){function e(e,t,n){this.wasSuccessCode=e,this.xhr=t,this.canceled=!!n}return e}()},function(e,t,n){"use strict";function r(e,t,n){function r(){return 2===p}function o(){h||(h=!0,t.apply(null,arguments))}function i(t){l=setTimeout(function(){l=null,e(a,r())},t)}function a(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(!h){if(e)return void o.apply(null,arguments);if(r()||c)return void o.apply(null,arguments);u<64&&(u*=2);var a;1===p?(p=2,a=0):a=1e3*(u+Math.random()),i(a)}}function s(e){f||(f=!0,h||(null!==l?(e||(p=2),clearTimeout(l),i(0)):e||(p=1)))}var u=1,l=null,c=!1,p=0,h=!1,f=!1;return i(0),setTimeout(function(){c=!0,s(!0)},n),s}function o(e){e(!1)}t.a=r,t.b=o},function(e,t){},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(1),s=(n.n(a),n(3)),u=n.n(s),l=n(133);n(73);t.a=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"store",n=arguments[1],s=n||t+"Subscription",c=function(e){function n(i,a){r(this,n);var s=o(this,e.call(this,i,a));return s[t]=i.store,s}return i(n,e),n.prototype.getChildContext=function(){var e;return e={},e[t]=this[t],e[s]=null,e},n.prototype.render=function(){return a.Children.only(this.props.children)},n}(a.Component);return c.propTypes={store:l.a.isRequired,children:u.a.element.isRequired},c.childContextTypes=(e={},e[t]=l.a.isRequired,e[s]=l.b,e),c}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){var e=[],t=[];return{clear:function(){t=i,e=i},notify:function(){for(var n=e=t,r=0;r<n.length;r++)n[r]()},get:function(){return t},subscribe:function(n){var r=!0;return t===e&&(t=e.slice()),t.push(n),function(){r&&e!==i&&(r=!1,t===e&&(t=e.slice()),t.splice(t.indexOf(n),1))}}}}n.d(t,"a",function(){return s});var i=null,a={notify:function(){}},s=function(){function e(t,n,o){r(this,e),this.store=t,this.parentSub=n,this.onStateChange=o,this.unsubscribe=null,this.listeners=a}return e.prototype.addNestedSub=function(e){return this.trySubscribe(),this.listeners.subscribe(e)},e.prototype.notifyNestedSubs=function(){this.listeners.notify()},e.prototype.isSubscribed=function(){return Boolean(this.unsubscribe)},e.prototype.trySubscribe=function(){this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.onStateChange):this.store.subscribe(this.onStateChange),this.listeners=o())},e.prototype.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=a)},e}()},function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e,t,n){for(var r=t.length-1;r>=0;r--){var o=t[r](e);if(o)return o}return function(t,r){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function i(e,t){return e===t}var a=n(134),s=n(326),u=n(327),l=n(343),c=n(344),p=n(345),h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.connectHOC,n=void 0===t?a.a:t,f=e.mapStateToPropsFactories,d=void 0===f?l.a:f,m=e.mapDispatchToPropsFactories,y=void 0===m?u.a:m,v=e.mergePropsFactories,g=void 0===v?c.a:v,_=e.selectorFactory,b=void 0===_?p.a:_;return function(e,t,a){var u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},l=u.pure,c=void 0===l||l,p=u.areStatesEqual,f=void 0===p?i:p,m=u.areOwnPropsEqual,v=void 0===m?s.a:m,_=u.areStatePropsEqual,w=void 0===_?s.a:_,x=u.areMergedPropsEqual,E=void 0===x?s.a:x,C=r(u,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),T=o(e,d,"mapStateToProps"),S=o(t,y,"mapDispatchToProps"),P=o(a,g,"mergeProps");return n(b,h({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:T,initMapDispatchToProps:S,initMergeProps:P,pure:c,areStatesEqual:f,areOwnPropsEqual:v,areStatePropsEqual:w,areMergedPropsEqual:E},C))}}()},function(e,t,n){"use strict";function r(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function o(e,t){if(r(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),o=Object.keys(t);if(n.length!==o.length)return!1;for(var a=0;a<n.length;a++)if(!i.call(t,n[a])||!r(e[n[a]],t[n[a]]))return!1;return!0}t.a=o;var i=Object.prototype.hasOwnProperty},function(e,t,n){"use strict";function r(e){return"function"===typeof e?Object(s.b)(e,"mapDispatchToProps"):void 0}function o(e){return e?void 0:Object(s.a)(function(e){return{dispatch:e}})}function i(e){return e&&"object"===typeof e?Object(s.a)(function(t){return Object(a.b)(e,t)}):void 0}var a=n(135),s=n(140);t.a=[r,o,i]},function(e,t,n){"use strict";function r(e){return null==e?void 0===e?u:s:l&&l in Object(e)?Object(i.a)(e):Object(a.a)(e)}var o=n(137),i=n(331),a=n(332),s="[object Null]",u="[object Undefined]",l=o.a?o.a.toStringTag:void 0;t.a=r},function(e,t,n){"use strict";var r=n(330),o="object"==typeof self&&self&&self.Object===Object&&self,i=r.a||o||Function("return this")();t.a=i},function(e,t,n){"use strict";(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.a=n}).call(t,n(23))},function(e,t,n){"use strict";function r(e){var t=a.call(e,u),n=e[u];try{e[u]=void 0;var r=!0}catch(e){}var o=s.call(e);return r&&(t?e[u]=n:delete e[u]),o}var o=n(137),i=Object.prototype,a=i.hasOwnProperty,s=i.toString,u=o.a?o.a.toStringTag:void 0;t.a=r},function(e,t,n){"use strict";function r(e){return i.call(e)}var o=Object.prototype,i=o.toString;t.a=r},function(e,t,n){"use strict";var r=n(334),o=Object(r.a)(Object.getPrototypeOf,Object);t.a=o},function(e,t,n){"use strict";function r(e,t){return function(n){return e(t(n))}}t.a=r},function(e,t,n){"use strict";function r(e){return null!=e&&"object"==typeof e}t.a=r},function(e,t,n){e.exports=n(337)},function(e,t,n){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0});var o,i=n(339),a=function(e){return e&&e.__esModule?e:{default:e}}(i);o="undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof e?e:r;var s=(0,a.default)(o);t.default=s}).call(t,n(23),n(338)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";function r(e){var t,n=e.Symbol;return"function"===typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";n(136),n(74),n(138)},function(e,t,n){"use strict";function r(e,t){return function(){return t(e.apply(void 0,arguments))}}function o(e,t){if("function"===typeof e)return r(e,t);if("object"!==typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var n=Object.keys(e),o={},i=0;i<n.length;i++){var a=n[i],s=e[a];"function"===typeof s&&(o[a]=r(s,t))}return o}t.a=o},function(e,t,n){"use strict";function r(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(n,r,a){var s=e(n,r,a),u=s.dispatch,l=[],c={getState:s.getState,dispatch:function(e){return u(e)}};return l=t.map(function(e){return e(c)}),u=o.a.apply(void 0,l)(s.dispatch),i({},s,{dispatch:u})}}}t.a=r;var o=n(139),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}},function(e,t,n){"use strict";function r(e){return"function"===typeof e?Object(i.b)(e,"mapStateToProps"):void 0}function o(e){return e?void 0:Object(i.a)(function(){return{}})}var i=n(140);t.a=[r,o]},function(e,t,n){"use strict";function r(e,t,n){return s({},n,e,t)}function o(e){return function(t,n){var r=(n.displayName,n.pure),o=n.areMergedPropsEqual,i=!1,a=void 0;return function(t,n,s){var u=e(t,n,s);return i?r&&o(u,a)||(a=u):(i=!0,a=u),a}}}function i(e){return"function"===typeof e?o(e):void 0}function a(e){return e?void 0:function(){return r}}var s=(n(141),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e});t.a=[i,a]},function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e,t,n,r){return function(o,i){return n(e(o,i),t(r,i),i)}}function i(e,t,n,r,o){function i(o,i){return d=o,m=i,y=e(d,m),v=t(r,m),g=n(y,v,m),f=!0,g}function a(){return y=e(d,m),t.dependsOnOwnProps&&(v=t(r,m)),g=n(y,v,m)}function s(){return e.dependsOnOwnProps&&(y=e(d,m)),t.dependsOnOwnProps&&(v=t(r,m)),g=n(y,v,m)}function u(){var t=e(d,m),r=!h(t,y);return y=t,r&&(g=n(y,v,m)),g}function l(e,t){var n=!p(t,m),r=!c(e,d);return d=e,m=t,n&&r?a():n?s():r?u():g}var c=o.areStatesEqual,p=o.areOwnPropsEqual,h=o.areStatePropsEqual,f=!1,d=void 0,m=void 0,y=void 0,v=void 0,g=void 0;return function(e,t){return f?l(e,t):i(e,t)}}function a(e,t){var n=t.initMapStateToProps,a=t.initMapDispatchToProps,s=t.initMergeProps,u=r(t,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),l=n(e,u),c=a(e,u),p=s(e,u);return(u.pure?i:o)(l,c,p,e,u)}t.a=a;n(346)},function(e,t,n){"use strict";n(73)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(1),s=n.n(a),u=n(15),l=(n.n(u),n(22)),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleFav=function(){console.log(n.state.favorite),n.props.userId?(n.props.onFav(n.props.item.post_id,n.props.item.favorited),n.setState({favorite:!n.state.favorite})):n.props.login()},n.state={favorite:!1},n}return i(t,e),c(t,[{key:"componentDidMount",value:function(){console.log("MOUNTING THAT COMPONENT")}},{key:"render",value:function(){return s.a.createElement("div",{className:"list-item-favorite",onClick:this.handleFav},s.a.createElement("i",{id:"heart-o",className:"true"==this.props.item.favorited?"fa fa-heart-o selected":"fa fa-heart-o","aria-hidden":"true"}),s.a.createElement("i",{id:"heart",className:"true"==this.props.item.favorited?"fa fa-heart selected":"fa fa-heart","aria-hidden":"true"}))}}]),t}(a.Component);t.a=Object(l.b)(function(e){return e})(p)},function(e,t){},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(1),s=n.n(a),u=n(15),l=n.n(u),c=n(350),p=(n.n(c),n(5)),h=n(351),f=n(353),d=n(16),m=n(354),y=n(22),v=n(47),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.emailLoginModal=function(){n.setState({modal:!0})},n.closeEmailLoginModal=function(){n.setState({modal:!1})},n.showLoginModal=function(){n.setState({loginModal:!0})},n.closeLoginModal=function(){n.setState({loginModal:!1})},console.log(e),n.state={post:[],modal:!1,timestamp:"",loginModal:!1,redirect:""},n.closeEmailLoginModal=n.closeEmailLoginModal.bind(n),n}return i(t,e),g(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({uid:this.props.userId}),d.a.auth().onAuthStateChanged(function(t){t&&e.setState({user:t.email})}),this.getPost()}},{key:"getPost",value:function(){var e=this,t=this.props.match.params.post_id,n={post_id:t,uid:this.props.userId};l.a.post("/api/getPost",n).then(function(n){e.setState({post:n.data,redirect:"post"}),console.log(e.state),l.a.get("/api/updateCounter/"+t);var r=new Date(n.data[0].time_stamp),o=new Date,i=function(e,t){var n=e-t;return n<6e4?Math.round(n/1e3)+" seconds ago":n<36e5?Math.round(n/6e4)+" minutes ago":n<864e5?Math.round(n/36e5)+" hours ago":n<2592e6?Math.round(n/864e5)+" days ago":n<31536e6?Math.round(n/2592e6)+" months ago":Math.round(n/31536e6)+" years ago"}(o,r);e.setState({timestamp:i})})}},{key:"handleFavPost",value:function(e,t){var n=(this.state.uid,{uid:this.state.uid,post_id:e});this.state.user?0==t?l.a.post("/api/postFav",n):l.a.post("/api/removeFav",n):this.setState({modal:!0})}},{key:"renderPostItem",value:function(e,t){var n=this,r={backgroundImage:"url("+e.image_url+")"};return s.a.createElement("div",{key:"index",className:"post-item-container"},s.a.createElement("div",{className:"post-item-left-container"},s.a.createElement("h3",{className:"post-item-header"},e.title)),s.a.createElement("div",{className:"post-item-left-container"},s.a.createElement("div",{className:"post-item-image-container",style:r})),s.a.createElement("div",{className:"post-item-left-container"},s.a.createElement("div",{className:"post-item-description-container"},s.a.createElement("div",{className:"postitem-description-header"},s.a.createElement("h4",{className:"post-item-description-tag"},e.tag),s.a.createElement("p",{className:"post-item-description-timestamp"},"\u2013 ",this.state.timestamp)),s.a.createElement("p",{className:"post-item-description"},e.description))),s.a.createElement("div",{className:"post-item-right-container"},s.a.createElement("p",{className:"post-item-header"},0!=e.price&&"$"+e.price),s.a.createElement("button",{id:"email-btn",className:"btn",onClick:function(e){return n.emailLoginModal(e)}},"Contact the Owner"),s.a.createElement(f.a,{item:e,key:t,login:this.showLoginModal.bind(this),onFav:this.handleFavPost.bind(this)}),s.a.createElement(m.a,{userInfo:e})),this.state.modal&&s.a.createElement(h.a,{userInfo:e,close:this.closeEmailLoginModal}))}},{key:"render",value:function(){var e=this;console.log("Post - Parent Render");this.state.post;return s.a.createElement("div",{className:"post-container"},s.a.createElement("div",{className:"content-container"},this.state.post.map(function(t,n){return e.renderPostItem(t,n)}),this.state.loginModal&&s.a.createElement(v.a,{post:this.getPost.bind(this),state:this.state,closeModal:this.closeLoginModal})))}}]),t}(a.Component);t.a=Object(p.e)(Object(y.b)(function(e){return e})(_))},function(e,t){},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(1),s=n.n(a),u=(n(16),n(15)),l=n.n(u),c=n(352),p=(n.n(c),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),h=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return console.log(e),n.state={creatorEmail:n.props.userInfo.email,yourEmail:"",subject:n.props.userInfo.title,message:""},console.log(n.state),n}return i(t,e),p(t,[{key:"handleEmail",value:function(e){var t={creatorEmail:this.state.creatorEmail,yourEmail:this.state.yourEmail,subject:this.state.subject,message:this.state.message};l.a.post("/api/sendMail",t),this.props.close}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"email-modal-background"},s.a.createElement("div",{className:"close-email-modal",onClick:this.props.close},"X"),s.a.createElement("div",{className:"email-modal-container"},s.a.createElement("h1",{className:"email-modal-sendmsg"},"Send Message"),s.a.createElement("form",{className:"email-modal-form-container"},s.a.createElement("div",{className:"email-modal-top-container"},s.a.createElement("label",{className:"email-modal-creators-email-header"},"Creators Email"),s.a.createElement("br",null),s.a.createElement("div",{className:"email-modal-creators-email"},s.a.createElement("h3",null,this.props.userInfo.email)),s.a.createElement("hr",null),s.a.createElement("label",{className:"email-modal-subject"},"Subject"),s.a.createElement("br",null),s.a.createElement("div",{className:"email-modal-title-tag"},s.a.createElement("h3",null,this.props.userInfo.title)),s.a.createElement("hr",null),s.a.createElement("label",{className:"email-modal-your-email-header"},"Enter your email"),s.a.createElement("input",{autoFocus:!0,className:"input",type:"email",onChange:function(t){return e.setState({yourEmail:t.target.value})}}),s.a.createElement("hr",null)),s.a.createElement("label",{className:"email-modal-message-header"},"Message"),s.a.createElement("textarea",{className:"email-modal-message-input",type:"text",onChange:function(t){return e.setState({message:t.target.value})}}),s.a.createElement("input",{id:"email-send-btn",className:"btn",type:"submit",value:"Send",onClick:function(t){return e.handleEmail(t)}}))))}}]),t}(a.Component);t.a=h},function(e,t){},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(1),s=n.n(a),u=n(15),l=(n.n(u),n(22)),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleFav=function(){n.props.userId?(n.props.onFav(n.props.item.post_id,n.state.favorite),n.setState({favorite:!n.state.favorite})):n.props.login()},n.state={favorite:!1},n}return i(t,e),c(t,[{key:"componentWillMount",value:function(){"true"===this.props.item.favorited&&this.setState({favorite:!0})}},{key:"componentWillReceiveProps",value:function(e){"true"===e.item.favorited&&this.setState({favorite:!0})}},{key:"render",value:function(){var e=void 0;return e=this.state.favorite?"Unfavorite":"Add to favorite",s.a.createElement("div",{onClick:this.handleFav},s.a.createElement("button",{id:"fav-btn",className:"btn","aria-hidden":"true"},e))}}]),t}(a.Component);t.a=Object(l.b)(function(e){return e})(p)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(1),s=n.n(a),u=n(355),l=n.n(u),c=n(356),p=(n.n(c),n(15)),h=n.n(p),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={zoom:12,post:[],zip:n.props.userInfo.zipcode},n}return i(t,e),f(t,[{key:"componentDidUpdate",value:function(e){var t=this,n=this.state.zoom,r=e.userInfo.zipcode,o="https://maps.googleapis.com/maps/api/geocode/json?address="+r+"&key=AIzaSyDT-5CDLUilrcXFV8gdB1QfLUYK3GFz2vE";h.a.get(o).then(function(e){var r=parseFloat(e.data.results[0].geometry.location.lat),o=parseFloat(e.data.results[0].geometry.location.lng);parseFloat(e.data.results[0].geometry.location.lng),parseFloat(e.data.results[0].geometry.location.lat);l.a.accessToken="pk.eyJ1IjoicnVzc2VsbGJ3cmlnaHQiLCJhIjoiY2o5b2ZnNzgyMnVwMDMzcGdiaWs3Y2F2aiJ9.pH4AUvYt_3c4ls13mhCDlA";var i=new l.a.Map({container:t.mapContainer,style:"mapbox://styles/mapbox/light-v9",center:[o,r],zoom:n,interactive:!1,scrollZoom:!1});i.on("load",function(){var e=document.createElement("div");e.id="marker",new l.a.Marker(e).setLngLat([o,r]).addTo(i)})})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"map-container"},s.a.createElement("div",{ref:function(t){return e.mapContainer=t},className:"Map"}))}}]),t}(a.Component);t.a=d},function(e,t,n){(function(t){var n,n;!function(t){e.exports=t()}(function(){var e;return function e(t,r,o){function i(s,u){if(!r[s]){if(!t[s]){var l="function"==typeof n&&n;if(!u&&l)return n(s,!0);if(a)return a(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var p=r[s]={exports:{}};t[s][0].call(p.exports,function(e){var n=t[s][1][e];return i(n||e)},p,p.exports,e,t,r,o)}return r[s].exports}for(var a="function"==typeof n&&n,s=0;s<o.length;s++)i(o[s]);return i}({1:[function(t,n,r){!function(t,o){"object"==typeof r&&"undefined"!=typeof n?n.exports=o():"function"==typeof e&&e.amd?e(o):t.glMatrix=o()}(this,function(){"use strict";function e(e,t,n){var r=t[0],o=t[1],i=t[2];return e[0]=r*n[0]+o*n[3]+i*n[6],e[1]=r*n[1]+o*n[4]+i*n[7],e[2]=r*n[2]+o*n[5]+i*n[8],e}function t(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3];return e[0]=n[0]*r+n[4]*o+n[8]*i+n[12]*a,e[1]=n[1]*r+n[5]*o+n[9]*i+n[13]*a,e[2]=n[2]*r+n[6]*o+n[10]*i+n[14]*a,e[3]=n[3]*r+n[7]*o+n[11]*i+n[15]*a,e}function n(){var e=new Float32Array(4);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e}function r(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=Math.sin(n),u=Math.cos(n);return e[0]=r*u+i*s,e[1]=o*u+a*s,e[2]=r*-s+i*u,e[3]=o*-s+a*u,e}function o(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=n[0],u=n[1];return e[0]=r*s,e[1]=o*s,e[2]=i*u,e[3]=a*u,e}function i(){var e=new Float32Array(9);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function a(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function s(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function u(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function l(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],s=t[5],u=t[6],l=t[7],c=t[8],p=t[9],h=t[10],f=t[11],d=t[12],m=t[13],y=t[14],v=t[15],g=n*s-r*a,_=n*u-o*a,b=n*l-i*a,w=r*u-o*s,x=r*l-i*s,E=o*l-i*u,C=c*m-p*d,T=c*y-h*d,S=c*v-f*d,P=p*y-h*m,O=p*v-f*m,A=h*v-f*y,k=g*A-_*O+b*P+w*S-x*T+E*C;return k?(k=1/k,e[0]=(s*A-u*O+l*P)*k,e[1]=(o*O-r*A-i*P)*k,e[2]=(m*E-y*x+v*w)*k,e[3]=(h*x-p*E-f*w)*k,e[4]=(u*S-a*A-l*T)*k,e[5]=(n*A-o*S+i*T)*k,e[6]=(y*b-d*E-v*_)*k,e[7]=(c*E-h*b+f*_)*k,e[8]=(a*O-s*S+l*C)*k,e[9]=(r*S-n*O-i*C)*k,e[10]=(d*x-m*b+v*g)*k,e[11]=(p*b-c*x-f*g)*k,e[12]=(s*T-a*P-u*C)*k,e[13]=(n*P-r*T+o*C)*k,e[14]=(m*_-d*w-y*g)*k,e[15]=(c*w-p*_+h*g)*k,e):null}function c(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=t[4],u=t[5],l=t[6],c=t[7],p=t[8],h=t[9],f=t[10],d=t[11],m=t[12],y=t[13],v=t[14],g=t[15],_=n[0],b=n[1],w=n[2],x=n[3];return e[0]=_*r+b*s+w*p+x*m,e[1]=_*o+b*u+w*h+x*y,e[2]=_*i+b*l+w*f+x*v,e[3]=_*a+b*c+w*d+x*g,_=n[4],b=n[5],w=n[6],x=n[7],e[4]=_*r+b*s+w*p+x*m,e[5]=_*o+b*u+w*h+x*y,e[6]=_*i+b*l+w*f+x*v,e[7]=_*a+b*c+w*d+x*g,_=n[8],b=n[9],w=n[10],x=n[11],e[8]=_*r+b*s+w*p+x*m,e[9]=_*o+b*u+w*h+x*y,e[10]=_*i+b*l+w*f+x*v,e[11]=_*a+b*c+w*d+x*g,_=n[12],b=n[13],w=n[14],x=n[15],e[12]=_*r+b*s+w*p+x*m,e[13]=_*o+b*u+w*h+x*y,e[14]=_*i+b*l+w*f+x*v,e[15]=_*a+b*c+w*d+x*g,e}function p(e,t,n){var r,o,i,a,s,u,l,c,p,h,f,d,m=n[0],y=n[1],v=n[2];return t===e?(e[12]=t[0]*m+t[4]*y+t[8]*v+t[12],e[13]=t[1]*m+t[5]*y+t[9]*v+t[13],e[14]=t[2]*m+t[6]*y+t[10]*v+t[14],e[15]=t[3]*m+t[7]*y+t[11]*v+t[15]):(r=t[0],o=t[1],i=t[2],a=t[3],s=t[4],u=t[5],l=t[6],c=t[7],p=t[8],h=t[9],f=t[10],d=t[11],e[0]=r,e[1]=o,e[2]=i,e[3]=a,e[4]=s,e[5]=u,e[6]=l,e[7]=c,e[8]=p,e[9]=h,e[10]=f,e[11]=d,e[12]=r*m+s*y+p*v+t[12],e[13]=o*m+u*y+h*v+t[13],e[14]=i*m+l*y+f*v+t[14],e[15]=a*m+c*y+d*v+t[15]),e}function h(e,t,n){var r=n[0],o=n[1],i=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*o,e[5]=t[5]*o,e[6]=t[6]*o,e[7]=t[7]*o,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function f(e,t,n){var r=Math.sin(n),o=Math.cos(n),i=t[4],a=t[5],s=t[6],u=t[7],l=t[8],c=t[9],p=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=i*o+l*r,e[5]=a*o+c*r,e[6]=s*o+p*r,e[7]=u*o+h*r,e[8]=l*o-i*r,e[9]=c*o-a*r,e[10]=p*o-s*r,e[11]=h*o-u*r,e}function d(e,t,n){var r=Math.sin(n),o=Math.cos(n),i=t[0],a=t[1],s=t[2],u=t[3],l=t[4],c=t[5],p=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=i*o+l*r,e[1]=a*o+c*r,e[2]=s*o+p*r,e[3]=u*o+h*r,e[4]=l*o-i*r,e[5]=c*o-a*r,e[6]=p*o-s*r,e[7]=h*o-u*r,e}function m(e,t,n,r,o){var i=1/Math.tan(t/2),a=1/(r-o);return e[0]=i/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(o+r)*a,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*o*r*a,e[15]=0,e}function y(e,t,n,r,o,i,a){var s=1/(t-n),u=1/(r-o),l=1/(i-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*l,e[11]=0,e[12]=(t+n)*s,e[13]=(o+r)*u,e[14]=(a+i)*l,e[15]=1,e}return function(){var e=new Float32Array(3);e[0]=0,e[1]=0,e[2]=0}(),function(){var e=new Float32Array(4);e[0]=0,e[1]=0,e[2]=0,e[3]=0}(),{vec3:{transformMat3:e},vec4:{transformMat4:t},mat2:{create:n,rotate:r,scale:o},mat3:{create:i,fromRotation:a},mat4:{create:s,identity:u,translate:p,scale:h,multiply:c,perspective:m,rotateX:f,rotateZ:d,invert:l,ortho:y}}})},{}],2:[function(e,t,n){"use strict";function r(e,t){this.x=e,this.y=t}t.exports=r,r.prototype={clone:function(){return new r(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,n=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=n,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=t*this.x-n*this.y,o=n*this.x+t*this.y;return this.x=r,this.y=o,this},_rotateAround:function(e,t){var n=Math.cos(e),r=Math.sin(e),o=t.x+n*(this.x-t.x)-r*(this.y-t.y),i=t.y+r*(this.x-t.x)+n*(this.y-t.y);return this.x=o,this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},r.convert=function(e){return e instanceof r?e:Array.isArray(e)?new r(e[0],e[1]):e}},{}],3:[function(t,n,r){!function(t,o){"object"==typeof r&&"undefined"!=typeof n?n.exports=o():"function"==typeof e&&e.amd?e(o):t.ShelfPack=o()}(this,function(){function e(e,t,n){n=n||{},this.w=e||64,this.h=t||64,this.autoResize=!!n.autoResize,this.shelves=[],this.freebins=[],this.stats={},this.bins={},this.maxId=0}function t(e,t,n){this.x=0,this.y=e,this.w=this.free=t,this.h=n}function n(e,t,n,r,o,i,a){this.id=e,this.x=t,this.y=n,this.w=r,this.h=o,this.maxw=i||r,this.maxh=a||o,this.refcount=0}return e.prototype.pack=function(e,t){e=[].concat(e),t=t||{};for(var n,r,o,i,a=[],s=0;s<e.length;s++)if(n=e[s].w||e[s].width,r=e[s].h||e[s].height,o=e[s].id,n&&r){if(!(i=this.packOne(n,r,o)))continue;t.inPlace&&(e[s].x=i.x,e[s].y=i.y,e[s].id=i.id),a.push(i)}return this.shrink(),a},e.prototype.packOne=function(e,n,r){var o,i,a,s,u={freebin:-1,shelf:-1,waste:1/0},l=0;if("string"==typeof r||"number"==typeof r){if(o=this.getBin(r))return this.ref(o),o;"number"==typeof r&&(this.maxId=Math.max(r,this.maxId))}else r=++this.maxId;for(s=0;s<this.freebins.length;s++){if(o=this.freebins[s],n===o.maxh&&e===o.maxw)return this.allocFreebin(s,e,n,r);n>o.maxh||e>o.maxw||n<=o.maxh&&e<=o.maxw&&(a=o.maxw*o.maxh-e*n)<u.waste&&(u.waste=a,u.freebin=s)}for(s=0;s<this.shelves.length;s++)if(i=this.shelves[s],l+=i.h,!(e>i.free)){if(n===i.h)return this.allocShelf(s,e,n,r);n>i.h||n<i.h&&(a=(i.h-n)*e)<u.waste&&(u.freebin=-1,u.waste=a,u.shelf=s)}if(-1!==u.freebin)return this.allocFreebin(u.freebin,e,n,r);if(-1!==u.shelf)return this.allocShelf(u.shelf,e,n,r);if(n<=this.h-l&&e<=this.w)return i=new t(l,this.w,n),this.allocShelf(this.shelves.push(i)-1,e,n,r);if(this.autoResize){var c,p,h,f;return c=p=this.h,h=f=this.w,(h<=c||e>h)&&(f=2*Math.max(e,h)),(c<h||n>c)&&(p=2*Math.max(n,c)),this.resize(f,p),this.packOne(e,n,r)}return null},e.prototype.allocFreebin=function(e,t,n,r){var o=this.freebins.splice(e,1)[0];return o.id=r,o.w=t,o.h=n,o.refcount=0,this.bins[r]=o,this.ref(o),o},e.prototype.allocShelf=function(e,t,n,r){var o=this.shelves[e],i=o.alloc(t,n,r);return this.bins[r]=i,this.ref(i),i},e.prototype.shrink=function(){if(this.shelves.length>0){for(var e=0,t=0,n=0;n<this.shelves.length;n++){var r=this.shelves[n];t+=r.h,e=Math.max(r.w-r.free,e)}this.resize(e,t)}},e.prototype.getBin=function(e){return this.bins[e]},e.prototype.ref=function(e){if(1==++e.refcount){var t=e.h;this.stats[t]=1+(0|this.stats[t])}return e.refcount},e.prototype.unref=function(e){return 0===e.refcount?0:(0==--e.refcount&&(this.stats[e.h]--,delete this.bins[e.id],this.freebins.push(e)),e.refcount)},e.prototype.clear=function(){this.shelves=[],this.freebins=[],this.stats={},this.bins={},this.maxId=0},e.prototype.resize=function(e,t){this.w=e,this.h=t;for(var n=0;n<this.shelves.length;n++)this.shelves[n].resize(e);return!0},t.prototype.alloc=function(e,t,r){if(e>this.free||t>this.h)return null;var o=this.x;return this.x+=e,this.free-=e,new n(r,o,this.y,e,t,e,this.h)},t.prototype.resize=function(e){return this.free+=e-this.w,this.w=e,!0},e})},{}],4:[function(e,t,n){"use strict";function r(e,t,n,r,o,i){this.fontSize=e||24,this.buffer=void 0===t?3:t,this.cutoff=r||.25,this.fontFamily=o||"sans-serif",this.fontWeight=i||"normal",this.radius=n||8;var a=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.d=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Int16Array(a),this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function o(e,t,n,r,o,a,s){for(var u=0;u<t;u++){for(var l=0;l<n;l++)r[l]=e[l*t+u];for(i(r,o,a,s,n),l=0;l<n;l++)e[l*t+u]=o[l]}for(l=0;l<n;l++){for(u=0;u<t;u++)r[u]=e[l*t+u];for(i(r,o,a,s,t),u=0;u<t;u++)e[l*t+u]=Math.sqrt(o[u])}}function i(e,t,n,r,o){n[0]=0,r[0]=-a,r[1]=+a;for(var i=1,s=0;i<o;i++){for(var u=(e[i]+i*i-(e[n[s]]+n[s]*n[s]))/(2*i-2*n[s]);u<=r[s];)s--,u=(e[i]+i*i-(e[n[s]]+n[s]*n[s]))/(2*i-2*n[s]);s++,n[s]=i,r[s]=u,r[s+1]=+a}for(i=0,s=0;i<o;i++){for(;r[s+1]<i;)s++;t[i]=(i-n[s])*(i-n[s])+e[n[s]]}}t.exports=r;var a=1e20;r.prototype.draw=function(e){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(e,this.buffer,this.middle);for(var t=this.ctx.getImageData(0,0,this.size,this.size),n=new Uint8ClampedArray(this.size*this.size),r=0;r<this.size*this.size;r++){var i=t.data[4*r+3]/255;this.gridOuter[r]=1===i?0:0===i?a:Math.pow(Math.max(0,.5-i),2),this.gridInner[r]=1===i?a:0===i?0:Math.pow(Math.max(0,i-.5),2)}for(o(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),o(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),r=0;r<this.size*this.size;r++){var s=this.gridOuter[r]-this.gridInner[r];n[r]=Math.max(0,Math.min(255,Math.round(255-255*(s/this.radius+this.cutoff))))}return n}},{}],5:[function(e,t,n){function r(e,t,n,r){this.cx=3*e,this.bx=3*(n-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(r-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=r,this.p2x=n,this.p2y=r}t.exports=r,r.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},r.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},r.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},r.prototype.solveCurveX=function(e,t){void 0===t&&(t=1e-6);var n,r,o,i,a;for(o=e,a=0;a<8;a++){if(i=this.sampleCurveX(o)-e,Math.abs(i)<t)return o;var s=this.sampleCurveDerivativeX(o);if(Math.abs(s)<1e-6)break;o-=i/s}if(n=0,r=1,(o=e)<n)return n;if(o>r)return r;for(;n<r;){if(i=this.sampleCurveX(o),Math.abs(i-e)<t)return o;e>i?n=o:r=o,o=.5*(r-n)+n}return o},r.prototype.solve=function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}},{}],6:[function(e,t,n){t.exports.VectorTile=e("./lib/vectortile.js"),t.exports.VectorTileFeature=e("./lib/vectortilefeature.js"),t.exports.VectorTileLayer=e("./lib/vectortilelayer.js")},{"./lib/vectortile.js":7,"./lib/vectortilefeature.js":8,"./lib/vectortilelayer.js":9}],7:[function(e,t,n){"use strict";function r(e,t){this.layers=e.readFields(o,{},t)}function o(e,t,n){if(3===e){var r=new i(n,n.readVarint()+n.pos);r.length&&(t[r.name]=r)}}var i=e("./vectortilelayer");t.exports=r},{"./vectortilelayer":9}],8:[function(e,t,n){"use strict";function r(e,t,n,r,i){this.properties={},this.extent=n,this.type=0,this._pbf=e,this._geometry=-1,this._keys=r,this._values=i,e.readFields(o,this,t)}function o(e,t,n){1==e?t.id=n.readVarint():2==e?i(n,t):3==e?t.type=n.readVarint():4==e&&(t._geometry=n.pos)}function i(e,t){for(var n=e.readVarint()+e.pos;e.pos<n;){var r=t._keys[e.readVarint()],o=t._values[e.readVarint()];t.properties[r]=o}}function a(e){var t=e.length;if(t<=1)return[e];for(var n,r,o=[],i=0;i<t;i++){var a=s(e[i]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(n&&o.push(n),n=[e[i]]):n.push(e[i]))}return n&&o.push(n),o}function s(e){for(var t,n,r=0,o=0,i=e.length,a=i-1;o<i;a=o++)t=e[o],n=e[a],r+=(n.x-t.x)*(t.y+n.y);return r}var u=e("@mapbox/point-geometry");t.exports=r,r.types=["Unknown","Point","LineString","Polygon"],r.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,n=e.readVarint()+e.pos,r=1,o=0,i=0,a=0,s=[];e.pos<n;){if(!o){var l=e.readVarint();r=7&l,o=l>>3}if(o--,1===r||2===r)i+=e.readSVarint(),a+=e.readSVarint(),1===r&&(t&&s.push(t),t=[]),t.push(new u(i,a));else{if(7!==r)throw new Error("unknown command "+r);t&&t.push(t[0].clone())}}return t&&s.push(t),s},r.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,n=1,r=0,o=0,i=0,a=1/0,s=-1/0,u=1/0,l=-1/0;e.pos<t;){if(!r){var c=e.readVarint();n=7&c,r=c>>3}if(r--,1===n||2===n)o+=e.readSVarint(),i+=e.readSVarint(),o<a&&(a=o),o>s&&(s=o),i<u&&(u=i),i>l&&(l=i);else if(7!==n)throw new Error("unknown command "+n)}return[a,u,s,l]},r.prototype.toGeoJSON=function(e,t,n){function o(e){for(var t=0;t<e.length;t++){var n=e[t],r=180-360*(n.y+c)/u;e[t]=[360*(n.x+l)/u-180,360/Math.PI*Math.atan(Math.exp(r*Math.PI/180))-90]}}var i,s,u=this.extent*Math.pow(2,n),l=this.extent*e,c=this.extent*t,p=this.loadGeometry(),h=r.types[this.type];switch(this.type){case 1:var f=[];for(i=0;i<p.length;i++)f[i]=p[i][0];p=f,o(p);break;case 2:for(i=0;i<p.length;i++)o(p[i]);break;case 3:for(p=a(p),i=0;i<p.length;i++)for(s=0;s<p[i].length;s++)o(p[i][s])}1===p.length?p=p[0]:h="Multi"+h;var d={type:"Feature",geometry:{type:h,coordinates:p},properties:this.properties};return"id"in this&&(d.id=this.id),d}},{"@mapbox/point-geometry":2}],9:[function(e,t,n){"use strict";function r(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(o,this,t),this.length=this._features.length}function o(e,t,n){15===e?t.version=n.readVarint():1===e?t.name=n.readString():5===e?t.extent=n.readVarint():2===e?t._features.push(n.pos):3===e?t._keys.push(n.readString()):4===e&&t._values.push(i(n))}function i(e){for(var t=null,n=e.readVarint()+e.pos;e.pos<n;){var r=e.readVarint()>>3;t=1===r?e.readString():2===r?e.readFloat():3===r?e.readDouble():4===r?e.readVarint64():5===r?e.readVarint():6===r?e.readSVarint():7===r?e.readBoolean():null}return t}var a=e("./vectortilefeature.js");t.exports=r,r.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new a(this._pbf,t,this.extent,this._keys,this._values)}},{"./vectortilefeature.js":8}],10:[function(t,n,r){!function(t,o){"object"==typeof r&&"undefined"!=typeof n?o(r):"function"==typeof e&&e.amd?e(["exports"],o):o(t.WhooTS=t.WhooTS||{})}(this,function(e){function t(e,t,r,o,i,a){return a=a||{},e+"?"+["bbox="+n(r,o,i),"format="+(a.format||"image/png"),"service="+(a.service||"WMS"),"version="+(a.version||"1.1.1"),"request="+(a.request||"GetMap"),"srs="+(a.srs||"EPSG:3857"),"width="+(a.width||256),"height="+(a.height||256),"layers="+t].join("&")}function n(e,t,n){t=Math.pow(2,n)-t-1;var o=r(256*e,256*t,n),i=r(256*(e+1),256*(t+1),n);return o[0]+","+o[1]+","+i[0]+","+i[1]}function r(e,t,n){var r=2*Math.PI*6378137/256/Math.pow(2,n);return[e*r-2*Math.PI*6378137/2,t*r-2*Math.PI*6378137/2]}e.getURL=t,e.getTileBBox=n,e.getMercCoords=r,Object.defineProperty(e,"__esModule",{value:!0})})},{}],11:[function(e,t,n){function r(e){return e=Math.round(e),e<0?0:e>255?255:e}function o(e){return e<0?0:e>1?1:e}function i(e){return r("%"===e[e.length-1]?parseFloat(e)/100*255:parseInt(e))}function a(e){return o("%"===e[e.length-1]?parseFloat(e)/100:parseFloat(e))}function s(e,t,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?e+(t-e)*n*6:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}function u(e){var t=e.replace(/ /g,"").toLowerCase();if(t in l)return l[t].slice();if("#"===t[0]){if(4===t.length){var n=parseInt(t.substr(1),16);return n>=0&&n<=4095?[(3840&n)>>4|(3840&n)>>8,240&n|(240&n)>>4,15&n|(15&n)<<4,1]:null}if(7===t.length){var n=parseInt(t.substr(1),16);return n>=0&&n<=16777215?[(16711680&n)>>16,(65280&n)>>8,255&n,1]:null}return null}var o=t.indexOf("("),u=t.indexOf(")");if(-1!==o&&u+1===t.length){var c=t.substr(0,o),p=t.substr(o+1,u-(o+1)).split(","),h=1;switch(c){case"rgba":if(4!==p.length)return null;h=a(p.pop());case"rgb":return 3!==p.length?null:[i(p[0]),i(p[1]),i(p[2]),h];case"hsla":if(4!==p.length)return null;h=a(p.pop());case"hsl":if(3!==p.length)return null;var f=(parseFloat(p[0])%360+360)%360/360,d=a(p[1]),m=a(p[2]),y=m<=.5?m*(d+1):m+d-m*d,v=2*m-y;return[r(255*s(v,y,f+1/3)),r(255*s(v,y,f)),r(255*s(v,y,f-1/3)),h];default:return null}}return null}var l={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};try{n.parseCSSColor=u}catch(e){}},{}],12:[function(e,t,n){"use strict";function r(e,t,n){n=n||2;var r=t&&t.length,i=r?t[0]*n:e.length,s=o(e,0,i,n,!0),u=[];if(!s)return u;var l,c,h,f,d,m,y;if(r&&(s=p(e,t,s,n)),e.length>80*n){l=h=e[0],c=f=e[1];for(var v=n;v<i;v+=n)d=e[v],m=e[v+1],d<l&&(l=d),m<c&&(c=m),d>h&&(h=d),m>f&&(f=m);y=Math.max(h-l,f-c)}return a(s,u,n,l,c,y),u}function o(e,t,n,r,o){var i,a;if(o===I(e,t,n,r)>0)for(i=t;i<n;i+=r)a=O(i,e[i],e[i+1],a);else for(i=n-r;i>=t;i-=r)a=O(i,e[i],e[i+1],a);return a&&x(a,a.next)&&(A(a),a=a.next),a}function i(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!x(r,r.next)&&0!==w(r.prev,r,r.next))r=r.next;else{if(A(r),(r=t=r.prev)===r.next)return null;n=!0}}while(n||r!==t);return t}function a(e,t,n,r,o,p,h){if(e){!h&&p&&m(e,r,o,p);for(var f,d,y=e;e.prev!==e.next;)if(f=e.prev,d=e.next,p?u(e,r,o,p):s(e))t.push(f.i/n),t.push(e.i/n),t.push(d.i/n),A(e),e=d.next,y=d.next;else if((e=d)===y){h?1===h?(e=l(e,t,n),a(e,t,n,r,o,p,2)):2===h&&c(e,t,n,r,o,p):a(i(e),t,n,r,o,p,1);break}}}function s(e){var t=e.prev,n=e,r=e.next;if(w(t,n,r)>=0)return!1;for(var o=e.next.next;o!==e.prev;){if(_(t.x,t.y,n.x,n.y,r.x,r.y,o.x,o.y)&&w(o.prev,o,o.next)>=0)return!1;o=o.next}return!0}function u(e,t,n,r){var o=e.prev,i=e,a=e.next;if(w(o,i,a)>=0)return!1;for(var s=o.x<i.x?o.x<a.x?o.x:a.x:i.x<a.x?i.x:a.x,u=o.y<i.y?o.y<a.y?o.y:a.y:i.y<a.y?i.y:a.y,l=o.x>i.x?o.x>a.x?o.x:a.x:i.x>a.x?i.x:a.x,c=o.y>i.y?o.y>a.y?o.y:a.y:i.y>a.y?i.y:a.y,p=v(s,u,t,n,r),h=v(l,c,t,n,r),f=e.nextZ;f&&f.z<=h;){if(f!==e.prev&&f!==e.next&&_(o.x,o.y,i.x,i.y,a.x,a.y,f.x,f.y)&&w(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(f=e.prevZ;f&&f.z>=p;){if(f!==e.prev&&f!==e.next&&_(o.x,o.y,i.x,i.y,a.x,a.y,f.x,f.y)&&w(f.prev,f,f.next)>=0)return!1;f=f.prevZ}return!0}function l(e,t,n){var r=e;do{var o=r.prev,i=r.next.next;!x(o,i)&&E(o,r,r.next,i)&&T(o,i)&&T(i,o)&&(t.push(o.i/n),t.push(r.i/n),t.push(i.i/n),A(r),A(r.next),r=e=i),r=r.next}while(r!==e);return r}function c(e,t,n,r,o,s){var u=e;do{for(var l=u.next.next;l!==u.prev;){if(u.i!==l.i&&b(u,l)){var c=P(u,l);return u=i(u,u.next),c=i(c,c.next),a(u,t,n,r,o,s),void a(c,t,n,r,o,s)}l=l.next}u=u.next}while(u!==e)}function p(e,t,n,r){var a,s,u,l,c,p=[];for(a=0,s=t.length;a<s;a++)u=t[a]*r,l=a<s-1?t[a+1]*r:e.length,c=o(e,u,l,r,!1),c===c.next&&(c.steiner=!0),p.push(g(c));for(p.sort(h),a=0;a<p.length;a++)f(p[a],n),n=i(n,n.next);return n}function h(e,t){return e.x-t.x}function f(e,t){if(t=d(e,t)){var n=P(t,e);i(n,n.next)}}function d(e,t){var n,r=t,o=e.x,i=e.y,a=-1/0;do{if(i<=r.y&&i>=r.next.y){var s=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=o&&s>a){if(a=s,s===o){if(i===r.y)return r;if(i===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(o===a)return n.prev;var u,l=n,c=n.x,p=n.y,h=1/0;for(r=n.next;r!==l;)o>=r.x&&r.x>=c&&_(i<p?o:a,i,c,p,i<p?a:o,i,r.x,r.y)&&((u=Math.abs(i-r.y)/(o-r.x))<h||u===h&&r.x>n.x)&&T(r,e)&&(n=r,h=u),r=r.next;return n}function m(e,t,n,r){var o=e;do{null===o.z&&(o.z=v(o.x,o.y,t,n,r)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next}while(o!==e);o.prevZ.nextZ=null,o.prevZ=null,y(o)}function y(e){var t,n,r,o,i,a,s,u,l=1;do{for(n=e,e=null,i=null,a=0;n;){for(a++,r=n,s=0,t=0;t<l&&(s++,r=r.nextZ);t++);for(u=l;s>0||u>0&&r;)0===s?(o=r,r=r.nextZ,u--):0!==u&&r?n.z<=r.z?(o=n,n=n.nextZ,s--):(o=r,r=r.nextZ,u--):(o=n,n=n.nextZ,s--),i?i.nextZ=o:e=o,o.prevZ=i,i=o;n=r}i.nextZ=null,l*=2}while(a>1);return e}function v(e,t,n,r,o){return e=32767*(e-n)/o,t=32767*(t-r)/o,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1}function g(e){var t=e,n=e;do{t.x<n.x&&(n=t),t=t.next}while(t!==e);return n}function _(e,t,n,r,o,i,a,s){return(o-a)*(t-s)-(e-a)*(i-s)>=0&&(e-a)*(r-s)-(n-a)*(t-s)>=0&&(n-a)*(i-s)-(o-a)*(r-s)>=0}function b(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!C(e,t)&&T(e,t)&&T(t,e)&&S(e,t)}function w(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function x(e,t){return e.x===t.x&&e.y===t.y}function E(e,t,n,r){return!!(x(e,t)&&x(n,r)||x(e,r)&&x(n,t))||w(e,t,n)>0!=w(e,t,r)>0&&w(n,r,e)>0!=w(n,r,t)>0}function C(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&E(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}function T(e,t){return w(e.prev,e,e.next)<0?w(e,t,e.next)>=0&&w(e,e.prev,t)>=0:w(e,t,e.prev)<0||w(e,e.next,t)<0}function S(e,t){var n=e,r=!1,o=(e.x+t.x)/2,i=(e.y+t.y)/2;do{n.y>i!=n.next.y>i&&o<(n.next.x-n.x)*(i-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}function P(e,t){var n=new k(e.i,e.x,e.y),r=new k(t.i,t.x,t.y),o=e.next,i=t.prev;return e.next=t,t.prev=e,n.next=o,o.prev=n,r.next=n,n.prev=r,i.next=r,r.prev=i,r}function O(e,t,n,r){var o=new k(e,t,n);return r?(o.next=r.next,o.prev=r,r.next.prev=o,r.next=o):(o.prev=o,o.next=o),o}function A(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function k(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function I(e,t,n,r){for(var o=0,i=t,a=n-r;i<n;i+=r)o+=(e[a]-e[i])*(e[i+1]+e[a+1]),a=i;return o}t.exports=r,r.deviation=function(e,t,n,r){var o=t&&t.length,i=o?t[0]*n:e.length,a=Math.abs(I(e,0,i,n));if(o)for(var s=0,u=t.length;s<u;s++){var l=t[s]*n,c=s<u-1?t[s+1]*n:e.length;a-=Math.abs(I(e,l,c,n))}var p=0;for(s=0;s<r.length;s+=3){var h=r[s]*n,f=r[s+1]*n,d=r[s+2]*n;p+=Math.abs((e[h]-e[d])*(e[f+1]-e[h+1])-(e[h]-e[f])*(e[d+1]-e[h+1]))}return 0===a&&0===p?0:Math.abs((p-a)/a)},r.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,o=0;o<e.length;o++){for(var i=0;i<e[o].length;i++)for(var a=0;a<t;a++)n.vertices.push(e[o][i][a]);o>0&&(r+=e[o-1].length,n.holes.push(r))}return n}},{}],13:[function(e,t,n){function r(e){if("Polygon"===e.type)return o(e.coordinates);if("MultiPolygon"===e.type){for(var t=0,n=0;n<e.coordinates.length;n++)t+=o(e.coordinates[n]);return t}return null}function o(e){var t=0;if(e&&e.length>0){t+=Math.abs(i(e[0]));for(var n=1;n<e.length;n++)t-=Math.abs(i(e[n]))}return t}function i(e){var t=0;if(e.length>2){for(var n,r,o=0;o<e.length-1;o++)n=e[o],r=e[o+1],t+=a(r[0]-n[0])*(2+Math.sin(a(n[1]))+Math.sin(a(r[1])));t=t*s.RADIUS*s.RADIUS/2}return t}function a(e){return e*Math.PI/180}var s=e("wgs84");t.exports.geometry=r,t.exports.ring=i},{wgs84:49}],14:[function(e,t,n){function r(e,t){switch(e&&e.type||null){case"FeatureCollection":return e.features=e.features.map(o(r,t)),e;case"Feature":return e.geometry=r(e.geometry,t),e;case"Polygon":case"MultiPolygon":return i(e,t);default:return e}}function o(e,t){return function(n){return e(n,t)}}function i(e,t){return"Polygon"===e.type?e.coordinates=a(e.coordinates,t):"MultiPolygon"===e.type&&(e.coordinates=e.coordinates.map(o(a,t))),e}function a(e,t){t=!!t,e[0]=s(e[0],t);for(var n=1;n<e.length;n++)e[n]=s(e[n],!t);return e}function s(e,t){return u(e)===t?e:e.reverse()}function u(e){return l.ring(e)>=0}var l=e("geojson-area");t.exports=r},{"geojson-area":13}],15:[function(e,t,n){"use strict";function r(e,t,n,r,a,u,l,c){if(n/=t,r/=t,l>=n&&c<=r)return e;if(l>r||c<n)return null;for(var p=[],h=0;h<e.length;h++){var f,d,m=e[h],y=m.geometry,v=m.type;if(f=m.min[a],d=m.max[a],f>=n&&d<=r)p.push(m);else if(!(f>r||d<n)){var g=1===v?o(y,n,r,a):i(y,n,r,a,u,3===v);g.length&&p.push(s(m.tags,v,g,m.id))}}return p.length?p:null}function o(e,t,n,r){for(var o=[],i=0;i<e.length;i++){var a=e[i],s=a[r];s>=t&&s<=n&&o.push(a)}return o}function i(e,t,n,r,o,i){for(var s=[],u=0;u<e.length;u++){var l,c,p,h=0,f=0,d=null,m=e[u],y=m.area,v=m.dist,g=m.outer,_=m.length,b=[];for(c=0;c<_-1;c++)l=d||m[c],d=m[c+1],h=f||l[r],f=d[r],h<t?f>n?(b.push(o(l,d,t),o(l,d,n)),i||(b=a(s,b,y,v,g))):f>=t&&b.push(o(l,d,t)):h>n?f<t?(b.push(o(l,d,n),o(l,d,t)),i||(b=a(s,b,y,v,g))):f<=n&&b.push(o(l,d,n)):(b.push(l),f<t?(b.push(o(l,d,t)),i||(b=a(s,b,y,v,g))):f>n&&(b.push(o(l,d,n)),i||(b=a(s,b,y,v,g))));l=m[_-1],h=l[r],h>=t&&h<=n&&b.push(l),p=b[b.length-1],i&&p&&(b[0][0]!==p[0]||b[0][1]!==p[1])&&b.push(b[0]),a(s,b,y,v,g)}return s}function a(e,t,n,r,o){return t.length&&(t.area=n,t.dist=r,void 0!==o&&(t.outer=o),e.push(t)),[]}t.exports=r;var s=e("./feature")},{"./feature":17}],16:[function(e,t,n){"use strict";function r(e,t){var n=[];if("FeatureCollection"===e.type)for(var r=0;r<e.features.length;r++)o(n,e.features[r],t);else"Feature"===e.type?o(n,e,t):o(n,{geometry:e},t);return n}function o(e,t,n){if(null!==t.geometry){var r,s,u,c,p=t.geometry,h=p.type,f=p.coordinates,d=t.properties,m=t.id;if("Point"===h)e.push(l(d,1,[a(f)],m));else if("MultiPoint"===h)e.push(l(d,1,i(f),m));else if("LineString"===h)e.push(l(d,2,[i(f,n)],m));else if("MultiLineString"===h||"Polygon"===h){for(u=[],r=0;r<f.length;r++)c=i(f[r],n),"Polygon"===h&&(c.outer=0===r),u.push(c);e.push(l(d,"Polygon"===h?3:2,u,m))}else if("MultiPolygon"===h){for(u=[],r=0;r<f.length;r++)for(s=0;s<f[r].length;s++)c=i(f[r][s],n),c.outer=0===s,u.push(c);e.push(l(d,3,u,m))}else{if("GeometryCollection"!==h)throw new Error("Input data is not a valid GeoJSON object.");for(r=0;r<p.geometries.length;r++)o(e,{geometry:p.geometries[r],properties:d},n)}}}function i(e,t){for(var n=[],r=0;r<e.length;r++)n.push(a(e[r]));return t&&(u(n,t),s(n)),n}function a(e){var t=Math.sin(e[1]*Math.PI/180),n=e[0]/360+.5,r=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return r=r<0?0:r>1?1:r,[n,r,0]}function s(e){for(var t,n,r=0,o=0,i=0;i<e.length-1;i++)t=n||e[i],n=e[i+1],r+=t[0]*n[1]-n[0]*t[1],o+=Math.abs(n[0]-t[0])+Math.abs(n[1]-t[1]);e.area=Math.abs(r/2),e.dist=o}t.exports=r;var u=e("./simplify"),l=e("./feature")},{"./feature":17,"./simplify":19}],17:[function(e,t,n){"use strict";function r(e,t,n,r){var i={id:r||null,type:t,geometry:n,tags:e||null,min:[1/0,1/0],max:[-1/0,-1/0]};return o(i),i}function o(e){var t=e.geometry,n=e.min,r=e.max;if(1===e.type)i(n,r,t);else for(var o=0;o<t.length;o++)i(n,r,t[o]);return e}function i(e,t,n){for(var r,o=0;o<n.length;o++)r=n[o],e[0]=Math.min(r[0],e[0]),t[0]=Math.max(r[0],t[0]),e[1]=Math.min(r[1],e[1]),t[1]=Math.max(r[1],t[1])}t.exports=r},{}],18:[function(e,t,n){"use strict";function r(e,t){return new o(e,t)}function o(e,t){t=this.options=u(Object.create(this.options),t);var n=t.debug;n&&console.time("preprocess data");var r=1<<t.maxZoom,o=c(e,t.tolerance/(r*t.extent));this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),o=f(o,t.buffer/t.extent,a),o.length&&this.splitTile(o,0,0,0),n&&(o.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function i(e,t,n){return 32*((1<<e)*n+t)+e}function a(e,t,n){return[n,(n-e[0])*(t[1]-e[1])/(t[0]-e[0])+e[1],1]}function s(e,t,n){return[(n-e[1])*(t[0]-e[0])/(t[1]-e[1])+e[0],n,1]}function u(e,t){for(var n in t)e[n]=t[n];return e}function l(e,t,n){var r=e.source;if(1!==r.length)return!1;var o=r[0];if(3!==o.type||o.geometry.length>1)return!1;var i=o.geometry[0].length;if(5!==i)return!1;for(var a=0;a<i;a++){var s=p.point(o.geometry[0][a],t,e.z2,e.x,e.y);if(s[0]!==-n&&s[0]!==t+n||s[1]!==-n&&s[1]!==t+n)return!1}return!0}t.exports=r;var c=e("./convert"),p=e("./transform"),h=e("./clip"),f=e("./wrap"),d=e("./tile");o.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,solidChildren:!1,tolerance:3,extent:4096,buffer:64,debug:0},o.prototype.splitTile=function(e,t,n,r,o,u,c){for(var p=[e,t,n,r],f=this.options,m=f.debug,y=null;p.length;){r=p.pop(),n=p.pop(),t=p.pop(),e=p.pop();var v=1<<t,g=i(t,n,r),_=this.tiles[g],b=t===f.maxZoom?0:f.tolerance/(v*f.extent);if(!_&&(m>1&&console.time("creation"),_=this.tiles[g]=d(e,v,n,r,b,t===f.maxZoom),this.tileCoords.push({z:t,x:n,y:r}),m)){m>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,n,r,_.numFeatures,_.numPoints,_.numSimplified),console.timeEnd("creation"));var w="z"+t;this.stats[w]=(this.stats[w]||0)+1,this.total++}if(_.source=e,o){if(t===f.maxZoom||t===o)continue;var x=1<<o-t;if(n!==Math.floor(u/x)||r!==Math.floor(c/x))continue}else if(t===f.indexMaxZoom||_.numPoints<=f.indexMaxPoints)continue;if(f.solidChildren||!l(_,f.extent,f.buffer)){_.source=null,m>1&&console.time("clipping");var E,C,T,S,P,O,A=.5*f.buffer/f.extent,k=.5-A,I=.5+A,N=1+A;E=C=T=S=null,P=h(e,v,n-A,n+I,0,a,_.min[0],_.max[0]),O=h(e,v,n+k,n+N,0,a,_.min[0],_.max[0]),P&&(E=h(P,v,r-A,r+I,1,s,_.min[1],_.max[1]),C=h(P,v,r+k,r+N,1,s,_.min[1],_.max[1])),O&&(T=h(O,v,r-A,r+I,1,s,_.min[1],_.max[1]),S=h(O,v,r+k,r+N,1,s,_.min[1],_.max[1])),m>1&&console.timeEnd("clipping"),e.length&&(p.push(E||[],t+1,2*n,2*r),p.push(C||[],t+1,2*n,2*r+1),p.push(T||[],t+1,2*n+1,2*r),p.push(S||[],t+1,2*n+1,2*r+1))}else o&&(y=t)}return y},o.prototype.getTile=function(e,t,n){var r=this.options,o=r.extent,a=r.debug,s=1<<e;t=(t%s+s)%s;var u=i(e,t,n);if(this.tiles[u])return p.tile(this.tiles[u],o);a>1&&console.log("drilling down to z%d-%d-%d",e,t,n);for(var c,h=e,f=t,d=n;!c&&h>0;)h--,f=Math.floor(f/2),d=Math.floor(d/2),c=this.tiles[i(h,f,d)];if(!c||!c.source)return null;if(a>1&&console.log("found parent tile z%d-%d-%d",h,f,d),l(c,o,r.buffer))return p.tile(c,o);a>1&&console.time("drilling down");var m=this.splitTile(c.source,h,f,d,e,t,n);if(a>1&&console.timeEnd("drilling down"),null!==m){var y=1<<e-m;u=i(m,Math.floor(t/y),Math.floor(n/y))}return this.tiles[u]?p.tile(this.tiles[u],o):null}},{"./clip":15,"./convert":16,"./tile":20,"./transform":21,"./wrap":22}],19:[function(e,t,n){"use strict";function r(e,t){var n,r,i,a,s=t*t,u=e.length,l=0,c=u-1,p=[];for(e[l][2]=1,e[c][2]=1;c;){for(r=0,n=l+1;n<c;n++)(i=o(e[n],e[l],e[c]))>r&&(a=n,r=i);r>s?(e[a][2]=r,p.push(l),p.push(a),l=a):(c=p.pop(),l=p.pop())}}function o(e,t,n){var r=t[0],o=t[1],i=n[0],a=n[1],s=e[0],u=e[1],l=i-r,c=a-o;if(0!==l||0!==c){var p=((s-r)*l+(u-o)*c)/(l*l+c*c);p>1?(r=i,o=a):p>0&&(r+=l*p,o+=c*p)}return l=s-r,c=u-o,l*l+c*c}t.exports=r},{}],20:[function(e,t,n){"use strict";function r(e,t,n,r,i,a){for(var s={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z2:t,transformed:!1,min:[2,1],max:[-1,0]},u=0;u<e.length;u++){s.numFeatures++,o(s,e[u],i,a);var l=e[u].min,c=e[u].max;l[0]<s.min[0]&&(s.min[0]=l[0]),l[1]<s.min[1]&&(s.min[1]=l[1]),c[0]>s.max[0]&&(s.max[0]=c[0]),c[1]>s.max[1]&&(s.max[1]=c[1])}return s}function o(e,t,n,r){var o,a,s,u,l=t.geometry,c=t.type,p=[],h=n*n;if(1===c)for(o=0;o<l.length;o++)p.push(l[o]),e.numPoints++,e.numSimplified++;else for(o=0;o<l.length;o++)if(s=l[o],r||!(2===c&&s.dist<n||3===c&&s.area<h)){var f=[];for(a=0;a<s.length;a++)u=s[a],(r||u[2]>h)&&(f.push(u),e.numSimplified++),e.numPoints++;3===c&&i(f,s.outer),p.push(f)}else e.numPoints+=s.length;if(p.length){var d={geometry:p,type:c,tags:t.tags||null};null!==t.id&&(d.id=t.id),e.features.push(d)}}function i(e,t){a(e)<0===t&&e.reverse()}function a(e){for(var t,n,r=0,o=0,i=e.length,a=i-1;o<i;a=o++)t=e[o],n=e[a],r+=(n[0]-t[0])*(t[1]+n[1]);return r}t.exports=r},{}],21:[function(e,t,n){"use strict";function r(e,t){if(e.transformed)return e;var n,r,i,a=e.z2,s=e.x,u=e.y;for(n=0;n<e.features.length;n++){var l=e.features[n],c=l.geometry;if(1===l.type)for(r=0;r<c.length;r++)c[r]=o(c[r],t,a,s,u);else for(r=0;r<c.length;r++){var p=c[r];for(i=0;i<p.length;i++)p[i]=o(p[i],t,a,s,u)}}return e.transformed=!0,e}function o(e,t,n,r,o){return[Math.round(t*(e[0]*n-r)),Math.round(t*(e[1]*n-o))]}n.tile=r,n.point=o},{}],22:[function(e,t,n){"use strict";function r(e,t,n){var r=e,i=a(e,1,-1-t,t,0,n,-1,2),s=a(e,1,1-t,2+t,0,n,-1,2);return(i||s)&&(r=a(e,1,-t,1+t,0,n,-1,2)||[],i&&(r=o(i,1).concat(r)),s&&(r=r.concat(o(s,-1)))),r}function o(e,t){for(var n=[],r=0;r<e.length;r++){var o,a=e[r],u=a.type;if(1===u)o=i(a.geometry,t);else{o=[];for(var l=0;l<a.geometry.length;l++)o.push(i(a.geometry[l],t))}n.push(s(a.tags,u,o,a.id))}return n}function i(e,t){var n=[];n.area=e.area,n.dist=e.dist;for(var r=0;r<e.length;r++)n.push([e[r][0]+t,e[r][1],e[r][2]]);return n}var a=e("./clip"),s=e("./feature");t.exports=r},{"./clip":15,"./feature":17}],23:[function(e,t,n){"use strict";function r(e,t,n){var r=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var i=new Int32Array(this.arrayBuffer);e=i[0],t=i[1],n=i[2],this.d=t+2*n;for(var a=0;a<this.d*this.d;a++){var s=i[o+a],u=i[o+a+1];r.push(s===u?null:i.subarray(s,u))}var l=i[o+r.length],c=i[o+r.length+1];this.keys=i.subarray(l,c),this.bboxes=i.subarray(c),this.insert=this._insertReadonly}else{this.d=t+2*n;for(var p=0;p<this.d*this.d;p++)r.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=n,this.scale=t/e,this.uid=0;var h=n/t*e;this.min=-h,this.max=e+h}t.exports=r;var o=3;r.prototype.insert=function(e,t,n,r,o){this._forEachCell(t,n,r,o,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(o)},r.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},r.prototype._insertCell=function(e,t,n,r,o,i){this.cells[o].push(i)},r.prototype.query=function(e,t,n,r){var o=this.min,i=this.max;if(e<=o&&t<=o&&i<=n&&i<=r)return Array.prototype.slice.call(this.keys);var a=[],s={};return this._forEachCell(e,t,n,r,this._queryCell,a,s),a},r.prototype._queryCell=function(e,t,n,r,o,i,a){var s=this.cells[o];if(null!==s)for(var u=this.keys,l=this.bboxes,c=0;c<s.length;c++){var p=s[c];if(void 0===a[p]){var h=4*p;e<=l[h+2]&&t<=l[h+3]&&n>=l[h+0]&&r>=l[h+1]?(a[p]=!0,i.push(u[p])):a[p]=!1}}},r.prototype._forEachCell=function(e,t,n,r,o,i,a){for(var s=this._convertToCellCoord(e),u=this._convertToCellCoord(t),l=this._convertToCellCoord(n),c=this._convertToCellCoord(r),p=s;p<=l;p++)for(var h=u;h<=c;h++){var f=this.d*h+p;if(o.call(this,e,t,n,r,f,i,a))return}},r.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},r.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=o+this.cells.length+1+1,n=0,r=0;r<this.cells.length;r++)n+=this.cells[r].length;var i=new Int32Array(t+n+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;for(var a=t,s=0;s<e.length;s++){var u=e[s];i[o+s]=a,i.set(u,a),a+=u.length}return i[o+e.length]=a,i.set(this.keys,a),a+=this.keys.length,i[o+e.length+1]=a,i.set(this.bboxes,a),a+=this.bboxes.length,i.buffer}},{}],24:[function(e,t,n){n.read=function(e,t,n,r,o){var i,a,s=8*o-r-1,u=(1<<s)-1,l=u>>1,c=-7,p=n?o-1:0,h=n?-1:1,f=e[t+p];for(p+=h,i=f&(1<<-c)-1,f>>=-c,c+=s;c>0;i=256*i+e[t+p],p+=h,c-=8);for(a=i&(1<<-c)-1,i>>=-c,c+=r;c>0;a=256*a+e[t+p],p+=h,c-=8);if(0===i)i=1-l;else{if(i===u)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,r),i-=l}return(f?-1:1)*a*Math.pow(2,i-r)},n.write=function(e,t,n,r,o,i){var a,s,u,l=8*i-o-1,c=(1<<l)-1,p=c>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:i-1,d=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),t+=a+p>=1?h/u:h*Math.pow(2,1-p),t*u>=2&&(a++,u/=2),a+p>=c?(s=0,a=c):a+p>=1?(s=(t*u-1)*Math.pow(2,o),a+=p):(s=t*Math.pow(2,p-1)*Math.pow(2,o),a=0));o>=8;e[n+f]=255&s,f+=d,s/=256,o-=8);for(a=a<<o|s,l+=o;l>0;e[n+f]=255&a,f+=d,a/=256,l-=8);e[n+f-d]|=128*m}},{}],25:[function(e,t,n){"use strict";function r(e,t,n,r,i){return new o(e,t,n,r,i)}function o(e,t,n,r,o){t=t||i,n=n||a,o=o||Array,this.nodeSize=r||64,this.points=e,this.ids=new o(e.length),this.coords=new o(2*e.length);for(var u=0;u<e.length;u++)this.ids[u]=u,this.coords[2*u]=t(e[u]),this.coords[2*u+1]=n(e[u]);s(this.ids,this.coords,this.nodeSize,0,this.ids.length-1,0)}function i(e){return e[0]}function a(e){return e[1]}var s=e("./sort"),u=e("./range"),l=e("./within");t.exports=r,o.prototype={range:function(e,t,n,r){return u(this.ids,this.coords,e,t,n,r,this.nodeSize)},within:function(e,t,n){return l(this.ids,this.coords,e,t,n,this.nodeSize)}}},{"./range":26,"./sort":27,"./within":28}],26:[function(e,t,n){"use strict";function r(e,t,n,r,o,i,a){for(var s,u,l=[0,e.length-1,0],c=[];l.length;){var p=l.pop(),h=l.pop(),f=l.pop();if(h-f<=a)for(var d=f;d<=h;d++)s=t[2*d],u=t[2*d+1],s>=n&&s<=o&&u>=r&&u<=i&&c.push(e[d]);else{var m=Math.floor((f+h)/2);s=t[2*m],u=t[2*m+1],s>=n&&s<=o&&u>=r&&u<=i&&c.push(e[m]);var y=(p+1)%2;(0===p?n<=s:r<=u)&&(l.push(f),l.push(m-1),l.push(y)),(0===p?o>=s:i>=u)&&(l.push(m+1),l.push(h),l.push(y))}}return c}t.exports=r},{}],27:[function(e,t,n){"use strict";function r(e,t,n,i,a,s){if(!(a-i<=n)){var u=Math.floor((i+a)/2);o(e,t,u,i,a,s%2),r(e,t,n,i,u-1,s+1),r(e,t,n,u+1,a,s+1)}}function o(e,t,n,r,a,s){for(;a>r;){if(a-r>600){var u=a-r+1,l=n-r+1,c=Math.log(u),p=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*p*(u-p)/u)*(l-u/2<0?-1:1);o(e,t,n,Math.max(r,Math.floor(n-l*p/u+h)),Math.min(a,Math.floor(n+(u-l)*p/u+h)),s)}var f=t[2*n+s],d=r,m=a;for(i(e,t,r,n),t[2*a+s]>f&&i(e,t,r,a);d<m;){for(i(e,t,d,m),d++,m--;t[2*d+s]<f;)d++;for(;t[2*m+s]>f;)m--}t[2*r+s]===f?i(e,t,r,m):(m++,i(e,t,m,a)),m<=n&&(r=m+1),n<=m&&(a=m-1)}}function i(e,t,n,r){a(e,n,r),a(t,2*n,2*r),a(t,2*n+1,2*r+1)}function a(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}t.exports=r},{}],28:[function(e,t,n){"use strict";function r(e,t,n,r,i,a){for(var s=[0,e.length-1,0],u=[],l=i*i;s.length;){var c=s.pop(),p=s.pop(),h=s.pop();if(p-h<=a)for(var f=h;f<=p;f++)o(t[2*f],t[2*f+1],n,r)<=l&&u.push(e[f]);else{var d=Math.floor((h+p)/2),m=t[2*d],y=t[2*d+1];o(m,y,n,r)<=l&&u.push(e[d]);var v=(c+1)%2;(0===c?n-i<=m:r-i<=y)&&(s.push(h),s.push(d-1),s.push(v)),(0===c?n+i>=m:r+i>=y)&&(s.push(d+1),s.push(p),s.push(v))}}return u}function o(e,t,n,r){var o=e-n,i=t-r;return o*o+i*i}t.exports=r},{}],29:[function(e,t,n){function r(e){return!!e&&"object"==typeof e}function o(e,t){for(var n=-1,r=e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function i(e,t,n,o,s,u){return e===t||(null==e||null==t||!c(e)&&!r(t)?e!==e&&t!==t:a(e,t,i,n,o,s,u))}function a(e,t,n,r,o,i,a){var c=p(e),f=p(t),y=m,v=m;c||(y=T.call(e),y==d?y=b:y!=b&&(c=h(e))),f||(v=T.call(t),v==d?v=b:v!=b&&(f=h(t)));var g=y==b,_=v==b,w=y==v;if(w&&!c&&!g)return u(e,t,y);if(!o){var x=g&&C.call(e,"__wrapped__"),E=_&&C.call(t,"__wrapped__");if(x||E)return n(x?e.value():e,E?t.value():t,r,o,i,a)}if(!w)return!1;i||(i=[]),a||(a=[]);for(var S=i.length;S--;)if(i[S]==e)return a[S]==t;i.push(e),a.push(t);var P=(c?s:l)(e,t,n,r,o,i,a);return i.pop(),a.pop(),P}function s(e,t,n,r,i,a,s){var u=-1,l=e.length,c=t.length;if(l!=c&&!(i&&c>l))return!1;for(;++u<l;){var p=e[u],h=t[u],f=r?r(i?h:p,i?p:h,u):void 0;if(void 0!==f){if(f)continue;return!1}if(i){if(!o(t,function(e){return p===e||n(p,e,r,i,a,s)}))return!1}else if(p!==h&&!n(p,h,r,i,a,s))return!1}return!0}function u(e,t,n){switch(n){case y:case v:return+e==+t;case g:return e.name==t.name&&e.message==t.message;case _:return e!=+e?t!=+t:e==+t;case w:case x:return e==t+""}return!1}function l(e,t,n,r,o,i,a){var s=f(e),u=s.length;if(u!=f(t).length&&!o)return!1;for(var l=u;l--;){var c=s[l];if(!(o?c in t:C.call(t,c)))return!1}for(var p=o;++l<u;){c=s[l];var h=e[c],d=t[c],m=r?r(o?d:h,o?h:d,c):void 0;if(!(void 0===m?n(h,d,r,o,i,a):m))return!1;p||(p="constructor"==c)}if(!p){var y=e.constructor,v=t.constructor;if(y!=v&&"constructor"in e&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof v&&v instanceof v))return!1}return!0}function c(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var p=e("lodash.isarray"),h=e("lodash.istypedarray"),f=e("lodash.keys"),d="[object Arguments]",m="[object Array]",y="[object Boolean]",v="[object Date]",g="[object Error]",_="[object Number]",b="[object Object]",w="[object RegExp]",x="[object String]",E=Object.prototype,C=E.hasOwnProperty,T=E.toString;t.exports=i},{"lodash.isarray":33,"lodash.istypedarray":35,"lodash.keys":36}],30:[function(e,t,n){function r(e,t,n){if("function"!=typeof e)return o;if(void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,o){return e.call(t,n,r,o)};case 4:return function(n,r,o,i){return e.call(t,n,r,o,i)};case 5:return function(n,r,o,i,a){return e.call(t,n,r,o,i,a)}}return function(){return e.apply(t,arguments)}}function o(e){return e}t.exports=r},{}],31:[function(e,t,n){function r(e){return!!e&&"object"==typeof e}function o(e,t){var n=null==e?void 0:e[t];return s(n)?n:void 0}function i(e){return a(e)&&f.call(e)==u}function a(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function s(e){return null!=e&&(i(e)?d.test(p.call(e)):r(e)&&l.test(e))}var u="[object Function]",l=/^\[object .+?Constructor\]$/,c=Object.prototype,p=Function.prototype.toString,h=c.hasOwnProperty,f=c.toString,d=RegExp("^"+p.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=o},{}],32:[function(e,t,n){function r(e){return i(e)&&m.call(e,"callee")&&(!v.call(e,"callee")||y.call(e)==p)}function o(e){return null!=e&&s(e.length)&&!a(e)}function i(e){return l(e)&&o(e)}function a(e){var t=u(e)?y.call(e):"";return t==h||t==f}function s(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=c}function u(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function l(e){return!!e&&"object"==typeof e}var c=9007199254740991,p="[object Arguments]",h="[object Function]",f="[object GeneratorFunction]",d=Object.prototype,m=d.hasOwnProperty,y=d.toString,v=d.propertyIsEnumerable;t.exports=r},{}],33:[function(e,t,n){function r(e){return!!e&&"object"==typeof e}function o(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=y}function i(e){return a(e)&&f.call(e)==u}function a(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function s(e){return null!=e&&(i(e)?d.test(p.call(e)):r(e)&&l.test(e))}var u="[object Function]",l=/^\[object .+?Constructor\]$/,c=Object.prototype,p=Function.prototype.toString,h=c.hasOwnProperty,f=c.toString,d=RegExp("^"+p.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),m=function(e,t){var n=null==e?void 0:e[t];return s(n)?n:void 0}(Array,"isArray"),y=9007199254740991,v=m||function(e){return r(e)&&o(e.length)&&"[object Array]"==f.call(e)};t.exports=v},{}],34:[function(e,t,n){function r(e,t,n,r){n="function"==typeof n?i(n,r,3):void 0;var a=n?n(e,t):void 0;return void 0===a?o(e,t,n):!!a}var o=e("lodash._baseisequal"),i=e("lodash._bindcallback");t.exports=r},{"lodash._baseisequal":29,"lodash._bindcallback":30}],35:[function(e,t,n){function r(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=a}function o(e){return!!e&&"object"==typeof e}function i(e){return o(e)&&r(e.length)&&!!s[l.call(e)]}var a=9007199254740991,s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1;var u=Object.prototype,l=u.toString;t.exports=i},{}],36:[function(e,t,n){function r(e){return null!=e&&i(v(e))}function o(e,t){return e="number"==typeof e||h.test(e)?+e:-1,t=null==t?y:t,e>-1&&e%1==0&&e<t}function i(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=y}function a(e){for(var t=u(e),n=t.length,r=n&&e.length,a=!!r&&i(r)&&(p(e)||c(e)),s=-1,l=[];++s<n;){var h=t[s];(a&&o(h,r)||d.call(e,h))&&l.push(h)}return l}function s(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function u(e){if(null==e)return[];s(e)||(e=Object(e));var t=e.length;t=t&&i(t)&&(p(e)||c(e))&&t||0;for(var n=e.constructor,r=-1,a="function"==typeof n&&n.prototype===e,u=Array(t),l=t>0;++r<t;)u[r]=r+"";for(var h in e)l&&o(h,t)||"constructor"==h&&(a||!d.call(e,h))||u.push(h);return u}var l=e("lodash._getnative"),c=e("lodash.isarguments"),p=e("lodash.isarray"),h=/^\d+$/,f=Object.prototype,d=f.hasOwnProperty,m=l(Object,"keys"),y=9007199254740991,v=function(e){return function(t){return null==t?void 0:t[e]}}("length"),g=m?function(e){var t=null==e?void 0:e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&r(e)?a(e):s(e)?m(e):[]}:a;t.exports=g},{"lodash._getnative":31,"lodash.isarguments":32,"lodash.isarray":33}],37:[function(e,t,n){"use strict";function r(e){return!!(o()&&i()&&a()&&s()&&u()&&l()&&c()&&p(e&&e.failIfMajorPerformanceCaveat))}function o(){return"undefined"!=typeof window&&"undefined"!=typeof document}function i(){return Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray}function a(){return Function.prototype&&Function.prototype.bind}function s(){return Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions}function u(){return"JSON"in window&&"parse"in JSON&&"stringify"in JSON}function l(){return"Worker"in window}function c(){return"Uint8ClampedArray"in window}function p(e){return void 0===f[e]&&(f[e]=h(e)),f[e]}function h(e){var t=document.createElement("canvas"),n=Object.create(r.webGLContextAttributes);return n.failIfMajorPerformanceCaveat=e,t.probablySupportsContext?t.probablySupportsContext("webgl",n)||t.probablySupportsContext("experimental-webgl",n):t.supportsContext?t.supportsContext("webgl",n)||t.supportsContext("experimental-webgl",n):t.getContext("webgl",n)||t.getContext("experimental-webgl",n)}"undefined"!=typeof t&&t.exports?t.exports=r:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=r);var f={};r.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}},{}],38:[function(e,t,n){"use strict";function r(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}function o(e,t,n){var r,o,i=n.buf;if(o=i[n.pos++],r=(112&o)>>4,o<128)return a(e,r,t);if(o=i[n.pos++],r|=(127&o)<<3,o<128)return a(e,r,t);if(o=i[n.pos++],r|=(127&o)<<10,o<128)return a(e,r,t);if(o=i[n.pos++],r|=(127&o)<<17,o<128)return a(e,r,t);if(o=i[n.pos++],r|=(127&o)<<24,o<128)return a(e,r,t);if(o=i[n.pos++],r|=(1&o)<<31,o<128)return a(e,r,t);throw new Error("Expected varint not more than 10 bytes")}function i(e){return e.type===r.Bytes?e.readVarint()+e.pos:e.pos+1}function a(e,t,n){return n?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function s(e,t){var n,r;if(e>=0?(n=e%4294967296|0,r=e/4294967296|0):(n=~(-e%4294967296),r=~(-e/4294967296),4294967295^n?n=n+1|0:(n=0,r=r+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),u(n,r,t),l(r,t)}function u(e,t,n){n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos]=127&e}function l(e,t){var n=(7&e)<<4;t.buf[t.pos++]|=n|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}function c(e,t,n){var r=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.ceil(Math.log(t)/(7*Math.LN2));n.realloc(r);for(var o=n.pos-1;o>=e;o--)n.buf[o+r]=n.buf[o]}function p(e,t){for(var n=0;n<e.length;n++)t.writeVarint(e[n])}function h(e,t){for(var n=0;n<e.length;n++)t.writeSVarint(e[n])}function f(e,t){for(var n=0;n<e.length;n++)t.writeFloat(e[n])}function d(e,t){for(var n=0;n<e.length;n++)t.writeDouble(e[n])}function m(e,t){for(var n=0;n<e.length;n++)t.writeBoolean(e[n])}function y(e,t){for(var n=0;n<e.length;n++)t.writeFixed32(e[n])}function v(e,t){for(var n=0;n<e.length;n++)t.writeSFixed32(e[n])}function g(e,t){for(var n=0;n<e.length;n++)t.writeFixed64(e[n])}function _(e,t){for(var n=0;n<e.length;n++)t.writeSFixed64(e[n])}function b(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function w(e,t,n){e[n]=t,e[n+1]=t>>>8,e[n+2]=t>>>16,e[n+3]=t>>>24}function x(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function E(e,t,n){for(var r="",o=t;o<n;){var i=e[o],a=null,s=i>239?4:i>223?3:i>191?2:1;if(o+s>n)break;var u,l,c;1===s?i<128&&(a=i):2===s?128==(192&(u=e[o+1]))&&(a=(31&i)<<6|63&u)<=127&&(a=null):3===s?(u=e[o+1],l=e[o+2],128==(192&u)&&128==(192&l)&&((a=(15&i)<<12|(63&u)<<6|63&l)<=2047||a>=55296&&a<=57343)&&(a=null)):4===s&&(u=e[o+1],l=e[o+2],c=e[o+3],128==(192&u)&&128==(192&l)&&128==(192&c)&&((a=(15&i)<<18|(63&u)<<12|(63&l)<<6|63&c)<=65535||a>=1114112)&&(a=null)),null===a?(a=65533,s=1):a>65535&&(a-=65536,r+=String.fromCharCode(a>>>10&1023|55296),a=56320|1023&a),r+=String.fromCharCode(a),o+=s}return r}function C(e,t,n){for(var r,o,i=0;i<t.length;i++){if((r=t.charCodeAt(i))>55295&&r<57344){if(!o){r>56319||i+1===t.length?(e[n++]=239,e[n++]=191,e[n++]=189):o=r;continue}if(r<56320){e[n++]=239,e[n++]=191,e[n++]=189,o=r;continue}r=o-55296<<10|r-56320|65536,o=null}else o&&(e[n++]=239,e[n++]=191,e[n++]=189,o=null);r<128?e[n++]=r:(r<2048?e[n++]=r>>6|192:(r<65536?e[n++]=r>>12|224:(e[n++]=r>>18|240,e[n++]=r>>12&63|128),e[n++]=r>>6&63|128),e[n++]=63&r|128)}return n}t.exports=r;var T=e("ieee754");r.Varint=0,r.Fixed64=1,r.Bytes=2,r.Fixed32=5;r.prototype={destroy:function(){this.buf=null},readFields:function(e,t,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),o=r>>3,i=this.pos;this.type=7&r,e(o,t,this),this.pos===i&&this.skip(r)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=b(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=x(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=b(this.buf,this.pos)+4294967296*b(this.buf,this.pos+4);return this.pos+=8,e},readSFixed64:function(){var e=b(this.buf,this.pos)+4294967296*x(this.buf,this.pos+4);return this.pos+=8,e},readFloat:function(){var e=T.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=T.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,n,r=this.buf;return n=r[this.pos++],t=127&n,n<128?t:(n=r[this.pos++],t|=(127&n)<<7,n<128?t:(n=r[this.pos++],t|=(127&n)<<14,n<128?t:(n=r[this.pos++],t|=(127&n)<<21,n<128?t:(n=r[this.pos],t|=(15&n)<<28,o(t,e,this)))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=E(this.buf,this.pos,e);return this.pos=e,t},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){var n=i(this);for(e=e||[];this.pos<n;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){var t=i(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){var t=i(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){var t=i(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){var t=i(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){var t=i(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){var t=i(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){var t=i(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){var t=i(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===r.Varint)for(;this.buf[this.pos++]>127;);else if(t===r.Bytes)this.pos=this.readVarint()+this.pos;else if(t===r.Fixed32)this.pos+=4;else{if(t!==r.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var n=new Uint8Array(t);n.set(this.buf),this.buf=n,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),w(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),w(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),w(this.buf,-1&e,this.pos),w(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),w(this.buf,-1&e,this.pos),w(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(e){if((e=+e||0)>268435455||e<0)return void s(e,this);this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127)))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=C(this.buf,e,this.pos);var n=this.pos-t;n>=128&&c(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n},writeFloat:function(e){this.realloc(4),T.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),T.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var n=0;n<t;n++)this.buf[this.pos++]=e[n]},writeRawMessage:function(e,t){this.pos++;var n=this.pos;e(t,this);var r=this.pos-n;r>=128&&c(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(e,t,n){this.writeTag(e,r.Bytes),this.writeRawMessage(t,n)},writePackedVarint:function(e,t){this.writeMessage(e,p,t)},writePackedSVarint:function(e,t){this.writeMessage(e,h,t)},writePackedBoolean:function(e,t){this.writeMessage(e,m,t)},writePackedFloat:function(e,t){this.writeMessage(e,f,t)},writePackedDouble:function(e,t){this.writeMessage(e,d,t)},writePackedFixed32:function(e,t){this.writeMessage(e,y,t)},writePackedSFixed32:function(e,t){this.writeMessage(e,v,t)},writePackedFixed64:function(e,t){this.writeMessage(e,g,t)},writePackedSFixed64:function(e,t){this.writeMessage(e,_,t)},writeBytesField:function(e,t){this.writeTag(e,r.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,r.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,r.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,r.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,r.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,r.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,r.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,r.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,r.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,r.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}}},{ieee754:24}],39:[function(e,t,n){function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(p===setTimeout)return setTimeout(e,0);if((p===r||!p)&&setTimeout)return p=setTimeout,setTimeout(e,0);try{return p(e,0)}catch(t){try{return p.call(null,e,0)}catch(t){return p.call(this,e,0)}}}function a(e){if(h===clearTimeout)return clearTimeout(e);if((h===o||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(e);try{return h(e)}catch(t){try{return h.call(null,e)}catch(t){return h.call(this,e)}}}function s(){y&&d&&(y=!1,d.length?m=d.concat(m):v=-1,m.length&&u())}function u(){if(!y){var e=i(s);y=!0;for(var t=m.length;t;){for(d=m,m=[];++v<t;)d&&d[v].run();v=-1,t=m.length}d=null,y=!1,a(e)}}function l(e,t){this.fun=e,this.array=t}function c(){}var p,h,f=t.exports={};!function(){try{p="function"==typeof setTimeout?setTimeout:r}catch(e){p=r}try{h="function"==typeof clearTimeout?clearTimeout:o}catch(e){h=o}}();var d,m=[],y=!1,v=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];m.push(new l(e,t)),1!==m.length||y||i(u)},l.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=c,f.addListener=c,f.once=c,f.off=c,f.removeListener=c,f.removeAllListeners=c,f.emit=c,f.prependListener=c,f.prependOnceListener=c,f.listeners=function(e){return[]},f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},{}],40:[function(e,t,n){"use strict";function r(e,t,n,a,s){for(n=n||0,a=a||e.length-1,s=s||i;a>n;){if(a-n>600){var u=a-n+1,l=t-n+1,c=Math.log(u),p=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*p*(u-p)/u)*(l-u/2<0?-1:1);r(e,t,Math.max(n,Math.floor(t-l*p/u+h)),Math.min(a,Math.floor(t+(u-l)*p/u+h)),s)}var f=e[t],d=n,m=a;for(o(e,n,t),s(e[a],f)>0&&o(e,n,a);d<m;){for(o(e,d,m),d++,m--;s(e[d],f)<0;)d++;for(;s(e[m],f)>0;)m--}0===s(e[n],f)?o(e,n,m):(m++,o(e,m,a)),m<=t&&(n=m+1),t<=m&&(a=m-1)}}function o(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function i(e,t){return e<t?-1:e>t?1:0}t.exports=r},{}],41:[function(e,t,n){"use strict";function r(e){return new o(e)}function o(e){this.options=f(Object.create(this.options),e),this.trees=new Array(this.options.maxZoom+1)}function i(e,t,n,r,o){return{x:e,y:t,zoom:1/0,id:r,properties:o,parentId:-1,numPoints:n}}function a(e,t){var n=e.geometry.coordinates;return{x:l(n[0]),y:c(n[1]),zoom:1/0,id:t,parentId:-1}}function s(e){return{type:"Feature",properties:u(e),geometry:{type:"Point",coordinates:[p(e.x),h(e.y)]}}}function u(e){var t=e.numPoints,n=t>=1e4?Math.round(t/1e3)+"k":t>=1e3?Math.round(t/100)/10+"k":t;return f(f({},e.properties),{cluster:!0,cluster_id:e.id,point_count:t,point_count_abbreviated:n})}function l(e){return e/360+.5}function c(e){var t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function p(e){return 360*(e-.5)}function h(e){var t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function f(e,t){for(var n in t)e[n]=t[n];return e}function d(e){return e.x}function m(e){return e.y}var y=e("kdbush");t.exports=r,o.prototype={options:{minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,reduce:null,initial:function(){return{}},map:function(e){return e}},load:function(e){var t=this.options.log;t&&console.time("total time");var n="prepare "+e.length+" points";t&&console.time(n),this.points=e;var r=e.map(a);t&&console.timeEnd(n);for(var o=this.options.maxZoom;o>=this.options.minZoom;o--){var i=+Date.now();this.trees[o+1]=y(r,d,m,this.options.nodeSize,Float32Array),r=this._cluster(r,o),t&&console.log("z%d: %d clusters in %dms",o,r.length,+Date.now()-i)}return this.trees[this.options.minZoom]=y(r,d,m,this.options.nodeSize,Float32Array),t&&console.timeEnd("total time"),this},getClusters:function(e,t){for(var n=this.trees[this._limitZoom(t)],r=n.range(l(e[0]),c(e[3]),l(e[2]),c(e[1])),o=[],i=0;i<r.length;i++){var a=n.points[r[i]];o.push(a.numPoints?s(a):this.points[a.id])}return o},getChildren:function(e,t){for(var n=this.trees[t+1].points[e],r=this.options.radius/(this.options.extent*Math.pow(2,t)),o=this.trees[t+1].within(n.x,n.y,r),i=[],a=0;a<o.length;a++){var u=this.trees[t+1].points[o[a]];u.parentId===e&&i.push(u.numPoints?s(u):this.points[u.id])}return i},getLeaves:function(e,t,n,r){n=n||10,r=r||0;var o=[];return this._appendLeaves(o,e,t,n,r,0),o},getTile:function(e,t,n){var r=this.trees[this._limitZoom(e)],o=Math.pow(2,e),i=this.options.extent,a=this.options.radius,s=a/i,u=(n-s)/o,l=(n+1+s)/o,c={features:[]};return this._addTileFeatures(r.range((t-s)/o,u,(t+1+s)/o,l),r.points,t,n,o,c),0===t&&this._addTileFeatures(r.range(1-s/o,u,1,l),r.points,o,n,o,c),t===o-1&&this._addTileFeatures(r.range(0,u,s/o,l),r.points,-1,n,o,c),c.features.length?c:null},getClusterExpansionZoom:function(e,t){for(;t<this.options.maxZoom;){var n=this.getChildren(e,t);if(t++,1!==n.length)break;e=n[0].properties.cluster_id}return t},_appendLeaves:function(e,t,n,r,o,i){for(var a=this.getChildren(t,n),s=0;s<a.length;s++){var u=a[s].properties;if(u.cluster?i+u.point_count<=o?i+=u.point_count:i=this._appendLeaves(e,u.cluster_id,n+1,r,o,i):i<o?i++:e.push(a[s]),e.length===r)break}return i},_addTileFeatures:function(e,t,n,r,o,i){for(var a=0;a<e.length;a++){var s=t[e[a]];i.features.push({type:1,geometry:[[Math.round(this.options.extent*(s.x*o-n)),Math.round(this.options.extent*(s.y*o-r))]],tags:s.numPoints?u(s):this.points[s.id].properties})}},_limitZoom:function(e){return Math.max(this.options.minZoom,Math.min(e,this.options.maxZoom+1))},_cluster:function(e,t){for(var n=[],r=this.options.radius/(this.options.extent*Math.pow(2,t)),o=0;o<e.length;o++){var a=e[o];if(!(a.zoom<=t)){a.zoom=t;var s=this.trees[t+1],u=s.within(a.x,a.y,r),l=a.numPoints||1,c=a.x*l,p=a.y*l,h=null;this.options.reduce&&(h=this.options.initial(),this._accumulate(h,a));for(var f=0;f<u.length;f++){var d=s.points[u[f]];if(t<d.zoom){var m=d.numPoints||1;d.zoom=t,c+=d.x*m,p+=d.y*m,l+=m,d.parentId=o,this.options.reduce&&this._accumulate(h,d)}}1===l?n.push(a):(a.parentId=o,n.push(i(c/l,p/l,l,o,h)))}}return n},_accumulate:function(e,t){var n=t.numPoints?t.properties:this.options.map(this.points[t.id].properties);this.options.reduce(e,n)}}},{kdbush:25}],42:[function(e,t,n){"use strict";function r(e,t){if(!(this instanceof r))return new r(e,t);if(this.data=e||[],this.length=this.data.length,this.compare=t||o,this.length>0)for(var n=this.length>>1;n>=0;n--)this._down(n)}function o(e,t){return e<t?-1:e>t?1:0}t.exports=r,r.prototype={push:function(e){this.data.push(e),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var e=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),e}},peek:function(){return this.data[0]},_up:function(e){for(var t=this.data,n=this.compare,r=t[e];e>0;){var o=e-1>>1,i=t[o];if(n(r,i)>=0)break;t[e]=i,e=o}t[e]=r},_down:function(e){for(var t=this.data,n=this.compare,r=this.length,o=r>>1,i=t[e];e<o;){var a=1+(e<<1),s=a+1,u=t[a];if(s<r&&n(t[s],u)<0&&(a=s,u=t[s]),n(u,i)>=0)break;t[e]=u,e=a}t[e]=i}}},{}],43:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],44:[function(e,t,n){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],45:[function(e,n,r){(function(t,n){function o(e,t){var n={seen:[],stylize:a};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),m(t)?n.showHidden=t:t&&r._extend(n,t),w(n.showHidden)&&(n.showHidden=!1),w(n.depth)&&(n.depth=2),w(n.colors)&&(n.colors=!1),w(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=i),u(n,e,n.depth)}function i(e,t){var n=o.styles[t];return n?"\x1b["+o.colors[n][0]+"m"+e+"\x1b["+o.colors[n][1]+"m":e}function a(e,t){return e}function s(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function u(e,t,n){if(e.customInspect&&t&&S(t.inspect)&&t.inspect!==r.inspect&&(!t.constructor||t.constructor.prototype!==t)){var o=t.inspect(n,e);return _(o)||(o=u(e,o,n)),o}var i=l(e,t);if(i)return i;var a=Object.keys(t),m=s(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(t)),T(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return c(t);if(0===a.length){if(S(t)){var y=t.name?": "+t.name:"";return e.stylize("[Function"+y+"]","special")}if(x(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(C(t))return e.stylize(Date.prototype.toString.call(t),"date");if(T(t))return c(t)}var v="",g=!1,b=["{","}"];if(d(t)&&(g=!0,b=["[","]"]),S(t)&&(v=" [Function"+(t.name?": "+t.name:"")+"]"),x(t)&&(v=" "+RegExp.prototype.toString.call(t)),C(t)&&(v=" "+Date.prototype.toUTCString.call(t)),T(t)&&(v=" "+c(t)),0===a.length&&(!g||0==t.length))return b[0]+v+b[1];if(n<0)return x(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var w;return w=g?p(e,t,n,m,a):a.map(function(r){return h(e,t,n,m,r,g)}),e.seen.pop(),f(w,v,b)}function l(e,t){if(w(t))return e.stylize("undefined","undefined");if(_(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return g(t)?e.stylize(""+t,"number"):m(t)?e.stylize(""+t,"boolean"):y(t)?e.stylize("null","null"):void 0}function c(e){return"["+Error.prototype.toString.call(e)+"]"}function p(e,t,n,r,o){for(var i=[],a=0,s=t.length;a<s;++a)I(t,String(a))?i.push(h(e,t,n,r,String(a),!0)):i.push("");return o.forEach(function(o){o.match(/^\d+$/)||i.push(h(e,t,n,r,o,!0))}),i}function h(e,t,n,r,o,i){var a,s,l;if(l=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]},l.get?s=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(s=e.stylize("[Setter]","special")),I(r,o)||(a="["+o+"]"),s||(e.seen.indexOf(l.value)<0?(s=y(n)?u(e,l.value,null):u(e,l.value,n-1),s.indexOf("\n")>-1&&(s=i?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n"))):s=e.stylize("[Circular]","special")),w(a)){if(i&&o.match(/^\d+$/))return s;a=JSON.stringify(""+o),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function f(e,t,n){var r=0;return e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function d(e){return Array.isArray(e)}function m(e){return"boolean"==typeof e}function y(e){return null===e}function v(e){return null==e}function g(e){return"number"==typeof e}function _(e){return"string"==typeof e}function b(e){return"symbol"==typeof e}function w(e){return void 0===e}function x(e){return E(e)&&"[object RegExp]"===O(e)}function E(e){return"object"==typeof e&&null!==e}function C(e){return E(e)&&"[object Date]"===O(e)}function T(e){return E(e)&&("[object Error]"===O(e)||e instanceof Error)}function S(e){return"function"==typeof e}function P(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function O(e){return Object.prototype.toString.call(e)}function A(e){return e<10?"0"+e.toString(10):e.toString(10)}function k(){var e=new Date,t=[A(e.getHours()),A(e.getMinutes()),A(e.getSeconds())].join(":");return[e.getDate(),D[e.getMonth()],t].join(" ")}function I(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var N=/%[sdj%]/g;r.format=function(e){if(!_(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(o(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,i=r.length,a=String(e).replace(N,function(e){if("%%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}}),s=r[n];n<i;s=r[++n])y(s)||!E(s)?a+=" "+s:a+=" "+o(s);return a},r.deprecate=function(e,o){function i(){if(!a){if(t.throwDeprecation)throw new Error(o);t.traceDeprecation?console.trace(o):console.error(o),a=!0}return e.apply(this,arguments)}if(w(n.process))return function(){return r.deprecate(e,o).apply(this,arguments)};if(!0===t.noDeprecation)return e;var a=!1;return i};var R,M={};r.debuglog=function(e){if(w(R)&&(R=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!M[e])if(new RegExp("\\b"+e+"\\b","i").test(R)){var n=t.pid;M[e]=function(){var t=r.format.apply(r,arguments);console.error("%s %d: %s",e,n,t)}}else M[e]=function(){};return M[e]},r.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},r.isArray=d,r.isBoolean=m,r.isNull=y,r.isNullOrUndefined=v,r.isNumber=g,r.isString=_,r.isSymbol=b,r.isUndefined=w,r.isRegExp=x,r.isObject=E,r.isDate=C,r.isError=T,r.isFunction=S,r.isPrimitive=P,r.isBuffer=e("./support/isBuffer");var D=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];r.log=function(){console.log("%s - %s",k(),r.format.apply(r,arguments))},r.inherits=e("inherits"),r._extend=function(e,t){if(!t||!E(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(this,e("_process"),"undefined"!==typeof t?t:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./support/isBuffer":44,_process:39,inherits:43}],46:[function(e,t,n){function r(e){var t=new f;return i(e,t),t.finish()}function o(e){var t={};for(var n in e)t[n]=new d(e[n].features),t[n].name=n;return r({layers:t})}function i(e,t){for(var n in e.layers)t.writeMessage(3,a,e.layers[n])}function a(e,t){t.writeVarintField(15,e.version||1),t.writeStringField(1,e.name||""),t.writeVarintField(5,e.extent||4096);var n,r={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<e.length;n++)r.feature=e.feature(n),t.writeMessage(2,s,r);var o=r.keys;for(n=0;n<o.length;n++)t.writeStringField(3,o[n]);var i=r.values;for(n=0;n<i.length;n++)t.writeMessage(4,h,i[n])}function s(e,t){var n=e.feature;void 0!==n.id&&t.writeVarintField(1,n.id),t.writeMessage(2,u,e),t.writeVarintField(3,n.type),t.writeMessage(4,p,n)}function u(e,t){var n=e.feature,r=e.keys,o=e.values,i=e.keycache,a=e.valuecache;for(var s in n.properties){var u=i[s];void 0===u&&(r.push(s),u=r.length-1,i[s]=u),t.writeVarint(u);var l=n.properties[s],c=typeof l;"string"!==c&&"boolean"!==c&&"number"!==c&&(l=JSON.stringify(l));var p=c+":"+l,h=a[p];void 0===h&&(o.push(l),h=o.length-1,a[p]=h),t.writeVarint(h)}}function l(e,t){return(t<<3)+(7&e)}function c(e){return e<<1^e>>31}function p(e,t){for(var n=e.loadGeometry(),r=e.type,o=0,i=0,a=n.length,s=0;s<a;s++){var u=n[s],p=1;1===r&&(p=u.length),t.writeVarint(l(1,p));for(var h=0;h<u.length;h++){1===h&&1!==r&&t.writeVarint(l(2,u.length-1));var f=u[h].x-o,d=u[h].y-i;t.writeVarint(c(f)),t.writeVarint(c(d)),o+=f,i+=d}}}function h(e,t){var n=typeof e;"string"===n?t.writeStringField(1,e):"boolean"===n?t.writeBooleanField(7,e):"number"===n&&(e%1!=0?t.writeDoubleField(3,e):e<0?t.writeSVarintField(6,e):t.writeVarintField(5,e))}var f=e("pbf"),d=e("./lib/geojson_wrapper");t.exports=r,t.exports.fromVectorTileJs=r,t.exports.fromGeojsonVt=o,t.exports.GeoJSONWrapper=d},{"./lib/geojson_wrapper":47,pbf:38}],47:[function(e,t,n){"use strict";function r(e){this.features=e,this.length=e.length}function o(e){this.id="number"==typeof e.id?e.id:void 0,this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=4096}var i=e("@mapbox/point-geometry"),a=e("@mapbox/vector-tile").VectorTileFeature;t.exports=r,r.prototype.feature=function(e){return new o(this.features[e])},o.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var t=0;t<e.length;t++){for(var n=e[t],r=[],o=0;o<n.length;o++)r.push(new i(n[o][0],n[o][1]));this.geometry.push(r)}return this.geometry},o.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,n=-1/0,r=1/0,o=-1/0,i=0;i<e.length;i++)for(var a=e[i],s=0;s<a.length;s++){var u=a[s];t=Math.min(t,u.x),n=Math.max(n,u.x),r=Math.min(r,u.y),o=Math.max(o,u.y)}return[t,r,n,o]},o.prototype.toGeoJSON=a.prototype.toGeoJSON},{"@mapbox/point-geometry":2,"@mapbox/vector-tile":6}],48:[function(e,t,n){var r=arguments[3],o=arguments[4],i=arguments[5],a=JSON.stringify;t.exports=function(e,t){function n(e){y[e]=!0;for(var t in o[e][1]){var r=o[e][1][t];y[r]||n(r)}}for(var s,u=Object.keys(i),l=0,c=u.length;l<c;l++){var p=u[l],h=i[p].exports;if(h===e||h&&h.default===e){s=p;break}}if(!s){s=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var f={},l=0,c=u.length;l<c;l++){var p=u[l];f[p]=p}o[s]=[Function(["require","module","exports"],"("+e+")(self)"),f]}var d=Math.floor(Math.pow(16,8)*Math.random()).toString(16),m={};m[s]=s,o[d]=[Function(["require"],"var f = require("+a(s)+");(f.default ? f.default : f)(self);"),m];var y={};n(d);var v="("+r+")({"+Object.keys(y).map(function(e){return a(e)+":["+o[e][0]+","+a(o[e][1])+"]"}).join(",")+"},{},["+a(d)+"])",g=window.URL||window.webkitURL||window.mozURL||window.msURL,_=new Blob([v],{type:"text/javascript"});if(t&&t.bare)return _;var b=g.createObjectURL(_),w=new Worker(b);return w.objectURL=b,w}},{}],49:[function(e,t,n){t.exports.RADIUS=6378137,t.exports.FLATTENING=1/298.257223563,t.exports.POLAR_RADIUS=6356752.3142},{}],50:[function(e,t,n){t.exports={version:"0.41.0"}},{}],51:[function(e,t,n){"use strict";var r=e("../util/util");t.exports={deserialize:function(e,t){var n={};if(!t)return n;for(var o=0,i=e;o<i.length;o+=1){var a=i[o],s=a.layerIds.map(function(e){return t.getLayer(e)}).filter(Boolean);if(0!==s.length)for(var u=s[0].createBucket(r.extend({layers:s},a)),l=0,c=s;l<c.length;l+=1){var p=c[l];n[p.id]=u}}return n}}},{"../util/util":252}],52:[function(e,t,n){"use strict";function r(e,t,n,r,o){e.emplaceBack(2*t+(r+1)/2,2*n+(o+1)/2)}var o=e("../segment"),i=o.SegmentVector,a=e("../../gl/vertex_buffer"),s=e("../../gl/index_buffer"),u=e("../program_configuration"),l=u.ProgramConfigurationSet,c=e("../vertex_array_type"),p=e("../index_array_type"),h=p.TriangleIndexArray,f=e("../load_geometry"),d=e("../extent"),m={layoutAttributes:[{name:"a_pos",components:2,type:"Int16"}],indexArrayType:h,paintAttributes:[{property:"circle-color"},{property:"circle-radius"},{property:"circle-blur"},{property:"circle-opacity"},{property:"circle-stroke-color"},{property:"circle-stroke-width"},{property:"circle-stroke-opacity"}]},y=c(m.layoutAttributes),v=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.index=e.index,this.layoutVertexArray=new y(e.layoutVertexArray),this.indexArray=new h(e.indexArray),this.segments=new i(e.segments),this.programConfigurations=new l(this.constructor.programInterface,e.layers,e.zoom,e.programConfigurations)};v.prototype.populate=function(e,t){for(var n=this,r=0,o=e;r<o.length;r+=1){var i=o[r],a=i.feature,s=i.index,u=i.sourceLayerIndex;if(n.layers[0]._featureFilter({zoom:n.zoom},a)){var l=f(a);n.addFeature(a,l),t.featureIndex.insert(a,l,s,u,n.index)}}},v.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},v.prototype.serialize=function(e){return{zoom:this.zoom,layerIds:this.layers.map(function(e){return e.id}),layoutVertexArray:this.layoutVertexArray.serialize(e),indexArray:this.indexArray.serialize(e),programConfigurations:this.programConfigurations.serialize(e),segments:this.segments.get()}},v.prototype.upload=function(e){this.layoutVertexBuffer=new a(e,this.layoutVertexArray),this.indexBuffer=new s(e,this.indexArray),this.programConfigurations.upload(e)},v.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},v.prototype.addFeature=function(e,t){for(var n=this,o=0,i=t;o<i.length;o+=1)for(var a=i[o],s=0,u=a;s<u.length;s+=1){var l=u[s],c=l.x,p=l.y;if(!(c<0||c>=d||p<0||p>=d)){var h=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray),f=h.vertexLength;r(n.layoutVertexArray,c,p,-1,-1),r(n.layoutVertexArray,c,p,1,-1),r(n.layoutVertexArray,c,p,1,1),r(n.layoutVertexArray,c,p,-1,1),n.indexArray.emplaceBack(f,f+1,f+2),n.indexArray.emplaceBack(f,f+3,f+2),h.vertexLength+=4,h.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e)},v.programInterface=m,t.exports=v},{"../../gl/index_buffer":71,"../../gl/vertex_buffer":72,"../extent":58,"../index_array_type":60,"../load_geometry":61,"../program_configuration":63,"../segment":65,"../vertex_array_type":66}],53:[function(e,t,n){"use strict";var r=e("../segment"),o=r.SegmentVector,i=e("../../gl/vertex_buffer"),a=e("../../gl/index_buffer"),s=e("../program_configuration"),u=s.ProgramConfigurationSet,l=e("../vertex_array_type"),c=e("../index_array_type"),p=c.LineIndexArray,h=c.TriangleIndexArray,f=e("../load_geometry"),d=e("earcut"),m=e("../../util/classify_rings"),y={layoutAttributes:[{name:"a_pos",components:2,type:"Int16"}],indexArrayType:h,indexArrayType2:p,paintAttributes:[{property:"fill-color"},{property:"fill-outline-color"},{property:"fill-opacity"}]},v=l(y.layoutAttributes),g=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.index=e.index,this.layoutVertexArray=new v(e.layoutVertexArray),this.indexArray=new h(e.indexArray),this.indexArray2=new p(e.indexArray2),this.programConfigurations=new u(y,e.layers,e.zoom,e.programConfigurations),this.segments=new o(e.segments),this.segments2=new o(e.segments2)};g.prototype.populate=function(e,t){for(var n=this,r=0,o=e;r<o.length;r+=1){var i=o[r],a=i.feature,s=i.index,u=i.sourceLayerIndex;if(n.layers[0]._featureFilter({zoom:n.zoom},a)){var l=f(a);n.addFeature(a,l),t.featureIndex.insert(a,l,s,u,n.index)}}},g.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},g.prototype.serialize=function(e){return{zoom:this.zoom,layerIds:this.layers.map(function(e){return e.id}),layoutVertexArray:this.layoutVertexArray.serialize(e),indexArray:this.indexArray.serialize(e),indexArray2:this.indexArray2.serialize(e),programConfigurations:this.programConfigurations.serialize(e),segments:this.segments.get(),segments2:this.segments2.get()}},g.prototype.upload=function(e){this.layoutVertexBuffer=new i(e,this.layoutVertexArray),this.indexBuffer=new a(e,this.indexArray),this.indexBuffer2=new a(e,this.indexArray2),this.programConfigurations.upload(e)},g.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},g.prototype.addFeature=function(e,t){for(var n=this,r=0,o=m(t,500);r<o.length;r+=1){for(var i=o[r],a=0,s=0,u=i;s<u.length;s+=1)a+=u[s].length;for(var l=n.segments.prepareSegment(a,n.layoutVertexArray,n.indexArray),c=l.vertexLength,p=[],h=[],f=0,y=i;f<y.length;f+=1){var v=y[f];if(0!==v.length){v!==i[0]&&h.push(p.length/2);var g=n.segments2.prepareSegment(v.length,n.layoutVertexArray,n.indexArray2),_=g.vertexLength;n.layoutVertexArray.emplaceBack(v[0].x,v[0].y),n.indexArray2.emplaceBack(_+v.length-1,_),p.push(v[0].x),p.push(v[0].y);for(var b=1;b<v.length;b++)n.layoutVertexArray.emplaceBack(v[b].x,v[b].y),n.indexArray2.emplaceBack(_+b-1,_+b),p.push(v[b].x),p.push(v[b].y);g.vertexLength+=v.length,g.primitiveLength+=v.length}}for(var w=d(p,h),x=0;x<w.length;x+=3)n.indexArray.emplaceBack(c+w[x],c+w[x+1],c+w[x+2]);l.vertexLength+=a,l.primitiveLength+=w.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e)},g.programInterface=y,t.exports=g},{"../../gl/index_buffer":71,"../../gl/vertex_buffer":72,"../../util/classify_rings":234,"../index_array_type":60,"../load_geometry":61,"../program_configuration":63,"../segment":65,"../vertex_array_type":66,earcut:12}],54:[function(e,t,n){"use strict";function r(e,t,n,r,o,i,a,s){e.emplaceBack(t,n,2*Math.floor(r*b)+a,o*b*2,i*b*2,Math.round(s))}function o(e,t){return e.x===t.x&&(e.x<0||e.x>y)||e.y===t.y&&(e.y<0||e.y>y)}var i=e("../segment"),a=i.SegmentVector,s=i.MAX_VERTEX_ARRAY_LENGTH,u=e("../../gl/vertex_buffer"),l=e("../../gl/index_buffer"),c=e("../program_configuration"),p=c.ProgramConfigurationSet,h=e("../vertex_array_type"),f=e("../index_array_type"),d=f.TriangleIndexArray,m=e("../load_geometry"),y=e("../extent"),v=e("earcut"),g=e("../../util/classify_rings"),_={layoutAttributes:[{name:"a_pos",components:2,type:"Int16"},{name:"a_normal",components:3,type:"Int16"},{name:"a_edgedistance",components:1,type:"Int16"}],indexArrayType:d,paintAttributes:[{property:"fill-extrusion-base"},{property:"fill-extrusion-height"},{property:"fill-extrusion-color"}]},b=Math.pow(2,13),w=h(_.layoutAttributes),x=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.index=e.index,this.layoutVertexArray=new w(e.layoutVertexArray),this.indexArray=new d(e.indexArray),this.programConfigurations=new p(_,e.layers,e.zoom,e.programConfigurations),this.segments=new a(e.segments)};x.prototype.populate=function(e,t){for(var n=this,r=0,o=e;r<o.length;r+=1){var i=o[r],a=i.feature,s=i.index,u=i.sourceLayerIndex;if(n.layers[0]._featureFilter({zoom:n.zoom},a)){var l=m(a);n.addFeature(a,l),t.featureIndex.insert(a,l,s,u,n.index)}}},x.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},x.prototype.serialize=function(e){return{zoom:this.zoom,layerIds:this.layers.map(function(e){return e.id}),layoutVertexArray:this.layoutVertexArray.serialize(e),indexArray:this.indexArray.serialize(e),programConfigurations:this.programConfigurations.serialize(e),segments:this.segments.get()}},x.prototype.upload=function(e){this.layoutVertexBuffer=new u(e,this.layoutVertexArray),this.indexBuffer=new l(e,this.indexArray),this.programConfigurations.upload(e)},x.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},x.prototype.addFeature=function(e,t){for(var n=this,i=0,a=g(t,500);i<a.length;i+=1){for(var u=a[i],l=0,c=0,p=u;c<p.length;c+=1)l+=p[c].length;for(var h=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray),f=0,d=u;f<d.length;f+=1){var m=d[f];if(0!==m.length)for(var y=0,_=0;_<m.length;_++){var b=m[_];if(_>=1){var w=m[_-1];if(!o(b,w)){h.vertexLength+4>s&&(h=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray));var x=b.sub(w)._perp()._unit();r(n.layoutVertexArray,b.x,b.y,x.x,x.y,0,0,y),r(n.layoutVertexArray,b.x,b.y,x.x,x.y,0,1,y),y+=w.dist(b),r(n.layoutVertexArray,w.x,w.y,x.x,x.y,0,0,y),r(n.layoutVertexArray,w.x,w.y,x.x,x.y,0,1,y);var E=h.vertexLength;n.indexArray.emplaceBack(E,E+1,E+2),n.indexArray.emplaceBack(E+1,E+2,E+3),h.vertexLength+=4,h.primitiveLength+=2}}}}h.vertexLength+l>s&&(h=n.segments.prepareSegment(l,n.layoutVertexArray,n.indexArray));for(var C=[],T=[],S=h.vertexLength,P=0,O=u;P<O.length;P+=1){var A=O[P];if(0!==A.length){A!==u[0]&&T.push(C.length/2);for(var k=0;k<A.length;k++){var I=A[k];r(n.layoutVertexArray,I.x,I.y,0,0,1,1,0),C.push(I.x),C.push(I.y)}}}for(var N=v(C,T),R=0;R<N.length;R+=3)n.indexArray.emplaceBack(S+N[R],S+N[R+1],S+N[R+2]);h.primitiveLength+=N.length/3,h.vertexLength+=l}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e)},x.programInterface=_,t.exports=x},{"../../gl/index_buffer":71,"../../gl/vertex_buffer":72,"../../util/classify_rings":234,"../extent":58,"../index_array_type":60,"../load_geometry":61,"../program_configuration":63,"../segment":65,"../vertex_array_type":66,earcut:12}],55:[function(e,t,n){"use strict";var r=e("./circle_bucket"),o={layoutAttributes:r.programInterface.layoutAttributes,indexArrayType:r.programInterface.indexArrayType,paintAttributes:[{property:"heatmap-weight"}]},i=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(r);i.programInterface=o,t.exports=i},{"./circle_bucket":52}],56:[function(e,t,n){"use strict";function r(e,t,n,r,o,i,a){e.emplaceBack(t.x,t.y,r?1:0,o?1:-1,Math.round(y*n.x)+128,Math.round(y*n.y)+128,1+(0===i?0:i<0?-1:1)|(a*g&63)<<2,a*g>>6)}var o=e("../segment"),i=o.SegmentVector,a=e("../../gl/vertex_buffer"),s=e("../../gl/index_buffer"),u=e("../program_configuration"),l=u.ProgramConfigurationSet,c=e("../vertex_array_type"),p=e("../index_array_type"),h=p.TriangleIndexArray,f=e("../load_geometry"),d=e("../extent"),m=e("@mapbox/vector-tile").VectorTileFeature.types,y=63,v=Math.cos(Math.PI/180*37.5),g=.5,_=Math.pow(2,14)/g,b={layoutAttributes:[{name:"a_pos_normal",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],paintAttributes:[{property:"line-color"},{property:"line-blur"},{property:"line-opacity"},{property:"line-gap-width",name:"gapwidth"},{property:"line-offset"},{property:"line-width"},{property:"line-width",name:"floorwidth",useIntegerZoom:!0}],indexArrayType:h},w=c(b.layoutAttributes),x=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.index=e.index,this.layoutVertexArray=new w(e.layoutVertexArray),this.indexArray=new h(e.indexArray),this.programConfigurations=new l(b,e.layers,e.zoom,e.programConfigurations),this.segments=new i(e.segments)};x.prototype.populate=function(e,t){for(var n=this,r=0,o=e;r<o.length;r+=1){var i=o[r],a=i.feature,s=i.index,u=i.sourceLayerIndex;if(n.layers[0]._featureFilter({zoom:n.zoom},a)){var l=f(a);n.addFeature(a,l),t.featureIndex.insert(a,l,s,u,n.index)}}},x.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},x.prototype.serialize=function(e){return{zoom:this.zoom,layerIds:this.layers.map(function(e){return e.id}),layoutVertexArray:this.layoutVertexArray.serialize(e),indexArray:this.indexArray.serialize(e),programConfigurations:this.programConfigurations.serialize(e),segments:this.segments.get()}},x.prototype.upload=function(e){this.layoutVertexBuffer=new a(e,this.layoutVertexArray),this.indexBuffer=new s(e,this.indexArray),this.programConfigurations.upload(e)},x.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},x.prototype.addFeature=function(e,t){for(var n=this,r=this.layers[0].layout,o=this.layers[0].getLayoutValue("line-join",{zoom:this.zoom},e),i=r["line-cap"],a=r["line-miter-limit"],s=r["line-round-limit"],u=0,l=t;u<l.length;u+=1){var c=l[u];n.addLine(c,e,o,i,a,s)}},x.prototype.addLine=function(e,t,n,r,o,i){for(var a=this,s="Polygon"===m[t.type],u=e.length;u>=2&&e[u-1].equals(e[u-2]);)u--;for(var l=0;l<u-1&&e[l].equals(e[l+1]);)l++;if(!(u<(s?3:2))){"bevel"===n&&(o=1.05);var c=d/(512*this.overscaling)*15,p=e[l],h=this.segments.prepareSegment(10*u,this.layoutVertexArray,this.indexArray);this.distance=0;var f,y,g,_=r,b=s?"butt":r,w=!0,x=void 0,E=void 0,C=void 0,T=void 0;this.e1=this.e2=this.e3=-1,s&&(f=e[u-2],T=p.sub(f)._unit()._perp());for(var S=l;S<u;S++)if(!(E=s&&S===u-1?e[l+1]:e[S+1])||!e[S].equals(E)){T&&(C=T),f&&(x=f),f=e[S],T=E?E.sub(f)._unit()._perp():C,C=C||T;var P=C.add(T);0===P.x&&0===P.y||P._unit();var O=P.x*T.x+P.y*T.y,A=0!==O?1/O:1/0,k=O<v&&x&&E;if(k&&S>l){var I=f.dist(x);if(I>2*c){var N=f.sub(f.sub(x)._mult(c/I)._round());a.distance+=N.dist(x),a.addCurrentVertex(N,a.distance,C.mult(1),0,0,!1,h),x=N}}var R=x&&E,M=R?n:E?_:b;if(R&&"round"===M&&(A<i?M="miter":A<=2&&(M="fakeround")),"miter"===M&&A>o&&(M="bevel"),"bevel"===M&&(A>2&&(M="flipbevel"),A<o&&(M="miter")),x&&(a.distance+=f.dist(x)),"miter"===M)P._mult(A),a.addCurrentVertex(f,a.distance,P,0,0,!1,h);else if("flipbevel"===M){if(A>100)P=T.clone().mult(-1);else{var D=C.x*T.y-C.y*T.x>0?-1:1,L=A*C.add(T).mag()/C.sub(T).mag();P._perp()._mult(L*D)}a.addCurrentVertex(f,a.distance,P,0,0,!1,h),a.addCurrentVertex(f,a.distance,P.mult(-1),0,0,!1,h)}else if("bevel"===M||"fakeround"===M){var F=C.x*T.y-C.y*T.x>0,j=-Math.sqrt(A*A-1);if(F?(g=0,y=j):(y=0,g=j),w||a.addCurrentVertex(f,a.distance,C,y,g,!1,h),"fakeround"===M){for(var z=Math.floor(8*(.5-(O-.5))),B=void 0,U=0;U<z;U++)B=T.mult((U+1)/(z+1))._add(C)._unit(),a.addPieSliceVertex(f,a.distance,B,F,h);a.addPieSliceVertex(f,a.distance,P,F,h);for(var V=z-1;V>=0;V--)B=C.mult((V+1)/(z+1))._add(T)._unit(),a.addPieSliceVertex(f,a.distance,B,F,h)}E&&a.addCurrentVertex(f,a.distance,T,-y,-g,!1,h)}else"butt"===M?(w||a.addCurrentVertex(f,a.distance,C,0,0,!1,h),E&&a.addCurrentVertex(f,a.distance,T,0,0,!1,h)):"square"===M?(w||(a.addCurrentVertex(f,a.distance,C,1,1,!1,h),a.e1=a.e2=-1),E&&a.addCurrentVertex(f,a.distance,T,-1,-1,!1,h)):"round"===M&&(w||(a.addCurrentVertex(f,a.distance,C,0,0,!1,h),a.addCurrentVertex(f,a.distance,C,1,1,!0,h),a.e1=a.e2=-1),E&&(a.addCurrentVertex(f,a.distance,T,-1,-1,!0,h),a.addCurrentVertex(f,a.distance,T,0,0,!1,h)));if(k&&S<u-1){var W=f.dist(E);if(W>2*c){var q=f.add(E.sub(f)._mult(c/W)._round());a.distance+=q.dist(f),a.addCurrentVertex(q,a.distance,T.mult(1),0,0,!1,h),f=q}}w=!1}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t)}},x.prototype.addCurrentVertex=function(e,t,n,o,i,a,s){var u,l=this.layoutVertexArray,c=this.indexArray;u=n.clone(),o&&u._sub(n.perp()._mult(o)),r(l,e,u,a,!1,o,t),this.e3=s.vertexLength++,this.e1>=0&&this.e2>=0&&(c.emplaceBack(this.e1,this.e2,this.e3),s.primitiveLength++),this.e1=this.e2,this.e2=this.e3,u=n.mult(-1),i&&u._sub(n.perp()._mult(i)),r(l,e,u,a,!0,-i,t),this.e3=s.vertexLength++,this.e1>=0&&this.e2>=0&&(c.emplaceBack(this.e1,this.e2,this.e3),s.primitiveLength++),this.e1=this.e2,this.e2=this.e3,t>_/2&&(this.distance=0,this.addCurrentVertex(e,this.distance,n,o,i,a,s))},x.prototype.addPieSliceVertex=function(e,t,n,o,i){n=n.mult(o?-1:1);var a=this.layoutVertexArray,s=this.indexArray;r(a,e,n,!1,o,0,t),this.e3=i.vertexLength++,this.e1>=0&&this.e2>=0&&(s.emplaceBack(this.e1,this.e2,this.e3),i.primitiveLength++),o?this.e2=this.e3:this.e1=this.e3},x.programInterface=b,t.exports=x},{"../../gl/index_buffer":71,"../../gl/vertex_buffer":72,"../extent":58,"../index_array_type":60,"../load_geometry":61,"../program_configuration":63,"../segment":65,"../vertex_array_type":66,"@mapbox/vector-tile":6}],57:[function(e,t,n){"use strict";function r(e,t,n,r,o,i,a,s){e.emplaceBack(t,n,Math.round(64*r),Math.round(64*o),i,a,s?s[0]:void 0,s?s[1]:void 0)}function o(e,t,n,r){var o=2*Math.PI,i=b((n+o)%o/o*255,10*r);e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i)}function i(e,t,n,r,o,i){return e.emplaceBack(t.x,t.y,n.x,n.y,Math.round(r.x),Math.round(r.y),10*o,10*i)}function a(e,t,n,r,o){if("source"===n.functionType)return[10*e.getLayoutValue(r,{},o)];if("composite"===n.functionType){var i=n.coveringZoomRange;return[10*e.getLayoutValue(r,{zoom:i[0]},o),10*e.getLayoutValue(r,{zoom:i[1]},o)]}return null}var s=e("@mapbox/point-geometry"),u=e("../segment"),l=u.SegmentVector,c=e("../../gl/vertex_buffer"),p=e("../../gl/index_buffer"),h=e("../program_configuration"),f=h.ProgramConfigurationSet,d=e("../vertex_array_type"),m=e("../index_array_type"),y=m.TriangleIndexArray,v=m.LineIndexArray,g=e("../extent"),_=e("../../shaders/encode_attribute"),b=_.packUint8ToFloat,w=e("../../symbol/anchor"),x=e("../../symbol/get_anchors"),E=e("../../util/token"),C=e("../../symbol/quads"),T=C.getGlyphQuads,S=C.getIconQuads,P=e("../../symbol/shaping"),O=P.shapeText,A=P.shapeIcon,k=P.WritingMode,I=e("../../symbol/transform_text"),N=e("../../symbol/mergelines"),R=e("../../symbol/clip_line"),M=e("../../util/util"),D=e("../../util/script_detection"),L=e("../load_geometry"),F=e("../../symbol/collision_feature"),j=e("../../util/find_pole_of_inaccessibility"),z=e("../../util/classify_rings"),B=e("@mapbox/vector-tile").VectorTileFeature.types,U=e("../../util/struct_array"),V=e("../../util/verticalize_punctuation"),W=e("../../symbol/symbol_size"),q=W.getSizeData,H=U({members:[{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Float32",name:"placementZoom"},{type:"Uint8",name:"vertical"}]}),G=U({members:[{type:"Float32",name:"offsetX"}]}),K=U({members:[{type:"Int16",name:"x"},{type:"Int16",name:"y"}]}),X=[{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"}],Y=[{name:"a_projected_pos",components:3,type:"Float32"}],Z={text:{layoutAttributes:X,dynamicLayoutAttributes:Y,indexArrayType:y,paintAttributes:[{property:"text-color",name:"fill_color"},{property:"text-halo-color",name:"halo_color"},{property:"text-halo-width",name:"halo_width"},{property:"text-halo-blur",name:"halo_blur"},{property:"text-opacity",name:"opacity"}]},icon:{layoutAttributes:X,dynamicLayoutAttributes:Y,indexArrayType:y,paintAttributes:[{property:"icon-color",name:"fill_color"},{property:"icon-halo-color",name:"halo_color"},{property:"icon-halo-width",name:"halo_width"},{property:"icon-halo-blur",name:"halo_blur"},{property:"icon-opacity",name:"opacity"}]},collisionBox:{layoutAttributes:[{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"},{name:"a_data",components:2,type:"Uint8"}],indexArrayType:v}},Q=function(e,t,n,r){this.programInterface=e;var o=d(e.layoutAttributes),i=e.indexArrayType;if(this.layoutVertexArray=new o(r&&r.layoutVertexArray),this.indexArray=new i(r&&r.indexArray),this.programConfigurations=new f(e,t,n,r&&r.programConfigurations),this.segments=new l(r&&r.segments),e.dynamicLayoutAttributes){var a=d(e.dynamicLayoutAttributes);this.dynamicLayoutVertexArray=new a(r&&r.dynamicLayoutVertexArray)}};Q.prototype.serialize=function(e){return{layoutVertexArray:this.layoutVertexArray.serialize(e),indexArray:this.indexArray.serialize(e),programConfigurations:this.programConfigurations.serialize(e),segments:this.segments.get(),dynamicLayoutVertexArray:this.dynamicLayoutVertexArray&&this.dynamicLayoutVertexArray.serialize(e)}},Q.prototype.upload=function(e){this.layoutVertexBuffer=new c(e,this.layoutVertexArray),this.indexBuffer=new p(e,this.indexArray),this.programConfigurations.upload(e),this.programInterface.dynamicLayoutAttributes&&(this.dynamicLayoutVertexBuffer=new c(e,this.dynamicLayoutVertexArray,!0))},Q.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer&&this.dynamicLayoutVertexBuffer.destroy())};var J=function(e){if(this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.index=e.index,this.sdfIcons=e.sdfIcons,this.iconsNeedLinear=e.iconsNeedLinear,this.pixelRatio=e.pixelRatio,e.text)this.text=new Q(Z.text,e.layers,e.zoom,e.text),this.icon=new Q(Z.icon,e.layers,e.zoom,e.icon),this.collisionBox=new Q(Z.collisionBox,e.layers,e.zoom,e.collisionBox),this.textSizeData=e.textSizeData,this.iconSizeData=e.iconSizeData,this.placedGlyphArray=new H(e.placedGlyphArray),this.placedIconArray=new H(e.placedIconArray),this.glyphOffsetArray=new G(e.glyphOffsetArray),this.lineVertexArray=new K(e.lineVertexArray);else{var t=this.layers[0];this.textSizeData=q(this.zoom,t,"text-size"),this.iconSizeData=q(this.zoom,t,"icon-size")}};J.prototype.populate=function(e,t){var n=this,r=this.layers[0],o=r.layout,i=o["text-font"],a=(!r.isLayoutValueFeatureConstant("text-field")||o["text-field"])&&i,s=!r.isLayoutValueFeatureConstant("icon-image")||o["icon-image"];if(this.features=[],a||s){for(var u=t.iconDependencies,l=t.glyphDependencies,c=l[i]=l[i]||{},p={zoom:this.zoom},h=0,f=e;h<f.length;h+=1){var d=f[h],m=d.feature,y=d.index,v=d.sourceLayerIndex;if(r._featureFilter(p,m)){var g=void 0;a&&(g=r.getLayoutValue("text-field",p,m),r.isLayoutValueFeatureConstant("text-field")&&(g=E(m.properties,g)),g=I(g,r,p,m));var _=void 0;if(s&&(_=r.getLayoutValue("icon-image",p,m),r.isLayoutValueFeatureConstant("icon-image")&&(_=E(m.properties,_))),g||_){var b={text:g,icon:_,index:y,sourceLayerIndex:v,geometry:L(m),properties:m.properties,type:B[m.type]};if(void 0!==m.id&&(b.id=m.id),n.features.push(b),_&&(u[_]=!0),g)for(var w="map"===o["text-rotation-alignment"]&&"line"===o["symbol-placement"],x=D.allowsVerticalWritingMode(g),C=0;C<g.length;C++)if(c[g.charCodeAt(C)]=!0,w&&x){var T=V.lookup[g.charAt(C)];T&&(c[T.charCodeAt(0)]=!0)}}}}"line"===o["symbol-placement"]&&(this.features=N(this.features))}},J.prototype.isEmpty=function(){return 0===this.icon.layoutVertexArray.length&&0===this.text.layoutVertexArray.length&&0===this.collisionBox.layoutVertexArray.length},J.prototype.serialize=function(e){return{zoom:this.zoom,layerIds:this.layers.map(function(e){return e.id}),sdfIcons:this.sdfIcons,iconsNeedLinear:this.iconsNeedLinear,textSizeData:this.textSizeData,iconSizeData:this.iconSizeData,placedGlyphArray:this.placedGlyphArray.serialize(e),placedIconArray:this.placedIconArray.serialize(e),glyphOffsetArray:this.glyphOffsetArray.serialize(e),lineVertexArray:this.lineVertexArray.serialize(e),text:this.text.serialize(e),icon:this.icon.serialize(e),collisionBox:this.collisionBox.serialize(e)}},J.prototype.upload=function(e){this.text.upload(e),this.icon.upload(e),this.collisionBox.upload(e)},J.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.collisionBox.destroy()},J.prototype.prepare=function(e,t,n,r){var o=this;this.symbolInstances=[];var i=512*this.overscaling;this.tilePixelRatio=g/i,this.compareText={},this.iconsNeedLinear=!1;for(var a=this.layers[0].layout,s=24*a["text-line-height"],u=a["text-font"].join(","),l="map"===a["text-rotation-alignment"]&&"line"===a["symbol-placement"],c=e[u]||{},p=t[u]||{},h=0,f=o.features;h<f.length;h+=1){var d=f[h],m={},y=d.text;if(y){var v=o.layers[0].getLayoutValue("text-offset",{zoom:o.zoom},d).map(function(e){return 24*e}),_=24*o.layers[0].getLayoutValue("text-letter-spacing",{zoom:o.zoom},d),b=D.allowsLetterSpacing(y)?_:0,w=o.layers[0].getLayoutValue("text-anchor",{zoom:o.zoom},d),x=o.layers[0].getLayoutValue("text-justify",{zoom:o.zoom},d),E="line"!==a["symbol-placement"]?24*o.layers[0].getLayoutValue("text-max-width",{zoom:o.zoom},d):0,C=function(e,t){return O(e,c,E,s,w,x,b,v,24,t)};m[k.horizontal]=C(y,k.horizontal),D.allowsVerticalWritingMode(y)&&l&&(m[k.vertical]=C(y,k.vertical))}var T=void 0;if(d.icon){var S=n[d.icon];S&&(T=A(r[d.icon],o.layers[0].getLayoutValue("icon-offset",{zoom:o.zoom},d),o.layers[0].getLayoutValue("icon-anchor",{zoom:o.zoom},d)),void 0===o.sdfIcons?o.sdfIcons=S.sdf:o.sdfIcons!==S.sdf&&M.warnOnce("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),S.pixelRatio!==o.pixelRatio?o.iconsNeedLinear=!0:0===a["icon-rotate"]&&o.layers[0].isLayoutValueFeatureConstant("icon-rotate")||(o.iconsNeedLinear=!0))}(m[k.horizontal]||T)&&o.addFeature(d,m,T,p)}},J.prototype.addFeature=function(e,t,n,r){var o=this,i=this.layers[0].getLayoutValue("text-size",{zoom:this.zoom+1},e),a=this.layers[0].getLayoutValue("icon-size",{zoom:this.zoom+1},e),s=this.layers[0].getLayoutValue("text-offset",{zoom:this.zoom},e),u=this.layers[0].getLayoutValue("icon-offset",{zoom:this.zoom},e),l=this.layers[0].getLayoutValue("text-size",{zoom:18},e);void 0===l&&(l=i);var c=this.layers[0].layout,p=i/24,h=this.tilePixelRatio*p,f=this.tilePixelRatio*l/24,d=this.tilePixelRatio*a,m=this.tilePixelRatio*c["symbol-spacing"],y=c["symbol-avoid-edges"],v=c["text-padding"]*this.tilePixelRatio,_=c["icon-padding"]*this.tilePixelRatio,b=c["text-max-angle"]/180*Math.PI,E="map"===c["text-rotation-alignment"]&&"line"===c["symbol-placement"],C="map"===c["icon-rotation-alignment"]&&"line"===c["symbol-placement"],T=c["text-allow-overlap"]||c["icon-allow-overlap"]||c["text-ignore-placement"]||c["icon-ignore-placement"],S=c["symbol-placement"],P=m/2,O=function(i,a){var l=!(a.x<0||a.x>g||a.y<0||a.y>g);if(!y||l){var c=l||T;o.addSymbolInstance(a,i,t,n,o.layers[0],c,o.collisionBoxArray,e.index,e.sourceLayerIndex,o.index,h,v,E,s,d,_,C,u,{zoom:o.zoom},e,r)}};if("line"===S)for(var A=0,I=R(e.geometry,0,0,g,g);A<I.length;A+=1)for(var N=I[A],M=x(N,m,b,t[k.vertical]||t[k.horizontal],n,24,f,o.overscaling,g),D=0,L=M;D<L.length;D+=1){var F=L[D],B=t[k.horizontal];B&&o.anchorIsTooClose(B.text,P,F)||O(N,F)}else if("Polygon"===e.type)for(var U=0,V=z(e.geometry,0);U<V.length;U+=1){var W=V[U],q=j(W,16);O(W[0],new w(q.x,q.y,0))}else if("LineString"===e.type)for(var H=0,G=e.geometry;H<G.length;H+=1){var K=G[H];O(K,new w(K[0].x,K[0].y,0))}else if("Point"===e.type)for(var X=0,Y=e.geometry;X<Y.length;X+=1)for(var Z=Y[X],Q=0,J=Z;Q<J.length;Q+=1){var $=J[Q];O([$],new w($.x,$.y,0))}},J.prototype.anchorIsTooClose=function(e,t,n){var r=this.compareText;if(e in r){for(var o=r[e],i=o.length-1;i>=0;i--)if(n.dist(o[i])<t)return!0}else r[e]=[];return r[e].push(n),!1},J.prototype.place=function(e,t){var n=this;this.text=new Q(Z.text,this.layers,this.zoom),this.icon=new Q(Z.icon,this.layers,this.zoom),this.collisionBox=new Q(Z.collisionBox,this.layers,this.zoom),this.placedGlyphArray=new H,this.placedIconArray=new H,this.glyphOffsetArray=new G,this.lineVertexArray=new K;var r=this.layers[0],o=r.layout,i=e.maxScale,s="map"===o["text-rotation-alignment"]&&"line"===o["symbol-placement"],u="map"===o["icon-rotation-alignment"]&&"line"===o["symbol-placement"];if(o["text-allow-overlap"]||o["icon-allow-overlap"]||o["text-ignore-placement"]||o["icon-ignore-placement"]){var l=e.angle,c=Math.sin(l),p=Math.cos(l);this.symbolInstances.sort(function(e,t){return(c*e.anchor.x+p*e.anchor.y|0)-(c*t.anchor.x+p*t.anchor.y|0)||t.featureIndex-e.featureIndex})}for(var h=0,f=n.symbolInstances;h<f.length;h+=1){var d=f[h],m={boxStartIndex:d.textBoxStartIndex,boxEndIndex:d.textBoxEndIndex},y={boxStartIndex:d.iconBoxStartIndex,boxEndIndex:d.iconBoxEndIndex},v=!(d.textBoxStartIndex===d.textBoxEndIndex),g=!(d.iconBoxStartIndex===d.iconBoxEndIndex),_=o["text-optional"]||!v,b=o["icon-optional"]||!g,w=v?e.placeCollisionFeature(m,o["text-allow-overlap"],o["symbol-avoid-edges"]):e.minScale,x=g?e.placeCollisionFeature(y,o["icon-allow-overlap"],o["symbol-avoid-edges"]):e.minScale;if(_||b?!b&&w?w=Math.max(x,w):!_&&x&&(x=Math.max(x,w)):x=w=Math.max(x,w),v||g){for(var E=d.line,C=n.lineVertexArray.length,T=0;T<E.length;T++)n.lineVertexArray.emplaceBack(E[T].x,E[T].y);var S=n.lineVertexArray.length-C;if(v&&(e.insertCollisionFeature(m,w,o["text-ignore-placement"]),w<=i)){var P=a(r,n.zoom,n.textSizeData,"text-size",d.feature);n.addSymbols(n.text,d.glyphQuads,w,P,o["text-keep-upright"],d.textOffset,s,e.angle,d.feature,d.writingModes,d.anchor,C,S,n.placedGlyphArray)}if(g&&(e.insertCollisionFeature(y,x,o["icon-ignore-placement"]),x<=i)){var O=a(r,n.zoom,n.iconSizeData,"icon-size",d.feature);n.addSymbols(n.icon,d.iconQuads,x,O,o["icon-keep-upright"],d.iconOffset,u,e.angle,d.feature,0,d.anchor,C,S,n.placedIconArray)}}}t&&this.addToDebugBuffers(e)},J.prototype.addSymbols=function(e,t,n,i,a,s,u,l,c,p,h,f,d,m){for(var y=this,v=e.indexArray,g=e.layoutVertexArray,_=e.dynamicLayoutVertexArray,b=this.zoom,w=Math.max(Math.log(n)/Math.LN2+b,0),x=this.glyphOffsetArray.length,E=(h.angle+l+2*Math.PI)%(2*Math.PI),C=E>1*Math.PI/4&&E<=3*Math.PI/4||E>5*Math.PI/4&&E<=7*Math.PI/4,T=Boolean(p&k.vertical)&&C,S=0,P=t;S<P.length;S+=1){var O=P[S];if(!u||!a||O.writingMode===k.vertical===T){var A=O.tl,I=O.tr,N=O.bl,R=O.br,M=O.tex,D=e.segments.prepareSegment(4,e.layoutVertexArray,e.indexArray),L=D.vertexLength,F=O.glyphOffset[1];r(g,h.x,h.y,A.x,F+A.y,M.x,M.y,i),r(g,h.x,h.y,I.x,F+I.y,M.x+M.w,M.y,i),r(g,h.x,h.y,N.x,F+N.y,M.x,M.y+M.h,i),r(g,h.x,h.y,R.x,F+R.y,M.x+M.w,M.y+M.h,i),o(_,h,0,w),v.emplaceBack(L,L+1,L+2),v.emplaceBack(L+1,L+2,L+3),D.vertexLength+=4,D.primitiveLength+=2,y.glyphOffsetArray.emplaceBack(O.glyphOffset[0])}}m.emplaceBack(h.x,h.y,x,this.glyphOffsetArray.length-x,f,d,h.segment,i?i[0]:0,i?i[1]:0,s[0],s[1],w,T),e.programConfigurations.populatePaintArrays(e.layoutVertexArray.length,c)},J.prototype.addToDebugBuffers=function(e){for(var t=this,n=this.collisionBox,r=n.layoutVertexArray,o=n.indexArray,a=-e.angle,u=e.yStretch,l=0,c=t.symbolInstances;l<c.length;l+=1){var p=c[l];p.textCollisionFeature={boxStartIndex:p.textBoxStartIndex,boxEndIndex:p.textBoxEndIndex},p.iconCollisionFeature={boxStartIndex:p.iconBoxStartIndex,boxEndIndex:p.iconBoxEndIndex};for(var h=0;h<2;h++){var f=p[0===h?"textCollisionFeature":"iconCollisionFeature"];if(f)for(var d=f.boxStartIndex;d<f.boxEndIndex;d++){var m=t.collisionBoxArray.get(d);if(!(1===e.perspectiveRatio&&m.maxScale<1)){var y=m.anchorPoint,v=new s(m.x1,m.y1*u)._rotate(a),g=new s(m.x2,m.y1*u)._rotate(a),_=new s(m.x1,m.y2*u)._rotate(a),b=new s(m.x2,m.y2*u)._rotate(a),w=Math.max(0,Math.min(25,t.zoom+Math.log(m.maxScale)/Math.LN2)),x=Math.max(0,Math.min(25,t.zoom+Math.log(m.placementScale)/Math.LN2)),E=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray),C=E.vertexLength;i(r,y,p.anchor,v,w,x),i(r,y,p.anchor,g,w,x),i(r,y,p.anchor,b,w,x),i(r,y,p.anchor,_,w,x),o.emplaceBack(C,C+1),o.emplaceBack(C+1,C+2),o.emplaceBack(C+2,C+3),o.emplaceBack(C+3,C),E.vertexLength+=4,E.primitiveLength+=4}}}}},J.prototype.addSymbolInstance=function(e,t,n,r,o,i,a,s,u,l,c,p,h,f,d,m,y,v,g,_,b){var w,x,E=[],C=[];for(var P in n){var O=parseInt(P,10);n[O]&&(C=C.concat(i?T(e,n[O],o,h,g,_,b):[]),w=new F(a,t,e,s,u,l,n[O],c,p,h,!1))}var A=w?w.boxStartIndex:this.collisionBoxArray.length,I=w?w.boxEndIndex:this.collisionBoxArray.length;r&&(E=i?S(e,r,o,y,n[k.horizontal],g,_):[],x=new F(a,t,e,s,u,l,r,d,m,y,!0));var N=x?x.boxStartIndex:this.collisionBoxArray.length,R=x?x.boxEndIndex:this.collisionBoxArray.length;I>J.MAX_INSTANCES&&M.warnOnce("Too many symbols being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),R>J.MAX_INSTANCES&&M.warnOnce("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907");var D=(n[k.vertical]?k.vertical:0)|(n[k.horizontal]?k.horizontal:0);this.symbolInstances.push({textBoxStartIndex:A,textBoxEndIndex:I,iconBoxStartIndex:N,iconBoxEndIndex:R,glyphQuads:C,iconQuads:E,textOffset:f,iconOffset:v,anchor:e,line:t,featureIndex:s,feature:_,writingModes:D})},J.programInterfaces=Z,J.MAX_INSTANCES=65535,J.addDynamicAttributes=o,t.exports=J},{"../../gl/index_buffer":71,"../../gl/vertex_buffer":72,"../../shaders/encode_attribute":97,"../../symbol/anchor":196,"../../symbol/clip_line":198,"../../symbol/collision_feature":200,"../../symbol/get_anchors":202,"../../symbol/mergelines":203,"../../symbol/quads":205,"../../symbol/shaping":206,"../../symbol/symbol_size":207,"../../symbol/transform_text":208,"../../util/classify_rings":234,"../../util/find_pole_of_inaccessibility":240,"../../util/script_detection":247,"../../util/struct_array":249,"../../util/token":251,"../../util/util":252,"../../util/verticalize_punctuation":254,"../extent":58,"../index_array_type":60,"../load_geometry":61,"../program_configuration":63,"../segment":65,"../vertex_array_type":66,"@mapbox/point-geometry":2,"@mapbox/vector-tile":6}],58:[function(e,t,n){"use strict";t.exports=8192},{}],59:[function(e,t,n){"use strict";function r(e,t){return t-e}var o=(e("@mapbox/point-geometry"),e("./load_geometry")),i=e("./extent"),a=e("../style-spec/feature_filter"),s=e("../util/struct_array"),u=e("grid-index"),l=e("../util/dictionary_coder"),c=e("@mapbox/vector-tile"),p=e("pbf"),h=e("../util/vectortile_to_geojson"),f=e("../util/util").arraysIntersect,d=s({members:[{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]}),m=function(e,t,n,r){this.coord=e,this.overscaling=t,this.x=e.x,this.y=e.y,this.z=e.z-Math.log(t)/Math.LN2,this.grid=n||new u(i,16,0),this.featureIndexArray=r||new d};m.deserialize=function(e,t,n){var r=new m(e.coord,e.overscaling,new u(e.grid),new d(e.featureIndexArray));return r.rawTileData=t,r.bucketLayerIDs=e.bucketLayerIDs,r.setCollisionTile(n),r},m.prototype.insert=function(e,t,n,r,o){var i=this,a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,r,o);for(var s=0;s<t.length;s++){for(var u=t[s],l=[1/0,1/0,-1/0,-1/0],c=0;c<u.length;c++){var p=u[c];l[0]=Math.min(l[0],p.x),l[1]=Math.min(l[1],p.y),l[2]=Math.max(l[2],p.x),l[3]=Math.max(l[3],p.y)}i.grid.insert(a,l[0],l[1],l[2],l[3])}},m.prototype.setCollisionTile=function(e){this.collisionTile=e},m.prototype.serialize=function(e){var t=this.grid.toArrayBuffer();return e&&e.push(t),{coord:this.coord,overscaling:this.overscaling,grid:t,featureIndexArray:this.featureIndexArray.serialize(e),bucketLayerIDs:this.bucketLayerIDs}},m.prototype.query=function(e,t){this.vtLayers||(this.vtLayers=new c.VectorTile(new p(this.rawTileData)).layers,this.sourceLayerCoder=new l(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]));for(var n={},o=e.params||{},s=i/e.tileSize/e.scale,u=a(o.filter),h=e.queryGeometry,f=e.additionalRadius*s,d=1/0,m=1/0,y=-1/0,v=-1/0,g=0;g<h.length;g++)for(var _=h[g],b=0;b<_.length;b++){var w=_[b];d=Math.min(d,w.x),m=Math.min(m,w.y),y=Math.max(y,w.x),v=Math.max(v,w.y)}var x=this.grid.query(d-f,m-f,y+f,v+f);x.sort(r),this.filterMatching(n,x,this.featureIndexArray,h,u,o.layers,t,e.bearing,s);var E=this.collisionTile.queryRenderedSymbols(h,e.scale);return E.sort(),this.filterMatching(n,E,this.collisionTile.collisionBoxArray,h,u,o.layers,t,e.bearing,s),n},m.prototype.filterMatching=function(e,t,n,r,i,a,s,u,l){for(var c,p=this,d=0;d<t.length;d++){var m=t[d];if(m!==c){c=m;var y=n.get(m),v=p.bucketLayerIDs[y.bucketIndex];if(!a||f(a,v)){var g=p.sourceLayerCoder.decode(y.sourceLayerIndex),_=p.vtLayers[g],b=_.feature(y.featureIndex);if(i({zoom:p.coord.z},b))for(var w=null,x=0;x<v.length;x++){var E=v[x];if(!(a&&a.indexOf(E)<0)){var C=s[E];if(C&&("symbol"===C.type||(w||(w=o(b)),C.queryIntersectsFeature(r,b,w,p.z,u,l)))){var T=new h(b,p.z,p.x,p.y);T.layer=C.serialize();var S=e[E];void 0===S&&(S=e[E]=[]),S.push({featureIndex:m,feature:T})}}}}}}},m.prototype.hasLayer=function(e){for(var t=this,n=0,r=t.bucketLayerIDs;n<r.length;n+=1)for(var o=r[n],i=0,a=o;i<a.length;i+=1){var s=a[i];if(e===s)return!0}return!1},t.exports=m},{"../style-spec/feature_filter":144,"../util/dictionary_coder":236,"../util/struct_array":249,"../util/util":252,"../util/vectortile_to_geojson":253,"./extent":58,"./load_geometry":61,"@mapbox/point-geometry":2,"@mapbox/vector-tile":6,"grid-index":23,pbf:38}],60:[function(e,t,n){"use strict";function r(e){return o({members:[{type:"Uint16",name:"vertices",components:e}]})}var o=e("../util/struct_array");t.exports={LineIndexArray:r(2),TriangleIndexArray:r(3)}},{"../util/struct_array":249}],61:[function(e,t,n){"use strict";var r=e("../util/util"),o=e("./extent"),i=function(e){return{min:-1*Math.pow(2,e-1),max:Math.pow(2,e-1)-1}}(16);t.exports=function(e){for(var t=o/e.extent,n=e.loadGeometry(),a=0;a<n.length;a++)for(var s=n[a],u=0;u<s.length;u++){var l=s[u];l.x=Math.round(l.x*t),l.y=Math.round(l.y*t),(l.x<i.min||l.x>i.max||l.y<i.min||l.y>i.max)&&r.warnOnce("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return n}},{"../util/util":252,"./extent":58}],62:[function(e,t,n){"use strict";var r=e("../util/struct_array"),o=r({members:[{name:"a_pos",type:"Int16",components:2}]});t.exports=o},{"../util/struct_array":249}],63:[function(e,t,n){"use strict";function r(e){return[i(255*e[0],255*e[1]),i(255*e[2],255*e[3])]}var o=e("./vertex_array_type"),i=e("../shaders/encode_attribute").packUint8ToFloat,a=e("../gl/vertex_buffer"),s=function(e,t,n,r){this.name=e,this.type=t,this.property=n,this.useIntegerZoom=r};s.prototype.defines=function(){return["#define HAS_UNIFORM_u_"+this.name]},s.prototype.populatePaintArray=function(){},s.prototype.setUniforms=function(e,t,n,r){var o=r.zoom,i=n.getPaintValue(this.property,{zoom:this.useIntegerZoom?Math.floor(o):o});"color"===this.type?e.uniform4fv(t.uniforms["u_"+this.name],i):e.uniform1f(t.uniforms["u_"+this.name],i)};var u=function(e,t,n){this.name=e,this.type=t,this.property=n};u.prototype.defines=function(){return[]},u.prototype.populatePaintArray=function(e,t,n,o,i,a){var s=this,u=e.getPaintValue(this.property,{zoom:0},a);if("color"===this.type)for(var l=r(u),c=o;c<i;c++){var p=t.get(c);p["a_"+s.name+"0"]=l[0],p["a_"+s.name+"1"]=l[1]}else{for(var h=o;h<i;h++)t.get(h)["a_"+s.name]=u;var f=n[this.property];f.max=Math.max(f.max,u)}},u.prototype.setUniforms=function(e,t){e.uniform1f(t.uniforms["a_"+this.name+"_t"],0)};var l=function(e,t,n,r,o){this.name=e,this.type=t,this.property=n,this.useIntegerZoom=r,this.zoom=o};l.prototype.defines=function(){return[]},l.prototype.populatePaintArray=function(e,t,n,o,i,a){var s=this,u=e.getPaintValue(this.property,{zoom:this.zoom},a),l=e.getPaintValue(this.property,{zoom:this.zoom+1},a);if("color"===this.type)for(var c=r(u),p=r(l),h=o;h<i;h++){var f=t.get(h);f["a_"+s.name+"0"]=c[0],f["a_"+s.name+"1"]=c[1],f["a_"+s.name+"2"]=p[0],f["a_"+s.name+"3"]=p[1]}else{for(var d=o;d<i;d++){var m=t.get(d);m["a_"+s.name+"0"]=u,m["a_"+s.name+"1"]=l}var y=n[this.property];y.max=Math.max(y.max,u,l)}},l.prototype.setUniforms=function(e,t,n,r){var o=r.zoom,i=n.getPaintInterpolationFactor(this.property,this.useIntegerZoom?Math.floor(o):o,this.zoom,this.zoom+1);e.uniform1f(t.uniforms["a_"+this.name+"_t"],i)};var c=function(){this.binders={},this.cacheKey=""};c.createDynamic=function(e,t,n){for(var r=new c,i=[],a=0,p=e.paintAttributes||[];a<p.length;a+=1){var h=p[a],f=h.property,d=h.useIntegerZoom||!1,m=h.name||f.replace(t.type+"-","").replace(/-/g,"_"),y=t._paintSpecifications[f].type;t.isPaintValueFeatureConstant(f)?(r.binders[m]=new s(m,y,f,d),r.cacheKey+="/u_"+m):t.isPaintValueZoomConstant(f)?(r.binders[m]=new u(m,y,f),r.cacheKey+="/a_"+m,i.push({name:"a_"+m,type:"Float32",components:"color"===y?2:1})):(r.binders[m]=new l(m,y,f,d,n),r.cacheKey+="/z_"+m,i.push({name:"a_"+m,type:"Float32",components:"color"===y?4:2}))}return r.PaintVertexArray=o(i),r.interface=e,r.layer=t,r},c.createBasicFill=function(){var e=new c;return e.binders.color=new s("color","color","fill-color",!1),e.cacheKey+="/u_color",e.binders.opacity=new s("opacity","number","fill-opacity",!1),e.cacheKey+="/u_opacity",e},c.prototype.createPaintPropertyStatistics=function(){var e=this,t={};for(var n in e.binders)t[e.binders[n].property]={max:-1/0};return t},c.prototype.populatePaintArray=function(e,t){var n=this,r=this.paintVertexArray;if(0!==r.bytesPerElement){var o=r.length;r.resize(e);for(var i in n.binders)n.binders[i].populatePaintArray(n.layer,r,n.paintPropertyStatistics,o,e,t)}},c.prototype.defines=function(){var e=this,t=[];for(var n in e.binders)t.push.apply(t,e.binders[n].defines());return t},c.prototype.setUniforms=function(e,t,n,r){var o=this;for(var i in o.binders)o.binders[i].setUniforms(e,t,n,r)},c.prototype.serialize=function(e){return 0===this.paintVertexArray.length?null:{array:this.paintVertexArray.serialize(e),type:this.paintVertexArray.constructor.serialize(),statistics:this.paintPropertyStatistics}},c.deserialize=function(e,t,n,r){var i=c.createDynamic(e,t,n);return r&&(i.PaintVertexArray=o(r.type.members),i.paintVertexArray=new i.PaintVertexArray(r.array),i.paintPropertyStatistics=r.statistics),i},c.prototype.upload=function(e){this.paintVertexArray&&(this.paintVertexBuffer=new a(e,this.paintVertexArray))},c.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var p=function(e,t,n,r){var o=this;if(this.programConfigurations={},r)for(var i=0,a=t;i<a.length;i+=1){var s=a[i];o.programConfigurations[s.id]=c.deserialize(e,s,n,r[s.id])}else for(var u=0,l=t;u<l.length;u+=1){var p=l[u],h=c.createDynamic(e,p,n);h.paintVertexArray=new h.PaintVertexArray,h.paintPropertyStatistics=h.createPaintPropertyStatistics(),o.programConfigurations[p.id]=h}};p.prototype.populatePaintArrays=function(e,t){var n=this;for(var r in n.programConfigurations)n.programConfigurations[r].populatePaintArray(e,t)},p.prototype.serialize=function(e){var t=this,n={};for(var r in t.programConfigurations){var o=t.programConfigurations[r].serialize(e);o&&(n[r]=o)}return n},p.prototype.get=function(e){return this.programConfigurations[e]},p.prototype.upload=function(e){var t=this;for(var n in t.programConfigurations)t.programConfigurations[n].upload(e)},p.prototype.destroy=function(){var e=this;for(var t in e.programConfigurations)e.programConfigurations[t].destroy()},t.exports={ProgramConfiguration:c,ProgramConfigurationSet:p}},{"../gl/vertex_buffer":72,"../shaders/encode_attribute":97,"./vertex_array_type":66}],64:[function(e,t,n){"use strict";var r=e("../util/struct_array"),o=r({members:[{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]});t.exports=o},{"../util/struct_array":249}],65:[function(e,t,n){"use strict";var r=e("../util/util"),o=r.warnOnce,i=Math.pow(2,16)-1,a=function(e){void 0===e&&(e=[]),this.segments=e};a.prototype.prepareSegment=function(e,n,r){var a=this.segments[this.segments.length-1];return e>i&&o("Max vertices per segment is "+i+": bucket requested "+e),(!a||a.vertexLength+e>t.exports.MAX_VERTEX_ARRAY_LENGTH)&&(a={vertexOffset:n.length,primitiveOffset:r.length,vertexLength:0,primitiveLength:0},this.segments.push(a)),a},a.prototype.get=function(){return this.segments},a.prototype.destroy=function(){for(var e=this,t=0,n=e.segments;t<n.length;t+=1){var r=n[t];for(var o in r.vaos)r.vaos[o].destroy()}},t.exports={SegmentVector:a,MAX_VERTEX_ARRAY_LENGTH:i}},{"../util/util":252}],66:[function(e,t,n){"use strict";function r(e){return o({members:e,alignment:4})}var o=e("../util/struct_array");t.exports=r},{"../util/struct_array":249}],67:[function(e,t,n){"use strict";var r=function(e,t,n){this.column=e,this.row=t,this.zoom=n};r.prototype.clone=function(){return new r(this.column,this.row,this.zoom)},r.prototype.zoomTo=function(e){return this.clone()._zoomTo(e)},r.prototype.sub=function(e){return this.clone()._sub(e)},r.prototype._zoomTo=function(e){var t=Math.pow(2,e-this.zoom);return this.column*=t,this.row*=t,this.zoom=e,this},r.prototype._sub=function(e){return e=e.zoomTo(this.zoom),this.column-=e.column,this.row-=e.row,this},t.exports=r},{}],68:[function(e,t,n){"use strict";var r=e("../util/util").wrap,o=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid LngLat object: ("+e+", "+t+")");if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};o.prototype.wrap=function(){return new o(r(this.lng,-180,180),this.lat)},o.prototype.toArray=function(){return[this.lng,this.lat]},o.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},o.prototype.toBounds=function(t){var n=360*t/40075017,r=n/Math.cos(Math.PI/180*this.lat);return new(e("./lng_lat_bounds"))(new o(this.lng-r,this.lat-n),new o(this.lng+r,this.lat+n))},o.convert=function(e){if(e instanceof o)return e;if(Array.isArray(e)&&2===e.length)return new o(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new o(Number(e.lng),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")},t.exports=o},{"../util/util":252,"./lng_lat_bounds":69}],69:[function(e,t,n){"use strict";var r=e("./lng_lat"),o=function(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))};o.prototype.setNorthEast=function(e){return this._ne=e instanceof r?new r(e.lng,e.lat):r.convert(e),this},o.prototype.setSouthWest=function(e){return this._sw=e instanceof r?new r(e.lng,e.lat):r.convert(e),this},o.prototype.extend=function(e){var t,n,i=this._sw,a=this._ne;if(e instanceof r)t=e,n=e;else{if(!(e instanceof o))return Array.isArray(e)?e.every(Array.isArray)?this.extend(o.convert(e)):this.extend(r.convert(e)):this;if(t=e._sw,n=e._ne,!t||!n)return this}return i||a?(i.lng=Math.min(t.lng,i.lng),i.lat=Math.min(t.lat,i.lat),a.lng=Math.max(n.lng,a.lng),a.lat=Math.max(n.lat,a.lat)):(this._sw=new r(t.lng,t.lat),this._ne=new r(n.lng,n.lat)),this},o.prototype.getCenter=function(){return new r((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},o.prototype.getSouthWest=function(){return this._sw},o.prototype.getNorthEast=function(){return this._ne},o.prototype.getNorthWest=function(){return new r(this.getWest(),this.getNorth())},o.prototype.getSouthEast=function(){return new r(this.getEast(),this.getSouth())},o.prototype.getWest=function(){return this._sw.lng},o.prototype.getSouth=function(){return this._sw.lat},o.prototype.getEast=function(){return this._ne.lng},o.prototype.getNorth=function(){return this._ne.lat},o.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},o.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},o.convert=function(e){return!e||e instanceof o?e:new o(e)},t.exports=o},{"./lng_lat":68}],70:[function(e,t,n){"use strict";var r=e("./lng_lat"),o=e("@mapbox/point-geometry"),i=e("./coordinate"),a=e("../util/util"),s=e("../style-spec/util/interpolate"),u=e("../source/tile_coord"),l=e("../data/extent"),c=e("@mapbox/gl-matrix"),p=c.vec4,h=c.mat4,f=c.mat2,d=function(e,t,n){this.tileSize=512,this._renderWorldCopies=void 0===n||n,this._minZoom=e||0,this._maxZoom=t||22,this.latRange=[-85.05113,85.05113],this.width=0,this.height=0,this._center=new r(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0},m={minZoom:{},maxZoom:{},renderWorldCopies:{},worldSize:{},centerPoint:{},size:{},bearing:{},pitch:{},fov:{},zoom:{},center:{},unmodified:{},x:{},y:{},point:{}};m.minZoom.get=function(){return this._minZoom},m.minZoom.set=function(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))},m.maxZoom.get=function(){return this._maxZoom},m.maxZoom.set=function(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))},m.renderWorldCopies.get=function(){return this._renderWorldCopies},m.worldSize.get=function(){return this.tileSize*this.scale},m.centerPoint.get=function(){return this.size._div(2)},m.size.get=function(){return new o(this.width,this.height)},m.bearing.get=function(){return-this.angle/Math.PI*180},m.bearing.set=function(e){var t=-a.wrap(e,-180,180)*Math.PI/180;this.angle!==t&&(this._unmodified=!1,this.angle=t,this._calcMatrices(),this.rotationMatrix=f.create(),f.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},m.pitch.get=function(){return this._pitch/Math.PI*180},m.pitch.set=function(e){var t=a.clamp(e,0,60)/180*Math.PI;this._pitch!==t&&(this._unmodified=!1,this._pitch=t,this._calcMatrices())},m.fov.get=function(){return this._fov/Math.PI*180},m.fov.set=function(e){e=Math.max(.01,Math.min(60,e)),this._fov!==e&&(this._unmodified=!1,this._fov=e/180*Math.PI,this._calcMatrices())},m.zoom.get=function(){return this._zoom},m.zoom.set=function(e){var t=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==t&&(this._unmodified=!1,this._zoom=t,this.scale=this.zoomScale(t),this.tileZoom=Math.floor(t),this.zoomFraction=t-this.tileZoom,this._constrain(),this._calcMatrices())},m.center.get=function(){return this._center},m.center.set=function(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._constrain(),this._calcMatrices())},d.prototype.coveringZoomLevel=function(e){return(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize))},d.prototype.getVisibleWrappedCoordinates=function(e){for(var t=this.pointCoordinate(new o(0,0),0),n=this.pointCoordinate(new o(this.width,0),0),r=Math.floor(t.column),i=Math.floor(n.column),a=[e],s=r;s<=i;s++)0!==s&&a.push(new u(e.z,e.x,e.y,s));return a},d.prototype.coveringTiles=function(e){var t=this.coveringZoomLevel(e),n=t;if(void 0!==e.minzoom&&t<e.minzoom)return[];void 0!==e.maxzoom&&t>e.maxzoom&&(t=e.maxzoom);var r=this.pointCoordinate(this.centerPoint,t),i=new o(r.column-.5,r.row-.5),a=[this.pointCoordinate(new o(0,0),t),this.pointCoordinate(new o(this.width,0),t),this.pointCoordinate(new o(this.width,this.height),t),this.pointCoordinate(new o(0,this.height),t)];return u.cover(t,a,e.reparseOverscaled?n:t,this._renderWorldCopies).sort(function(e,t){return i.dist(e)-i.dist(t)})},d.prototype.resize=function(e,t){this.width=e,this.height=t,this.pixelsToGLUnits=[2/e,-2/t],this._constrain(),this._calcMatrices()},m.unmodified.get=function(){return this._unmodified},d.prototype.zoomScale=function(e){return Math.pow(2,e)},d.prototype.scaleZoom=function(e){return Math.log(e)/Math.LN2},d.prototype.project=function(e){return new o(this.lngX(e.lng),this.latY(e.lat))},d.prototype.unproject=function(e){return new r(this.xLng(e.x),this.yLat(e.y))},m.x.get=function(){return this.lngX(this.center.lng)},m.y.get=function(){return this.latY(this.center.lat)},m.point.get=function(){return new o(this.x,this.y)},d.prototype.lngX=function(e){return(180+e)*this.worldSize/360},d.prototype.latY=function(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))*this.worldSize/360},d.prototype.xLng=function(e){return 360*e/this.worldSize-180},d.prototype.yLat=function(e){var t=180-360*e/this.worldSize;return 360/Math.PI*Math.atan(Math.exp(t*Math.PI/180))-90},d.prototype.setLocationAtPoint=function(e,t){var n=this.pointCoordinate(t)._sub(this.pointCoordinate(this.centerPoint));this.center=this.coordinateLocation(this.locationCoordinate(e)._sub(n)),this._renderWorldCopies&&(this.center=this.center.wrap())},d.prototype.locationPoint=function(e){return this.coordinatePoint(this.locationCoordinate(e))},d.prototype.pointLocation=function(e){return this.coordinateLocation(this.pointCoordinate(e))},d.prototype.locationCoordinate=function(e){return new i(this.lngX(e.lng)/this.tileSize,this.latY(e.lat)/this.tileSize,this.zoom).zoomTo(this.tileZoom)},d.prototype.coordinateLocation=function(e){var t=e.zoomTo(this.zoom);return new r(this.xLng(t.column*this.tileSize),this.yLat(t.row*this.tileSize))},d.prototype.pointCoordinate=function(e,t){void 0===t&&(t=this.tileZoom);var n=[e.x,e.y,0,1],r=[e.x,e.y,1,1];p.transformMat4(n,n,this.pixelMatrixInverse),p.transformMat4(r,r,this.pixelMatrixInverse);var o=n[3],a=r[3],u=n[0]/o,l=r[0]/a,c=n[1]/o,h=r[1]/a,f=n[2]/o,d=r[2]/a,m=f===d?0:(0-f)/(d-f);return new i(s(u,l,m)/this.tileSize,s(c,h,m)/this.tileSize,this.zoom)._zoomTo(t)},d.prototype.coordinatePoint=function(e){var t=e.zoomTo(this.zoom),n=[t.column*this.tileSize,t.row*this.tileSize,0,1];return p.transformMat4(n,n,this.pixelMatrix),new o(n[0]/n[3],n[1]/n[3])},d.prototype.calculatePosMatrix=function(e,t){var n=e.toCoordinate(t),r=this.worldSize/this.zoomScale(n.zoom),o=h.identity(new Float64Array(16));return h.translate(o,o,[n.column*r,n.row*r,0]),h.scale(o,o,[r/l,r/l,1]),h.multiply(o,this.projMatrix,o),new Float32Array(o)},d.prototype.cameraToTileDistance=function(e){var t=this.calculatePosMatrix(e.coord,e.sourceMaxZoom),n=[e.tileSize/2,e.tileSize/2,0,1];return p.transformMat4(n,n,t),n[3]},d.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var e,t,n,r,i=-90,a=90,s=-180,u=180,l=this.size,c=this._unmodified;if(this.latRange){var p=this.latRange;i=this.latY(p[1]),a=this.latY(p[0]),e=a-i<l.y?l.y/(a-i):0}if(this.lngRange){var h=this.lngRange;s=this.lngX(h[0]),u=this.lngX(h[1]),t=u-s<l.x?l.x/(u-s):0}var f=Math.max(t||0,e||0);if(f)return this.center=this.unproject(new o(t?(u+s)/2:this.x,e?(a+i)/2:this.y)),this.zoom+=this.scaleZoom(f),this._unmodified=c,void(this._constraining=!1);if(this.latRange){var d=this.y,m=l.y/2;d-m<i&&(r=i+m),d+m>a&&(r=a-m)}if(this.lngRange){var y=this.x,v=l.x/2;y-v<s&&(n=s+v),y+v>u&&(n=u-v)}void 0===n&&void 0===r||(this.center=this.unproject(new o(void 0!==n?n:this.x,void 0!==r?r:this.y))),this._unmodified=c,this._constraining=!1}},d.prototype._calcMatrices=function(){if(this.height){this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var e=this._fov/2,t=Math.PI/2+this._pitch,n=Math.sin(e)*this.cameraToCenterDistance/Math.sin(Math.PI-t-e),r=Math.cos(Math.PI/2-this._pitch)*n+this.cameraToCenterDistance,o=1.01*r,i=new Float64Array(16);h.perspective(i,this._fov,this.width/this.height,1,o),h.scale(i,i,[1,-1,1]),h.translate(i,i,[0,0,-this.cameraToCenterDistance]),h.rotateX(i,i,this._pitch),h.rotateZ(i,i,this.angle),h.translate(i,i,[-this.x,-this.y,0]);var a=this.worldSize/(2*Math.PI*6378137*Math.abs(Math.cos(this.center.lat*(Math.PI/180))));if(h.scale(i,i,[1,1,a,1]),this.projMatrix=i,i=h.create(),h.scale(i,i,[this.width/2,-this.height/2,1]),h.translate(i,i,[1,-1,0]),this.pixelMatrix=h.multiply(new Float64Array(16),i,this.projMatrix),!(i=h.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=i}},Object.defineProperties(d.prototype,m),t.exports=d},{"../data/extent":58,"../source/tile_coord":113,"../style-spec/util/interpolate":152,"../util/util":252,"./coordinate":67,"./lng_lat":68,"@mapbox/gl-matrix":1,"@mapbox/point-geometry":2}],71:[function(e,t,n){"use strict";var r=function(e,t){this.gl=e,this.buffer=e.createBuffer(),void 0===e.extVertexArrayObject&&(e.extVertexArrayObject=e.getExtension("OES_vertex_array_object")),e.extVertexArrayObject&&e.extVertexArrayObject.bindVertexArrayOES(null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.buffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,t.arrayBuffer,e.STATIC_DRAW),delete t.arrayBuffer};r.prototype.bind=function(){this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.buffer)},r.prototype.destroy=function(){this.buffer&&(this.gl.deleteBuffer(this.buffer),delete this.buffer)},t.exports=r},{}],72:[function(e,t,n){"use strict";var r={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},o=function(e,t,n){this.length=t.length,this.attributes=t.members,this.itemSize=t.bytesPerElement,this.dynamicDraw=n,this.gl=e,this.buffer=e.createBuffer(),this.gl.bindBuffer(e.ARRAY_BUFFER,this.buffer),this.gl.bufferData(e.ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?e.DYNAMIC_DRAW:e.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer};o.prototype.bind=function(){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.buffer)},o.prototype.updateData=function(e){this.bind(),this.gl.bufferSubData(this.gl.ARRAY_BUFFER,0,e.arrayBuffer)},o.prototype.enableAttributes=function(e,t){for(var n=this,r=0;r<this.attributes.length;r++){var o=n.attributes[r],i=t.attributes[o.name];void 0!==i&&e.enableVertexAttribArray(i)}},o.prototype.setVertexAttribPointers=function(e,t,n){for(var o=this,i=0;i<this.attributes.length;i++){var a=o.attributes[i],s=t.attributes[a.name];void 0!==s&&e.vertexAttribPointer(s,a.components,e[r[a.type]],!1,o.itemSize,a.offset+o.itemSize*(n||0))}},o.prototype.destroy=function(){this.buffer&&(this.gl.deleteBuffer(this.buffer),delete this.buffer)},t.exports=o},{}],73:[function(e,t,n){"use strict";var r=e("mapbox-gl-supported"),o=e("./util/browser"),i=e("../package.json").version,a=e("./ui/map"),s=e("./ui/control/navigation_control"),u=e("./ui/control/geolocate_control"),l=e("./ui/control/attribution_control"),c=e("./ui/control/scale_control"),p=e("./ui/control/fullscreen_control"),h=e("./ui/popup"),f=e("./ui/marker"),d=e("./style/style"),m=e("./geo/lng_lat"),y=e("./geo/lng_lat_bounds"),v=e("@mapbox/point-geometry"),g=e("./util/evented"),_=e("./util/config"),b=e("./source/rtl_text_plugin");t.exports={version:i,supported:r,workerCount:Math.max(Math.floor(o.hardwareConcurrency/2),1),setRTLTextPlugin:b.setRTLTextPlugin,Map:a,NavigationControl:s,GeolocateControl:u,AttributionControl:l,ScaleControl:c,FullscreenControl:p,Popup:h,Marker:f,Style:d,LngLat:m,LngLatBounds:y,Point:v,Evented:g,config:_,get accessToken(){return _.ACCESS_TOKEN},set accessToken(e){_.ACCESS_TOKEN=e}}},{"../package.json":50,"./geo/lng_lat":68,"./geo/lng_lat_bounds":69,"./source/rtl_text_plugin":108,"./style/style":182,"./ui/control/attribution_control":211,"./ui/control/fullscreen_control":212,"./ui/control/geolocate_control":213,"./ui/control/navigation_control":215,"./ui/control/scale_control":216,"./ui/map":226,"./ui/marker":227,"./ui/popup":228,"./util/browser":231,"./util/config":235,"./util/evented":239,"@mapbox/point-geometry":2,"mapbox-gl-supported":37}],74:[function(e,t,n){"use strict";function r(e,t,n){if(!n.isOpacityZero(e.transform.zoom)){var r=e.gl,i=e.transform,a=i.tileSize,s=n.paint["background-color"],u=n.paint["background-pattern"],l=n.paint["background-opacity"],c=u||1!==s[3]||1!==l?"translucent":"opaque";if(e.renderPass===c){r.disable(r.STENCIL_TEST),e.setDepthSublayer(0);var p;if(u){if(o.isPatternMissing(u,e))return;p=e.useProgram("fillPattern",e.basicFillProgramConfiguration),o.prepare(u,e,p),e.tileExtentPatternVAO.bind(r,p,e.tileExtentBuffer)}else p=e.useProgram("fill",e.basicFillProgramConfiguration),r.uniform4fv(p.uniforms.u_color,s),e.tileExtentVAO.bind(r,p,e.tileExtentBuffer);r.uniform1f(p.uniforms.u_opacity,l);for(var h=i.coveringTiles({tileSize:a}),f=0,d=h;f<d.length;f+=1){var m=d[f];u&&o.setTile({coord:m,tileSize:a},e,p),r.uniformMatrix4fv(p.uniforms.u_matrix,!1,e.transform.calculatePosMatrix(m)),r.drawArrays(r.TRIANGLE_STRIP,0,e.tileExtentBuffer.length)}}}}var o=e("./pattern");t.exports=r},{"./pattern":91}],75:[function(e,t,n){"use strict";function r(e,t,n,r){if("translucent"===e.renderPass&&!n.isOpacityZero(e.transform.zoom)){var i=e.gl;e.setDepthSublayer(0),e.depthMask(!1),i.disable(i.STENCIL_TEST);for(var a=0;a<r.length;a++){var s=r[a],u=t.getTile(s),l=u.getBucket(n);if(l){var c=l.programConfigurations.get(n.id),p=e.useProgram("circle",c);if(c.setUniforms(i,p,n,{zoom:e.transform.zoom}),i.uniform1f(p.uniforms.u_camera_to_center_distance,e.transform.cameraToCenterDistance),i.uniform1i(p.uniforms.u_scale_with_map,"map"===n.paint["circle-pitch-scale"]?1:0),"map"===n.paint["circle-pitch-alignment"]){i.uniform1i(p.uniforms.u_pitch_with_map,1);var h=o(u,1,e.transform.zoom);i.uniform2f(p.uniforms.u_extrude_scale,h,h)}else i.uniform1i(p.uniforms.u_pitch_with_map,0),i.uniform2fv(p.uniforms.u_extrude_scale,e.transform.pixelsToGLUnits);i.uniformMatrix4fv(p.uniforms.u_matrix,!1,e.translatePosMatrix(s.posMatrix,u,n.paint["circle-translate"],n.paint["circle-translate-anchor"])),p.draw(i,i.TRIANGLES,n.id,l.layoutVertexBuffer,l.indexBuffer,l.segments,c)}}}}var o=e("../source/pixels_to_tile_units");t.exports=r},{"../source/pixels_to_tile_units":105}],76:[function(e,t,n){"use strict";function r(e,t,n,r){var o=e.gl;o.enable(o.STENCIL_TEST);var i=e.useProgram("collisionBox");o.activeTexture(o.TEXTURE1),e.frameHistory.bind(o),o.uniform1i(i.uniforms.u_fadetexture,1);for(var a=0;a<r.length;a++){var s=r[a],u=t.getTile(s),l=u.getBucket(n);if(l){o.uniformMatrix4fv(i.uniforms.u_matrix,!1,s.posMatrix),e.enableTileClippingMask(s),e.lineWidth(1),o.uniform1f(i.uniforms.u_scale,Math.pow(2,e.transform.zoom-u.coord.z)),o.uniform1f(i.uniforms.u_zoom,10*e.transform.zoom);var c=Math.max(0,Math.min(25,u.coord.z+Math.log(u.collisionTile.maxScale)/Math.LN2));o.uniform1f(i.uniforms.u_maxzoom,10*c),o.uniform1f(i.uniforms.u_collision_y_stretch,u.collisionTile.yStretch),o.uniform1f(i.uniforms.u_pitch,e.transform.pitch/360*2*Math.PI),o.uniform1f(i.uniforms.u_camera_to_center_distance,e.transform.cameraToCenterDistance),i.draw(o,o.LINES,n.id,l.collisionBox.layoutVertexBuffer,l.collisionBox.indexBuffer,l.collisionBox.segments)}}}t.exports=r},{}],77:[function(e,t,n){"use strict";function r(e,t,n){for(var r=0;r<n.length;r++)o(e,t,n[r])}function o(e,t,n){var r=e.gl;r.disable(r.STENCIL_TEST),e.lineWidth(1*a.devicePixelRatio);var o=n.posMatrix,h=e.useProgram("debug");r.uniformMatrix4fv(h.uniforms.u_matrix,!1,o),r.uniform4f(h.uniforms.u_color,1,0,0,1),e.debugVAO.bind(r,h,e.debugBuffer),r.drawArrays(r.LINE_STRIP,0,e.debugBuffer.length);for(var f=i(n.toString(),50,200,5),d=new p,m=0;m<f.length;m+=2)d.emplaceBack(f[m],f[m+1]);var y=new l(r,d);(new c).bind(r,h,y),r.uniform4f(h.uniforms.u_color,1,1,1,1);for(var v=t.getTile(n).tileSize,g=u/(Math.pow(2,e.transform.zoom-n.z)*v),_=[[-1,-1],[-1,1],[1,-1],[1,1]],b=0;b<_.length;b++){var w=_[b];r.uniformMatrix4fv(h.uniforms.u_matrix,!1,s.translate([],o,[g*w[0],g*w[1],0])),r.drawArrays(r.LINES,0,y.length)}r.uniform4f(h.uniforms.u_color,0,0,0,1),r.uniformMatrix4fv(h.uniforms.u_matrix,!1,o),r.drawArrays(r.LINES,0,y.length)}function i(e,t,n,r){r=r||1;var o,i,a,s,u,l,c,p,f=[];for(o=0,i=e.length;o<i;o++)if(u=h[e[o]]){for(p=null,a=0,s=u[1].length;a<s;a+=2)-1===u[1][a]&&-1===u[1][a+1]?p=null:(l=t+u[1][a]*r,c=n-u[1][a+1]*r,p&&f.push(p.x,p.y,l,c),p={x:l,y:c});t+=u[0]*r}return f}var a=e("../util/browser"),s=e("@mapbox/gl-matrix").mat4,u=e("../data/extent"),l=e("../gl/vertex_buffer"),c=e("./vertex_array_object"),p=e("../data/pos_array");t.exports=r;var h={" ":[16,[]],"!":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],'"':[16,[4,21,4,14,-1,-1,12,21,12,14]],"#":[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],$:[20,[8,25,8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],"%":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],"&":[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],"'":[10,[5,19,4,20,5,21,6,20,6,18,5,16,4,15]],"(":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],")":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],"*":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],"+":[26,[13,18,13,0,-1,-1,4,9,22,9]],",":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"-":[26,[4,9,22,9]],".":[10,[5,2,4,1,5,0,6,1,5,2]],"/":[22,[20,25,2,-7]],0:[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],1:[20,[6,17,8,18,11,21,11,0]],2:[20,[4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],3:[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],4:[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],5:[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],6:[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],7:[20,[17,21,7,0,-1,-1,3,21,17,21]],8:[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],9:[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],":":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],";":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"<":[24,[20,18,4,9,20,0]],"=":[26,[4,12,22,12,-1,-1,4,6,22,6]],">":[24,[4,18,20,9,4,0]],"?":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],"@":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],"[":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],"\\":[14,[0,21,14,-3]],"]":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],"^":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],"`":[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],"{":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],"|":[8,[4,25,4,-7]],"}":[14,[5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],"~":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]}},{"../data/extent":58,"../data/pos_array":62,"../gl/vertex_buffer":72,"../util/browser":231,"./vertex_array_object":96,"@mapbox/gl-matrix":1}],78:[function(e,t,n){"use strict";function r(e,t,n,r){if(!n.isOpacityZero(e.transform.zoom)){var s=e.gl;s.enable(s.STENCIL_TEST);var u=!n.paint["fill-pattern"]&&n.isPaintValueFeatureConstant("fill-color")&&n.isPaintValueFeatureConstant("fill-opacity")&&1===n.paint["fill-color"][3]&&1===n.paint["fill-opacity"]?"opaque":"translucent";e.renderPass===u&&(e.setDepthSublayer(1),e.depthMask("opaque"===e.renderPass),o(e,t,n,r,i)),"translucent"===e.renderPass&&n.paint["fill-antialias"]&&(e.lineWidth(2),e.depthMask(!1),e.setDepthSublayer(n.getPaintProperty("fill-outline-color")?2:0),o(e,t,n,r,a))}}function o(e,t,n,r,o){if(!u.isPatternMissing(n.paint["fill-pattern"],e))for(var i=!0,a=0,s=r;a<s.length;a+=1){var l=s[a],c=t.getTile(l),p=c.getBucket(n);p&&(e.enableTileClippingMask(l),o(e,t,n,c,l,p,i),i=!1)}}function i(e,t,n,r,o,i,a){var u=e.gl,l=i.programConfigurations.get(n.id);s("fill",n.paint["fill-pattern"],e,l,n,r,o,a).draw(u,u.TRIANGLES,n.id,i.layoutVertexBuffer,i.indexBuffer,i.segments,l)}function a(e,t,n,r,o,i,a){var u=e.gl,l=i.programConfigurations.get(n.id),c=n.paint["fill-pattern"]&&!n.getPaintProperty("fill-outline-color"),p=s("fillOutline",c,e,l,n,r,o,a);u.uniform2f(p.uniforms.u_world,u.drawingBufferWidth,u.drawingBufferHeight),p.draw(u,u.LINES,n.id,i.layoutVertexBuffer,i.indexBuffer2,i.segments2,l)}function s(e,t,n,r,o,i,a,s){var l,c=n.currentProgram;return t?(l=n.useProgram(e+"Pattern",r),(s||l!==c)&&(r.setUniforms(n.gl,l,o,{zoom:n.transform.zoom}),u.prepare(o.paint["fill-pattern"],n,l)),u.setTile(i,n,l)):(l=n.useProgram(e,r),(s||l!==c)&&r.setUniforms(n.gl,l,o,{zoom:n.transform.zoom})),n.gl.uniformMatrix4fv(l.uniforms.u_matrix,!1,n.translatePosMatrix(a.posMatrix,i,o.paint["fill-translate"],o.paint["fill-translate-anchor"])),l}var u=e("./pattern");t.exports=r},{"./pattern":91}],79:[function(e,t,n){"use strict";function r(e,t,n,r){if(!n.isOpacityZero(e.transform.zoom))if("3d"===e.renderPass){var a=e.gl;a.disable(a.STENCIL_TEST),a.enable(a.DEPTH_TEST),e.clearColor(),e.depthMask(!0);for(var s=0;s<r.length;s++)i(e,t,n,r[s])}else"translucent"===e.renderPass&&o(e,n)}function o(e,t){var n=t.viewportFrame;if(n){var r=e.gl,o=e.useProgram("extrusionTexture");r.disable(r.STENCIL_TEST),r.disable(r.DEPTH_TEST),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,n.texture),r.uniform1f(o.uniforms.u_opacity,t.paint["fill-extrusion-opacity"]),r.uniform1i(o.uniforms.u_image,0);var i=c.create();c.ortho(i,0,e.width,e.height,0,0,1),r.uniformMatrix4fv(o.uniforms.u_matrix,!1,i),r.uniform2f(o.uniforms.u_world,r.drawingBufferWidth,r.drawingBufferHeight),e.viewportVAO.bind(r,o,e.viewportBuffer),r.drawArrays(r.TRIANGLE_STRIP,0,4)}}function i(e,t,n,r){var o=t.getTile(r),i=o.getBucket(n);if(i){var s=e.gl,l=n.paint["fill-extrusion-pattern"],c=i.programConfigurations.get(n.id),p=e.useProgram(l?"fillExtrusionPattern":"fillExtrusion",c);if(c.setUniforms(s,p,n,{zoom:e.transform.zoom}),l){if(u.isPatternMissing(l,e))return;u.prepare(l,e,p),u.setTile(o,e,p),s.uniform1f(p.uniforms.u_height_factor,-Math.pow(2,r.z)/o.tileSize/8)}e.gl.uniformMatrix4fv(p.uniforms.u_matrix,!1,e.translatePosMatrix(r.posMatrix,o,n.paint["fill-extrusion-translate"],n.paint["fill-extrusion-translate-anchor"])),a(p,e),p.draw(s,s.TRIANGLES,n.id,i.layoutVertexBuffer,i.indexBuffer,i.segments,c)}}function a(e,t){var n=t.gl,r=t.style.light,o=r.calculated.position,i=[o.x,o.y,o.z],a=l.create();"viewport"===r.calculated.anchor&&l.fromRotation(a,-t.transform.angle),p.transformMat3(i,i,a),n.uniform3fv(e.uniforms.u_lightpos,i),n.uniform1f(e.uniforms.u_lightintensity,r.calculated.intensity),n.uniform3fv(e.uniforms.u_lightcolor,r.calculated.color.slice(0,3))}var s=e("@mapbox/gl-matrix"),u=e("./pattern"),l=s.mat3,c=s.mat4,p=s.vec3;t.exports=r},{"./pattern":91,"@mapbox/gl-matrix":1}],80:[function(e,t,n){"use strict";function r(e,t,n,r){if(!e.isOpaquePass&&!n.isOpacityZero(e.transform.zoom)){var i=e.gl;e.setDepthSublayer(0),e.depthMask(!1),i.disable(i.STENCIL_TEST),o(i,e,n),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),i.blendFunc(i.ONE,i.ONE);for(var s=0;s<r.length;s++){var u=r[s];if(!t.hasRenderableParent(u)){var c=t.getTile(u),p=c.getBucket(n);if(p){var h=p.programConfigurations.get(n.id),f=e.useProgram("heatmap",h),d=e.transform,m=d.zoom;h.setUniforms(i,f,n,{zoom:m}),i.uniform1f(f.uniforms.u_radius,n.getPaintValue("heatmap-radius",{zoom:m})),i.uniform1f(f.uniforms.u_extrude_scale,l(c,1,m)),i.uniform1f(f.uniforms.u_intensity,n.getPaintValue("heatmap-intensity",{zoom:m})),i.uniformMatrix4fv(f.uniforms.u_matrix,!1,u.posMatrix),f.draw(i,i.TRIANGLES,n.id,p.layoutVertexBuffer,p.indexBuffer,p.segments,h)}}}a(i,e,n)}}function o(e,t,n){e.activeTexture(e.TEXTURE1),e.viewport(0,0,t.width/4,t.height/4);var r=n.heatmapTexture,o=n.heatmapFbo;r?(e.bindTexture(e.TEXTURE_2D,r),e.bindFramebuffer(e.FRAMEBUFFER,o)):(r=n.heatmapTexture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),o=n.heatmapFbo=e.createFramebuffer(),i(e,t,r,o))}function i(e,t,n,r){e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t.width/4,t.height/4,0,e.RGBA,t.extTextureHalfFloat?t.extTextureHalfFloat.HALF_FLOAT_OES:e.UNSIGNED_BYTE,null),e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0),t.extTextureHalfFloat&&e.checkFramebufferStatus(e.FRAMEBUFFER)!==e.FRAMEBUFFER_COMPLETE&&(t.extTextureHalfFloat=null,i(e,t,n,r))}function a(e,t,n){e.bindFramebuffer(e.FRAMEBUFFER,null),e.activeTexture(e.TEXTURE2);var r=n.colorRampTexture;r||(r=n.colorRampTexture=new u(e,n.colorRamp,e.RGBA)),r.bind(e.LINEAR,e.CLAMP_TO_EDGE),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA);var o=t.useProgram("heatmapTexture");e.viewport(0,0,t.width,t.height),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,n.heatmapTexture);var i=n.getPaintValue("heatmap-opacity",{zoom:t.transform.zoom});e.uniform1f(o.uniforms.u_opacity,i),e.uniform1i(o.uniforms.u_image,1),e.uniform1i(o.uniforms.u_color_ramp,2);var a=s.create();s.ortho(a,0,t.width,t.height,0,0,1),e.uniformMatrix4fv(o.uniforms.u_matrix,!1,a),e.disable(e.DEPTH_TEST),e.uniform2f(o.uniforms.u_world,e.drawingBufferWidth,e.drawingBufferHeight),t.viewportVAO.bind(e,o,t.viewportBuffer),e.drawArrays(e.TRIANGLE_STRIP,0,4),e.enable(e.DEPTH_TEST)}var s=e("@mapbox/gl-matrix").mat4,u=e("./texture"),l=e("../source/pixels_to_tile_units");t.exports=r},{"../source/pixels_to_tile_units":105,"./texture":94,"@mapbox/gl-matrix":1}],81:[function(e,t,n){"use strict";function r(e,t,n,r,a,s,u,l,c){var p,h,f,d,m=t.gl,y=a.paint["line-dasharray"],v=a.paint["line-pattern"];if(l||c){var g=1/i(n,1,t.transform.tileZoom);if(y){p=t.lineAtlas.getDash(y.from,"round"===a.layout["line-cap"]),h=t.lineAtlas.getDash(y.to,"round"===a.layout["line-cap"]);var _=p.width*y.fromScale,b=h.width*y.toScale;m.uniform2f(e.uniforms.u_patternscale_a,g/_,-p.height/2),m.uniform2f(e.uniforms.u_patternscale_b,g/b,-h.height/2),m.uniform1f(e.uniforms.u_sdfgamma,t.lineAtlas.width/(256*Math.min(_,b)*o.devicePixelRatio)/2)}else if(v){if(f=t.imageManager.getPattern(v.from),d=t.imageManager.getPattern(v.to),!f||!d)return;m.uniform2f(e.uniforms.u_pattern_size_a,f.displaySize[0]*v.fromScale/g,d.displaySize[1]),m.uniform2f(e.uniforms.u_pattern_size_b,d.displaySize[0]*v.toScale/g,d.displaySize[1]);var w=t.imageManager.getPixelSize(),x=w.width,E=w.height;m.uniform2fv(e.uniforms.u_texsize,[x,E])}m.uniform2f(e.uniforms.u_gl_units_to_pixels,1/t.transform.pixelsToGLUnits[0],1/t.transform.pixelsToGLUnits[1])}l&&(y?(m.uniform1i(e.uniforms.u_image,0),m.activeTexture(m.TEXTURE0),t.lineAtlas.bind(m),m.uniform1f(e.uniforms.u_tex_y_a,p.y),m.uniform1f(e.uniforms.u_tex_y_b,h.y),m.uniform1f(e.uniforms.u_mix,y.t)):v&&(m.uniform1i(e.uniforms.u_image,0),m.activeTexture(m.TEXTURE0),t.imageManager.bind(m),m.uniform2fv(e.uniforms.u_pattern_tl_a,f.tl),m.uniform2fv(e.uniforms.u_pattern_br_a,f.br),m.uniform2fv(e.uniforms.u_pattern_tl_b,d.tl),m.uniform2fv(e.uniforms.u_pattern_br_b,d.br),m.uniform1f(e.uniforms.u_fade,v.t))),t.enableTileClippingMask(s);var C=t.translatePosMatrix(s.posMatrix,n,a.paint["line-translate"],a.paint["line-translate-anchor"]);m.uniformMatrix4fv(e.uniforms.u_matrix,!1,C),m.uniform1f(e.uniforms.u_ratio,1/i(n,1,t.transform.zoom)),e.draw(m,m.TRIANGLES,a.id,r.layoutVertexBuffer,r.indexBuffer,r.segments,u)}var o=e("../util/browser"),i=e("../source/pixels_to_tile_units");t.exports=function(e,t,n,o){if("translucent"===e.renderPass&&!n.isOpacityZero(e.transform.zoom)){e.setDepthSublayer(0),e.depthMask(!1);var i=e.gl;if(i.enable(i.STENCIL_TEST),!(n.paint["line-width"]<=0))for(var a,s=n.paint["line-dasharray"]?"lineSDF":n.paint["line-pattern"]?"linePattern":"line",u=!0,l=0,c=o;l<c.length;l+=1){var p=c[l],h=t.getTile(p),f=h.getBucket(n);if(f){var d=f.programConfigurations.get(n.id),m=e.currentProgram,y=e.useProgram(s,d),v=u||y!==m,g=a!==h.coord.z;v&&d.setUniforms(e.gl,y,n,{zoom:e.transform.zoom}),r(y,e,h,f,n,p,d,v,g),a=h.coord.z,u=!1}}}}},{"../source/pixels_to_tile_units":105,"../util/browser":231}],82:[function(e,t,n){"use strict";function r(e,t,n,r){if("translucent"===e.renderPass&&!n.isOpacityZero(e.transform.zoom)){var u=e.gl,c=t.getSource(),p=e.useProgram("raster");u.disable(u.DEPTH_TEST),e.depthMask(!1),u.disable(u.STENCIL_TEST),u.uniform1f(p.uniforms.u_brightness_low,n.paint["raster-brightness-min"]),u.uniform1f(p.uniforms.u_brightness_high,n.paint["raster-brightness-max"]),u.uniform1f(p.uniforms.u_saturation_factor,a(n.paint["raster-saturation"])),u.uniform1f(p.uniforms.u_contrast_factor,i(n.paint["raster-contrast"])),u.uniform3fv(p.uniforms.u_spin_weights,o(n.paint["raster-hue-rotate"])),u.uniform1f(p.uniforms.u_buffer_scale,1),u.uniform1i(p.uniforms.u_image0,0),u.uniform1i(p.uniforms.u_image1,1);for(var h=r.length&&r[0].z,f=0,d=r;f<d.length;f+=1){var m=d[f];e.setDepthSublayer(m.z-h);var y=t.getTile(m),v=e.transform.calculatePosMatrix(m,t.getSource().maxzoom);y.registerFadeDuration(e.style.animationLoop,n.paint["raster-fade-duration"]),u.uniformMatrix4fv(p.uniforms.u_matrix,!1,v);var g=t.findLoadedParent(m,0,{}),_=s(y,g,t,n,e.transform),b=void 0,w=void 0;if(u.activeTexture(u.TEXTURE0),y.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE,u.LINEAR_MIPMAP_NEAREST),u.activeTexture(u.TEXTURE1),g?(g.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE,u.LINEAR_MIPMAP_NEAREST),b=Math.pow(2,g.coord.z-y.coord.z),w=[y.coord.x*b%1,y.coord.y*b%1]):y.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE,u.LINEAR_MIPMAP_NEAREST),u.uniform2fv(p.uniforms.u_tl_parent,w||[0,0]),u.uniform1f(p.uniforms.u_scale_parent,b||1),u.uniform1f(p.uniforms.u_fade_t,_.mix),u.uniform1f(p.uniforms.u_opacity,_.opacity*n.paint["raster-opacity"]),c instanceof l){var x=c.boundsBuffer;c.boundsVAO.bind(u,p,x),u.drawArrays(u.TRIANGLE_STRIP,0,x.length)}else if(y.maskedBoundsBuffer&&y.maskedIndexBuffer&&y.segments)p.draw(u,u.TRIANGLES,n.id,y.maskedBoundsBuffer,y.maskedIndexBuffer,y.segments);else{var E=e.rasterBoundsBuffer,C=e.rasterBoundsVAO;C.bind(u,p,E),u.drawArrays(u.TRIANGLE_STRIP,0,E.length)}}u.depthFunc(u.LEQUAL)}}function o(e){e*=Math.PI/180;var t=Math.sin(e),n=Math.cos(e);return[(2*n+1)/3,(-Math.sqrt(3)*t-n+1)/3,(Math.sqrt(3)*t-n+1)/3]}function i(e){return e>0?1/(1-e):1+e}function a(e){return e>0?1-1/(1.001-e):-e}function s(e,t,n,r,o){var i=r.paint["raster-fade-duration"];if(i>0){var a=Date.now(),s=(a-e.timeAdded)/i,l=t?(a-t.timeAdded)/i:-1,c=n.getSource(),p=o.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),h=!t||Math.abs(t.coord.z-p)>Math.abs(e.coord.z-p),f=h&&e.refreshedUponExpiration?1:u.clamp(h?s:1-l,0,1);return e.refreshedUponExpiration&&s>=1&&(e.refreshedUponExpiration=!1),t?{opacity:1,mix:1-f}:{opacity:f,mix:0}}return{opacity:1,mix:0}}var u=e("../util/util"),l=e("../source/image_source");t.exports=r},{"../source/image_source":103,"../util/util":252}],83:[function(e,t,n){"use strict";function r(e,t,n,r){if("translucent"===e.renderPass){var i=!(n.layout["text-allow-overlap"]||n.layout["icon-allow-overlap"]||n.layout["text-ignore-placement"]||n.layout["icon-ignore-placement"]),a=e.gl;i?a.disable(a.STENCIL_TEST):a.enable(a.STENCIL_TEST),e.setDepthSublayer(0),e.depthMask(!1),n.isOpacityZero(e.transform.zoom,"icon-opacity")||o(e,t,n,r,!1,n.paint["icon-translate"],n.paint["icon-translate-anchor"],n.layout["icon-rotation-alignment"],n.layout["icon-pitch-alignment"],n.layout["icon-keep-upright"]),n.isOpacityZero(e.transform.zoom,"text-opacity")||o(e,t,n,r,!0,n.paint["text-translate"],n.paint["text-translate-anchor"],n.layout["text-rotation-alignment"],n.layout["text-pitch-alignment"],n.layout["text-keep-upright"]),t.map.showCollisionBoxes&&u(e,t,n,r)}}function o(e,t,n,r,o,s,u,p,h,d){var m=e.gl,y=e.transform,v="map"===p,g="map"===h,_=v&&"line"===n.layout["symbol-placement"],b=v&&!g&&!_,w=g;w?m.enable(m.DEPTH_TEST):m.disable(m.DEPTH_TEST);for(var x,E=0,C=r;E<C.length;E+=1){var T=C[E],S=t.getTile(T),P=S.getBucket(n);if(P){var O=o?P.text:P.icon;if(O&&O.segments.get().length){var A=O.programConfigurations.get(n.id),k=o||P.sdfIcons,I=o?P.textSizeData:P.iconSizeData;if(x||(x=e.useProgram(k?"symbolSDF":"symbolIcon",A),A.setUniforms(m,x,n,{zoom:e.transform.zoom}),i(x,e,n,o,b,g,I)),m.activeTexture(m.TEXTURE0),m.uniform1i(x.uniforms.u_texture,0),o)S.glyphAtlasTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE),m.uniform2fv(x.uniforms.u_texsize,S.glyphAtlasTexture.size);else{var N=!n.isLayoutValueFeatureConstant("icon-size")||!n.isLayoutValueZoomConstant("icon-size")||1!==n.getLayoutValue("icon-size",{zoom:y.zoom})||P.iconsNeedLinear,R=g||0!==y.pitch;S.iconAtlasTexture.bind(k||e.options.rotating||e.options.zooming||N||R?m.LINEAR:m.NEAREST,m.CLAMP_TO_EDGE),m.uniform2fv(x.uniforms.u_texsize,S.iconAtlasTexture.size)}e.enableTileClippingMask(T),m.uniformMatrix4fv(x.uniforms.u_matrix,!1,e.translatePosMatrix(T.posMatrix,S,s,u));var M=l(S,1,e.transform.zoom),D=c.getLabelPlaneMatrix(T.posMatrix,g,v,e.transform,M),L=c.getGlCoordMatrix(T.posMatrix,g,v,e.transform,M);m.uniformMatrix4fv(x.uniforms.u_gl_coord_matrix,!1,e.translatePosMatrix(L,S,s,u,!0)),_?(m.uniformMatrix4fv(x.uniforms.u_label_plane_matrix,!1,f),c.updateLineLabels(P,T.posMatrix,e,o,D,L,g,d,M,n)):m.uniformMatrix4fv(x.uniforms.u_label_plane_matrix,!1,D),m.uniform1f(x.uniforms.u_collision_y_stretch,S.collisionTile.yStretch),a(x,A,e,n,S,O,o,k,g)}}}w||m.enable(m.DEPTH_TEST)}function i(e,t,n,r,o,i,a){var s=t.gl,u=t.transform;s.uniform1i(e.uniforms.u_pitch_with_map,i?1:0),s.uniform1f(e.uniforms.u_is_text,r?1:0),s.activeTexture(s.TEXTURE1),t.frameHistory.bind(s),s.uniform1i(e.uniforms.u_fadetexture,1),s.uniform1f(e.uniforms.u_pitch,u.pitch/360*2*Math.PI);var l="constant"===a.functionType||"source"===a.functionType,c="constant"===a.functionType||"camera"===a.functionType;s.uniform1i(e.uniforms.u_is_size_zoom_constant,l?1:0),s.uniform1i(e.uniforms.u_is_size_feature_constant,c?1:0),s.uniform1f(e.uniforms.u_camera_to_center_distance,u.cameraToCenterDistance);var h=p.evaluateSizeForZoom(a,u,n,r);void 0!==h.uSizeT&&s.uniform1f(e.uniforms.u_size_t,h.uSizeT),void 0!==h.uSize&&s.uniform1f(e.uniforms.u_size,h.uSize),s.uniform1f(e.uniforms.u_aspect_ratio,u.width/u.height),s.uniform1i(e.uniforms.u_rotate_symbol,o?1:0)}function a(e,t,n,r,o,i,a,u,l){var c=n.gl,p=n.transform;if(u){var h=(a?"text":"icon")+"-halo-width",f=!r.isPaintValueFeatureConstant(h)||r.paint[h],d=l?Math.cos(p._pitch)*p.cameraToCenterDistance:1;c.uniform1f(e.uniforms.u_gamma_scale,d),f&&(c.uniform1f(e.uniforms.u_is_halo,1),s(i,r,c,e)),c.uniform1f(e.uniforms.u_is_halo,0)}s(i,r,c,e)}function s(e,t,n,r){r.draw(n,n.TRIANGLES,t.id,e.layoutVertexBuffer,e.indexBuffer,e.segments,e.programConfigurations.get(t.id),e.dynamicLayoutVertexBuffer)}var u=e("./draw_collision_debug"),l=e("../source/pixels_to_tile_units"),c=e("../symbol/projection"),p=e("../symbol/symbol_size"),h=e("@mapbox/gl-matrix").mat4,f=h.identity(new Float32Array(16));t.exports=r},{"../source/pixels_to_tile_units":105,"../symbol/projection":204,"../symbol/symbol_size":207,"./draw_collision_debug":76,"@mapbox/gl-matrix":1}],84:[function(e,t,n){"use strict";var r=function(){this.changeTimes=new Float64Array(256),this.changeOpacities=new Uint8Array(256),this.opacities=new Uint8ClampedArray(256),this.array=new Uint8Array(this.opacities.buffer),this.previousZoom=0,this.firstFrame=!0};r.prototype.record=function(e,t,n){var r=this;this.firstFrame&&(e=0,this.firstFrame=!1),t=Math.floor(10*t);var o;if(t<this.previousZoom)for(o=t+1;o<=this.previousZoom;o++)r.changeTimes[o]=e,r.changeOpacities[o]=r.opacities[o];else for(o=t;o>this.previousZoom;o--)r.changeTimes[o]=e,r.changeOpacities[o]=r.opacities[o];for(o=0;o<256;o++){var i=e-r.changeTimes[o],a=255*(n?i/n:1);r.opacities[o]=o<=t?r.changeOpacities[o]+a:r.changeOpacities[o]-a}this.changed=!0,this.previousZoom=t},r.prototype.isVisible=function(e){return 0!==this.opacities[Math.floor(10*e)]},r.prototype.bind=function(e){this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.changed&&(e.texSubImage2D(e.TEXTURE_2D,0,0,0,256,1,e.ALPHA,e.UNSIGNED_BYTE,this.array),this.changed=!1)):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texImage2D(e.TEXTURE_2D,0,e.ALPHA,256,1,0,e.ALPHA,e.UNSIGNED_BYTE,this.array))},t.exports=r},{}],85:[function(e,t,n){"use strict";function r(e){var t=a.create({width:0,height:0}),n={},r=new o(0,0,{autoResize:!0});for(var i in e){var u=e[i],l=n[i]={};for(var c in u){var p=u[+c];if(p&&0!==p.bitmap.width&&0!==p.bitmap.height){var h=r.packOne(p.bitmap.width+2*s,p.bitmap.height+2*s);a.resize(t,{width:r.w,height:r.h}),a.copy(p.bitmap,t,{x:0,y:0},{x:h.x+s,y:h.y+s},p.bitmap),l[c]={rect:h,metrics:p.metrics}}}}return r.shrink(),a.resize(t,{width:r.w,height:r.h}),{image:t,positions:n}}var o=e("@mapbox/shelf-pack"),i=e("../util/image"),a=i.AlphaImage,s=1;t.exports={makeGlyphAtlas:r}},{"../util/image":242,"@mapbox/shelf-pack":3}],86:[function(e,t,n){"use strict";var r=e("../style/load_glyph_range"),o=e("@mapbox/tiny-sdf"),i=e("../util/is_char_in_unicode_block"),a=e("../util/util"),s=a.asyncAll,u=e("../util/image"),l=u.AlphaImage,c=function(e,t){this.requestTransform=e,this.localIdeographFontFamily=t,this.entries={}};c.prototype.setURL=function(e){this.url=e},c.prototype.getGlyphs=function(e,t){var n=this,o=[];for(var i in e)for(var a=0,u=e[i];a<u.length;a+=1){var l=u[a];o.push({stack:i,id:l})}s(o,function(e,t){var o=e.stack,i=e.id,a=n.entries[o];a||(a=n.entries[o]={glyphs:{},requests:{}});var s=a.glyphs[i];if(void 0!==s)return void t(null,{stack:o,id:i,glyph:s});if(s=n._tinySDF(a,o,i))return void t(null,{stack:o,id:i,glyph:s});var u=Math.floor(i/256);if(256*u>65535)return void t(new Error("glyphs > 65535 not supported"));var l=a.requests[u];l||(l=a.requests[u]=[],r(o,u,n.url,n.requestTransform,function(e,t){if(t)for(var n in t)a.glyphs[+n]=t[+n];for(var r=0,o=l;r<o.length;r+=1)(0,o[r])(e,t);delete a.requests[u]})),l.push(function(e,n){e?t(e):n&&t(null,{stack:o,id:i,glyph:n[i]||null})})},function(e,n){if(e)t(e);else if(n){for(var r={},o=0,i=n;o<i.length;o+=1){var a=i[o],s=a.stack,u=a.id,l=a.glyph;(r[s]||(r[s]={}))[u]=l}t(null,r)}})},c.prototype._tinySDF=function(e,t,n){var r=this.localIdeographFontFamily;if(r&&(i["CJK Unified Ideographs"](n)||i["Hangul Syllables"](n))){var a=e.tinySDF;if(!a){var s="400";/bold/i.test(t)?s="900":/medium/i.test(t)?s="500":/light/i.test(t)&&(s="200"),a=e.tinySDF=new o(24,3,8,.25,r,s)}return{id:n,bitmap:l.create({width:30,height:30},a.draw(String.fromCharCode(n))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},t.exports=c},{"../style/load_glyph_range":178,"../util/image":242,"../util/is_char_in_unicode_block":244,"../util/util":252,"@mapbox/tiny-sdf":4}],87:[function(e,t,n){"use strict";function r(e,t){var n=t.pixelRatio,r={x:e.x+u,y:e.y+u,w:e.w-2*u,h:e.h-2*u};return{pixelRatio:n,textureRect:r,tl:[r.x,r.y],br:[r.x+r.w,r.y+r.h],displaySize:[r.w/n,r.h/n]}}function o(e){var t=s.create({width:0,height:0}),n={},o=new i(0,0,{autoResize:!0});for(var a in e){var l=e[a],c=o.packOne(l.data.width+2*u,l.data.height+2*u);s.resize(t,{width:o.w,height:o.h}),s.copy(l.data,t,{x:0,y:0},{x:c.x+u,y:c.y+u},l.data),n[a]=r(c,l)}return o.shrink(),s.resize(t,{width:o.w,height:o.h}),{image:t,positions:n}}var i=e("@mapbox/shelf-pack"),a=e("../util/image"),s=a.RGBAImage,u=1;t.exports={imagePosition:r,makeImageAtlas:o}},{"../util/image":242,"@mapbox/shelf-pack":3}],88:[function(e,t,n){"use strict";var r=e("@mapbox/shelf-pack"),o=e("../util/image"),i=o.RGBAImage,a=e("./image_atlas"),s=a.imagePosition,u=e("./texture"),l=function(){this.images={},this.loaded=!1,this.requestors=[],this.shelfPack=new r(64,64,{autoResize:!0}),this.patterns={},this.atlasImage=i.create({width:64,height:64}),this.dirty=!0};l.prototype.isLoaded=function(){return this.loaded},l.prototype.setLoaded=function(e){var t=this;if(this.loaded!==e&&(this.loaded=e,e)){for(var n=0,r=t.requestors;n<r.length;n+=1){var o=r[n],i=o.ids,a=o.callback;t._notify(i,a)}this.requestors=[]}},l.prototype.getImage=function(e){return this.images[e]},l.prototype.addImage=function(e,t){this.images[e]=t},l.prototype.removeImage=function(e){delete this.images[e];var t=this.patterns[e];t&&(this.shelfPack.unref(t.bin),delete this.patterns[e])},l.prototype.getImages=function(e,t){var n=this,r=!0;if(!this.isLoaded())for(var o=0,i=e;o<i.length;o+=1){var a=i[o];n.images[a]||(r=!1)}this.isLoaded()||r?this._notify(e,t):this.requestors.push({ids:e,callback:t})},l.prototype._notify=function(e,t){for(var n=this,r={},o=0,i=e;o<i.length;o+=1){var a=i[o],s=n.images[a];s&&(r[a]=s)}t(null,r)},l.prototype.getPixelSize=function(){return{width:this.shelfPack.w,height:this.shelfPack.h}},l.prototype.getPattern=function(e){var t=this.patterns[e];if(t)return t.position;var n=this.getImage(e);if(!n)return null;var r=n.data.width+2,o=n.data.height+2,a=this.shelfPack.packOne(r,o);if(!a)return null;i.resize(this.atlasImage,this.getPixelSize());var u=n.data,l=this.atlasImage,c=a.x+1,p=a.y+1,h=u.width,f=u.height;i.copy(u,l,{x:0,y:0},{x:c,y:p},{width:h,height:f}),i.copy(u,l,{x:0,y:f-1},{x:c,y:p-1},{width:h,height:1}),i.copy(u,l,{x:0,y:0},{x:c,y:p+f},{width:h,height:1}),i.copy(u,l,{x:h-1,y:0},{x:c-1,y:p},{width:1,height:f}),i.copy(u,l,{x:0,y:0},{x:c+h,y:p},{width:1,height:f}),this.dirty=!0;var d=s(a,n);return this.patterns[e]={bin:a,position:d},d},l.prototype.bind=function(e){this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new u(e,this.atlasImage,e.RGBA),this.atlasTexture.bind(e.LINEAR,e.CLAMP_TO_EDGE)},t.exports=l},{"../util/image":242,"./image_atlas":87,"./texture":94,"@mapbox/shelf-pack":3}],89:[function(e,t,n){"use strict";var r=e("../util/util"),o=function(e,t){this.width=e,this.height=t,this.nextRow=0,this.bytes=4,this.data=new Uint8Array(this.width*this.height*this.bytes),this.positions={}};o.prototype.getDash=function(e,t){var n=e.join(",")+String(t);return this.positions[n]||(this.positions[n]=this.addDash(e,t)),this.positions[n]},o.prototype.addDash=function(e,t){var n=this,o=t?7:0,i=2*o+1;if(this.nextRow+i>this.height)return r.warnOnce("LineAtlas out of space"),null;for(var a=0,s=0;s<e.length;s++)a+=e[s];for(var u=this.width/a,l=u/2,c=e.length%2==1,p=-o;p<=o;p++)for(var h=n.nextRow+o+p,f=n.width*h,d=c?-e[e.length-1]:0,m=e[0],y=1,v=0;v<this.width;v++){for(;m<v/u;)d=m,m+=e[y],c&&y===e.length-1&&(m+=e[0]),y++;var g=Math.abs(v-d*u),_=Math.abs(v-m*u),b=Math.min(g,_),w=y%2==1,x=void 0;if(t){var E=o?p/o*(l+1):0;if(w){var C=l-Math.abs(E);x=Math.sqrt(b*b+C*C)}else x=l-Math.sqrt(b*b+E*E)}else x=(w?1:-1)*b;n.data[3+4*(f+v)]=Math.max(0,Math.min(255,x+128))}var T={y:(this.nextRow+o+.5)/this.height,height:2*o/this.height,width:a};return this.nextRow+=i,this.dirty=!0,T},o.prototype.bind=function(e){this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.RGBA,e.UNSIGNED_BYTE,this.data))):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.width,this.height,0,e.RGBA,e.UNSIGNED_BYTE,this.data))},t.exports=o},{"../util/util":252}],90:[function(e,t,n){"use strict";var r=e("../util/browser"),o=e("@mapbox/gl-matrix").mat4,i=e("./frame_history"),a=e("../source/source_cache"),s=e("../data/extent"),u=e("../source/pixels_to_tile_units"),l=e("../util/util"),c=e("../gl/vertex_buffer"),p=e("./vertex_array_object"),h=e("../data/raster_bounds_array"),f=e("../data/pos_array"),d=e("../data/program_configuration"),m=d.ProgramConfiguration,y=e("../shaders"),v=e("./program"),g=e("./render_texture"),_=e("./tile_mask"),b={symbol:e("./draw_symbol"),circle:e("./draw_circle"),heatmap:e("./draw_heatmap"),line:e("./draw_line"),fill:e("./draw_fill"),"fill-extrusion":e("./draw_fill_extrusion"),raster:e("./draw_raster"),background:e("./draw_background"),debug:e("./draw_debug")},w=function(e,t){this.gl=e,this.transform=t,this._tileTextures={},this.frameHistory=new i,this.setup(),this.numSublayers=a.maxUnderzooming+a.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.lineWidthRange=e.getParameter(e.ALIASED_LINE_WIDTH_RANGE),this.basicFillProgramConfiguration=m.createBasicFill(),this.emptyProgramConfiguration=new m};w.prototype.resize=function(e,t){var n=this,o=this.gl;if(this.width=e*r.devicePixelRatio,this.height=t*r.devicePixelRatio,o.viewport(0,0,this.width,this.height),this.style)for(var i=0,a=n.style._order;i<a.length;i+=1){var s=a[i];n.style._layers[s].resize(o)}this.depthRbo&&(this.gl.deleteRenderbuffer(this.depthRbo),this.depthRbo=null)},w.prototype.setup=function(){var e=this.gl;e.enable(e.BLEND),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA),e.enable(e.STENCIL_TEST),e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),this._depthMask=!1,e.depthMask(!1);var t=new f;t.emplaceBack(0,0),t.emplaceBack(s,0),t.emplaceBack(0,s),t.emplaceBack(s,s),this.tileExtentBuffer=new c(e,t),this.tileExtentVAO=new p,this.tileExtentPatternVAO=new p;var n=new f;n.emplaceBack(0,0),n.emplaceBack(s,0),n.emplaceBack(s,s),n.emplaceBack(0,s),n.emplaceBack(0,0),this.debugBuffer=new c(e,n),this.debugVAO=new p;var r=new h;r.emplaceBack(0,0,0,0),r.emplaceBack(s,0,s,0),r.emplaceBack(0,s,0,s),r.emplaceBack(s,s,s,s),this.rasterBoundsBuffer=new c(e,r),this.rasterBoundsVAO=new p;var o=new f;o.emplaceBack(0,0),o.emplaceBack(1,0),o.emplaceBack(0,1),o.emplaceBack(1,1),this.viewportBuffer=new c(e,o),this.viewportVAO=new p,this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=e.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&e.getExtension("OES_texture_half_float_linear")},w.prototype.clearColor=function(){var e=this.gl;e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)},w.prototype.clearStencil=function(){var e=this.gl;e.clearStencil(0),e.stencilMask(255),e.clear(e.STENCIL_BUFFER_BIT)},w.prototype.clearDepth=function(){var e=this.gl;e.clearDepth(1),this.depthMask(!0),e.clear(e.DEPTH_BUFFER_BIT)},w.prototype._renderTileClippingMasks=function(e){var t=this,n=this.gl;n.colorMask(!1,!1,!1,!1),this.depthMask(!1),n.disable(n.DEPTH_TEST),n.enable(n.STENCIL_TEST),n.stencilMask(255),n.stencilOp(n.KEEP,n.KEEP,n.REPLACE);var r=1;this._tileClippingMaskIDs={};for(var o=0,i=e;o<i.length;o+=1){var a=i[o],s=t._tileClippingMaskIDs[a.id]=r++;n.stencilFunc(n.ALWAYS,s,255);var u=t.useProgram("fill",t.basicFillProgramConfiguration);n.uniformMatrix4fv(u.uniforms.u_matrix,!1,a.posMatrix),t.tileExtentVAO.bind(n,u,t.tileExtentBuffer),n.drawArrays(n.TRIANGLE_STRIP,0,t.tileExtentBuffer.length)}n.stencilMask(0),n.colorMask(!0,!0,!0,!0),this.depthMask(!0),n.enable(n.DEPTH_TEST)},w.prototype.enableTileClippingMask=function(e){var t=this.gl;t.stencilFunc(t.EQUAL,this._tileClippingMaskIDs[e.id],255)},w.prototype.render=function(e,t){var n=this;this.style=e,this.options=t,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.frameHistory.record(Date.now(),this.transform.zoom,e.getTransition().duration);for(var r in n.style.sourceCaches){var o=n.style.sourceCaches[r];o.used&&o.prepare(n.gl)}var i=this.style._order,a=l.filterObject(this.style.sourceCaches,function(e){return"raster"===e._source.type});for(var s in a)!function(e){var t=a[e],r=t.getVisibleCoordinates(),o=r.map(function(e){return t.getTile(e)});_(o,n.gl)}(s);this.renderPass="3d";for(var u,c=!0,p=[],h=0;h<i.length;h++){var f=n.style._layers[i[h]];if(f.has3DPass()&&!f.isHidden(n.transform.zoom)&&(f.source!==(u&&u.id)&&(u=n.style.sourceCaches[f.source],p=[],u&&(n.clearStencil(),p=u.getVisibleCoordinates()),p.reverse()),p.length)){n._setup3DRenderbuffer();var d=f.viewportFrame||new g(n);f.viewportFrame=d,d.bindWithDepth(n.depthRbo),c&&(n.clearDepth(),c=!1),n.renderLayer(n,u,f,p),d.unbind()}}this.clearColor(),this.clearDepth(),this.showOverdrawInspector(t.showOverdrawInspector),this.depthRange=(e._order.length+2)*this.numSublayers*this.depthEpsilon,this.renderPass="opaque";var m,y=[];for(this.currentLayer=i.length-1,this._showOverdrawInspector||this.gl.disable(this.gl.BLEND),this.currentLayer;this.currentLayer>=0;this.currentLayer--){var v=n.style._layers[i[n.currentLayer]];v.source!==(m&&m.id)&&(m=n.style.sourceCaches[v.source],y=[],m&&(n.clearStencil(),y=m.getVisibleCoordinates(),m.getSource().isTileClipped&&n._renderTileClippingMasks(y))),n.renderLayer(n,m,v,y)}this.renderPass="translucent";var w,x=[];for(this.gl.enable(this.gl.BLEND),this.currentLayer=0,this.currentLayer;this.currentLayer<i.length;this.currentLayer++){var E=n.style._layers[i[n.currentLayer]];E.source!==(w&&w.id)&&(w=n.style.sourceCaches[E.source],x=[],w&&(n.clearStencil(),x=w.getVisibleCoordinates(),w.getSource().isTileClipped&&n._renderTileClippingMasks(x)),x.reverse()),n.renderLayer(n,w,E,x)}if(this.options.showTileBoundaries){var C=this.style.sourceCaches[Object.keys(this.style.sourceCaches)[0]];C&&b.debug(this,C,C.getVisibleCoordinates())}},w.prototype._setup3DRenderbuffer=function(){if(!this.depthRbo){var e=this.gl;this.depthRbo=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,this.depthRbo),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,this.width,this.height),e.bindRenderbuffer(e.RENDERBUFFER,null)}this.depthRboAttached=!0},w.prototype.depthMask=function(e){e!==this._depthMask&&(this._depthMask=e,this.gl.depthMask(e))},w.prototype.renderLayer=function(e,t,n,r){n.isHidden(this.transform.zoom)||("background"===n.type||r.length)&&(this.id=n.id,b[n.type](e,t,n,r))},w.prototype.setDepthSublayer=function(e){var t=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon,n=t-1+this.depthRange;this.gl.depthRange(n,t)},w.prototype.translatePosMatrix=function(e,t,n,r,i){if(!n[0]&&!n[1])return e;var a=i?"map"===r?this.transform.angle:0:"viewport"===r?-this.transform.angle:0;if(a){var s=Math.sin(a),l=Math.cos(a);n=[n[0]*l-n[1]*s,n[0]*s+n[1]*l]}var c=[i?n[0]:u(t,n[0],this.transform.zoom),i?n[1]:u(t,n[1],this.transform.zoom),0],p=new Float32Array(16);return o.translate(p,e,c),p},w.prototype.saveTileTexture=function(e){var t=this._tileTextures[e.size[0]];t?t.push(e):this._tileTextures[e.size[0]]=[e]},w.prototype.getTileTexture=function(e){var t=this._tileTextures[e];return t&&t.length>0?t.pop():null},w.prototype.lineWidth=function(e){this.gl.lineWidth(l.clamp(e,this.lineWidthRange[0],this.lineWidthRange[1]))},w.prototype.showOverdrawInspector=function(e){if(e||this._showOverdrawInspector){this._showOverdrawInspector=e;var t=this.gl;e?(t.blendFunc(t.CONSTANT_COLOR,t.ONE),t.blendColor(1/8,1/8,1/8,0),t.clearColor(0,0,0,1),t.clear(t.COLOR_BUFFER_BIT)):t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA)}},w.prototype._createProgramCached=function(e,t){this.cache=this.cache||{};var n=""+e+(t.cacheKey||"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[n]||(this.cache[n]=new v(this.gl,y[e],t,this._showOverdrawInspector)),this.cache[n]},w.prototype.useProgram=function(e,t){var n=this.gl,r=this._createProgramCached(e,t||this.emptyProgramConfiguration);return this.currentProgram!==r&&(n.useProgram(r.program),this.currentProgram=r),r},t.exports=w},{"../data/extent":58,"../data/pos_array":62,"../data/program_configuration":63,"../data/raster_bounds_array":64,"../gl/vertex_buffer":72,"../shaders":98,"../source/pixels_to_tile_units":105,"../source/source_cache":110,"../util/browser":231,"../util/util":252,"./draw_background":74,"./draw_circle":75,"./draw_debug":77,"./draw_fill":78,"./draw_fill_extrusion":79,"./draw_heatmap":80,"./draw_line":81,"./draw_raster":82,"./draw_symbol":83,"./frame_history":84,"./program":92,"./render_texture":93,"./tile_mask":95,"./vertex_array_object":96,"@mapbox/gl-matrix":1}],91:[function(e,t,n){"use strict";var r=e("../source/pixels_to_tile_units");n.isPatternMissing=function(e,t){if(!e)return!1;var n=t.imageManager.getPattern(e.from),r=t.imageManager.getPattern(e.to);return!n||!r},n.prepare=function(e,t,n){var r=t.gl,o=t.imageManager.getPattern(e.from),i=t.imageManager.getPattern(e.to);r.uniform1i(n.uniforms.u_image,0),r.uniform2fv(n.uniforms.u_pattern_tl_a,o.tl),r.uniform2fv(n.uniforms.u_pattern_br_a,o.br),r.uniform2fv(n.uniforms.u_pattern_tl_b,i.tl),r.uniform2fv(n.uniforms.u_pattern_br_b,i.br);var a=t.imageManager.getPixelSize(),s=a.width,u=a.height;r.uniform2fv(n.uniforms.u_texsize,[s,u]),r.uniform1f(n.uniforms.u_mix,e.t),r.uniform2fv(n.uniforms.u_pattern_size_a,o.displaySize),r.uniform2fv(n.uniforms.u_pattern_size_b,i.displaySize),r.uniform1f(n.uniforms.u_scale_a,e.fromScale),r.uniform1f(n.uniforms.u_scale_b,e.toScale),r.activeTexture(r.TEXTURE0),t.imageManager.bind(r)},n.setTile=function(e,t,n){var o=t.gl;o.uniform1f(n.uniforms.u_tile_units_to_pixels,1/r(e,1,t.transform.tileZoom));var i=Math.pow(2,e.coord.z),a=e.tileSize*Math.pow(2,t.transform.tileZoom)/i,s=a*(e.coord.x+e.coord.w*i),u=a*e.coord.y;o.uniform2f(n.uniforms.u_pixel_coord_upper,s>>16,u>>16),o.uniform2f(n.uniforms.u_pixel_coord_lower,65535&s,65535&u)}},{"../source/pixels_to_tile_units":105}],92:[function(e,t,n){"use strict";var r=e("../util/browser"),o=e("../shaders"),i=e("../data/program_configuration"),a=(i.ProgramConfiguration,e("./vertex_array_object")),s=function(e,t,n,i){var a=this;this.gl=e,this.program=e.createProgram();var s=n.defines().concat("#define DEVICE_PIXEL_RATIO "+r.devicePixelRatio.toFixed(1));i&&s.push("#define OVERDRAW_INSPECTOR;");var u=s.concat(o.prelude.fragmentSource,t.fragmentSource).join("\n"),l=s.concat(o.prelude.vertexSource,t.vertexSource).join("\n"),c=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(c,u),e.compileShader(c),e.attachShader(this.program,c);var p=e.createShader(e.VERTEX_SHADER);e.shaderSource(p,l),e.compileShader(p),e.attachShader(this.program,p);for(var h=n.interface?n.interface.layoutAttributes:[],f=0;f<h.length;f++)e.bindAttribLocation(a.program,f,h[f].name);e.linkProgram(this.program),this.numAttributes=e.getProgramParameter(this.program,e.ACTIVE_ATTRIBUTES),this.attributes={},this.uniforms={};for(var d=0;d<this.numAttributes;d++){var m=e.getActiveAttrib(a.program,d);m&&(a.attributes[m.name]=e.getAttribLocation(a.program,m.name))}for(var y=e.getProgramParameter(this.program,e.ACTIVE_UNIFORMS),v=0;v<y;v++){var g=e.getActiveUniform(a.program,v);g&&(a.uniforms[g.name]=e.getUniformLocation(a.program,g.name))}};s.prototype.draw=function(e,t,n,r,o,i,s,u){for(var l,c=this,p=(l={},l[e.LINES]=2,l[e.TRIANGLES]=3,l)[t],h=0,f=i.get();h<f.length;h+=1){var d=f[h],m=d.vaos||(d.vaos={});(m[n]||(m[n]=new a)).bind(e,c,r,o,s&&s.paintVertexBuffer,d.vertexOffset,u),e.drawElements(t,d.primitiveLength*p,e.UNSIGNED_SHORT,d.primitiveOffset*p*2)}},t.exports=s},{"../data/program_configuration":63,"../shaders":98,"../util/browser":231,"./vertex_array_object":96}],93:[function(e,t,n){"use strict";var r=function(e){var t=this.gl=e.gl,n=this.texture=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e.width,e.height,0,t.RGBA,t.UNSIGNED_BYTE,null),t.bindTexture(t.TEXTURE_2D,null);var r=this.fbo=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0)};r.prototype.bindWithDepth=function(e){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.fbo),this.attachedRbo!==e&&(t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e),this.attachedRbo=e)},r.prototype.unbind=function(){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,null)},t.exports=r},{}],94:[function(e,t,n){"use strict";var r=e("../util/window"),o=r.HTMLImageElement,i=r.HTMLCanvasElement,a=r.HTMLVideoElement,s=r.ImageData,u=function(e,t,n){this.gl=e;var r=t.width,o=t.height;this.size=[r,o],this.format=n,this.texture=e.createTexture(),this.update(t)};u.prototype.update=function(e){var t=e.width,n=e.height;this.size=[t,n];var r=this,u=r.gl;u.bindTexture(u.TEXTURE_2D,this.texture),u.pixelStorei(u.UNPACK_ALIGNMENT,1),this.format===u.RGBA&&u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e instanceof o||e instanceof i||e instanceof a||e instanceof s?u.texImage2D(u.TEXTURE_2D,0,this.format,this.format,u.UNSIGNED_BYTE,e):u.texImage2D(u.TEXTURE_2D,0,this.format,t,n,0,this.format,u.UNSIGNED_BYTE,e.data)},u.prototype.bind=function(e,t,n){var r=this,o=r.gl;o.bindTexture(o.TEXTURE_2D,this.texture),e!==this.filter&&(o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,e),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,n||e),this.filter=e),t!==this.wrap&&(o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,t),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,t),this.wrap=t)},u.prototype.destroy=function(){this.gl.deleteTexture(this.texture),this.texture=null},t.exports=u},{"../util/window":233}],95:[function(e,t,n){"use strict";function r(e,t,n,i,a){for(var s=0;s<n.length;s++){var u=n[s];if(i.isLessThan(u.coord))break;if(t.id===u.coord.id)return;if(u.coord.isChildOf(t)){for(var l=t.children(1/0),c=0;c<l.length;c++)r(e,l[c],n.slice(s),i,a);return}}var p=t.z-e.z,h=new o(p,t.x-(e.x<<p),t.y-(e.y<<p)).id;a[h]=a[h]||!0}var o=e("../source/tile_coord");t.exports=function(e,t){for(var n=e.sort(function(e,t){return e.coord.isLessThan(t.coord)?-1:t.coord.isLessThan(e.coord)?1:0}),i=0;i<n.length;i++){var a={},s=n[i],u=n.slice(i+1);r(s.coord.wrapped(),s.coord,u,new o(0,0,0,s.coord.w+1),a),s.setMask(a,t)}}},{"../source/tile_coord":113}],96:[function(e,t,n){"use strict";var r=function(){this.boundProgram=null,this.boundVertexBuffer=null,this.boundVertexBuffer2=null,this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};r.prototype.bind=function(e,t,n,r,o,i,a){void 0===e.extVertexArrayObject&&(e.extVertexArrayObject=e.getExtension("OES_vertex_array_object"));var s=!this.vao||this.boundProgram!==t||this.boundVertexBuffer!==n||this.boundVertexBuffer2!==o||this.boundIndexBuffer!==r||this.boundVertexOffset!==i||this.boundDynamicVertexBuffer!==a;!e.extVertexArrayObject||s?(this.freshBind(e,t,n,r,o,i,a),this.gl=e):(e.extVertexArrayObject.bindVertexArrayOES(this.vao),a&&a.bind())},r.prototype.freshBind=function(e,t,n,r,o,i,a){var s,u=t.numAttributes;if(e.extVertexArrayObject)this.vao&&this.destroy(),this.vao=e.extVertexArrayObject.createVertexArrayOES(),e.extVertexArrayObject.bindVertexArrayOES(this.vao),s=0,this.boundProgram=t,this.boundVertexBuffer=n,this.boundVertexBuffer2=o,this.boundIndexBuffer=r,this.boundVertexOffset=i,this.boundDynamicVertexBuffer=a;else{s=e.currentNumAttributes||0;for(var l=u;l<s;l++)e.disableVertexAttribArray(l)}n.enableAttributes(e,t),o&&o.enableAttributes(e,t),a&&a.enableAttributes(e,t),n.bind(),n.setVertexAttribPointers(e,t,i),o&&(o.bind(),o.setVertexAttribPointers(e,t,i)),a&&(a.bind(),a.setVertexAttribPointers(e,t,i)),r&&r.bind(),e.currentNumAttributes=u},r.prototype.destroy=function(){this.vao&&(this.gl.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)},t.exports=r},{}],97:[function(e,t,n){"use strict";var r=e("../util/util");n.packUint8ToFloat=function(e,t){return e=r.clamp(Math.floor(e),0,255),t=r.clamp(Math.floor(t),0,255),256*e+t}},{"../util/util":252}],98:[function(e,t,n){"use strict";var r={prelude:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n\n// Unpack a pair of values that have been packed into a single float.\n// The packed values are assumed to be 8-bit unsigned integers, and are\n// packed like so:\n// packedValue = floor(input[0]) * 256 + input[1],\nvec2 unpack_float(const float packedValue) {\n    int packedIntValue = int(packedValue);\n    int v0 = packedIntValue / 256;\n    return vec2(v0, packedIntValue - v0 * 256);\n}\n\n\n// To minimize the number of attributes needed, we encode a 4-component\n// color into a pair of floats (i.e. a vec2) as follows:\n// [ floor(color.r * 255) * 256 + color.g * 255,\n//   floor(color.b * 255) * 256 + color.g * 255 ]\nvec4 decode_color(const vec2 encodedColor) {\n    return vec4(\n        unpack_float(encodedColor[0]) / 255.0,\n        unpack_float(encodedColor[1]) / 255.0\n    );\n}\n\n// Unpack a pair of paint values and interpolate between them.\nfloat unpack_mix_vec2(const vec2 packedValue, const float t) {\n    return mix(packedValue[0], packedValue[1], t);\n}\n\n// Unpack a pair of paint values and interpolate between them.\nvec4 unpack_mix_vec4(const vec4 packedColors, const float t) {\n    vec4 minColor = decode_color(vec2(packedColors[0], packedColors[1]));\n    vec4 maxColor = decode_color(vec2(packedColors[2], packedColors[3]));\n    return mix(minColor, maxColor, t);\n}\n\n// The offset depends on how many pixels are between the world origin and the edge of the tile:\n// vec2 offset = mod(pixel_coord, size)\n//\n// At high zoom levels there are a ton of pixels between the world origin and the edge of the tile.\n// The glsl spec only guarantees 16 bits of precision for highp floats. We need more than that.\n//\n// The pixel_coord is passed in as two 16 bit values:\n// pixel_coord_upper = floor(pixel_coord / 2^16)\n// pixel_coord_lower = mod(pixel_coord, 2^16)\n//\n// The offset is calculated in a series of steps that should preserve this precision:\nvec2 get_pattern_pos(const vec2 pixel_coord_upper, const vec2 pixel_coord_lower,\n    const vec2 pattern_size, const float tile_units_to_pixels, const vec2 pos) {\n\n    vec2 offset = mod(mod(mod(pixel_coord_upper, pattern_size) * 256.0, pattern_size) * 256.0 + pixel_coord_lower, pattern_size);\n    return (tile_units_to_pixels * pos + offset) / pattern_size;\n}\n"},circle:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec3 v_data;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize highp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    vec2 extrude = v_data.xy;\n    float extrude_length = length(extrude);\n\n    lowp float antialiasblur = v_data.z;\n    float antialiased_blur = -max(blur, antialiasblur);\n\n    float opacity_t = smoothstep(0.0, antialiased_blur, extrude_length - 1.0);\n\n    float color_t = stroke_width < 0.01 ? 0.0 : smoothstep(\n        antialiased_blur,\n        0.0,\n        extrude_length - radius / (radius + stroke_width)\n    );\n\n    gl_FragColor = opacity_t * mix(color * opacity, stroke_color * stroke_opacity, color_t);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform bool u_scale_with_map;\nuniform bool u_pitch_with_map;\nuniform vec2 u_extrude_scale;\nuniform highp float u_camera_to_center_distance;\n\nattribute vec2 a_pos;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec3 v_data;\n\nvoid main(void) {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize highp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    vec2 extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    vec2 circle_center = floor(a_pos * 0.5);\n    if (u_pitch_with_map) {\n        vec2 corner_position = circle_center;\n        if (u_scale_with_map) {\n            corner_position += extrude * (radius + stroke_width) * u_extrude_scale;\n        } else {\n            // Pitching the circle with the map effectively scales it with the map\n            // To counteract the effect for pitch-scale: viewport, we rescale the\n            // whole circle based on the pitch scaling effect at its central point\n            vec4 projected_center = u_matrix * vec4(circle_center, 0, 1);\n            corner_position += extrude * (radius + stroke_width) * u_extrude_scale * (projected_center.w / u_camera_to_center_distance);\n        }\n\n        gl_Position = u_matrix * vec4(corner_position, 0, 1);\n    } else {\n        gl_Position = u_matrix * vec4(circle_center, 0, 1);\n\n        if (u_scale_with_map) {\n            gl_Position.xy += extrude * (radius + stroke_width) * u_extrude_scale * u_camera_to_center_distance;\n        } else {\n            gl_Position.xy += extrude * (radius + stroke_width) * u_extrude_scale * gl_Position.w;\n        }\n    }\n\n    // This is a minimum blur distance that serves as a faux-antialiasing for\n    // the circle. since blur is a ratio of the circle's size and the intent is\n    // to keep the blur at roughly 1px, the two are inversely related.\n    lowp float antialiasblur = 1.0 / DEVICE_PIXEL_RATIO / (radius + stroke_width);\n\n    v_data = vec3(extrude.x, extrude.y, antialiasblur);\n}\n"},heatmap:{fragmentSource:"#pragma mapbox: define highp float weight\n\nuniform highp float u_intensity;\nuniform highp float u_radius;\nvarying vec2 v_extrude;\n\n// Gaussian kernel coefficient: 1 / sqrt(2 * PI)\n#define GAUSS_COEF 0.3989422804014327\n\nvoid main() {\n    #pragma mapbox: initialize highp float weight\n\n    // Kernel density estimation with a Gaussian kernel of size 5x5\n    float d = -0.5 * 3.0 * 3.0 * dot(v_extrude, v_extrude);\n    float val = weight * u_intensity * GAUSS_COEF * exp(d);\n\n    gl_FragColor = vec4(val, 1.0, 1.0, 1.0);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#pragma mapbox: define highp float weight\n\nuniform mat4 u_matrix;\nuniform float u_extrude_scale;\nuniform float u_radius;\nuniform float u_opacity;\nuniform float u_intensity;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_extrude;\n\n// Effective \"0\" in the kernel density texture to adjust the kernel size to;\n// this empirically chosen number minimizes artifacts on overlapping kernels\n// for typical heatmap cases (assuming clustered source)\nconst highp float ZERO = 1.0 / 255.0 / 16.0;\n\n// Gaussian kernel coefficient: 1 / sqrt(2 * PI)\n#define GAUSS_COEF 0.3989422804014327\n\nvoid main(void) {\n    #pragma mapbox: initialize highp float weight\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    vec2 unscaled_extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    // This 'extrude' comes in ranging from [-1, -1], to [1, 1].  We'll use\n    // it to produce the vertices of a square mesh framing the point feature\n    // we're adding to the kernel density texture.  We'll also pass it as\n    // a varying, so that the fragment shader can determine the distance of\n    // each fragment from the point feature.\n    // Before we do so, we need to scale it up sufficiently so that the\n    // kernel falls effectively to zero at the edge of the mesh.\n    // That is, we want to know S such that\n    // weight * u_intensity * GAUSS_COEF * exp(-0.5 * 3.0^2 * S^2) == ZERO\n    // Which solves to:\n    // S = sqrt(-2.0 * log(ZERO / (weight * u_intensity * GAUSS_COEF))) / 3.0\n    float S = sqrt(-2.0 * log(ZERO / weight / u_intensity / GAUSS_COEF)) / 3.0;\n\n    // Pass the varying in units of u_radius\n    v_extrude = S * unscaled_extrude;\n\n    // Scale by u_radius and the zoom-based scale factor to produce actual\n    // mesh position\n    vec2 extrude = v_extrude * u_radius * u_extrude_scale;\n\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    vec4 pos = vec4(floor(a_pos * 0.5) + extrude, 0, 1);\n\n    gl_Position = u_matrix * pos;\n}\n"},heatmapTexture:{fragmentSource:"uniform sampler2D u_image;\nuniform sampler2D u_color_ramp;\nuniform float u_opacity;\nvarying vec2 v_pos;\n\nvoid main() {\n    float t = texture2D(u_image, v_pos).r;\n    vec4 color = texture2D(u_color_ramp, vec2(t, 0.5));\n    gl_FragColor = color * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(0.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nattribute vec2 a_pos;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos * u_world, 0, 1);\n\n    v_pos.x = a_pos.x;\n    v_pos.y = 1.0 - a_pos.y;\n}\n"},collisionBox:{fragmentSource:"uniform float u_zoom;\n// u_maxzoom is derived from the maximum scale considered by the CollisionTile\n// Labels with placement zoom greater than this value will not be placed,\n// regardless of perspective effects.\nuniform float u_maxzoom;\nuniform sampler2D u_fadetexture;\n\n// v_max_zoom is a collision-box-specific value that controls when line-following\n// collision boxes are used.\nvarying float v_max_zoom;\nvarying float v_placement_zoom;\nvarying float v_perspective_zoom_adjust;\nvarying vec2 v_fade_tex;\n\nvoid main() {\n\n    float alpha = 0.5;\n\n    // Green = no collisions, label is showing\n    gl_FragColor = vec4(0.0, 1.0, 0.0, 1.0) * alpha;\n\n    // Red = collision, label hidden\n    if (texture2D(u_fadetexture, v_fade_tex).a < 1.0) {\n        gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n    }\n\n    // Faded black = this collision box is not used at this zoom (for curved labels)\n    if (u_zoom >= v_max_zoom + v_perspective_zoom_adjust) {\n        gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0) * alpha * 0.25;\n    }\n\n    // Faded blue = the placement scale for this label is beyond the CollisionTile\n    // max scale, so it's impossible for this label to show without collision detection\n    // being run again (the label's glyphs haven't even been added to the symbol bucket)\n    if (v_placement_zoom >= u_maxzoom) {\n        gl_FragColor = vec4(0.0, 0.0, 1.0, 1.0) * alpha * 0.2;\n    }\n}\n",vertexSource:"attribute vec2 a_pos;\nattribute vec2 a_anchor_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_data;\n\nuniform mat4 u_matrix;\nuniform float u_scale;\nuniform float u_pitch;\nuniform float u_collision_y_stretch;\nuniform float u_camera_to_center_distance;\n\nvarying float v_max_zoom;\nvarying float v_placement_zoom;\nvarying float v_perspective_zoom_adjust;\nvarying vec2 v_fade_tex;\n\nvoid main() {\n    vec4 projectedPoint = u_matrix * vec4(a_anchor_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    highp float collision_perspective_ratio = 1.0 + 0.5 * ((camera_to_anchor_distance / u_camera_to_center_distance) - 1.0);\n\n    highp float incidence_stretch  = camera_to_anchor_distance / (u_camera_to_center_distance * cos(u_pitch));\n    highp float collision_adjustment = max(1.0, incidence_stretch / u_collision_y_stretch);\n\n    gl_Position = u_matrix * vec4(a_pos + a_extrude * collision_perspective_ratio * collision_adjustment / u_scale, 0.0, 1.0);\n\n    v_max_zoom = a_data.x;\n    v_placement_zoom = a_data.y;\n\n    v_perspective_zoom_adjust = floor(log2(collision_perspective_ratio * collision_adjustment) * 10.0);\n    v_fade_tex = vec2((v_placement_zoom + v_perspective_zoom_adjust) / 255.0, 0.0);\n}\n"},debug:{fragmentSource:"uniform highp vec4 u_color;\n\nvoid main() {\n    gl_FragColor = u_color;\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},fill:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_FragColor = color * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},fillOutline:{fragmentSource:"#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_pos;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = 1.0 - smoothstep(0.0, 1.0, dist);\n    gl_FragColor = outline_color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\nuniform vec2 u_world;\n\nvarying vec2 v_pos;\n\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},fillOutlinePattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    // find distance to outline for alpha interpolation\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = 1.0 - smoothstep(0.0, 1.0, dist);\n\n\n    gl_FragColor = mix(color1, color2, u_mix) * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},fillPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    gl_FragColor = mix(color1, color2, u_mix) * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n}\n"},fillExtrusion:{fragmentSource:"varying vec4 v_color;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define highp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize highp vec4 color\n\n    gl_FragColor = v_color;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\n\nattribute vec2 a_pos;\nattribute vec3 a_normal;\nattribute float a_edgedistance;\n\nvarying vec4 v_color;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\n#pragma mapbox: define highp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize highp vec4 color\n\n    base = max(0.0, base);\n    height = max(0.0, height);\n\n    float ed = a_edgedistance; // use each attrib in order to not trip a VAO assert\n    float t = mod(a_normal.x, 2.0);\n\n    gl_Position = u_matrix * vec4(a_pos, t > 0.0 ? height : base, 1);\n\n    // Relative luminance (how dark/bright is the surface color?)\n    float colorvalue = color.r * 0.2126 + color.g * 0.7152 + color.b * 0.0722;\n\n    v_color = vec4(0.0, 0.0, 0.0, 1.0);\n\n    // Add slight ambient lighting so no extrusions are totally black\n    vec4 ambientlight = vec4(0.03, 0.03, 0.03, 1.0);\n    color += ambientlight;\n\n    // Calculate cos(theta), where theta is the angle between surface normal and diffuse light ray\n    float directional = clamp(dot(a_normal / 16384.0, u_lightpos), 0.0, 1.0);\n\n    // Adjust directional so that\n    // the range of values for highlight/shading is narrower\n    // with lower light intensity\n    // and with lighter/brighter surface colors\n    directional = mix((1.0 - u_lightintensity), max((1.0 - colorvalue + u_lightintensity), 1.0), directional);\n\n    // Add gradient along z axis of side surfaces\n    if (a_normal.y != 0.0) {\n        directional *= clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\n    }\n\n    // Assign final color based on surface + ambient light color, diffuse light directional, and light color\n    // with lower bounds adjusted to hue of light\n    // so that shading is tinted with the complementary (opposite) color to the light color\n    v_color.r += clamp(color.r * directional * u_lightcolor.r, mix(0.0, 0.3, 1.0 - u_lightcolor.r), 1.0);\n    v_color.g += clamp(color.g * directional * u_lightcolor.g, mix(0.0, 0.3, 1.0 - u_lightcolor.g), 1.0);\n    v_color.b += clamp(color.b * directional * u_lightcolor.b, mix(0.0, 0.3, 1.0 - u_lightcolor.b), 1.0);\n}\n"},fillExtrusionPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    vec4 mixedColor = mix(color1, color2, u_mix);\n\n    gl_FragColor = mixedColor * v_lighting;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\nuniform float u_height_factor;\n\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\n\nattribute vec2 a_pos;\nattribute vec3 a_normal;\nattribute float a_edgedistance;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\nvarying float v_directional;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n\n    base = max(0.0, base);\n    height = max(0.0, height);\n\n    float t = mod(a_normal.x, 2.0);\n    float z = t > 0.0 ? height : base;\n\n    gl_Position = u_matrix * vec4(a_pos, z, 1);\n\n    vec2 pos = a_normal.x == 1.0 && a_normal.y == 0.0 && a_normal.z == 16384.0\n        ? a_pos // extrusion top\n        : vec2(a_edgedistance, z * u_height_factor); // extrusion side\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, pos);\n\n    v_lighting = vec4(0.0, 0.0, 0.0, 1.0);\n    float directional = clamp(dot(a_normal / 16383.0, u_lightpos), 0.0, 1.0);\n    directional = mix((1.0 - u_lightintensity), max((0.5 + u_lightintensity), 1.0), directional);\n\n    if (a_normal.y != 0.0) {\n        directional *= clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\n    }\n\n    v_lighting.rgb += clamp(directional * u_lightcolor, mix(vec3(0.0), vec3(0.3), 1.0 - u_lightcolor), vec3(1.0));\n}\n"},extrusionTexture:{fragmentSource:"uniform sampler2D u_image;\nuniform float u_opacity;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_FragColor = texture2D(u_image, v_pos) * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(0.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nattribute vec2 a_pos;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos * u_world, 0, 1);\n\n    v_pos.x = a_pos.x;\n    v_pos.y = 1.0 - a_pos.y;\n}\n"},line:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_width2;\nvarying vec2 v_normal;\nvarying float v_gamma_scale;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\n// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_width2 = vec2(outset, inset);\n}\n"},linePattern:{fragmentSource:"uniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_fade;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float x_a = mod(v_linesofar / u_pattern_size_a.x, 1.0);\n    float x_b = mod(v_linesofar / u_pattern_size_b.x, 1.0);\n    float y_a = 0.5 + (v_normal.y * v_width2.s / u_pattern_size_a.y);\n    float y_b = 0.5 + (v_normal.y * v_width2.s / u_pattern_size_b.y);\n    vec2 pos_a = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, vec2(x_a, y_a));\n    vec2 pos_b = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, vec2(x_b, y_b));\n\n    vec4 color = mix(texture2D(u_image, pos_a), texture2D(u_image, pos_b), u_fade);\n\n    gl_FragColor = color * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize mediump float width\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_linesofar = a_linesofar;\n    v_width2 = vec2(outset, inset);\n}\n"},lineSDF:{fragmentSource:"\nuniform sampler2D u_image;\nuniform float u_sdfgamma;\nuniform float u_mix;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize lowp float floorwidth\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float sdfdist_a = texture2D(u_image, v_tex_a).a;\n    float sdfdist_b = texture2D(u_image, v_tex_b).a;\n    float sdfdist = mix(sdfdist_a, sdfdist_b, u_mix);\n    alpha *= smoothstep(0.5 - u_sdfgamma / floorwidth, 0.5 + u_sdfgamma / floorwidth, sdfdist);\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_patternscale_a;\nuniform float u_tex_y_a;\nuniform vec2 u_patternscale_b;\nuniform float u_tex_y_b;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize lowp float floorwidth\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist =outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_tex_a = vec2(a_linesofar * u_patternscale_a.x / floorwidth, normal.y * u_patternscale_a.y + u_tex_y_a);\n    v_tex_b = vec2(a_linesofar * u_patternscale_b.x / floorwidth, normal.y * u_patternscale_b.y + u_tex_y_b);\n\n    v_width2 = vec2(outset, inset);\n}\n"},raster:{fragmentSource:"uniform float u_fade_t;\nuniform float u_opacity;\nuniform sampler2D u_image0;\nuniform sampler2D u_image1;\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nuniform float u_brightness_low;\nuniform float u_brightness_high;\n\nuniform float u_saturation_factor;\nuniform float u_contrast_factor;\nuniform vec3 u_spin_weights;\n\nvoid main() {\n\n    // read and cross-fade colors from the main and parent tiles\n    vec4 color0 = texture2D(u_image0, v_pos0);\n    vec4 color1 = texture2D(u_image1, v_pos1);\n    if (color0.a > 0.0) {\n        color0.rgb = color0.rgb / color0.a;\n    }\n    if (color1.a > 0.0) {\n        color1.rgb = color1.rgb / color1.a;\n    }\n    vec4 color = mix(color0, color1, u_fade_t);\n    color.a *= u_opacity;\n    vec3 rgb = color.rgb;\n\n    // spin\n    rgb = vec3(\n        dot(rgb, u_spin_weights.xyz),\n        dot(rgb, u_spin_weights.zxy),\n        dot(rgb, u_spin_weights.yzx));\n\n    // saturation\n    float average = (color.r + color.g + color.b) / 3.0;\n    rgb += (average - rgb) * u_saturation_factor;\n\n    // contrast\n    rgb = (rgb - 0.5) * u_contrast_factor + 0.5;\n\n    // brightness\n    vec3 u_high_vec = vec3(u_brightness_low, u_brightness_low, u_brightness_low);\n    vec3 u_low_vec = vec3(u_brightness_high, u_brightness_high, u_brightness_high);\n\n    gl_FragColor = vec4(mix(u_high_vec, u_low_vec, rgb) * color.a, color.a);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_tl_parent;\nuniform float u_scale_parent;\nuniform float u_buffer_scale;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    // We are using Int16 for texture position coordinates to give us enough precision for\n    // fractional coordinates. We use 8192 to scale the texture coordinates in the buffer\n    // as an arbitrarily high number to preserve adequate precision when rendering.\n    // This is also the same value as the EXTENT we are using for our tile buffer pos coordinates,\n    // so math for modifying either is consistent.\n    v_pos0 = (((a_texture_pos / 8192.0) - 0.5) / u_buffer_scale ) + 0.5;\n    v_pos1 = (v_pos0 * u_scale_parent) + u_tl_parent;\n}\n"},symbolIcon:{fragmentSource:"uniform sampler2D u_texture;\nuniform sampler2D u_fadetexture;\n\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_tex;\nvarying vec2 v_fade_tex;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    lowp float alpha = texture2D(u_fadetexture, v_fade_tex).a * opacity;\n    gl_FragColor = texture2D(u_texture, v_tex) * alpha;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"const float PI = 3.141592653589793;\n\nattribute vec4 a_pos_offset;\nattribute vec4 a_data;\nattribute vec3 a_projected_pos;\n\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform highp float u_size; // used when size is both zoom and feature constant\nuniform highp float u_camera_to_center_distance;\nuniform highp float u_pitch;\nuniform bool u_rotate_symbol;\nuniform highp float u_aspect_ratio;\nuniform highp float u_collision_y_stretch;\n\n#pragma mapbox: define lowp float opacity\n\nuniform mat4 u_matrix;\nuniform mat4 u_label_plane_matrix;\nuniform mat4 u_gl_coord_matrix;\n\nuniform bool u_is_text;\nuniform bool u_pitch_with_map;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_tex;\nvarying vec2 v_fade_tex;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_data.xy;\n    vec2 a_size = a_data.zw;\n\n    highp vec2 angle_labelminzoom = unpack_float(a_projected_pos[2]);\n    highp float segment_angle = -angle_labelminzoom[0] / 255.0 * 2.0 * PI;\n    mediump float a_labelminzoom = angle_labelminzoom[1];\n\n    float size;\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = mix(a_size[0], a_size[1], u_size_t) / 10.0;\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = a_size[0] / 10.0;\n    } else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {\n        size = u_size;\n    } else {\n        size = u_size;\n    }\n\n    vec4 projectedPoint = u_matrix * vec4(a_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    // See comments in symbol_sdf.vertex\n    highp float distance_ratio = u_pitch_with_map ?\n        camera_to_anchor_distance / u_camera_to_center_distance :\n        u_camera_to_center_distance / camera_to_anchor_distance;\n    highp float perspective_ratio = 0.5 + 0.5 * distance_ratio;\n\n    size *= perspective_ratio;\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    highp float symbol_rotation = 0.0;\n    if (u_rotate_symbol) {\n        // See comments in symbol_sdf.vertex\n        vec4 offsetProjectedPoint = u_matrix * vec4(a_pos + vec2(1, 0), 0, 1);\n\n        vec2 a = projectedPoint.xy / projectedPoint.w;\n        vec2 b = offsetProjectedPoint.xy / offsetProjectedPoint.w;\n\n        symbol_rotation = atan((b.y - a.y) / u_aspect_ratio, b.x - a.x);\n    }\n\n    highp float angle_sin = sin(segment_angle + symbol_rotation);\n    highp float angle_cos = cos(segment_angle + symbol_rotation);\n    mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n\n    vec4 projected_pos = u_label_plane_matrix * vec4(a_projected_pos.xy, 0.0, 1.0);\n    gl_Position = u_gl_coord_matrix * vec4(projected_pos.xy / projected_pos.w + rotation_matrix * (a_offset / 64.0 * fontScale), 0.0, 1.0);\n\n    v_tex = a_tex / u_texsize;\n    // See comments in symbol_sdf.vertex\n    highp float incidence_stretch  = camera_to_anchor_distance / (u_camera_to_center_distance * cos(u_pitch));\n    highp float collision_adjustment = max(1.0, incidence_stretch / u_collision_y_stretch);\n\n    highp float collision_perspective_ratio = 1.0 + 0.5*((camera_to_anchor_distance / u_camera_to_center_distance) - 1.0);\n    highp float perspective_zoom_adjust = floor(log2(collision_perspective_ratio * collision_adjustment) * 10.0);\n    v_fade_tex = vec2((a_labelminzoom + perspective_zoom_adjust) / 255.0, 0.0);\n}\n"},symbolSDF:{fragmentSource:"#define SDF_PX 8.0\n#define EDGE_GAMMA 0.105/DEVICE_PIXEL_RATIO\n\nuniform bool u_is_halo;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nuniform sampler2D u_texture;\nuniform sampler2D u_fadetexture;\nuniform highp float u_gamma_scale;\nuniform bool u_is_text;\n\nvarying vec4 v_data0;\nvarying vec2 v_data1;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    vec2 tex = v_data0.xy;\n    vec2 fade_tex = v_data0.zw;\n    float gamma_scale = v_data1.x;\n    float size = v_data1.y;\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    lowp vec4 color = fill_color;\n    highp float gamma = EDGE_GAMMA / (fontScale * u_gamma_scale);\n    lowp float buff = (256.0 - 64.0) / 256.0;\n    if (u_is_halo) {\n        color = halo_color;\n        gamma = (halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (fontScale * u_gamma_scale);\n        buff = (6.0 - halo_width / fontScale) / SDF_PX;\n    }\n\n    lowp float dist = texture2D(u_texture, tex).a;\n    lowp float fade_alpha = texture2D(u_fadetexture, fade_tex).a;\n    highp float gamma_scaled = gamma * gamma_scale;\n    highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist) * fade_alpha;\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"const float PI = 3.141592653589793;\n\nattribute vec4 a_pos_offset;\nattribute vec4 a_data;\nattribute vec3 a_projected_pos;\n\n// contents of a_size vary based on the type of property value\n// used for {text,icon}-size.\n// For constants, a_size is disabled.\n// For source functions, we bind only one value per vertex: the value of {text,icon}-size evaluated for the current feature.\n// For composite functions:\n// [ text-size(lowerZoomStop, feature),\n//   text-size(upperZoomStop, feature) ]\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform highp float u_size; // used when size is both zoom and feature constant\n\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nuniform mat4 u_matrix;\nuniform mat4 u_label_plane_matrix;\nuniform mat4 u_gl_coord_matrix;\n\nuniform bool u_is_text;\nuniform bool u_pitch_with_map;\nuniform highp float u_pitch;\nuniform bool u_rotate_symbol;\nuniform highp float u_aspect_ratio;\nuniform highp float u_camera_to_center_distance;\nuniform highp float u_collision_y_stretch;\n\nuniform vec2 u_texsize;\n\nvarying vec4 v_data0;\nvarying vec2 v_data1;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_data.xy;\n    vec2 a_size = a_data.zw;\n\n    highp vec2 angle_labelminzoom = unpack_float(a_projected_pos[2]);\n    highp float segment_angle = -angle_labelminzoom[0] / 255.0 * 2.0 * PI;\n    mediump float a_labelminzoom = angle_labelminzoom[1];\n    float size;\n\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = mix(a_size[0], a_size[1], u_size_t) / 10.0;\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = a_size[0] / 10.0;\n    } else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {\n        size = u_size;\n    } else {\n        size = u_size;\n    }\n\n    vec4 projectedPoint = u_matrix * vec4(a_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    // If the label is pitched with the map, layout is done in pitched space,\n    // which makes labels in the distance smaller relative to viewport space.\n    // We counteract part of that effect by multiplying by the perspective ratio.\n    // If the label isn't pitched with the map, we do layout in viewport space,\n    // which makes labels in the distance larger relative to the features around\n    // them. We counteract part of that effect by dividing by the perspective ratio.\n    highp float distance_ratio = u_pitch_with_map ?\n        camera_to_anchor_distance / u_camera_to_center_distance :\n        u_camera_to_center_distance / camera_to_anchor_distance;\n    highp float perspective_ratio = 0.5 + 0.5 * distance_ratio;\n\n    size *= perspective_ratio;\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    highp float symbol_rotation = 0.0;\n    if (u_rotate_symbol) {\n        // Point labels with 'rotation-alignment: map' are horizontal with respect to tile units\n        // To figure out that angle in projected space, we draw a short horizontal line in tile\n        // space, project it, and measure its angle in projected space.\n        vec4 offsetProjectedPoint = u_matrix * vec4(a_pos + vec2(1, 0), 0, 1);\n\n        vec2 a = projectedPoint.xy / projectedPoint.w;\n        vec2 b = offsetProjectedPoint.xy / offsetProjectedPoint.w;\n\n        symbol_rotation = atan((b.y - a.y) / u_aspect_ratio, b.x - a.x);\n    }\n\n    highp float angle_sin = sin(segment_angle + symbol_rotation);\n    highp float angle_cos = cos(segment_angle + symbol_rotation);\n    mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n\n    vec4 projected_pos = u_label_plane_matrix * vec4(a_projected_pos.xy, 0.0, 1.0);\n    gl_Position = u_gl_coord_matrix * vec4(projected_pos.xy / projected_pos.w + rotation_matrix * (a_offset / 64.0 * fontScale), 0.0, 1.0);\n    float gamma_scale = gl_Position.w;\n\n    vec2 tex = a_tex / u_texsize;\n    // incidence_stretch is the ratio of how much y space a label takes up on a tile while drawn perpendicular to the viewport vs\n    //  how much space it would take up if it were drawn flat on the tile\n    // Using law of sines, camera_to_anchor/sin(ground_angle) = camera_to_center/sin(incidence_angle)\n    // sin(incidence_angle) = 1/incidence_stretch\n    // Incidence angle 90 -> head on, sin(incidence_angle) = 1, no incidence stretch\n    // Incidence angle 1 -> very oblique, sin(incidence_angle) =~ 0, lots of incidence stretch\n    // ground_angle = u_pitch + PI/2 -> sin(ground_angle) = cos(u_pitch)\n    // This 2D calculation is only exactly correct when gl_Position.x is in the center of the viewport,\n    //  but it's a close enough approximation for our purposes\n    highp float incidence_stretch  = camera_to_anchor_distance / (u_camera_to_center_distance * cos(u_pitch));\n    // incidence_stretch only applies to the y-axis, but without re-calculating the collision tile, we can't\n    // adjust the size of only one axis. So, we do a crude approximation at placement time to get the aspect ratio\n    // about right, and then do the rest of the adjustment here: there will be some extra padding on the x-axis,\n    // but hopefully not too much.\n    // Never make the adjustment less than 1.0: instead of allowing collisions on the x-axis, be conservative on\n    // the y-axis.\n    highp float collision_adjustment = max(1.0, incidence_stretch / u_collision_y_stretch);\n\n    // Floor to 1/10th zoom to dodge precision issues that can cause partially hidden labels\n    highp float collision_perspective_ratio = 1.0 + 0.5*((camera_to_anchor_distance / u_camera_to_center_distance) - 1.0);\n    highp float perspective_zoom_adjust = floor(log2(collision_perspective_ratio * collision_adjustment) * 10.0);\n    vec2 fade_tex = vec2((a_labelminzoom + perspective_zoom_adjust) / 255.0, 0.0);\n\n    v_data0 = vec4(tex.x, tex.y, fade_tex.x, fade_tex.y);\n    v_data1 = vec2(gamma_scale, size);\n}\n"}},o=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g;for(var i in r)!function(e){var t=r[e],n={};t.fragmentSource=t.fragmentSource.replace(o,function(e,t,r,o,i){return n[i]=!0,"define"===t?"\n#ifndef HAS_UNIFORM_u_"+i+"\nvarying "+r+" "+o+" "+i+";\n#else\nuniform "+r+" "+o+" u_"+i+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+i+"\n    "+r+" "+o+" "+i+" = u_"+i+";\n#endif\n"}),t.vertexSource=t.vertexSource.replace(o,function(e,t,r,o,i){var a="float"===o?"vec2":"vec4";return n[i]?"define"===t?"\n#ifndef HAS_UNIFORM_u_"+i+"\nuniform lowp float a_"+i+"_t;\nattribute "+r+" "+a+" a_"+i+";\nvarying "+r+" "+o+" "+i+";\n#else\nuniform "+r+" "+o+" u_"+i+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+i+"\n    "+i+" = unpack_mix_"+a+"(a_"+i+", a_"+i+"_t);\n#else\n    "+r+" "+o+" "+i+" = u_"+i+";\n#endif\n":"define"===t?"\n#ifndef HAS_UNIFORM_u_"+i+"\nuniform lowp float a_"+i+"_t;\nattribute "+r+" "+a+" a_"+i+";\n#else\nuniform "+r+" "+o+" u_"+i+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+i+"\n    "+r+" "+o+" "+i+" = unpack_mix_"+a+"(a_"+i+", a_"+i+"_t);\n#else\n    "+r+" "+o+" "+i+" = u_"+i+";\n#endif\n"})}(i);t.exports=r},{}],99:[function(e,t,n){"use strict";var r=e("./image_source"),o=e("../util/window"),i=function(e){function t(t,n,r,o){e.call(this,t,n,r,o),this.options=n,this.animate=void 0===n.animate||n.animate}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.load=function(){if(this.canvas=this.canvas||o.document.getElementById(this.options.canvas),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions())return this.fire("error",new Error("Canvas dimensions cannot be less than or equal to zero."));var e;this.play=function(){void 0===e&&(e=this.map.style.animationLoop.set(1/0),this.map._rerender())},this.pause=function(){void 0!==e&&(e=this.map.style.animationLoop.cancel(e))},this._finishLoading()},t.prototype.getCanvas=function(){return this.canvas},t.prototype.onAdd=function(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()},t.prototype.onRemove=function(){this.pause()},t.prototype.prepare=function(){var e=!1;this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),this._hasInvalidDimensions()||0!==Object.keys(this.tiles).length&&this._prepareImage(this.map.painter.gl,this.canvas,e)},t.prototype.serialize=function(){return{type:"canvas",canvas:this.canvas,coordinates:this.coordinates}},t.prototype._hasInvalidDimensions=function(){for(var e=this,t=0,n=[e.canvas.width,e.canvas.height];t<n.length;t+=1){var r=n[t];if(isNaN(r)||r<=0)return!0}return!1},t}(r);t.exports=i},{"../util/window":233,"./image_source":103}],100:[function(e,t,n){"use strict";function r(e){var t=a.document.createElement("a");return t.href=e,t.href}var o=e("../util/evented"),i=e("../util/util"),a=e("../util/window"),s=e("../data/extent"),u=e("../util/ajax").ResourceType,l=e("../util/browser"),c=function(e){function t(t,n,r,o){e.call(this),this.id=t,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this.dispatcher=r,this.setEventedParent(o),this._data=n.data,this._options=i.extend({},n),void 0!==n.maxzoom&&(this.maxzoom=n.maxzoom),n.type&&(this.type=n.type);var a=s/this.tileSize;this.workerOptions=i.extend({source:this.id,cluster:n.cluster||!1,geojsonVtOptions:{buffer:(void 0!==n.buffer?n.buffer:128)*a,tolerance:(void 0!==n.tolerance?n.tolerance:.375)*a,extent:s,maxZoom:this.maxzoom},superclusterOptions:{maxZoom:void 0!==n.clusterMaxZoom?Math.min(n.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:s,radius:(n.clusterRadius||50)*a,log:!1}},n.workerOptions)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.load=function(){var e=this;this.fire("dataloading",{dataType:"source"}),this._updateWorkerData(function(t){if(t)return void e.fire("error",{error:t});e.fire("data",{dataType:"source",sourceDataType:"metadata"})})},t.prototype.onAdd=function(e){this.map=e,this.load()},t.prototype.setData=function(e){var t=this;return this._data=e,this.fire("dataloading",{dataType:"source"}),this._updateWorkerData(function(e){if(e)return t.fire("error",{error:e});t.fire("data",{dataType:"source",sourceDataType:"content"})}),this},t.prototype._updateWorkerData=function(e){var t=this,n=i.extend({},this.workerOptions),o=this._data;"string"==typeof o?n.request=this.map._transformRequest(r(o),u.Source):n.data=JSON.stringify(o),this.workerID=this.dispatcher.send(this.type+".loadData",n,function(n){t._loaded=!0,e(n)},this.workerID)},t.prototype.loadTile=function(e,t){var n=this,r=void 0===e.workerID||"expired"===e.state?"loadTile":"reloadTile",o={type:this.type,uid:e.uid,coord:e.coord,zoom:e.coord.z,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:l.devicePixelRatio,overscaling:e.coord.z>this.maxzoom?Math.pow(2,e.coord.z-this.maxzoom):1,angle:this.map.transform.angle,pitch:this.map.transform.pitch,cameraToCenterDistance:this.map.transform.cameraToCenterDistance,cameraToTileDistance:this.map.transform.cameraToTileDistance(e),showCollisionBoxes:this.map.showCollisionBoxes};e.workerID=this.dispatcher.send(r,o,function(r,o){if(e.unloadVectorData(),!e.aborted)return r?t(r):(e.loadVectorData(o,n.map.painter),e.redoWhenDone&&(e.redoWhenDone=!1,e.redoPlacement(n)),t(null))},this.workerID)},t.prototype.abortTile=function(e){e.aborted=!0},t.prototype.unloadTile=function(e){e.unloadVectorData(),this.dispatcher.send("removeTile",{uid:e.uid,type:this.type,source:this.id},function(){},e.workerID)},t.prototype.onRemove=function(){this.dispatcher.broadcast("removeSource",{type:this.type,source:this.id},function(){})},t.prototype.serialize=function(){return i.extend({},this._options,{type:this.type,data:this._data})},t}(o);t.exports=c},{"../data/extent":58,"../util/ajax":230,"../util/browser":231,"../util/evented":239,"../util/util":252,"../util/window":233}],101:[function(e,t,n){"use strict";function r(e,t){var n=e.source,r=e.coord;if(!this._geoJSONIndexes[n])return t(null,null);var o=this._geoJSONIndexes[n].getTile(Math.min(r.z,e.maxZoom),r.x,r.y);if(!o)return t(null,null);var i=new a(o.features),u=s(i);0===u.byteOffset&&u.byteLength===u.buffer.byteLength||(u=new Uint8Array(u)),t(null,{vectorTile:i,rawData:u.buffer})}var o=e("../util/ajax"),i=e("geojson-rewind"),a=e("./geojson_wrapper"),s=e("vt-pbf"),u=e("supercluster"),l=e("geojson-vt"),c=e("./vector_tile_worker_source"),p=function(e){function t(t,n,o){e.call(this,t,n,r),o&&(this.loadGeoJSON=o),this._geoJSONIndexes={}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.loadData=function(e,t){var n=this;this.loadGeoJSON(e,function(r,o){if(r||!o)return t(r);if("object"!=typeof o)return t(new Error("Input data is not a valid GeoJSON object."));i(o,!0);try{n._geoJSONIndexes[e.source]=e.cluster?u(e.superclusterOptions).load(o.features):l(o,e.geojsonVtOptions)}catch(r){return t(r)}n.loaded[e.source]={},t(null)})},t.prototype.reloadTile=function(t,n){var r=this.loaded[t.source],o=t.uid;return r&&r[o]?e.prototype.reloadTile.call(this,t,n):this.loadTile(t,n)},t.prototype.loadGeoJSON=function(e,t){if(e.request)o.getJSON(e.request,t);else{if("string"!=typeof e.data)return t(new Error("Input data is not a valid GeoJSON object."));try{return t(null,JSON.parse(e.data))}catch(e){return t(new Error("Input data is not a valid GeoJSON object."))}}},t.prototype.removeSource=function(e){this._geoJSONIndexes[e.source]&&delete this._geoJSONIndexes[e.source]},t}(c);t.exports=p},{"../util/ajax":230,"./geojson_wrapper":102,"./vector_tile_worker_source":115,"geojson-rewind":14,"geojson-vt":18,supercluster:41,"vt-pbf":46}],102:[function(e,t,n){"use strict";var r=e("@mapbox/point-geometry"),o=e("@mapbox/vector-tile").VectorTileFeature.prototype.toGeoJSON,i=e("../data/extent"),a=function(e){this._feature=e,this.extent=i,this.type=e.type,this.properties=e.tags,"id"in e&&!isNaN(e.id)&&(this.id=parseInt(e.id,10))};a.prototype.loadGeometry=function(){var e=this;if(1===this._feature.type){for(var t=[],n=0,o=e._feature.geometry;n<o.length;n+=1){var i=o[n];t.push([new r(i[0],i[1])])}return t}for(var a=[],s=0,u=e._feature.geometry;s<u.length;s+=1){for(var l=u[s],c=[],p=0,h=l;p<h.length;p+=1){var f=h[p];c.push(new r(f[0],f[1]))}a.push(c)}return a},a.prototype.toGeoJSON=function(e,t,n){return o.call(this,e,t,n)};var s=function(e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=i,this.length=e.length,this._features=e};s.prototype.feature=function(e){return new a(this._features[e])},t.exports=s},{"../data/extent":58,"@mapbox/point-geometry":2,"@mapbox/vector-tile":6}],103:[function(e,t,n){"use strict";var r=e("../util/util"),o=e("../util/window"),i=e("./tile_coord"),a=e("../geo/lng_lat"),s=e("@mapbox/point-geometry"),u=e("../util/evented"),l=e("../util/ajax"),c=e("../util/browser"),p=e("../data/extent"),h=e("../data/raster_bounds_array"),f=e("../gl/vertex_buffer"),d=e("../render/vertex_array_object"),m=e("../render/texture"),y=function(e){function t(t,n,r,o){e.call(this),this.id=t,this.dispatcher=r,this.coordinates=n.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this.setEventedParent(o),this.options=n,this.textureLoaded=!1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.load=function(){var e=this;this.fire("dataloading",{dataType:"source"}),this.url=this.options.url,l.getImage(this.map._transformRequest(this.url,l.ResourceType.Image),function(t,n){t?e.fire("error",{error:t}):n&&(e.image=c.getImageData(n),e._finishLoading())})},t.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire("data",{dataType:"source",sourceDataType:"metadata"}))},t.prototype.onAdd=function(e){this.map=e,this.load()},t.prototype.setCoordinates=function(e){this.coordinates=e;var t=this.map,n=e.map(function(e){return t.transform.locationCoordinate(a.convert(e)).zoomTo(0)}),o=this.centerCoord=r.getCoordinatesCenter(n);o.column=Math.floor(o.column),o.row=Math.floor(o.row),this.coord=new i(o.zoom,o.column,o.row),this.minzoom=this.maxzoom=o.zoom;var u=n.map(function(e){var t=e.zoomTo(o.zoom);return new s(Math.round((t.column-o.column)*p),Math.round((t.row-o.row)*p))});return this._boundsArray=new h,this._boundsArray.emplaceBack(u[0].x,u[0].y,0,0),this._boundsArray.emplaceBack(u[1].x,u[1].y,p,0),this._boundsArray.emplaceBack(u[3].x,u[3].y,0,p),this._boundsArray.emplaceBack(u[2].x,u[2].y,p,p),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire("data",{dataType:"source",sourceDataType:"content"}),this},t.prototype.prepare=function(){0!==Object.keys(this.tiles).length&&this.image&&this._prepareImage(this.map.painter.gl,this.image)},t.prototype._prepareImage=function(e,t,n){var r=this;this.boundsBuffer||(this.boundsBuffer=new f(e,this._boundsArray)),this.boundsVAO||(this.boundsVAO=new d),this.textureLoaded?n?this.texture.update(t):(t instanceof o.HTMLVideoElement||t instanceof o.ImageData||t instanceof o.HTMLCanvasElement)&&(this.texture.bind(e.LINEAR,e.CLAMP_TO_EDGE),e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,t)):(this.textureLoaded=!0,this.texture=new m(e,t,e.RGBA),this.texture.bind(e.LINEAR,e.CLAMP_TO_EDGE));for(var i in r.tiles){var a=r.tiles[i];"loaded"!==a.state&&(a.state="loaded",a.texture=r.texture)}},t.prototype.loadTile=function(e,t){this.coord&&this.coord.toString()===e.coord.toString()?(this.tiles[String(e.coord.w)]=e,e.buckets={},t(null)):(e.state="errored",t(null))},t.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},t}(u);t.exports=y},{"../data/extent":58,"../data/raster_bounds_array":64,"../geo/lng_lat":68,"../gl/vertex_buffer":72,"../render/texture":94,"../render/vertex_array_object":96,"../util/ajax":230,"../util/browser":231,"../util/evented":239,"../util/util":252,"../util/window":233,"./tile_coord":113,"@mapbox/point-geometry":2}],104:[function(e,t,n){"use strict";var r=e("../util/util"),o=e("../util/ajax"),i=e("../util/browser"),a=e("../util/mapbox").normalizeSourceURL;t.exports=function(e,t,n){var s=function(e,t){if(e)return n(e);if(t){var o=r.pick(t,["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds"]);t.vector_layers&&(o.vectorLayers=t.vector_layers,o.vectorLayerIds=o.vectorLayers.map(function(e){return e.id})),n(null,o)}};e.url?o.getJSON(t(a(e.url),o.ResourceType.Source),s):i.frame(function(){return s(null,e)})}},{"../util/ajax":230,"../util/browser":231,"../util/mapbox":246,"../util/util":252}],105:[function(e,t,n){"use strict";var r=e("../data/extent");t.exports=function(e,t,n){return t*(r/(e.tileSize*Math.pow(2,n-e.coord.z)))}},{"../data/extent":58}],106:[function(e,t,n){"use strict";function r(e,t){var n=e.coord,r=t.coord;return n.z-r.z||n.y-r.y||n.w-r.w||n.x-r.x}function o(e){for(var t={},n={},r=0,o=e;r<o.length;r+=1){var i=o[r],a=i.queryResults,s=i.wrappedTileID,u=n[s]=n[s]||{};for(var l in a)for(var c=a[l],p=u[l]=u[l]||{},h=t[l]=t[l]||[],f=0,d=c;f<d.length;f+=1){var m=d[f];p[m.featureIndex]||(p[m.featureIndex]=!0,h.push(m.feature))}}return t}var i=e("./tile_coord");n.rendered=function(e,t,n,i,a,s){var u=e.tilesIn(n);u.sort(r);for(var l=[],c=0,p=u;c<p.length;c+=1){var h=p[c];l.push({wrappedTileID:h.coord.wrapped().id,queryResults:h.tile.queryRenderedFeatures(t,h.queryGeometry,h.scale,i,s)})}return o(l)},n.source=function(e,t){for(var n=e.getRenderableIds().map(function(t){return e.getTileByID(t)}),r=[],o={},a=0;a<n.length;a++){var s=n[a],u=new i(Math.min(s.sourceMaxZoom,s.coord.z),s.coord.x,s.coord.y,0).id;o[u]||(o[u]=!0,s.querySourceFeatures(r,t))}return r}},{"./tile_coord":113}],107:[function(e,t,n){"use strict";var r=e("../util/util"),o=e("../util/ajax"),i=e("../util/evented"),a=e("./load_tilejson"),s=e("../util/mapbox").normalizeTileURL,u=e("./tile_bounds"),l=e("../render/texture"),c=function(e){function t(t,n,o,i){e.call(this),this.id=t,this.dispatcher=o,this.setEventedParent(i),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=r.extend({},n),r.extend(this,r.pick(n,["url","scheme","tileSize"]))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.load=function(){var e=this;this.fire("dataloading",{dataType:"source"}),a(this._options,this.map._transformRequest,function(t,n){t?e.fire("error",t):n&&(r.extend(e,n),n.bounds&&(e.tileBounds=new u(n.bounds,e.minzoom,e.maxzoom)),e.fire("data",{dataType:"source",sourceDataType:"metadata"}),e.fire("data",{dataType:"source",sourceDataType:"content"}))})},t.prototype.onAdd=function(e){this.map=e,this.load()},t.prototype.serialize=function(){return r.extend({},this._options)},t.prototype.hasTile=function(e){return!this.tileBounds||this.tileBounds.contains(e,this.maxzoom)},t.prototype.loadTile=function(e,t){var n=this,r=s(e.coord.url(this.tiles,null,this.scheme),this.url,this.tileSize);e.request=o.getImage(this.map._transformRequest(r,o.ResourceType.Tile),function(r,o){if(delete e.request,e.aborted)e.state="unloaded",t(null);else if(r)e.state="errored",t(r);else if(o){n.map._refreshExpiredTiles&&e.setExpiryData(o),delete o.cacheControl,delete o.expires;var i=n.map.painter.gl;e.texture=n.map.painter.getTileTexture(o.width),e.texture?(e.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE,i.LINEAR_MIPMAP_NEAREST),i.texSubImage2D(i.TEXTURE_2D,0,0,0,i.RGBA,i.UNSIGNED_BYTE,o)):(e.texture=new l(i,o,i.RGBA),e.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE,i.LINEAR_MIPMAP_NEAREST),n.map.painter.extTextureFilterAnisotropic&&i.texParameterf(i.TEXTURE_2D,n.map.painter.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,n.map.painter.extTextureFilterAnisotropicMax)),i.generateMipmap(i.TEXTURE_2D),e.state="loaded",t(null)}})},t.prototype.abortTile=function(e){e.request&&(e.request.abort(),delete e.request)},t.prototype.unloadTile=function(e){e.texture&&this.map.painter.saveTileTexture(e.texture)},t}(i);t.exports=c},{"../render/texture":94,"../util/ajax":230,"../util/evented":239,"../util/mapbox":246,"../util/util":252,"./load_tilejson":104,"./tile_bounds":112}],108:[function(e,t,n){"use strict";var r=e("../util/ajax"),o=e("../util/evented"),i=e("../util/window"),a=!1,s=null;t.exports.evented=new o,t.exports.registerForPluginAvailability=function(e){return s?e({pluginBlobURL:s,errorCallback:t.exports.errorCallback}):t.exports.evented.once("pluginAvailable",e),e},t.exports.createBlobURL=function(e){return i.URL.createObjectURL(new i.Blob([e.data],{type:"text/javascript"}))},t.exports.clearRTLTextPlugin=function(){a=!1,s=null},t.exports.setRTLTextPlugin=function(e,n){if(a)throw new Error("setRTLTextPlugin cannot be called multiple times.");a=!0,t.exports.errorCallback=n,r.getArrayBuffer({url:e},function(e,r){e?n(e):r&&(s=t.exports.createBlobURL(r),t.exports.evented.fire("pluginAvailable",{pluginBlobURL:s,errorCallback:n}))})},t.exports.applyArabicShaping=null,t.exports.processBidirectionalText=null},{"../util/ajax":230,"../util/evented":239,"../util/window":233}],109:[function(e,t,n){"use strict";var r=e("../util/util"),o={vector:e("../source/vector_tile_source"),raster:e("../source/raster_tile_source"),geojson:e("../source/geojson_source"),video:e("../source/video_source"),image:e("../source/image_source"),canvas:e("../source/canvas_source")};n.create=function(e,t,n,i){var a=new o[t.type](e,t,n,i);if(a.id!==e)throw new Error("Expected Source id to be "+e+" instead of "+a.id);return r.bindAll(["load","abort","unload","serialize","prepare"],a),a},n.getType=function(e){return o[e]},n.setType=function(e,t){o[e]=t}},{"../source/canvas_source":99,"../source/geojson_source":100,"../source/image_source":103,"../source/raster_tile_source":107,"../source/vector_tile_source":114,"../source/video_source":116,"../util/util":252}],110:[function(e,t,n){"use strict";function r(e,t,n){var r=n.zoomTo(Math.min(e.z,t));return new d((r.column-(e.x+e.w*Math.pow(2,e.z)))*f,(r.row-e.y)*f)}function o(e,t){return e%32-t%32}function i(e){return"raster"===e||"image"===e||"video"===e}var a=e("./source").create,s=e("./tile"),u=e("../util/evented"),l=e("./tile_coord"),c=e("../util/lru_cache"),p=e("../geo/coordinate"),h=e("../util/util"),f=e("../data/extent"),d=e("@mapbox/point-geometry"),m=function(e){function t(t,n,r){var o=this;e.call(this),this.id=t,this.dispatcher=r,this.on("data",function(e){"source"===e.dataType&&"metadata"===e.sourceDataType&&(o._sourceLoaded=!0),o._sourceLoaded&&!o._paused&&"source"===e.dataType&&"content"===e.sourceDataType&&(o.reload(),o.transform&&o.update(o.transform))}),this.on("error",function(){o._sourceErrored=!0}),this._source=a(t,n,r,this),this._tiles={},this._cache=new c(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._isIdRenderable=this._isIdRenderable.bind(this)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.onAdd=function(e){this.map=e,this._maxTileCacheSize=e?e._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(e)},t.prototype.onRemove=function(e){this._source&&this._source.onRemove&&this._source.onRemove(e)},t.prototype.loaded=function(){var e=this;if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;for(var t in e._tiles){var n=e._tiles[t];if("loaded"!==n.state&&"errored"!==n.state)return!1}return!0},t.prototype.getSource=function(){return this._source},t.prototype.pause=function(){this._paused=!0},t.prototype.resume=function(){if(this._paused){var e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}},t.prototype._loadTile=function(e,t){return this._source.loadTile(e,t)},t.prototype._unloadTile=function(e){if(this._source.unloadTile)return this._source.unloadTile(e)},t.prototype._abortTile=function(e){if(this._source.abortTile)return this._source.abortTile(e)},t.prototype.serialize=function(){return this._source.serialize()},t.prototype.prepare=function(e){var t=this;this._source.prepare&&this._source.prepare();for(var n in t._tiles)t._tiles[n].upload(e)},t.prototype.getIds=function(){return Object.keys(this._tiles).map(Number).sort(o)},t.prototype.getRenderableIds=function(){return this.getIds().filter(this._isIdRenderable)},t.prototype.hasRenderableParent=function(e){var t=this.findLoadedParent(e,0,{});return!!t&&this._isIdRenderable(t.coord.id)},t.prototype._isIdRenderable=function(e){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]},t.prototype.reload=function(){var e=this;if(this._paused)return void(this._shouldReloadOnResume=!0);this._cache.reset();for(var t in e._tiles)e._reloadTile(t,"reloading")},t.prototype._reloadTile=function(e,t){var n=this._tiles[e];n&&("loading"!==n.state&&(n.state=t),this._loadTile(n,this._tileLoaded.bind(this,n,e,t)))},t.prototype._tileLoaded=function(e,t,n,r){if(r)return e.state="errored",void(404!==r.status?this._source.fire("error",{tile:e,error:r}):this.update(this.transform));e.timeAdded=(new Date).getTime(),"expired"===n&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(t,e),this._source.fire("data",{dataType:"source",tile:e,coord:e.coord}),this.map&&(this.map.painter.tileExtentVAO.vao=null)},t.prototype.getTile=function(e){return this.getTileByID(e.id)},t.prototype.getTileByID=function(e){return this._tiles[e]},t.prototype.getZoom=function(e){return e.zoom+e.scaleZoom(e.tileSize/this._source.tileSize)},t.prototype._findLoadedChildren=function(e,t,n){var r=this,o=!1;for(var i in r._tiles){var a=r._tiles[i];if(!(n[i]||!a.hasData()||a.coord.z<=e.z||a.coord.z>t)){var s=Math.pow(2,Math.min(a.coord.z,r._source.maxzoom)-Math.min(e.z,r._source.maxzoom));if(Math.floor(a.coord.x/s)===e.x&&Math.floor(a.coord.y/s)===e.y)for(n[i]=!0,o=!0;a&&a.coord.z-1>e.z;){var u=a.coord.parent(r._source.maxzoom);if(!u)break;(a=r._tiles[u.id])&&a.hasData()&&(delete n[i],n[u.id]=!0)}}}return o},t.prototype.findLoadedParent=function(e,t,n){for(var r=this,o=e.z-1;o>=t;o--){var i=e.parent(r._source.maxzoom);if(!i)return;e=i;var a=String(e.id),s=r._tiles[a];if(s&&s.hasData())return n[a]=!0,s;if(r._cache.has(a))return n[a]=!0,r._cache.getWithoutRemoving(a)}},t.prototype.updateCacheSize=function(e){var t=Math.ceil(e.width/e.tileSize)+1,n=Math.ceil(e.height/e.tileSize)+1,r=t*n,o=Math.floor(5*r),i="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,o):o;this._cache.setMaxSize(i)},t.prototype.update=function(e){var n=this;if(this.transform=e,this._sourceLoaded&&!this._paused){this.updateCacheSize(e),this._coveredTiles={};var r;this.used?this._source.coord?r=e.getVisibleWrappedCoordinates(this._source.coord):(r=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(r=r.filter(function(e){return n._source.hasTile(e)}))):r=[];var o=(this._source.roundZoom?Math.round:Math.floor)(this.getZoom(e)),a=Math.max(o-t.maxOverzooming,this._source.minzoom),s=Math.max(o+t.maxUnderzooming,this._source.minzoom),u=this._updateRetainedTiles(r,o),c={};if(i(this._source.type))for(var p=Object.keys(u),f=0;f<p.length;f++){var d=p[f],m=l.fromID(+d),y=n._tiles[d];if(y&&(void 0===y.fadeEndTime||y.fadeEndTime>=Date.now())){n._findLoadedChildren(m,s,u)&&(u[d]=!0);var v=n.findLoadedParent(m,a,c);v&&n._addTile(v.coord)}}var g;for(g in c)u[g]||(n._coveredTiles[g]=!0);for(g in c)u[g]=!0;for(var _=h.keysDifference(this._tiles,u),b=0;b<_.length;b++)n._removeTile(_[b])}},t.prototype._updateRetainedTiles=function(e,n){var r,o,i,a,s=this,u={},l={},c=Math.max(n-t.maxOverzooming,this._source.minzoom);for(r=0;r<e.length;r++){o=e[r],i=s._addTile(o);var p=!1;if(i.hasData())u[o.id]=!0;else{if(p=i.wasRequested(),u[o.id]=!0,a=!0,n+1>s._source.maxzoom){var h=o.children(s._source.maxzoom)[0],f=s.getTile(h);f&&f.hasData()?u[h.id]=!0:a=!1}else for(var d=o.children(s._source.maxzoom),m=0;m<d.length;m++){var y=d[m],v=y?s.getTile(y):null;v&&v.hasData()?u[y.id]=!0:a=!1}if(!a)for(var g=n-1;g>=c;--g){var _=o.scaledTo(g,s._source.maxzoom);if(l[_.id])break;if(l[_.id]=!0,i=s.getTile(_),!i&&p&&(i=s._addTile(_)),i&&(u[_.id]=!0,p=i.wasRequested(),i.hasData()))break}}}return u},t.prototype._addTile=function(e){var t=this._tiles[e.id];if(t)return t;(t=this._cache.get(e.id))&&(t.redoPlacement(this._source),this._cacheTimers[e.id]&&(clearTimeout(this._cacheTimers[e.id]),delete this._cacheTimers[e.id],this._setTileReloadTimer(e.id,t)));var n=Boolean(t);if(!n){var r=e.z,o=r>this._source.maxzoom?Math.pow(2,r-this._source.maxzoom):1;t=new s(e,this._source.tileSize*o,this._source.maxzoom),this._loadTile(t,this._tileLoaded.bind(this,t,e.id,t.state))}return t?(t.uses++,this._tiles[e.id]=t,n||this._source.fire("dataloading",{tile:t,coord:t.coord,dataType:"source"}),t):null},t.prototype._setTileReloadTimer=function(e,t){var n=this,r=t.getExpiryTimeout();r&&(this._timers[e]=setTimeout(function(){n._reloadTile(e,"expired"),delete n._timers[e]},r))},t.prototype._setCacheInvalidationTimer=function(e,t){var n=this,r=t.getExpiryTimeout();r&&(this._cacheTimers[e]=setTimeout(function(){n._cache.remove(e),delete n._cacheTimers[e]},r))},t.prototype._removeTile=function(e){var t=this._tiles[e];if(t&&(t.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),!(t.uses>0)))if(t.stopPlacementThrottler(),t.hasData()){var n=t.coord.wrapped().id;this._cache.add(n,t),this._setCacheInvalidationTimer(n,t)}else t.aborted=!0,this._abortTile(t),this._unloadTile(t)},t.prototype.clearTiles=function(){var e=this;this._shouldReloadOnResume=!1,this._paused=!1;for(var t in e._tiles)e._removeTile(t);this._cache.reset()},t.prototype.tilesIn=function(e){for(var t=this,n=[],o=this.getIds(),i=1/0,a=1/0,s=-1/0,u=-1/0,c=e[0].zoom,h=0;h<e.length;h++){var d=e[h];i=Math.min(i,d.column),a=Math.min(a,d.row),s=Math.max(s,d.column),u=Math.max(u,d.row)}for(var m=0;m<o.length;m++){var y=t._tiles[o[m]],v=l.fromID(o[m]),g=[r(v,y.sourceMaxZoom,new p(i,a,c)),r(v,y.sourceMaxZoom,new p(s,u,c))];if(g[0].x<f&&g[0].y<f&&g[1].x>=0&&g[1].y>=0){for(var _=[],b=0;b<e.length;b++)_.push(r(v,y.sourceMaxZoom,e[b]));n.push({tile:y,coord:v,queryGeometry:[_],scale:Math.pow(2,t.transform.zoom-y.coord.z)})}}return n},t.prototype.redoPlacement=function(){for(var e=this,t=this.getIds(),n=0;n<t.length;n++)e.getTileByID(t[n]).redoPlacement(e._source)},t.prototype.getVisibleCoordinates=function(){for(var e=this,t=this.getRenderableIds().map(l.fromID),n=0,r=t;n<r.length;n+=1){var o=r[n];o.posMatrix=e.transform.calculatePosMatrix(o,e._source.maxzoom)}return t},t}(u);m.maxOverzooming=10,m.maxUnderzooming=3,t.exports=m},{"../data/extent":58,"../geo/coordinate":67,"../util/evented":239,"../util/lru_cache":245,"../util/util":252,"./source":109,"./tile":111,"./tile_coord":113,"@mapbox/point-geometry":2}],111:[function(e,t,n){"use strict";var r=e("../util/util"),o=e("../data/bucket").deserialize,i=e("../data/bucket/symbol_bucket"),a=e("../data/feature_index"),s=e("@mapbox/vector-tile"),u=e("pbf"),l=e("../util/vectortile_to_geojson"),c=e("../style-spec/feature_filter"),p=e("../symbol/collision_tile"),h=e("../symbol/collision_box"),f=e("../util/throttler"),d=e("../data/raster_bounds_array"),m=e("./tile_coord"),y=e("../data/extent"),v=e("@mapbox/point-geometry"),g=e("../gl/vertex_buffer"),_=e("../gl/index_buffer"),b=e("../render/texture"),w=e("../data/segment"),x=w.SegmentVector,E=e("../data/index_array_type"),C=E.TriangleIndexArray,T=function(e,t,n){this.coord=e,this.uid=r.uniqueId(),this.uses=0,this.tileSize=t,this.sourceMaxZoom=n,this.buckets={},this.expirationTime=null,this.expiredRequestCount=0,this.state="loading",this.placementThrottler=new f(300,this._immediateRedoPlacement.bind(this))};T.prototype.registerFadeDuration=function(e,t){var n=t+this.timeAdded;n<Date.now()||this.fadeEndTime&&n<this.fadeEndTime||(this.fadeEndTime=n,e.set(this.fadeEndTime-Date.now()))},T.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},T.prototype.loadVectorData=function(e,t){this.hasData()&&this.unloadVectorData(),this.state="loaded",e&&(e.rawTileData&&(this.rawTileData=e.rawTileData),this.collisionBoxArray=new h(e.collisionBoxArray),this.collisionTile=p.deserialize(e.collisionTile,this.collisionBoxArray),this.featureIndex=a.deserialize(e.featureIndex,this.rawTileData,this.collisionTile),this.buckets=o(e.buckets,t.style),e.iconAtlasImage&&(this.iconAtlasImage=e.iconAtlasImage),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage))},T.prototype.reloadSymbolData=function(e,t){var n=this;if("unloaded"!==this.state){this.collisionTile=p.deserialize(e.collisionTile,this.collisionBoxArray),this.featureIndex&&this.featureIndex.setCollisionTile(this.collisionTile);for(var a in n.buckets){var s=n.buckets[a];s instanceof i&&(s.destroy(),delete n.buckets[a])}r.extend(this.buckets,o(e.buckets,t)),e.iconAtlasImage&&(this.iconAtlasImage=e.iconAtlasImage),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}},T.prototype.unloadVectorData=function(){var e=this;for(var t in e.buckets)e.buckets[t].destroy();this.buckets={},this.iconAtlasTexture&&this.iconAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.collisionBoxArray=null,this.collisionTile=null,this.featureIndex=null,this.state="unloaded"},T.prototype.redoPlacement=function(e){if("vector"===e.type||"geojson"===e.type){if("loaded"!==this.state)return void(this.redoWhenDone=!0);if(this.collisionTile){var t=e.map.transform.cameraToTileDistance(this);if(this.angle===e.map.transform.angle&&this.pitch===e.map.transform.pitch&&this.showCollisionBoxes===e.map.showCollisionBoxes){if(this.cameraToTileDistance===t&&this.cameraToCenterDistance===e.map.transform.cameraToCenterDistance)return;if(this.pitch<25)return this.cameraToTileDistance=t,void(this.cameraToCenterDistance=e.map.transform.cameraToCenterDistance)}this.angle=e.map.transform.angle,this.pitch=e.map.transform.pitch,this.cameraToCenterDistance=e.map.transform.cameraToCenterDistance,this.cameraToTileDistance=t,this.showCollisionBoxes=e.map.showCollisionBoxes,this.placementSource=e,this.state="reloading",this.placementThrottler.invoke()}}},T.prototype._immediateRedoPlacement=function(){var e=this;this.placementSource.dispatcher.send("redoPlacement",{type:this.placementSource.type,uid:this.uid,source:this.placementSource.id,angle:this.angle,pitch:this.pitch,cameraToCenterDistance:this.cameraToCenterDistance,cameraToTileDistance:this.cameraToTileDistance,showCollisionBoxes:this.showCollisionBoxes},function(t,n){"reloading"===e.state&&(e.state="loaded",e.reloadSymbolData(n,e.placementSource.map.style),e.placementSource.fire("data",{tile:e,coord:e.coord,dataType:"source"}),e.placementSource.map&&(e.placementSource.map.painter.tileExtentVAO.vao=null),e.redoWhenDone&&(e.state="reloading",e.redoWhenDone=!1,e._immediateRedoPlacement()))},this.workerID)},T.prototype.getBucket=function(e){return this.buckets[e.id]},T.prototype.upload=function(e){var t=this;for(var n in t.buckets){var r=t.buckets[n];r.uploaded||(r.upload(e),r.uploaded=!0)}this.iconAtlasImage&&(this.iconAtlasTexture=new b(e,this.iconAtlasImage,e.RGBA),this.iconAtlasImage=null),this.glyphAtlasImage&&(this.glyphAtlasTexture=new b(e,this.glyphAtlasImage,e.ALPHA),this.glyphAtlasImage=null)},T.prototype.queryRenderedFeatures=function(e,t,n,r,o){var i=this;if(!this.featureIndex)return{};var a=0;for(var s in e){var u=i.getBucket(e[s]);u&&(a=Math.max(a,e[s].queryRadius(u)))}return this.featureIndex.query({queryGeometry:t,bearing:o,params:r,scale:n,additionalRadius:a,tileSize:this.tileSize},e)},T.prototype.querySourceFeatures=function(e,t){var n=this;if(this.rawTileData){this.vtLayers||(this.vtLayers=new s.VectorTile(new u(this.rawTileData)).layers);var r=t?t.sourceLayer:"",o=this.vtLayers._geojsonTileLayer||this.vtLayers[r];if(o)for(var i=c(t&&t.filter),a={z:this.coord.z,x:this.coord.x,y:this.coord.y},p=0;p<o.length;p++){var h=o.feature(p);if(i({zoom:n.coord.z},h)){var f=new l(h,n.coord.z,n.coord.x,n.coord.y);f.tile=a,e.push(f)}}}},T.prototype.clearMask=function(){this.segments&&(this.segments.destroy(),delete this.segments),this.maskedBoundsBuffer&&(this.maskedBoundsBuffer.destroy(),delete this.maskedBoundsBuffer),this.maskedIndexBuffer&&(this.maskedIndexBuffer.destroy(),delete this.maskedIndexBuffer)},T.prototype.setMask=function(e,t){var n=this;if(!r.deepEqual(this.mask,e)&&(this.mask=e,this.clearMask(),!r.deepEqual(e,{0:!0}))){var o=new d,i=new C;this.segments=new x,this.segments.prepareSegment(0,o,i);for(var a=Object.keys(e),s=0;s<a.length;s++){var u=m.fromID(+a[s]),l=y>>u.z,c=new v(u.x*l,u.y*l),p=new v(c.x+l,c.y+l),h=n.segments.prepareSegment(4,o,i);o.emplaceBack(c.x,c.y,c.x,c.y),o.emplaceBack(p.x,c.y,p.x,c.y),o.emplaceBack(c.x,p.y,c.x,p.y),o.emplaceBack(p.x,p.y,p.x,p.y);var f=h.vertexLength;i.emplaceBack(f,f+1,f+2),i.emplaceBack(f+1,f+2,f+3),h.vertexLength+=4,h.primitiveLength+=2}this.maskedBoundsBuffer=new g(t,o),this.maskedIndexBuffer=new _(t,i)}},T.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},T.prototype.setExpiryData=function(e){var t=this.expirationTime;if(e.cacheControl){var n=r.parseCacheControl(e.cacheControl);n["max-age"]&&(this.expirationTime=Date.now()+1e3*n["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){var o=Date.now(),i=!1;if(this.expirationTime>o)i=!1;else if(t)if(this.expirationTime<t)i=!0;else{var a=this.expirationTime-t;a?this.expirationTime=o+Math.max(a,3e4):i=!0}else i=!0;i?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},T.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},T.prototype.stopPlacementThrottler=function(){this.placementThrottler.stop(),"reloading"===this.state&&(this.state="loaded")},t.exports=T},{"../data/bucket":51,"../data/bucket/symbol_bucket":57,"../data/extent":58,"../data/feature_index":59,"../data/index_array_type":60,"../data/raster_bounds_array":64,"../data/segment":65,"../gl/index_buffer":71,"../gl/vertex_buffer":72,"../render/texture":94,"../style-spec/feature_filter":144,"../symbol/collision_box":199,"../symbol/collision_tile":201,"../util/throttler":250,"../util/util":252,"../util/vectortile_to_geojson":253,"./tile_coord":113,"@mapbox/point-geometry":2,"@mapbox/vector-tile":6,pbf:38}],112:[function(e,t,n){"use strict";var r=e("../geo/lng_lat_bounds"),o=e("../util/util").clamp,i=function(e,t,n){this.bounds=r.convert(this.validateBounds(e)),this.minzoom=t||0,this.maxzoom=n||24};i.prototype.validateBounds=function(e){return Array.isArray(e)&&4===e.length?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]},i.prototype.contains=function(e,t){var n=t?Math.min(e.z,t):e.z,r={minX:Math.floor(this.lngX(this.bounds.getWest(),n)),minY:Math.floor(this.latY(this.bounds.getNorth(),n)),maxX:Math.ceil(this.lngX(this.bounds.getEast(),n)),maxY:Math.ceil(this.latY(this.bounds.getSouth(),n))};return e.x>=r.minX&&e.x<r.maxX&&e.y>=r.minY&&e.y<r.maxY},i.prototype.lngX=function(e,t){return(e+180)*(Math.pow(2,t)/360)},i.prototype.latY=function(e,t){var n=o(Math.sin(Math.PI/180*e),-.9999,.9999),r=Math.pow(2,t)/(2*Math.PI);return Math.pow(2,t-1)+.5*Math.log((1+n)/(1-n))*-r},t.exports=i},{"../geo/lng_lat_bounds":69,"../util/util":252}],113:[function(e,t,n){"use strict";function r(e,t){if(e.row>t.row){var n=e;e=t,t=n}return{x0:e.column,y0:e.row,x1:t.column,y1:t.row,dx:t.column-e.column,dy:t.row-e.row}}function o(e,t,n,r,o){var i=Math.max(n,Math.floor(t.y0)),a=Math.min(r,Math.ceil(t.y1));if(e.x0===t.x0&&e.y0===t.y0?e.x0+t.dy/e.dy*e.dx<t.x1:e.x1-t.dy/e.dy*e.dx<t.x0){var s=e;e=t,t=s}for(var u=e.dx/e.dy,l=t.dx/t.dy,c=e.dx>0,p=t.dx<0,h=i;h<a;h++){var f=u*Math.max(0,Math.min(e.dy,h+c-e.y0))+e.x0,d=l*Math.max(0,Math.min(t.dy,h+p-t.y0))+t.x0;o(Math.floor(d),Math.ceil(f),h)}}function i(e,t,n,i,a,s){var u,l=r(e,t),c=r(t,n),p=r(n,e);l.dy>c.dy&&(u=l,l=c,c=u),l.dy>p.dy&&(u=l,l=p,p=u),c.dy>p.dy&&(u=c,c=p,p=u),l.dy&&o(p,l,i,a,s),c.dy&&o(p,c,i,a,s)}function a(e,t,n){for(var r,o="",i=e;i>0;i--)r=1<<i-1,o+=(t&r?1:0)+(n&r?2:0);return o}var s=e("@mapbox/whoots-js"),u=e("../geo/coordinate"),l=function(e,t,n,r){(void 0===r||isNaN(r))&&(r=0),this.z=+e,this.x=+t,this.y=+n,this.w=+r,(r*=2)<0&&(r=-1*r-1);var o=1<<this.z;this.id=32*(o*o*r+o*this.y+this.x)+this.z,this.posMatrix=null};l.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y},l.prototype.toCoordinate=function(e){var t=Math.min(this.z,void 0===e?this.z:e),n=Math.pow(2,t),r=this.y,o=this.x+n*this.w;return new u(o,r,t)},l.prototype.url=function(e,t,n){var r=s.getTileBBox(this.x,this.y,this.z),o=a(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(Math.min(this.z,t||this.z))).replace("{x}",String(this.x)).replace("{y}",String("tms"===n?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",o).replace("{bbox-epsg-3857}",r)},l.prototype.parent=function(e){return 0===this.z?null:this.z>e?new l(this.z-1,this.x,this.y,this.w):new l(this.z-1,Math.floor(this.x/2),Math.floor(this.y/2),this.w)},l.prototype.wrapped=function(){return new l(this.z,this.x,this.y,0)},l.prototype.isLessThan=function(e){return this.w<e.w||!(this.w>e.w)&&(this.z<e.z||!(this.z>e.z)&&(this.x<e.x||!(this.x>e.x)&&this.y<e.y))},l.prototype.children=function(e){if(this.z>=e)return[new l(this.z+1,this.x,this.y,this.w)];var t=this.z+1,n=2*this.x,r=2*this.y;return[new l(t,n,r,this.w),new l(t,n+1,r,this.w),new l(t,n,r+1,this.w),new l(t,n+1,r+1,this.w)]},l.prototype.scaledTo=function(e,t){return this.z>t?new l(e,this.x,this.y,this.w):e<=this.z?new l(e,this.x>>this.z-e,this.y>>this.z-e,this.w):new l(e,this.x<<e-this.z,this.y<<e-this.z,this.w)},l.prototype.isChildOf=function(e){return 0===e.z||e.z<this.z&&e.x===this.x>>this.z-e.z&&e.y===this.y>>this.z-e.z},l.cover=function(e,t,n,r){function o(e,t,o){var i,u,c,p;if(o>=0&&o<=a)for(i=e;i<t;i++)u=Math.floor(i/a),c=(i%a+a)%a,0!==u&&!0!==r||(p=new l(n,c,o,u),s[p.id]=p)}void 0===r&&(r=!0);var a=1<<e,s={};return i(t[0],t[1],t[2],0,a,o),i(t[2],t[3],t[0],0,a,o),Object.keys(s).map(function(e){return s[e]})},l.fromID=function(e){var t=e%32,n=1<<t,r=(e-t)/32,o=r%n,i=(r-o)/n%n,a=Math.floor(r/(n*n));return a%2!=0&&(a=-1*a-1),a/=2,new l(t,o,i,a)},t.exports=l},{"../geo/coordinate":67,"@mapbox/whoots-js":10}],114:[function(e,t,n){"use strict";var r=e("../util/evented"),o=e("../util/util"),i=e("./load_tilejson"),a=e("../util/mapbox").normalizeTileURL,s=e("./tile_bounds"),u=e("../util/ajax").ResourceType,l=e("../util/browser"),c=function(e){function t(t,n,r,i){if(e.call(this),this.id=t,this.dispatcher=r,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,o.extend(this,o.pick(n,["url","scheme","tileSize"])),this._options=o.extend({type:"vector"},n),512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(i)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.load=function(){var e=this;this.fire("dataloading",{dataType:"source"}),i(this._options,this.map._transformRequest,function(t,n){t?e.fire("error",t):n&&(o.extend(e,n),n.bounds&&(e.tileBounds=new s(n.bounds,e.minzoom,e.maxzoom)),e.fire("data",{dataType:"source",sourceDataType:"metadata"}),e.fire("data",{dataType:"source",sourceDataType:"content"}))})},t.prototype.hasTile=function(e){return!this.tileBounds||this.tileBounds.contains(e,this.maxzoom)},t.prototype.onAdd=function(e){this.map=e,this.load()},t.prototype.serialize=function(){return o.extend({},this._options)},t.prototype.loadTile=function(e,t){function n(n,r){if(!e.aborted){if(n)return t(n);this.map._refreshExpiredTiles&&e.setExpiryData(r),e.loadVectorData(r,this.map.painter),e.redoWhenDone&&(e.redoWhenDone=!1,e.redoPlacement(this)),t(null),e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)}}var r=e.coord.z>this.maxzoom?Math.pow(2,e.coord.z-this.maxzoom):1,o=a(e.coord.url(this.tiles,this.maxzoom,this.scheme),this.url),i={request:this.map._transformRequest(o,u.Tile),uid:e.uid,coord:e.coord,zoom:e.coord.z,tileSize:this.tileSize*r,type:this.type,source:this.id,pixelRatio:l.devicePixelRatio,overscaling:r,angle:this.map.transform.angle,pitch:this.map.transform.pitch,cameraToCenterDistance:this.map.transform.cameraToCenterDistance,cameraToTileDistance:this.map.transform.cameraToTileDistance(e),showCollisionBoxes:this.map.showCollisionBoxes};void 0===e.workerID||"expired"===e.state?e.workerID=this.dispatcher.send("loadTile",i,n.bind(this)):"loading"===e.state?e.reloadCallback=t:this.dispatcher.send("reloadTile",i,n.bind(this),e.workerID)},t.prototype.abortTile=function(e){this.dispatcher.send("abortTile",{uid:e.uid,type:this.type,source:this.id},void 0,e.workerID)},t.prototype.unloadTile=function(e){e.unloadVectorData(),this.dispatcher.send("removeTile",{uid:e.uid,type:this.type,source:this.id},void 0,e.workerID)},t}(r);t.exports=c},{"../util/ajax":230,"../util/browser":231,"../util/evented":239,"../util/mapbox":246,"../util/util":252,"./load_tilejson":104,"./tile_bounds":112}],115:[function(e,t,n){"use strict";function r(e,t){var n=o.getArrayBuffer(e.request,function(e,n){e?t(e):n&&t(null,{vectorTile:new i.VectorTile(new a(n.data)),rawData:n.data,cacheControl:n.cacheControl,expires:n.expires})});return function(){n.abort()}}var o=e("../util/ajax"),i=e("@mapbox/vector-tile"),a=e("pbf"),s=e("./worker_tile"),u=e("../util/util"),l=function(e,t,n){this.actor=e,this.layerIndex=t,this.loadVectorData=n||r,this.loading={},this.loaded={}};l.prototype.loadTile=function(e,t){var n=this,r=e.source,o=e.uid;this.loading[r]||(this.loading[r]={});var i=this.loading[r][o]=new s(e);i.abort=this.loadVectorData(e,function(e,a){if(delete n.loading[r][o],e||!a)return t(e);var s=a.rawData,l={};a.expires&&(l.expires=a.expires),a.cacheControl&&(l.cacheControl=a.cacheControl),i.vectorTile=a.vectorTile,i.parse(a.vectorTile,n.layerIndex,n.actor,function(e,n,r){if(e||!n)return t(e);t(null,u.extend({rawTileData:s},n,l),r)}),n.loaded[r]=n.loaded[r]||{},n.loaded[r][o]=i})},l.prototype.reloadTile=function(e,t){function n(e,n){if(this.reloadCallback){var r=this.reloadCallback;delete this.reloadCallback,this.parse(this.vectorTile,i.layerIndex,i.actor,r)}t(e,n)}var r=this.loaded[e.source],o=e.uid,i=this;if(r&&r[o]){var a=r[o];"parsing"===a.status?a.reloadCallback=t:"done"===a.status&&a.parse(a.vectorTile,this.layerIndex,this.actor,n.bind(a))}},l.prototype.abortTile=function(e){var t=this.loading[e.source],n=e.uid;t&&t[n]&&t[n].abort&&(t[n].abort(),delete t[n])},l.prototype.removeTile=function(e){var t=this.loaded[e.source],n=e.uid;t&&t[n]&&delete t[n]},l.prototype.redoPlacement=function(e,t){var n=this.loaded[e.source],r=this.loading[e.source],o=e.uid;if(n&&n[o]){var i=n[o],a=i.redoPlacement(e.angle,e.pitch,e.cameraToCenterDistance,e.cameraToTileDistance,e.showCollisionBoxes);a.result&&t(null,a.result,a.transferables)}else r&&r[o]&&(r[o].angle=e.angle)},t.exports=l},{"../util/ajax":230,"../util/util":252,"./worker_tile":118,"@mapbox/vector-tile":6,pbf:38}],116:[function(e,t,n){"use strict";var r=e("../util/ajax"),o=e("./image_source"),i=function(e){function t(t,n,r,o){e.call(this,t,n,r,o),this.roundZoom=!0,this.type="video",this.options=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.load=function(){var e=this,t=this.options;this.urls=t.urls,r.getVideo(t.urls,function(t,n){if(t)e.fire("error",{error:t});else if(n){e.video=n,e.video.loop=!0;var r;e.video.addEventListener("playing",function(){r=e.map.style.animationLoop.set(1/0),e.map._rerender()}),e.video.addEventListener("pause",function(){e.map.style.animationLoop.cancel(r)}),e.map&&e.video.play(),e._finishLoading()}})},t.prototype.getVideo=function(){return this.video},t.prototype.onAdd=function(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},t.prototype.prepare=function(){0===Object.keys(this.tiles).length||this.video.readyState<2||this._prepareImage(this.map.painter.gl,this.video)},t.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},t}(o);t.exports=i},{"../util/ajax":230,"./image_source":103}],117:[function(e,t,n){"use strict";var r=e("../util/actor"),o=e("../style/style_layer_index"),i=e("./vector_tile_worker_source"),a=e("./geojson_worker_source"),s=e("./rtl_text_plugin"),u=function(e){var t=this;this.self=e,this.actor=new r(e,this),this.layerIndexes={},this.workerSourceTypes={vector:i,geojson:a},this.workerSources={},this.self.registerWorkerSource=function(e,n){if(t.workerSourceTypes[e])throw new Error('Worker source with name "'+e+'" already registered.');t.workerSourceTypes[e]=n},this.self.registerRTLTextPlugin=function(e){if(s.applyArabicShaping||s.processBidirectionalText)throw new Error("RTL text plugin already registered.");s.applyArabicShaping=e.applyArabicShaping,s.processBidirectionalText=e.processBidirectionalText}};u.prototype.setLayers=function(e,t){this.getLayerIndex(e).replace(t)},u.prototype.updateLayers=function(e,t){this.getLayerIndex(e).update(t.layers,t.removedIds,t.symbolOrder)},u.prototype.loadTile=function(e,t,n){this.getWorkerSource(e,t.type).loadTile(t,n)},u.prototype.reloadTile=function(e,t,n){this.getWorkerSource(e,t.type).reloadTile(t,n)},u.prototype.abortTile=function(e,t){this.getWorkerSource(e,t.type).abortTile(t)},u.prototype.removeTile=function(e,t){this.getWorkerSource(e,t.type).removeTile(t)},u.prototype.removeSource=function(e,t){var n=this.getWorkerSource(e,t.type);void 0!==n.removeSource&&n.removeSource(t)},u.prototype.redoPlacement=function(e,t,n){this.getWorkerSource(e,t.type).redoPlacement(t,n)},u.prototype.loadWorkerSource=function(e,t,n){try{this.self.importScripts(t.url),n()}catch(e){n(e)}},u.prototype.loadRTLTextPlugin=function(e,t,n){try{s.applyArabicShaping||s.processBidirectionalText||(this.self.importScripts(t),s.applyArabicShaping&&s.processBidirectionalText||n(new Error("RTL Text Plugin failed to import scripts from "+t)))}catch(e){n(e)}},u.prototype.getLayerIndex=function(e){var t=this.layerIndexes[e];return t||(t=this.layerIndexes[e]=new o),t},u.prototype.getWorkerSource=function(e,t){var n=this;if(this.workerSources[e]||(this.workerSources[e]={}),!this.workerSources[e][t]){var r={send:function(t,r,o,i){n.actor.send(t,r,o,i,e)}};this.workerSources[e][t]=new this.workerSourceTypes[t](r,this.getLayerIndex(e))}return this.workerSources[e][t]},t.exports=function(e){return new u(e)}},{"../style/style_layer_index":193,"../util/actor":229,"./geojson_worker_source":101,"./rtl_text_plugin":108,"./vector_tile_worker_source":115}],118:[function(e,t,n){"use strict";function r(e,t){for(var n=0,r=e.layers;n<r.length;n+=1)r[n].recalculate(t)}function o(e,t){return e.filter(function(e){return!e.isEmpty()}).map(function(e){return e.serialize(t)})}var i=e("../data/feature_index"),a=e("../symbol/collision_tile"),s=e("../symbol/collision_box"),u=e("../util/dictionary_coder"),l=(e("../data/bucket/symbol_bucket"),e("../util/util")),c=e("../render/image_atlas"),p=c.makeImageAtlas,h=e("../render/glyph_atlas"),f=h.makeGlyphAtlas,d=function(e){this.coord=e.coord,this.uid=e.uid,this.zoom=e.zoom,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=e.overscaling,this.angle=e.angle,this.pitch=e.pitch,this.cameraToCenterDistance=e.cameraToCenterDistance,this.cameraToTileDistance=e.cameraToTileDistance,this.showCollisionBoxes=e.showCollisionBoxes};d.prototype.parse=function(e,t,n,c){function h(){var e=this;if(M)return c(M);if(D&&L){for(var t=new a(this.angle,this.pitch,this.cameraToCenterDistance,this.cameraToTileDistance,this.collisionBoxArray),n=f(D),i=p(L),s=0,u=e.symbolBuckets;s<u.length;s+=1){var h=u[s];r(h,e.zoom),h.prepare(D,n.positions,L,i.positions),h.place(t,e.showCollisionBoxes)}this.status="done";var d=[n.image.data.buffer,i.image.data.buffer];c(null,{buckets:o(l.values(v),d),featureIndex:y.serialize(d),collisionTile:t.serialize(d),collisionBoxArray:this.collisionBoxArray.serialize(),glyphAtlasImage:n.image,iconAtlasImage:i.image},d)}}var d=this;this.status="parsing",this.data=e,this.collisionBoxArray=new s;var m=new u(Object.keys(e.layers).sort()),y=new i(this.coord,this.overscaling);y.bucketLayerIDs=[];var v={},g={featureIndex:y,iconDependencies:{},glyphDependencies:{}},_=t.familiesBySource[this.source];for(var b in _){var w=e.layers[b];if(w){1===w.version&&l.warnOnce('Vector tile source "'+d.source+'" layer "'+b+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var x=m.encode(b),E=[],C=0;C<w.length;C++){var T=w.feature(C);E.push({feature:T,index:C,sourceLayerIndex:x})}for(var S=0,P=_[b];S<P.length;S+=1){var O=P[S],A=O[0];if(!(A.minzoom&&d.zoom<Math.floor(A.minzoom))&&!(A.maxzoom&&d.zoom>=A.maxzoom||A.layout&&"none"===A.layout.visibility)){for(var k=0,I=O;k<I.length;k+=1)I[k].recalculate(d.zoom);(v[A.id]=A.createBucket({index:y.bucketLayerIDs.length,layers:O,zoom:d.zoom,pixelRatio:d.pixelRatio,overscaling:d.overscaling,collisionBoxArray:d.collisionBoxArray})).populate(E,g),y.bucketLayerIDs.push(O.map(function(e){return e.id}))}}}}this.symbolBuckets=[];for(var N=t.symbolOrder.length-1;N>=0;N--){var R=v[t.symbolOrder[N]];R&&d.symbolBuckets.push(R)}var M,D,L,F=l.mapObject(g.glyphDependencies,function(e){return Object.keys(e).map(Number)});Object.keys(F).length?n.send("getGlyphs",{uid:this.uid,stacks:F},function(e,t){M||(M=e,D=t,h.call(d))}):D={};var j=Object.keys(g.iconDependencies);j.length?n.send("getImages",{icons:j},function(e,t){M||(M=e,L=t,h.call(d))}):L={},h.call(this)},d.prototype.redoPlacement=function(e,t,n,i,s){var u=this;if(this.angle=e,this.pitch=t,this.cameraToCenterDistance=n,this.cameraToTileDistance=i,"done"!==this.status)return{};for(var l=new a(this.angle,this.pitch,this.cameraToCenterDistance,this.cameraToTileDistance,this.collisionBoxArray),c=0,p=u.symbolBuckets;c<p.length;c+=1){var h=p[c];r(h,u.zoom),h.place(l,s)}var f=[];return{result:{buckets:o(this.symbolBuckets,f),collisionTile:l.serialize(f)},transferables:f}},t.exports=d},{"../data/bucket/symbol_bucket":57,"../data/feature_index":59,"../render/glyph_atlas":85,"../render/image_atlas":87,"../symbol/collision_box":199,"../symbol/collision_tile":201,"../util/dictionary_coder":236,"../util/util":252}],119:[function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)"ref"!==r&&(n[r]=e[r]);return i.forEach(function(e){e in t&&(n[e]=t[e])}),n}function o(e){e=e.slice();for(var t=Object.create(null),n=0;n<e.length;n++)t[e[n].id]=e[n];for(var o=0;o<e.length;o++)"ref"in e[o]&&(e[o]=r(e[o],t[e[o].ref]));return e}var i=e("./util/ref_properties");t.exports=o},{"./util/ref_properties":154}],120:[function(e,t,n){"use strict";function r(e,t,n,r){e=e||{},t=t||{};var o;for(o in e)e.hasOwnProperty(o)&&(t.hasOwnProperty(o)||(n.push({command:c.removeSource,args:[o]}),r[o]=!0));for(o in t)t.hasOwnProperty(o)&&(e.hasOwnProperty(o)?l(e[o],t[o])||("geojson"===e[o].type&&"geojson"===t[o].type?n.push({command:c.setGeoJSONSourceData,args:[o,t[o].data]}):(n.push({command:c.removeSource,args:[o]}),n.push({command:c.addSource,args:[o,t[o]]}),r[o]=!0)):n.push({command:c.addSource,args:[o,t[o]]}))}function o(e,t,n,r,o,i){e=e||{},t=t||{};var a;for(a in e)e.hasOwnProperty(a)&&(l(e[a],t[a])||n.push({command:i,args:[r,a,t[a],o]}));for(a in t)t.hasOwnProperty(a)&&!e.hasOwnProperty(a)&&(l(e[a],t[a])||n.push({command:i,args:[r,a,t[a],o]}))}function i(e){return e.id}function a(e,t){return e[t.id]=t,e}function s(e,t,n){e=e||[],t=t||[];var r,s,u,p,h,f,d,m=e.map(i),y=t.map(i),v=e.reduce(a,{}),g=t.reduce(a,{}),_=m.slice(),b=Object.create(null);for(r=0,s=0;r<m.length;r++)u=m[r],g.hasOwnProperty(u)?s++:(n.push({command:c.removeLayer,args:[u]}),_.splice(_.indexOf(u,s),1));for(r=0,s=0;r<y.length;r++)u=y[y.length-1-r],_[_.length-1-r]!==u&&(v.hasOwnProperty(u)?(n.push({command:c.removeLayer,args:[u]}),_.splice(_.lastIndexOf(u,_.length-s),1)):s++,f=_[_.length-r],n.push({command:c.addLayer,args:[g[u],f]}),_.splice(_.length-r,0,u),b[u]=!0);for(r=0;r<y.length;r++)if(u=y[r],p=v[u],h=g[u],!b[u]&&!l(p,h))if(l(p.source,h.source)&&l(p["source-layer"],h["source-layer"])&&l(p.type,h.type)){o(p.layout,h.layout,n,u,null,c.setLayoutProperty),o(p.paint,h.paint,n,u,null,c.setPaintProperty),l(p.filter,h.filter)||n.push({command:c.setFilter,args:[u,h.filter]}),l(p.minzoom,h.minzoom)&&l(p.maxzoom,h.maxzoom)||n.push({command:c.setLayerZoomRange,args:[u,h.minzoom,h.maxzoom]});for(d in p)p.hasOwnProperty(d)&&"layout"!==d&&"paint"!==d&&"filter"!==d&&"metadata"!==d&&"minzoom"!==d&&"maxzoom"!==d&&(0===d.indexOf("paint.")?o(p[d],h[d],n,u,d.slice(6),c.setPaintProperty):l(p[d],h[d])||n.push({command:c.setLayerProperty,args:[u,d,h[d]]}));for(d in h)h.hasOwnProperty(d)&&!p.hasOwnProperty(d)&&"layout"!==d&&"paint"!==d&&"filter"!==d&&"metadata"!==d&&"minzoom"!==d&&"maxzoom"!==d&&(0===d.indexOf("paint.")?o(p[d],h[d],n,u,d.slice(6),c.setPaintProperty):l(p[d],h[d])||n.push({command:c.setLayerProperty,args:[u,d,h[d]]}))}else n.push({command:c.removeLayer,args:[u]}),f=_[_.lastIndexOf(u)+1],n.push({command:c.addLayer,args:[h,f]})}function u(e,t){if(!e)return[{command:c.setStyle,args:[t]}];var n=[];try{if(!l(e.version,t.version))return[{command:c.setStyle,args:[t]}];l(e.center,t.center)||n.push({command:c.setCenter,args:[t.center]}),l(e.zoom,t.zoom)||n.push({command:c.setZoom,args:[t.zoom]}),l(e.bearing,t.bearing)||n.push({command:c.setBearing,args:[t.bearing]}),l(e.pitch,t.pitch)||n.push({command:c.setPitch,args:[t.pitch]}),l(e.sprite,t.sprite)||n.push({command:c.setSprite,args:[t.sprite]}),l(e.glyphs,t.glyphs)||n.push({command:c.setGlyphs,args:[t.glyphs]}),l(e.transition,t.transition)||n.push({command:c.setTransition,args:[t.transition]}),l(e.light,t.light)||n.push({command:c.setLight,args:[t.light]});var o={},i=[];r(e.sources,t.sources,i,o);var a=[];e.layers&&e.layers.forEach(function(e){o[e.source]?n.push({command:c.removeLayer,args:[e.id]}):a.push(e)}),n=n.concat(i),s(a,t.layers,n)}catch(e){console.warn("Unable to compute style diff:",e),n=[{command:c.setStyle,args:[t]}]}return n}var l=e("lodash.isequal"),c={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};t.exports=u,t.exports.operations=c},{"lodash.isequal":34}],121:[function(e,t,n){"use strict";function r(e,t){for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];this.message=(e?e+": ":"")+o.apply(o,n),null!==t&&void 0!==t&&t.__line__&&(this.line=t.__line__)}var o=e("util").format;t.exports=r},{util:45}],122:[function(e,t,n){"use strict";function r(e){return{type:e}}function o(e){return Array.isArray(e)?"("+e.map(a).join(", ")+")":"("+a(e.type)+"...)"}var i=e("./types"),a=i.toString,s=e("./parsing_context"),u=(e("./evaluation_context"),function(e,t,n,r,o){this.key=e,this.name=t,this.type=n,this._evaluate=r,this.args=o});u.prototype.evaluate=function(e){return this._evaluate(e,this.args)},u.prototype.eachChild=function(e){this.args.forEach(e)},u.parse=function(e,t){var n=e[0],r=u.definitions[n];if(!r)return t.error('Unknown expression "'+n+'". If you wanted a literal array, use ["literal", [...]].',0);for(var i=Array.isArray(r)?r[0]:r.type,l=Array.isArray(r)?[[r[1],r[2]]]:r.overloads.filter(function(t){return!Array.isArray(t[0][0])||t[0][0].length===e.length-1}),c=[],p=1;p<e.length;p++){var h=e[p],f=void 0;if(1===l.length){var d=l[0][0];f=Array.isArray(d)?d[p-1]:d.type}var m=t.parse(h,1+c.length,f);if(!m)return null;c.push(m)}for(var y=null,v=0,g=l;v<g.length;v+=1){var _=g[v],b=_[0],w=_[1];if(y=new s(t.definitions,t.path,null,t.scope),Array.isArray(b)&&b.length!==c.length)y.error("Expected "+b.length+" arguments, but found "+c.length+" instead.");else{for(var x=0;x<c.length;x++){var E=Array.isArray(b)?b[x]:b.type,C=c[x];y.concat(x+1).checkSubtype(E,C.type)}if(0===y.errors.length)return new u(t.key,n,i,w,c)}}if(1===l.length)t.errors.push.apply(t.errors,y.errors);else{var T=l.map(function(e){return o(e[0])}).join(" | "),S=c.map(function(e){return a(e.type)}).join(", ");t.error("Expected arguments of type "+T+", but found ("+S+") instead.")}return null},u.register=function(e,t){u.definitions=t;for(var n in t)e[n]=u},t.exports={CompoundExpression:u,varargs:r}},{"./evaluation_context":135,"./parsing_context":138,"./types":142}],123:[function(e,t,n){"use strict";var r=e("../types"),o=r.toString,i=r.array,a=r.ValueType,s=r.StringType,u=r.NumberType,l=r.BooleanType,c=r.checkSubtype,p=e("../values"),h=p.typeOf,f=e("../runtime_error"),d={string:s,number:u,boolean:l},m=function(e,t,n){this.key=e,this.type=t,this.input=n};m.parse=function(e,t){if(e.length<2||e.length>4)return t.error("Expected 1, 2, or 3 arguments, but found "+(e.length-1)+" instead.");var n,r;if(e.length>2){var o=e[1];if("string"!=typeof o||!(o in d))return t.error('The item type argument of "array" must be one of string, number, boolean',1);n=d[o]}else n=a;if(e.length>3){if("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2]))return t.error('The length argument to "array" must be a positive integer literal',2);r=e[2]}var s=i(n,r),u=t.parse(e[e.length-1],e.length-1,a);return u?new m(t.key,s,u):null},m.prototype.evaluate=function(e){var t=this.input.evaluate(e);if(c(this.type,h(t)))throw new f("Expected value to be of type "+o(this.type)+", but found "+o(h(t))+" instead.");return t},m.prototype.eachChild=function(e){e(this.input)},t.exports=m},{"../runtime_error":140,"../types":142,"../values":143}],124:[function(e,t,n){"use strict";var r=e("../types"),o=r.ObjectType,i=r.ValueType,a=r.StringType,s=r.NumberType,u=r.BooleanType,l=e("../runtime_error"),c=e("../types"),p=c.checkSubtype,h=c.toString,f=e("../values"),d=f.typeOf,m={string:a,number:s,boolean:u,object:o},y=function(e,t,n){this.key=e,this.type=t,this.args=n};y.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");for(var n=e[0],r=m[n],o=[],a=1;a<e.length;a++){var s=t.parse(e[a],a,i);if(!s)return null;o.push(s)}return new y(t.key,r,o)},y.prototype.evaluate=function(e){for(var t=this,n=0;n<this.args.length;n++){var r=t.args[n].evaluate(e);if(!p(t.type,d(r)))return r;if(n===t.args.length-1)throw new l("Expected value to be of type "+h(t.type)+", but found "+h(d(r))+" instead.")}return null},y.prototype.eachChild=function(e){this.args.forEach(e)},t.exports=y},{"../runtime_error":140,"../types":142,"../values":143}],125:[function(e,t,n){"use strict";var r=e("../types"),o=r.array,i=r.ValueType,a=r.NumberType,s=e("../runtime_error"),u=function(e,t,n,r){this.key=e,this.type=t,this.index=n,this.input=r};u.parse=function(e,t){if(3!==e.length)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var n=t.parse(e[1],1,a),r=t.parse(e[2],2,o(t.expectedType||i));if(!n||!r)return null;var s=r.type;return new u(t.key,s.itemType,n,r)},u.prototype.evaluate=function(e){var t=this.index.evaluate(e),n=this.input.evaluate(e);if(t<0||t>=n.length)throw new s("Array index out of bounds: "+t+" > "+n.length+".");if(t!==Math.floor(t))throw new s("Array index must be an integer, but found "+t+" instead.");return n[t]},u.prototype.eachChild=function(e){e(this.index),e(this.input)},t.exports=u},{"../runtime_error":140,"../types":142}],126:[function(e,t,n){"use strict";var r=e("../types"),o=r.BooleanType,i=function(e,t,n,r){this.key=e,this.type=t,this.branches=n,this.otherwise=r};i.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found only "+(e.length-1)+".");if(e.length%2!=0)return t.error("Expected an odd number of arguments.");var n;t.expectedType&&"value"!==t.expectedType.kind&&(n=t.expectedType);for(var r=[],a=1;a<e.length-1;a+=2){var s=t.parse(e[a],a,o);if(!s)return null;var u=t.parse(e[a+1],a+1,n);if(!u)return null;r.push([s,u]),n=n||u.type}var l=t.parse(e[e.length-1],e.length-1,n);return l?new i(t.key,n,r,l):null},i.prototype.evaluate=function(e){for(var t=this,n=0,r=t.branches;n<r.length;n+=1){var o=r[n],i=o[0],a=o[1];if(i.evaluate(e))return a.evaluate(e)}return this.otherwise.evaluate(e)},i.prototype.eachChild=function(e){for(var t=this,n=0,r=t.branches;n<r.length;n+=1){var o=r[n],i=o[0],a=o[1];e(i),e(a)}e(this.otherwise)},t.exports=i},{"../types":142}],127:[function(e,t,n){"use strict";var r=function(e,t,n){this.key=e,this.type=t,this.args=n};r.parse=function(e,t){if(e.length<2)return t.error("Expectected at least one argument.");var n=null;t.expectedType&&"value"!==t.expectedType.kind&&(n=t.expectedType);for(var o=[],i=0,a=e.slice(1);i<a.length;i+=1){var s=a[i],u=t.parse(s,1+o.length,n);if(!u)return null;n=n||u.type,o.push(u)}return new r(t.key,n,o)},r.prototype.evaluate=function(e){for(var t=this,n=null,r=0,o=t.args;r<o.length&&null===(n=o[r].evaluate(e));r+=1);return n},r.prototype.eachChild=function(e){this.args.forEach(e)},t.exports=r},{}],128:[function(e,t,n){"use strict";var r=e("../types"),o=r.ColorType,i=r.ValueType,a=r.NumberType,s=e("../values"),u=s.Color,l=s.validateRGBA,c=s.unwrap,p=e("../runtime_error"),h={"to-number":a,"to-color":o},f=function(e,t,n){this.key=e,this.type=t,this.args=n};f.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");for(var n=e[0],r=h[n],o=[],a=1;a<e.length;a++){var s=t.parse(e[a],a,i);if(!s)return null;o.push(s)}return new f(t.key,r,o)},f.prototype.evaluate=function(e){var t=this;if("color"===this.type.kind){for(var n,r,o=0,i=t.args;o<i.length;o+=1)if(n=i[o].evaluate(e),r=null,"string"==typeof n){var a=e.parseColor(n);if(a)return a}else if(Array.isArray(n)&&!(r=n.length<3||n.length>4?"Invalid rbga value "+JSON.stringify(n)+": expected an array containing either three or four numeric values.":l(n[0],n[1],n[2],n[3])))return new u(n[0]/255,n[1]/255,n[2]/255,n[3]);throw new p(r||"Could not parse color from value '"+("string"==typeof n?n:JSON.stringify(n))+"'")}for(var s=null,h=0,f=t.args;h<f.length;h+=1)if(null!==(s=f[h].evaluate(e))){var d=Number(s);if(!isNaN(d))return d}throw new p("Could not convert "+JSON.stringify(c(s))+" to number.")},f.prototype.eachChild=function(e){this.args.forEach(e)},t.exports=f},{"../runtime_error":140,"../types":142,"../values":143}],129:[function(e,t,n){"use strict";function r(e,t,n,r){var o=r-n,i=e-n;return 0===o?0:1===t?i/o:(Math.pow(t,i)-1)/(Math.pow(t,o)-1)}function o(e,t){for(var n,r,o=e.length,i=0,a=o-1,s=0;i<=a;){if(s=Math.floor((i+a)/2),n=e[s],r=e[s+1],t===n||t>n&&t<r)return s;n<t?i=s+1:n>t&&(a=s-1)}return Math.max(s-1,0)}var i=e("@mapbox/unitbezier"),a=e("../../util/interpolate"),s=e("../types"),u=s.toString,l=s.NumberType,c=e("../values"),p=c.Color,h=function(e,t,n,r,o){var i=this;this.key=e,this.type=t,this.interpolation=n,this.input=r,this.labels=[],this.outputs=[];for(var a=0,s=o;a<s.length;a+=1){var u=s[a],l=u[0],c=u[1];i.labels.push(l),i.outputs.push(c)}};h.interpolationFactor=function(e,t,n,o){var a=0;if("exponential"===e.name)a=r(t,e.base,n,o);else if("linear"===e.name)a=r(t,1,n,o);else if("cubic-bezier"===e.name){var s=e.controlPoints,u=new i(s[0],s[1],s[2],s[3]);a=u.solve(r(t,1,n,o))}return a},h.parse=function(e,t){var n=e[1],r=e[2],o=e.slice(3);if(!Array.isArray(n)||0===n.length)return t.error("Expected an interpolation type expression.",1);if("step"===n[0])n={name:"step"};else if("linear"===n[0])n={name:"linear"};else if("exponential"===n[0]){var i=n[1];if("number"!=typeof i)return t.error("Exponential interpolation requires a numeric base.",1,1);n={name:"exponential",base:i}}else{if("cubic-bezier"!==n[0])return t.error("Unknown interpolation type "+String(n[0]),1,0);var a=n.slice(1);if(4!==a.length||a.some(function(e){return"number"!=typeof e||e<0||e>1}))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);n={name:"cubic-bezier",controlPoints:a}}var s="step"===n.name,c=s?5:4;if(e.length-1<c)return t.error("Expected at least "+c+" arguments, but found only "+(e.length-1)+".");var p=c%2;if((e.length-1)%2!==p)return t.error("Expected an "+(0===p?"even":"odd")+" number of arguments.");if(!(r=t.parse(r,2,l)))return null;var f=[],d=null;t.expectedType&&"value"!==t.expectedType.kind&&(d=t.expectedType),s&&o.unshift(-1/0);for(var m=0;m<o.length;m+=2){var y=o[m],v=o[m+1],g=s?m+2:m+3,_=s?m+3:m+4;if("number"!=typeof y)return t.error('Input/output pairs for "curve" expressions must be defined using literal numeric values (not computed expressions) for the input values.',g);if(f.length&&f[f.length-1][0]>y)return t.error('Input/output pairs for "curve" expressions must be arranged with input values in strictly ascending order.',g);var b=t.parse(v,_,d);if(!b)return null;d=d||b.type,f.push([y,b])}return"step"===n.name||"number"===d.kind||"color"===d.kind||"array"===d.kind&&"number"===d.itemType.kind?new h(t.key,d,n,r,f):t.error("Type "+u(d)+" is not interpolatable, and thus cannot be used as a "+n.name+" curve's output type.")},h.prototype.evaluate=function(e){var t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);var r=this.input.evaluate(e);if(r<=t[0])return n[0].evaluate(e);var i=t.length;if(r>=t[i-1])return n[i-1].evaluate(e);var s=o(t,r);if("step"===this.interpolation.name)return n[s].evaluate(e);var u=t[s],l=t[s+1],c=h.interpolationFactor(this.interpolation,r,u,l),f=n[s].evaluate(e),d=n[s+1].evaluate(e),m=this.type.kind.toLowerCase();return"color"===m?new(Function.prototype.bind.apply(p,[null].concat(a.color(f.value,d.value,c)))):a[m](f,d,c)},h.prototype.eachChild=function(e){var t=this;e(this.input);for(var n=0,r=t.outputs;n<r.length;n+=1)e(r[n])},t.exports=h},{"../../util/interpolate":152,"../types":142,"../values":143,"@mapbox/unitbezier":5}],130:[function(e,t,n){"use strict";function r(e,t){var n=t[0],r=t[1],o=t[2],i=t[3];n=n.evaluate(e),r=r.evaluate(e),o=o.evaluate(e),i=i&&i.evaluate(e);var a=P(n,r,o,i);if(a)throw new I(a);return new S(n/255,r/255,o/255,i)}function o(e,t){return e in t}function i(e,t){var n=t[e];return void 0===n?null:n}function a(e,t){return t[0].evaluate(e).length}function s(e,t){var n=t[0],r=t[1];return n.evaluate(e)===r.evaluate(e)}function u(e,t){var n=t[0],r=t[1];return n.evaluate(e)!==r.evaluate(e)}function l(e,t){var n=t[0],r=t[1];return n.evaluate(e)<r.evaluate(e)}function c(e,t){var n=t[0],r=t[1];return n.evaluate(e)>r.evaluate(e)}function p(e,t){var n=t[0],r=t[1];return n.evaluate(e)<=r.evaluate(e)}function h(e,t){var n=t[0],r=t[1];return n.evaluate(e)>=r.evaluate(e)}var f=e("../types"),d=f.NullType,m=f.NumberType,y=f.StringType,v=f.BooleanType,g=f.ColorType,_=f.ObjectType,b=f.ValueType,w=f.ErrorType,x=f.array,E=f.toString,C=e("../values"),T=C.typeOf,S=C.Color,P=C.validateRGBA,O=e("../compound_expression"),A=O.CompoundExpression,k=O.varargs,I=e("../runtime_error"),N=e("./let"),R=e("./var"),M=e("./literal"),D=e("./assertion"),L=e("./array"),F=e("./coercion"),j=e("./at"),z=e("./match"),B=e("./case"),U=e("./curve"),V=e("./coalesce"),W={let:N,var:R,literal:M,string:D,number:D,boolean:D,object:D,array:L,"to-number":F,"to-color":F,at:j,case:B,match:z,coalesce:V,curve:U};A.register(W,{error:[w,[y],function(e,t){var n=t[0];throw new I(n.evaluate(e))}],typeof:[y,[b],function(e,t){var n=t[0];return E(T(n.evaluate(e)))}],"to-string":[y,[b],function(e,t){var n=t[0];n=n.evaluate(e);var r=typeof n;if(null===n||"string"===r||"number"===r||"boolean"===r)return String(n);if(n instanceof S){var o=n.value;return"rgba("+255*o[0]+", "+255*o[1]+", "+255*o[2]+", "+o[3]+")"}return JSON.stringify(n)}],"to-boolean":[v,[b],function(e,t){var n=t[0];return Boolean(n.evaluate(e))}],"to-rgba":[x(m,4),[g],function(e,t){return t[0].evaluate(e).value}],rgb:[g,[m,m,m],r],rgba:[g,[m,m,m,m],r],length:{type:m,overloads:[[[y],a],[[x(b)],a]]},has:{type:v,overloads:[[[y],function(e,t){return o(t[0].evaluate(e),e.properties())}],[[y,_],function(e,t){var n=t[0],r=t[1];return o(n.evaluate(e),r.evaluate(e))}]]},get:{type:b,overloads:[[[y],function(e,t){return i(t[0].evaluate(e),e.properties())}],[[y,_],function(e,t){var n=t[0],r=t[1];return i(n.evaluate(e),r.evaluate(e))}]]},properties:[_,[],function(e){return e.properties()}],"geometry-type":[y,[],function(e){return e.geometryType()}],id:[b,[],function(e){return e.id()}],zoom:[m,[],function(e){return e.globals.zoom}],"heatmap-density":[m,[],function(e){return e.globals.heatmapDensity||0}],"+":[m,k(m),function(e,t){for(var n=0,r=0,o=t;r<o.length;r+=1)n+=o[r].evaluate(e);return n}],"*":[m,k(m),function(e,t){for(var n=1,r=0,o=t;r<o.length;r+=1)n*=o[r].evaluate(e);return n}],"-":{type:m,overloads:[[[m,m],function(e,t){var n=t[0],r=t[1];return n.evaluate(e)-r.evaluate(e)}],[[m],function(e,t){return-t[0].evaluate(e)}]]},"/":[m,[m,m],function(e,t){var n=t[0],r=t[1];return n.evaluate(e)/r.evaluate(e)}],"%":[m,[m,m],function(e,t){var n=t[0],r=t[1];return n.evaluate(e)%r.evaluate(e)}],ln2:[m,[],function(){return Math.LN2}],pi:[m,[],function(){return Math.PI}],e:[m,[],function(){return Math.E}],"^":[m,[m,m],function(e,t){var n=t[0],r=t[1];return Math.pow(n.evaluate(e),r.evaluate(e))}],log10:[m,[m],function(e,t){var n=t[0];return Math.log10(n.evaluate(e))}],ln:[m,[m],function(e,t){var n=t[0];return Math.log(n.evaluate(e))}],log2:[m,[m],function(e,t){var n=t[0];return Math.log2(n.evaluate(e))}],sin:[m,[m],function(e,t){var n=t[0];return Math.sin(n.evaluate(e))}],cos:[m,[m],function(e,t){var n=t[0];return Math.cos(n.evaluate(e))}],tan:[m,[m],function(e,t){var n=t[0];return Math.tan(n.evaluate(e))}],asin:[m,[m],function(e,t){var n=t[0];return Math.asin(n.evaluate(e))}],acos:[m,[m],function(e,t){var n=t[0];return Math.acos(n.evaluate(e))}],atan:[m,[m],function(e,t){var n=t[0];return Math.atan(n.evaluate(e))}],min:[m,k(m),function(e,t){return Math.min.apply(Math,t.map(function(t){return t.evaluate(e)}))}],max:[m,k(m),function(e,t){return Math.max.apply(Math,t.map(function(t){return t.evaluate(e)}))}],"==":{type:v,overloads:[[[m,m],s],[[y,y],s],[[v,v],s],[[d,d],s]]},"!=":{type:v,overloads:[[[m,m],u],[[y,y],u],[[v,v],u],[[d,d],u]]},">":{type:v,overloads:[[[m,m],c],[[y,y],c]]},"<":{type:v,overloads:[[[m,m],l],[[y,y],l]]},">=":{type:v,overloads:[[[m,m],h],[[y,y],h]]},"<=":{type:v,overloads:[[[m,m],p],[[y,y],p]]},all:{type:v,overloads:[[[v,v],function(e,t){var n=t[0],r=t[1];return n.evaluate(e)&&r.evaluate(e)}],[k(v),function(e,t){for(var n=0,r=t;n<r.length;n+=1)if(!r[n].evaluate(e))return!1;return!0}]]},any:{type:v,overloads:[[[v,v],function(e,t){var n=t[0],r=t[1];return n.evaluate(e)||r.evaluate(e)}],[k(v),function(e,t){for(var n=0,r=t;n<r.length;n+=1)if(r[n].evaluate(e))return!0;return!1}]]},"!":[v,[v],function(e,t){return!t[0].evaluate(e)}],upcase:[y,[y],function(e,t){return t[0].evaluate(e).toUpperCase()}],downcase:[y,[y],function(e,t){return t[0].evaluate(e).toLowerCase()}],concat:[y,k(y),function(e,t){return t.map(function(t){return t.evaluate(e)}).join("")}]}),t.exports=W},{"../compound_expression":122,"../runtime_error":140,"../types":142,"../values":143,"./array":123,"./assertion":124,"./at":125,"./case":126,"./coalesce":127,"./coercion":128,"./curve":129,"./let":131,"./literal":132,"./match":133,"./var":134}],131:[function(e,t,n){"use strict";var r=function(e,t,n){this.key=e,this.type=n.type,this.bindings=[].concat(t),this.result=n};r.prototype.evaluate=function(e){e.pushScope(this.bindings);var t=this.result.evaluate(e);return e.popScope(),t},r.prototype.eachChild=function(e){for(var t=this,n=0,r=t.bindings;n<r.length;n+=1)e(r[n][1]);e(this.result)},r.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found "+(e.length-1)+" instead.");for(var n=[],o=1;o<e.length-1;o+=2){var i=e[o];if("string"!=typeof i)return t.error("Expected string, but found "+typeof i+" instead.",o);if(/[^a-zA-Z0-9_]/.test(i))return t.error("Variable names must contain only alphanumeric characters or '_'.",o);var a=t.parse(e[o+1],o+1);if(!a)return null;n.push([i,a])}var s=t.parse(e[e.length-1],e.length-1,void 0,n);return s?new r(t.key,n,s):null},t.exports=r},{}],132:[function(e,t,n){"use strict";var r=e("../values"),o=r.isValue,i=r.typeOf,a=function(e,t,n){this.key=e,this.type=t,this.value=n};a.parse=function(e,t){if(2!==e.length)return t.error("'literal' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(!o(e[1]))return t.error("invalid value");var n=e[1],r=i(n),s=t.expectedType;return"array"!==r.kind||0!==r.N||!s||"array"!==s.kind||"number"==typeof s.N&&0!==s.N||(r=s),new a(t.key,r,n)},a.prototype.evaluate=function(){return this.value},a.prototype.eachChild=function(){},t.exports=a},{"../values":143}],133:[function(e,t,n){"use strict";var r=e("../values"),o=r.typeOf,i=function(e,t,n,r,o,i,a){this.key=e,this.inputType=t,this.type=n,this.input=r,this.cases=o,this.outputs=i,this.otherwise=a};i.parse=function(e,t){if(e.length<5)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if(e.length%2!=1)return t.error("Expected an even number of arguments.");var n,r;t.expectedType&&"value"!==t.expectedType.kind&&(r=t.expectedType);for(var a={},s=[],u=2;u<e.length-1;u+=2){var l=e[u],c=e[u+1];Array.isArray(l)||(l=[l]);var p=t.concat(u);if(0===l.length)return p.error("Expected at least one branch label.");for(var h=0,f=l;h<f.length;h+=1){var d=f[h];if("number"!=typeof d&&"string"!=typeof d)return p.error("Branch labels must be numbers or strings.");if("number"==typeof d&&Math.abs(d)>Number.MAX_SAFE_INTEGER)return p.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof d&&Math.floor(d)!==d)return p.error("Numeric branch labels must be integer values.");if(n){if(p.checkSubtype(n,o(d)))return null}else n=o(d);if(void 0!==a[String(d)])return p.error("Branch labels must be unique.");a[String(d)]=s.length}var m=t.parse(c,u,r);if(!m)return null;r=r||m.type,s.push(m)}var y=t.parse(e[1],1,n);if(!y)return null;var v=t.parse(e[e.length-1],e.length-1,r);return v?new i(t.key,n,r,y,a,s,v):null},i.prototype.evaluate=function(e){var t=this.input.evaluate(e);return(this.outputs[this.cases[t]]||this.otherwise).evaluate(e)},i.prototype.eachChild=function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)},t.exports=i},{"../values":143}],134:[function(e,t,n){"use strict";var r=function(e,t,n){this.key=e,this.type=n,this.name=t};r.parse=function(e,t){if(2!==e.length||"string"!=typeof e[1])return t.error("'var' expression requires exactly one string literal argument.");var n=e[1];return t.scope.has(n)?new r(t.key,n,t.scope.get(n).type):t.error('Unknown variable "'+n+'". Make sure "'+n+'" has been bound in an enclosing "let" expression before using it.',1)},r.prototype.evaluate=function(e){return e.scope.get(this.name).evaluate(e)},r.prototype.eachChild=function(){},t.exports=r},{}],135:[function(e,t,n){"use strict";var r=e("./scope"),o=e("../util/parse_color"),i=e("./values"),a=i.Color,s=["Unknown","Point","LineString","Polygon"],u=function(){this.scope=new r,this._parseColorCache={}};u.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},u.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?s[this.feature.type]:this.feature.type:null},u.prototype.properties=function(){return this.feature&&this.feature.properties||{}},u.prototype.pushScope=function(e){this.scope=this.scope.concat(e)},u.prototype.popScope=function(){this.scope=this.scope.parent},u.prototype.parseColor=function(e){var t=this._parseColorCache[e];if(!t){var n=o(e);t=this._parseColorCache[e]=n?new a(n[0],n[1],n[2],n[3]):null}return t},t.exports=u},{"../util/parse_color":153,"./scope":141,"./values":143}],136:[function(e,t,n){"use strict";function r(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in y}function o(e,t,n,r){void 0===r&&(r={});var o=new l(y,[],a(t)),p=o.parse(e);if(!p)return{result:"error",errors:o.errors};var h,d=new c;if(!1===r.handleErrors)h=function(e,t){return d.globals=e,d.feature=t,p.evaluate(d)};else{var m={},g=s(t);h=function(e,t){d.globals=e,d.feature=t;try{var n=p.evaluate(d);return _(null===n||void 0===n?g:n)}catch(e){return m[e.message]||(m[e.message]=!0,"undefined"!=typeof console&&console.warn(e.message)),_(g)}}}var b=v.isFeatureConstant(p);if(!b&&"property"===n&&!t["property-function"])return{result:"error",errors:[new u("","property expressions not supported")]};if(v.isGlobalPropertyConstant(p,["zoom"]))return{result:"success",context:n,isZoomConstant:!0,isFeatureConstant:b,evaluate:h,parsed:p};if("filter"===n)return{result:"success",context:"filter",isZoomConstant:!1,isFeatureConstant:b,evaluate:h,parsed:p};var w=i(p);return w?w instanceof f?"step"!==w.interpolation.name&&"piecewise-constant"===t.function?{result:"error",errors:[new u(w.key,'interpolation type must be "step" for this property')]}:{result:"success",context:"property",isZoomConstant:!1,isFeatureConstant:b,evaluate:h,parsed:p,interpolation:w.interpolation,zoomStops:w.labels}:{result:"error",errors:[new u(w.key,w.error)]}:{result:"error",errors:[new u("",'"zoom" expression may only be used as input to a top-level "curve" expression.')]}}function i(e){if(e instanceof f){var t=e.input;return t instanceof h&&"zoom"===t.name?e:null}if(e instanceof m)return i(e.result);if(e instanceof d){for(var n=null,r=0,o=e.args;r<o.length;r+=1){var a=o[r],s=i(a);if(s){if(s.error)return s;if(!(s instanceof f)||n)return{key:s.key,error:"Only one zoom-based curve may be used in a style function."};n=s}}return n}return null}function a(e){var t={color:w,string:x,number:E,enum:x,boolean:C};return"array"===e.type?S(t[e.value]||T,e.length):t[e.type]||null}function s(e){var t=e.default;if("color"===e.type&&O(t))return[0,0,0,0];if("color"===e.type){var n=A(t);return new I(n[0],n[1],n[2],n[3])}return void 0===t?null:t}var u=e("./parsing_error"),l=e("./parsing_context"),c=e("./evaluation_context"),p=e("./compound_expression"),h=p.CompoundExpression,f=e("./definitions/curve"),d=e("./definitions/coalesce"),m=e("./definitions/let"),y=e("./definitions"),v=e("./is_constant"),g=e("./values"),_=g.unwrap;t.exports.createExpression=o,t.exports.isExpression=r;var b=e("./types"),w=b.ColorType,x=b.StringType,E=b.NumberType,C=b.BooleanType,T=b.ValueType,S=b.array,P=e("../function"),O=P.isFunction,A=e("../util/parse_color"),k=e("./values"),I=k.Color},{"../function":145,"../util/parse_color":153,"./compound_expression":122,"./definitions":130,"./definitions/coalesce":127,"./definitions/curve":129,"./definitions/let":131,"./evaluation_context":135,"./is_constant":137,"./parsing_context":138,"./parsing_error":139,"./types":142,"./values":143}],137:[function(e,t,n){"use strict";function r(e){if(e instanceof a){if("get"===e.name&&1===e.args.length)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1}var t=!0;return e.eachChild(function(e){t&&!r(e)&&(t=!1)}),t}function o(e,t){if(e instanceof a&&t.indexOf(e.name)>=0)return!1;var n=!0;return e.eachChild(function(e){n&&!o(e,t)&&(n=!1)}),n}var i=e("./compound_expression"),a=i.CompoundExpression;t.exports={isFeatureConstant:r,isGlobalPropertyConstant:o}},{"./compound_expression":122}],138:[function(e,t,n){"use strict";function r(t){var n=e("./compound_expression"),r=n.CompoundExpression,o=e("./is_constant"),i=o.isGlobalPropertyConstant,a=o.isFeatureConstant;if(t instanceof e("./definitions/var"))return!1;if(t instanceof r&&"error"===t.name)return!1;var s=!0;return t.eachChild(function(e){e instanceof u||(s=!1)}),!!s&&a(t)&&i(t,["zoom","heatmap-density"])}var o=e("./scope"),i=e("./types"),a=i.checkSubtype,s=e("./parsing_error"),u=e("./definitions/literal"),l=function(e,t,n,r,i){void 0===t&&(t=[]),void 0===r&&(r=new o),void 0===i&&(i=[]),this.definitions=e,this.path=t,this.key=t.map(function(e){return"["+e+"]"}).join(""),this.scope=r,this.errors=i,this.expectedType=n};l.prototype.parse=function(t,n,o,i){var a=this;if(n&&(a=a.concat(n,o,i)),null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return a.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var s=t[0];if("string"!=typeof s)return a.error("Expression name must be a string, but found "+typeof s+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var l=a.definitions[s];if(l){var c=l.parse(t,a);if(!c)return null;var p=a.expectedType,h=c.type;if(p){if("string"!==p.kind&&"number"!==p.kind&&"boolean"!==p.kind||"value"!==h.kind){if("color"===p.kind&&("value"===h.kind||"string"===h.kind)){var f=e("./definitions/coercion");c=new f(c.key,p,[c])}}else c=new(e("./definitions/assertion"))(c.key,p,[c]);if(a.checkSubtype(p,c.type))return null}if(!(c instanceof u)&&r(c)){var d=new(e("./evaluation_context"));try{c=new u(c.key,c.type,c.evaluate(d))}catch(t){return a.error(t.message),null}}return c}return a.error('Unknown expression "'+s+'". If you wanted a literal array, use ["literal", [...]].',0)}return void 0===t?a.error("'undefined' value invalid. Use null instead."):"object"==typeof t?a.error('Bare objects invalid. Use ["literal", {...}] instead.'):a.error("Expected an array, but found "+typeof t+" instead.")},l.prototype.concat=function(e,t,n){var r="number"==typeof e?this.path.concat(e):this.path,o=n?this.scope.concat(n):this.scope;return new l(this.definitions,r,t||null,o,this.errors)},l.prototype.error=function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];var r=""+this.key+t.map(function(e){return"["+e+"]"}).join("");this.errors.push(new s(r,e))},l.prototype.checkSubtype=function(e,t){var n=a(e,t);return n&&this.error(n),n},t.exports=l},{"./compound_expression":122,"./definitions/assertion":124,"./definitions/coercion":128,"./definitions/literal":132,"./definitions/var":134,"./evaluation_context":135,"./is_constant":137,"./parsing_error":139,"./scope":141,"./types":142}],139:[function(e,t,n){"use strict";var r=function(e){function t(t,n){e.call(this,n),this.message=n,this.key=t}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error);t.exports=r},{}],140:[function(e,t,n){"use strict";var r=function(e){this.name="ExpressionEvaluationError",this.message=e};r.prototype.toJSON=function(){return this.message},t.exports=r},{}],141:[function(e,t,n){"use strict";var r=function(e,t){var n=this;void 0===t&&(t=[]),this.parent=e,this.bindings={};for(var r=0,o=t;r<o.length;r+=1){var i=o[r],a=i[0],s=i[1];n.bindings[a]=s}};r.prototype.concat=function(e){return new r(this,e)},r.prototype.get=function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(e+" not found in scope.")},r.prototype.has=function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)},t.exports=r},{}],142:[function(e,t,n){"use strict";function r(e,t){return{kind:"array",itemType:e,N:t}}function o(e){if("array"===e.kind){var t=o(e.itemType);return"number"==typeof e.N?"array<"+t+", "+e.N+">":"value"===e.itemType.kind?"array":"array<"+t+">"}return e.kind}function i(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&!i(e.itemType,t.itemType)&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind)for(var n=0,r=d;n<r.length;n+=1){var a=r[n];if(!i(a,t))return null}}return"Expected "+o(e)+" but found "+o(t)+" instead."}var a={kind:"null"},s={kind:"number"},u={kind:"string"},l={kind:"boolean"},c={kind:"color"},p={kind:"object"},h={kind:"value"},f={kind:"error"},d=[a,s,u,l,c,p,r(h)];t.exports={NullType:a,NumberType:s,StringType:u,BooleanType:l,ColorType:c,ObjectType:p,ValueType:h,array:r,ErrorType:f,toString:o,checkSubtype:i}},{}],143:[function(e,t,n){"use strict";function r(e,t,n,r){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:"Invalid rgba value ["+[e,t,n,r].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof r?[e,t,n,r]:[e,t,n]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function o(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof y)return!0;if(Array.isArray(e)){for(var t=0,n=e;t<n.length;t+=1)if(!o(n[t]))return!1;return!0}if("object"==typeof e){for(var r in e)if(!o(e[r]))return!1;return!0}return!1}function i(e){if(null===e)return u;if("string"==typeof e)return c;if("boolean"==typeof e)return p;if("number"==typeof e)return l;if(e instanceof y)return h;if(Array.isArray(e)){for(var t,n=e.length,r=0,o=e;r<o.length;r+=1){var a=o[r],s=i(a);if(t){if(t===s)continue;t=d;break}t=s}return m(t||d,n)}return f}function a(e){return e instanceof y?e.value:e}var s=e("./types"),u=s.NullType,l=s.NumberType,c=s.StringType,p=s.BooleanType,h=s.ColorType,f=s.ObjectType,d=s.ValueType,m=s.array,y=function(e,t,n,r){void 0===r&&(r=1),this.value=[e,t,n,r]};t.exports={Color:y,validateRGBA:r,isValue:o,typeOf:i,unwrap:a}},{"./types":142}],144:[function(e,t,n){"use strict";function r(e){if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3===e.length&&(Array.isArray(e[1])||Array.isArray(e[2]));case"any":case"all":for(var t=0,n=e.slice(1);t<n.length;t+=1){var o=n[t];if(!r(o)&&"boolean"!=typeof o)return!1}return!0;default:return!0}}function o(e){if(!e)return function(){return!0};if(!r(e))return new Function("g","f","var p = (f && f.properties || {}); return "+i(e));var t=d(e,y,"filter");if("success"===t.result)return t.evaluate;throw new Error(t.errors.map(function(e){return e.key+": "+e.message}).join(", "))}function i(e){if(!e)return"true";var t=e[0];return e.length<=1?"any"===t?"false":"true":"("+("=="===t?s(e[1],e[2],"===",!1):"!="===t?s(e[1],e[2],"!==",!1):"<"===t||">"===t||"<="===t||">="===t?s(e[1],e[2],t,!0):"any"===t?u(e.slice(1),"||"):"all"===t?u(e.slice(1),"&&"):"none"===t?p(u(e.slice(1),"||")):"in"===t?l(e[1],e.slice(2)):"!in"===t?p(l(e[1],e.slice(2))):"has"===t?c(e[1]):"!has"===t?p(c(e[1])):"true")+")"}function a(e){return"$type"===e?"f.type":"$id"===e?"f.id":"p["+JSON.stringify(e)+"]"}function s(e,t,n,r){var o=a(e),i="$type"===e?m.indexOf(t):JSON.stringify(t);return(r?"typeof "+o+"=== typeof "+i+"&&":"")+o+n+i}function u(e,t){return e.map(i).join(t)}function l(e,t){"$type"===e&&(t=t.map(function(e){return m.indexOf(e)}));var n=JSON.stringify(t.sort(h)),r=a(e);return t.length<=200?n+".indexOf("+r+") !== -1":"function(v, a, i, j) {while (i <= j) { var m = (i + j) >> 1;    if (a[m] === v) return true; if (a[m] > v) j = m - 1; else i = m + 1;}return false; }("+r+", "+n+",0,"+(t.length-1)+")"}function c(e){return"$id"===e?'"id" in f':JSON.stringify(e)+" in p"}function p(e){return"!("+e+")"}function h(e,t){return e<t?-1:e>t?1:0}var f=e("../expression"),d=f.createExpression;t.exports=o,t.exports.isExpressionFilter=r;var m=["Unknown","Point","LineString","Polygon"],y={type:"boolean",default:!1,function:!0,"property-function":!0}},{"../expression":136}],145:[function(e,t,n){"use strict";function r(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function o(e){return e}function i(e,t,n){var r="color"===t.type,p=e.stops&&"object"==typeof e.stops[0][0],h=p||void 0!==e.property,y=p||!h,v=e.type||("interpolated"===t.function?"exponential":"interval");r&&(e=m({},e),e.stops&&(e.stops=e.stops.map(function(e){return[e[0],d(e[1])]})),e.default?e.default=d(e.default):e.default=d(t.default));var g,_,b;if("exponential"===v)g=l;else if("interval"===v)g=u;else if("categorical"===v){g=s,_=Object.create(null);for(var w=0,x=e.stops;w<x.length;w+=1){var E=x[w];_[E[0]]=E[1]}b=typeof e.stops[0][0]}else{if("identity"!==v)throw new Error('Unknown function type "'+v+'"');g=c}var C;if(e.colorSpace&&"rgb"!==e.colorSpace){if(!f[e.colorSpace])throw new Error("Unknown color space: "+e.colorSpace);var T=f[e.colorSpace];e=JSON.parse(JSON.stringify(e));for(var S=0;S<e.stops.length;S++)e.stops[S]=[e.stops[S][0],T.forward(e.stops[S][1])];C=T.reverse}else C=o;if(p){for(var P={},O=[],A=0;A<e.stops.length;A++){var k=e.stops[A],I=k[0].zoom;void 0===P[I]&&(P[I]={zoom:I,type:e.type,property:e.property,default:e.default,stops:[]},O.push(I)),P[I].stops.push([k[0].value,k[1]])}for(var N=[],R=0,M=O;R<M.length;R+=1){var D=M[R];N.push([P[D].zoom,i(P[D],t)])}return{isFeatureConstant:!1,interpolation:{name:"linear"},zoomStops:N.map(function(e){return e[0]}),evaluate:function(n,r){var o=n.zoom;return C(l({stops:N,base:e.base},t,o).evaluate(o,r))}}}if(y){var L;return L="heatmap-color"===n?function(n){var r=n.heatmapDensity;return C(g(e,t,r,_,b))}:function(n){var r=n.zoom;return C(g(e,t,r,_,b))},{isFeatureConstant:!0,isZoomConstant:!1,interpolation:"exponential"===v?{name:"exponential",base:void 0!==e.base?e.base:1}:{name:"step"},zoomStops:e.stops.map(function(e){return e[0]}),evaluate:L}}return{isFeatureConstant:!1,isZoomConstant:!0,evaluate:function(n,r){var o=r&&r.properties?r.properties[e.property]:void 0;return void 0===o?a(e.default,t.default):C(g(e,t,o,_,b))}}}function a(e,t,n){return void 0!==e?e:void 0!==t?t:void 0!==n?n:void 0}function s(e,t,n,r,o){return a(typeof n===o?r[n]:void 0,e.default,t.default)}function u(e,t,n){if("number"!==y(n))return a(e.default,t.default);var r=e.stops.length;if(1===r)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[r-1][0])return e.stops[r-1][1];var o=p(e.stops,n);return e.stops[o][1]}function l(e,t,n){var r=void 0!==e.base?e.base:1;if("number"!==y(n))return a(e.default,t.default);var i=e.stops.length;if(1===i)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[i-1][0])return e.stops[i-1][1];var s=p(e.stops,n),u=h(n,r,e.stops[s][0],e.stops[s+1][0]),l=e.stops[s][1],c=e.stops[s+1][1],f=v[t.type]||o;return"function"==typeof l.evaluate?{evaluate:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=l.evaluate.apply(void 0,e),r=c.evaluate.apply(void 0,e);if(void 0!==n&&void 0!==r)return f(n,r,u)}}:f(l,c,u)}function c(e,t,n){return"color"===t.type?n=d(n):y(n)===t.type||"enum"===t.type&&t.values[n]||(n=void 0),a(n,e.default,t.default)}function p(e,t){for(var n,r,o=e.length,i=0,a=o-1,s=0;i<=a;){if(s=Math.floor((i+a)/2),n=e[s][0],r=e[s+1][0],t===n||t>n&&t<r)return s;n<t?i=s+1:n>t&&(a=s-1)}return Math.max(s-1,0)}function h(e,t,n,r){var o=r-n,i=e-n;return 0===o?0:1===t?i/o:(Math.pow(t,i)-1)/(Math.pow(t,o)-1)}var f=e("../util/color_spaces"),d=e("../util/parse_color"),m=e("../util/extend"),y=e("../util/get_type"),v=e("../util/interpolate");t.exports={createFunction:i,isFunction:r}},{"../util/color_spaces":149,"../util/extend":150,"../util/get_type":151,"../util/interpolate":152,"../util/parse_color":153}],146:[function(e,t,n){"use strict";function r(e){var t=typeof e;if("number"===t||"boolean"===t||"string"===t||void 0===e||null===e)return JSON.stringify(e);if(Array.isArray(e)){for(var n="[",o=0,i=e;o<i.length;o+=1)n+=r(i[o])+",";return n+"]"}for(var a=Object.keys(e).sort(),s="{",u=0;u<a.length;u++)s+=JSON.stringify(a[u])+":"+r(e[a[u]])+",";return s+"}"}function o(e){for(var t="",n=0,o=a;n<o.length;n+=1)t+="/"+r(e[o[n]]);return t}function i(e){for(var t={},n=0;n<e.length;n++){var r=o(e[n]),i=t[r];i||(i=t[r]=[]),i.push(e[n])}var a=[];for(var s in t)a.push(t[s]);return a}var a=e("./util/ref_properties");t.exports=i},{"./util/ref_properties":154}],147:[function(e,t,n){"use strict";t.exports=e("./v8.json")},{"./v8.json":148}],148:[function(e,t,n){t.exports={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_tile","source_geojson","source_video","source_image","source_canvas"],source_tile:{type:{required:!0,type:"enum",values:{vector:{},raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.0511,180,85.0511]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_canvas:{type:{required:!0,type:"enum",values:{canvas:{}}},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}},animate:{type:"boolean",default:"true"},canvas:{type:"string",required:!0}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},background:{}}},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"},"paint.*":{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_fill:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_circle:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_line:{"line-cap":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{butt:{},round:{},square:{}},default:"butt"},"line-join":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{bevel:{},round:{},miter:{}},default:"miter"},"line-miter-limit":{type:"number",default:2,function:"interpolated","zoom-function":!0,requires:[{"line-join":"miter"}]},"line-round-limit":{type:"number",default:1.05,function:"interpolated","zoom-function":!0,requires:[{"line-join":"round"}]},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_symbol:{"symbol-placement":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{point:{},line:{}},default:"point"},"symbol-spacing":{type:"number",default:250,minimum:1,function:"interpolated","zoom-function":!0,units:"pixels",requires:[{"symbol-placement":"line"}]},"symbol-avoid-edges":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1},"icon-allow-overlap":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image"]},"icon-ignore-placement":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image"]},"icon-optional":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image","text-field"]},"icon-rotation-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"]},"icon-size":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,units:"factor of the original icon size",requires:["icon-image"]},"icon-text-fit":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"]},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",function:"interpolated","zoom-function":!0,requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}]},"icon-image":{type:"string",function:"piecewise-constant","zoom-function":!0,"property-function":!0,tokens:!0},"icon-rotate":{type:"number",default:0,period:360,function:"interpolated","zoom-function":!0,"property-function":!0,units:"degrees",requires:["icon-image"]},"icon-padding":{type:"number",default:2,minimum:0,function:"interpolated","zoom-function":!0,units:"pixels",requires:["icon-image"]},"icon-keep-upright":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":"line"}]},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,"property-function":!0,requires:["icon-image"]},"icon-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"]},"icon-pitch-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"]},"text-pitch-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"]},"text-rotation-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"]},"text-field":{type:"string",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:"",tokens:!0},"text-font":{type:"array",value:"string",function:"piecewise-constant","zoom-function":!0,default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"]},"text-size":{type:"number",default:16,minimum:0,units:"pixels",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-line-height":{type:"number",default:1.2,units:"ems",function:"interpolated","zoom-function":!0,requires:["text-field"]},"text-letter-spacing":{type:"number",default:0,units:"ems",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-justify":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{left:{},center:{},right:{}},default:"center",requires:["text-field"]},"text-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field"]},"text-max-angle":{type:"number",default:45,units:"degrees",function:"interpolated","zoom-function":!0,requires:["text-field",{"symbol-placement":"line"}]},"text-rotate":{type:"number",default:0,period:360,units:"degrees",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",function:"interpolated","zoom-function":!0,requires:["text-field"]},"text-keep-upright":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":"line"}]},"text-transform":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"]},"text-offset":{type:"array",value:"number",units:"ems",function:"interpolated","zoom-function":!0,"property-function":!0,length:2,default:[0,0],requires:["text-field"]},"text-allow-overlap":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["text-field"]},"text-ignore-placement":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["text-field"]},"text-optional":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["text-field","icon-image"]},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:22,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},curve:{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},transition:!1,"zoom-function":!0,"property-function":!1,function:"piecewise-constant"},position:{type:"array",default:[1.15,210,30],length:3,value:"number",transition:!0,function:"interpolated","zoom-function":!0,"property-function":!1},color:{type:"color",default:"#ffffff",function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0},intensity:{type:"number",default:.5,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!0},"fill-opacity":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:1,minimum:0,maximum:1,transition:!0},"fill-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-pattern"}]},"fill-outline-color":{type:"color",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}]},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"fill-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["fill-translate"]},"fill-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!1,default:1,minimum:0,maximum:1,transition:!0},"fill-extrusion-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-extrusion-pattern"}]},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"fill-extrusion-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"]},"fill-extrusion-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0},"fill-extrusion-height":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:0,minimum:0,units:"meters",transition:!0},"fill-extrusion-base":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"]}},paint_line:{"line-opacity":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:1,minimum:0,maximum:1,transition:!0},"line-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"line-pattern"}]},"line-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"line-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["line-translate"]},"line-width":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-gap-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-offset":{type:"number",default:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-dasharray":{type:"array",value:"number",function:"piecewise-constant","zoom-function":!0,minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}]},"line-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"circle-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-blur":{type:"number",default:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"circle-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["circle-translate"]},"circle-pitch-scale":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map"},"circle-pitch-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"viewport"},"circle-stroke-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"circle-stroke-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0,units:"pixels"},"heatmap-weight":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!1},"heatmap-intensity":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0},"heatmap-color":{type:"color",default:{stops:[[0,"rgba(0, 0, 255, 0)"],[.1,"royalblue"],[.3,"cyan"],[.5,"lime"],[.7,"yellow"],[1,"red"]]},function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-halo-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-halo-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"]},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-halo-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-halo-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"]}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-hue-rotate":{type:"number",default:0,period:360,function:"interpolated","zoom-function":!0,transition:!0,units:"degrees"},"raster-brightness-min":{type:"number",function:"interpolated","zoom-function":!0,default:0,minimum:0,maximum:1,transition:!0},"raster-brightness-max":{type:"number",function:"interpolated","zoom-function":!0,default:1,minimum:0,maximum:1,transition:!0},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-fade-duration":{type:"number",default:300,minimum:0,function:"interpolated","zoom-function":!0,transition:!0,units:"milliseconds"}},paint_background:{"background-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,transition:!0,requires:[{"!":"background-pattern"}]},"background-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,transition:!0}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}}}},{}],149:[function(e,t,n){"use strict";function r(e){return e>v?Math.pow(e,1/3):e/y+d}function o(e){return e>m?e*e*e:y*(e-d)}function i(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function a(e){return e/=255,e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function s(e){var t=a(e[0]),n=a(e[1]),o=a(e[2]),i=r((.4124564*t+.3575761*n+.1804375*o)/p),s=r((.2126729*t+.7151522*n+.072175*o)/h);return[116*s-16,500*(i-s),200*(s-r((.0193339*t+.119192*n+.9503041*o)/f)),e[3]]}function u(e){var t=(e[0]+16)/116,n=isNaN(e[1])?t:t+e[1]/500,r=isNaN(e[2])?t:t-e[2]/200;return t=h*o(t),n=p*o(n),r=f*o(r),[i(3.2404542*n-1.5371385*t-.4985314*r),i(-.969266*n+1.8760108*t+.041556*r),i(.0556434*n-.2040259*t+1.0572252*r),e[3]]}function l(e){var t=s(e),n=t[0],r=t[1],o=t[2],i=Math.atan2(o,r)*_;return[i<0?i+360:i,Math.sqrt(r*r+o*o),n,e[3]]}function c(e){var t=e[0]*g,n=e[1];return u([e[2],Math.cos(t)*n,Math.sin(t)*n,e[3]])}var p=.95047,h=1,f=1.08883,d=4/29,m=6/29,y=3*m*m,v=m*m*m,g=Math.PI/180,_=180/Math.PI;t.exports={lab:{forward:s,reverse:u},hcl:{forward:l,reverse:c}}},{}],150:[function(e,t,n){"use strict";t.exports=function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];for(var r=0,o=t;r<o.length;r+=1){var i=o[r];for(var a in i)e[a]=i[a]}return e}},{}],151:[function(e,t,n){"use strict";t.exports=function(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}},{}],152:[function(e,t,n){"use strict";function r(e,t,n){return e*(1-n)+t*n}t.exports=r,r.number=r,r.vec2=function(e,t,n){return[r(e[0],t[0],n),r(e[1],t[1],n)]},r.color=function(e,t,n){return[r(e[0],t[0],n),r(e[1],t[1],n),r(e[2],t[2],n),r(e[3],t[3],n)]},r.array=function(e,t,n){return e.map(function(e,o){return r(e,t[o],n)})}},{}],153:[function(e,t,n){"use strict";var r=e("csscolorparser").parseCSSColor;t.exports=function(e){if("string"==typeof e){var t=r(e);if(!t)return;return[t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3]]}return Array.isArray(e)?e:void 0}},{csscolorparser:11}],154:[function(e,t,n){"use strict";t.exports=["type","source","source-layer","minzoom","maxzoom","filter","layout"]},{}],155:[function(e,t,n){"use strict";function r(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function o(e){return Array.isArray(e)?e.map(o):r(e)}t.exports=r,t.exports.deep=o},{}],156:[function(e,t,n){"use strict";var r=e("../error/validation_error"),o=e("../util/get_type"),i=e("../util/extend"),a=e("../util/unbundle_jsonlint"),s=e("../expression"),u=s.isExpression,l=e("../function"),c=l.isFunction;t.exports=function(t){var n=e("./validate_function"),s=e("./validate_expression"),l=e("./validate_object"),p={"*":function(){return[]},array:e("./validate_array"),boolean:e("./validate_boolean"),number:e("./validate_number"),color:e("./validate_color"),constants:e("./validate_constants"),enum:e("./validate_enum"),filter:e("./validate_filter"),function:e("./validate_function"),layer:e("./validate_layer"),object:e("./validate_object"),source:e("./validate_source"),light:e("./validate_light"),string:e("./validate_string")},h=t.value,f=t.valueSpec,d=t.key,m=t.styleSpec,y=t.style;if("string"===o(h)&&"@"===h[0]){if(m.$version>7)return[new r(d,h,"constants have been deprecated as of v8")];if(!(h in y.constants))return[new r(d,h,'constant "%s" not found',h)];t=i({},t,{value:y.constants[h]})}return f.function&&c(a(h))?n(t):f.function&&u(a.deep(h))?s(t):f.type&&p[f.type]?p[f.type](t):l(i({},t,{valueSpec:f.type?m[f.type]:f}))}},{"../error/validation_error":121,"../expression":136,"../function":145,"../util/extend":150,"../util/get_type":151,"../util/unbundle_jsonlint":155,"./validate_array":157,"./validate_boolean":158,"./validate_color":159,"./validate_constants":160,"./validate_enum":161,"./validate_expression":162,"./validate_filter":163,"./validate_function":164,"./validate_layer":166,"./validate_light":168,"./validate_number":169,"./validate_object":170,"./validate_source":173,"./validate_string":174}],157:[function(e,t,n){"use strict";var r=e("../util/get_type"),o=e("./validate"),i=e("../error/validation_error");t.exports=function(e){var t=e.value,n=e.valueSpec,a=e.style,s=e.styleSpec,u=e.key,l=e.arrayElementValidator||o;if("array"!==r(t))return[new i(u,t,"array expected, %s found",r(t))];if(n.length&&t.length!==n.length)return[new i(u,t,"array length %d expected, length %d found",n.length,t.length)];if(n["min-length"]&&t.length<n["min-length"])return[new i(u,t,"array length at least %d expected, length %d found",n["min-length"],t.length)];var c={type:n.value};s.$version<7&&(c.function=n.function),"object"===r(n.value)&&(c=n.value);for(var p=[],h=0;h<t.length;h++)p=p.concat(l({array:t,arrayIndex:h,value:t[h],valueSpec:c,style:a,styleSpec:s,key:u+"["+h+"]"}));return p}},{"../error/validation_error":121,"../util/get_type":151,"./validate":156}],158:[function(e,t,n){"use strict";var r=e("../util/get_type"),o=e("../error/validation_error");t.exports=function(e){var t=e.value,n=e.key,i=r(t);return"boolean"!==i?[new o(n,t,"boolean expected, %s found",i)]:[]}},{"../error/validation_error":121,"../util/get_type":151}],159:[function(e,t,n){"use strict";var r=e("../error/validation_error"),o=e("../util/get_type"),i=e("csscolorparser").parseCSSColor;t.exports=function(e){var t=e.key,n=e.value,a=o(n);return"string"!==a?[new r(t,n,"color expected, %s found",a)]:null===i(n)?[new r(t,n,'color expected, "%s" found',n)]:[]}},{"../error/validation_error":121,"../util/get_type":151,csscolorparser:11}],160:[function(e,t,n){"use strict";var r=e("../error/validation_error"),o=e("../util/get_type");t.exports=function(e){var t=e.key,n=e.value;if(e.styleSpec.$version>7)return n?[new r(t,n,"constants have been deprecated as of v8")]:[];var i=o(n);if("object"!==i)return[new r(t,n,"object expected, %s found",i)];var a=[];for(var s in n)"@"!==s[0]&&a.push(new r(t+"."+s,n[s],'constants must start with "@"'));return a}},{"../error/validation_error":121,"../util/get_type":151}],161:[function(e,t,n){"use strict";var r=e("../error/validation_error"),o=e("../util/unbundle_jsonlint");t.exports=function(e){var t=e.key,n=e.value,i=e.valueSpec,a=[];return Array.isArray(i.values)?-1===i.values.indexOf(o(n))&&a.push(new r(t,n,"expected one of [%s], %s found",i.values.join(", "),JSON.stringify(n))):-1===Object.keys(i.values).indexOf(o(n))&&a.push(new r(t,n,"expected one of [%s], %s found",Object.keys(i.values).join(", "),JSON.stringify(n))),a}},{"../error/validation_error":121,"../util/unbundle_jsonlint":155}],162:[function(e,t,n){"use strict";var r=e("../error/validation_error"),o=e("../expression"),i=o.createExpression,a=e("../util/unbundle_jsonlint");t.exports=function(e){var t=i(a.deep(e.value),e.valueSpec,e.expressionContext);return"success"===t.result?[]:t.errors.map(function(t){return new r(""+e.key+t.key,e.value,t.message)})}},{"../error/validation_error":121,"../expression":136,"../util/unbundle_jsonlint":155}],163:[function(e,t,n){"use strict";var r=e("../error/validation_error"),o=e("./validate_expression"),i=e("./validate_enum"),a=e("../util/get_type"),s=e("../util/unbundle_jsonlint"),u=e("../util/extend"),l=e("../feature_filter"),c=l.isExpressionFilter;t.exports=function e(t){var n,l=t.value,p=t.key,h=t.styleSpec,f=[];if("array"!==a(l))return[new r(p,l,"array expected, %s found",a(l))];if(c(s.deep(l)))return o(u({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}}));if(l.length<1)return[new r(p,l,"filter array must have at least 1 element")];switch(f=f.concat(i({key:p+"[0]",value:l[0],valueSpec:h.filter_operator,style:t.style,styleSpec:t.styleSpec})),s(l[0])){case"<":case"<=":case">":case">=":l.length>=2&&"$type"===s(l[1])&&f.push(new r(p,l,'"$type" cannot be use with operator "%s"',l[0]));case"==":case"!=":3!==l.length&&f.push(new r(p,l,'filter array for operator "%s" must have 3 elements',l[0]));case"in":case"!in":l.length>=2&&"string"!==(n=a(l[1]))&&f.push(new r(p+"[1]",l[1],"string expected, %s found",n));for(var d=2;d<l.length;d++)n=a(l[d]),"$type"===s(l[1])?f=f.concat(i({key:p+"["+d+"]",value:l[d],valueSpec:h.geometry_type,style:t.style,styleSpec:t.styleSpec})):"string"!==n&&"number"!==n&&"boolean"!==n&&f.push(new r(p+"["+d+"]",l[d],"string, number, or boolean expected, %s found",n));break;case"any":case"all":case"none":for(var m=1;m<l.length;m++)f=f.concat(e({key:p+"["+m+"]",value:l[m],style:t.style,styleSpec:t.styleSpec}));break;case"has":case"!has":n=a(l[1]),2!==l.length?f.push(new r(p,l,'filter array for "%s" operator must have 2 elements',l[0])):"string"!==n&&f.push(new r(p+"[1]",l[1],"string expected, %s found",n))}return f}},{"../error/validation_error":121,"../feature_filter":144,"../util/extend":150,"../util/get_type":151,"../util/unbundle_jsonlint":155,"./validate_enum":161,"./validate_expression":162}],164:[function(e,t,n){"use strict";var r=e("../error/validation_error"),o=e("../util/get_type"),i=e("./validate"),a=e("./validate_object"),s=e("./validate_array"),u=e("./validate_number"),l=e("../util/unbundle_jsonlint");t.exports=function(e){function t(e){if("identity"===y)return[new r(e.key,e.value,'identity function may not have a "stops" property')];var t=[],i=e.value;return t=t.concat(s({key:e.key,value:i,valueSpec:e.valueSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:n})),"array"===o(i)&&0===i.length&&t.push(new r(e.key,i,"array must have at least one stop")),t}function n(e){var t=[],n=e.value,s=e.key;if("array"!==o(n))return[new r(s,n,"array expected, %s found",o(n))];if(2!==n.length)return[new r(s,n,"array length %d expected, length %d found",2,n.length)];if(b){if("object"!==o(n[0]))return[new r(s,n,"object expected, %s found",o(n[0]))];if(void 0===n[0].zoom)return[new r(s,n,"object stop key must have zoom")];if(void 0===n[0].value)return[new r(s,n,"object stop key must have value")];if(d&&d>l(n[0].zoom))return[new r(s,n[0].zoom,"stop zoom values must appear in ascending order")];l(n[0].zoom)!==d&&(d=l(n[0].zoom),f=void 0,v={}),t=t.concat(a({key:s+"[0]",value:n[0],valueSpec:{zoom:{}},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:u,value:c}}))}else t=t.concat(c({key:s+"[0]",value:n[0],valueSpec:{},style:e.style,styleSpec:e.styleSpec},n));return t.concat(i({key:s+"[1]",value:n[1],valueSpec:m,style:e.style,styleSpec:e.styleSpec}))}function c(e,t){var n=o(e.value),i=l(e.value),a=null!==e.value?e.value:t;if(h){if(n!==h)return[new r(e.key,a,"%s stop domain type must match previous stop domain type %s",n,h)]}else h=n;if("number"!==n&&"string"!==n&&"boolean"!==n)return[new r(e.key,a,"stop domain value must be a number, string, or boolean")];if("number"!==n&&"categorical"!==y){var s="number expected, %s found";return m["property-function"]&&void 0===y&&(s+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new r(e.key,a,s,n)]}return"categorical"!==y||"number"!==n||isFinite(i)&&Math.floor(i)===i?"categorical"!==y&&"number"===n&&void 0!==f&&i<f?[new r(e.key,a,"stop domain values must appear in ascending order")]:(f=i,"categorical"===y&&i in v?[new r(e.key,a,"stop domain values must be unique")]:(v[i]=!0,[])):[new r(e.key,a,"integer expected, found %s",i)]}function p(e){return i({key:e.key,value:e.value,valueSpec:m,style:e.style,styleSpec:e.styleSpec})}var h,f,d,m=e.valueSpec,y=l(e.value.type),v={},g="categorical"!==y&&void 0===e.value.property,_=!g,b="array"===o(e.value.stops)&&"array"===o(e.value.stops[0])&&"object"===o(e.value.stops[0][0]),w=a({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:t,default:p}});return"identity"===y&&g&&w.push(new r(e.key,e.value,'missing required property "property"')),"identity"===y||e.value.stops||w.push(new r(e.key,e.value,'missing required property "stops"')),"exponential"===y&&"piecewise-constant"===e.valueSpec.function&&w.push(new r(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(_&&!e.valueSpec["property-function"]?w.push(new r(e.key,e.value,"property functions not supported")):g&&!e.valueSpec["zoom-function"]&&w.push(new r(e.key,e.value,"zoom functions not supported"))),"categorical"!==y&&!b||void 0!==e.value.property||w.push(new r(e.key,e.value,'"property" property is required')),w}},{"../error/validation_error":121,"../util/get_type":151,"../util/unbundle_jsonlint":155,"./validate":156,"./validate_array":157,"./validate_number":169,"./validate_object":170}],165:[function(e,t,n){"use strict";var r=e("../error/validation_error"),o=e("./validate_string");t.exports=function(e){var t=e.value,n=e.key,i=o(e);return i.length?i:(-1===t.indexOf("{fontstack}")&&i.push(new r(n,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&i.push(new r(n,t,'"glyphs" url must include a "{range}" token')),i)}},{"../error/validation_error":121,"./validate_string":174}],166:[function(e,t,n){"use strict";var r=e("../error/validation_error"),o=e("../util/unbundle_jsonlint"),i=e("./validate_object"),a=e("./validate_filter"),s=e("./validate_paint_property"),u=e("./validate_layout_property"),l=e("../util/extend");t.exports=function(e){var t=[],n=e.value,c=e.key,p=e.style,h=e.styleSpec;n.type||n.ref||t.push(new r(c,n,'either "type" or "ref" is required'));var f=o(n.type),d=o(n.ref);if(n.id)for(var m=o(n.id),y=0;y<e.arrayIndex;y++){var v=p.layers[y];o(v.id)===m&&t.push(new r(c,n.id,'duplicate layer id "%s", previously used at line %d',n.id,v.id.__line__))}if("ref"in n){["type","source","source-layer","filter","layout"].forEach(function(e){e in n&&t.push(new r(c,n[e],'"%s" is prohibited for ref layers',e))});var g;p.layers.forEach(function(e){o(e.id)===d&&(g=e)}),g?g.ref?t.push(new r(c,n.ref,"ref cannot reference another ref layer")):f=o(g.type):t.push(new r(c,n.ref,'ref layer "%s" not found',d))}else if("background"!==f)if(n.source){var _=p.sources&&p.sources[n.source],b=_&&o(_.type);_?"vector"===b&&"raster"===f?t.push(new r(c,n.source,'layer "%s" requires a raster source',n.id)):"raster"===b&&"raster"!==f?t.push(new r(c,n.source,'layer "%s" requires a vector source',n.id)):"vector"!==b||n["source-layer"]||t.push(new r(c,n,'layer "%s" must specify a "source-layer"',n.id)):t.push(new r(c,n.source,'source "%s" not found',n.source))}else t.push(new r(c,n,'missing required property "source"'));return t=t.concat(i({key:c,value:n,valueSpec:h.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(){return[]},filter:a,layout:function(e){return i({layer:n,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return u(l({layerType:f},e))}}})},paint:function(e){return i({layer:n,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return s(l({layerType:f},e))}}})}}}))}},{"../error/validation_error":121,"../util/extend":150,"../util/unbundle_jsonlint":155,"./validate_filter":163,"./validate_layout_property":167,"./validate_object":170,"./validate_paint_property":171}],167:[function(e,t,n){"use strict";var r=e("./validate_property");t.exports=function(e){return r(e,"layout")}},{"./validate_property":172}],168:[function(e,t,n){"use strict";var r=e("../error/validation_error"),o=e("../util/get_type"),i=e("./validate");t.exports=function(e){var t=e.value,n=e.styleSpec,a=n.light,s=e.style,u=[],l=o(t);if(void 0===t)return u;if("object"!==l)return u=u.concat([new r("light",t,"object expected, %s found",l)]);for(var c in t){var p=c.match(/^(.*)-transition$/);u=p&&a[p[1]]&&a[p[1]].transition?u.concat(i({key:c,value:t[c],valueSpec:n.transition,style:s,styleSpec:n})):a[c]?u.concat(i({key:c,value:t[c],valueSpec:a[c],style:s,styleSpec:n})):u.concat([new r(c,t[c],'unknown property "%s"',c)])}return u}},{"../error/validation_error":121,"../util/get_type":151,"./validate":156}],169:[function(e,t,n){"use strict";var r=e("../util/get_type"),o=e("../error/validation_error");t.exports=function(e){var t=e.key,n=e.value,i=e.valueSpec,a=r(n);return"number"!==a?[new o(t,n,"number expected, %s found",a)]:"minimum"in i&&n<i.minimum?[new o(t,n,"%s is less than the minimum value %s",n,i.minimum)]:"maximum"in i&&n>i.maximum?[new o(t,n,"%s is greater than the maximum value %s",n,i.maximum)]:[]}},{"../error/validation_error":121,"../util/get_type":151}],170:[function(e,t,n){"use strict";var r=e("../error/validation_error"),o=e("../util/get_type"),i=e("./validate");t.exports=function(e){var t=e.key,n=e.value,a=e.valueSpec||{},s=e.objectElementValidators||{},u=e.style,l=e.styleSpec,c=[],p=o(n);if("object"!==p)return[new r(t,n,"object expected, %s found",p)];for(var h in n){var f=h.split(".")[0],d=a[f]||a["*"],m=void 0;if(s[f])m=s[f];else if(a[f])m=i;else if(s["*"])m=s["*"];else{if(!a["*"]){c.push(new r(t,n[h],'unknown property "%s"',h));continue}m=i}c=c.concat(m({key:(t?t+".":t)+h,value:n[h],valueSpec:d,style:u,styleSpec:l,object:n,objectKey:h},n))}for(var y in a)a[y].required&&void 0===a[y].default&&void 0===n[y]&&c.push(new r(t,n,'missing required property "%s"',y));return c}},{"../error/validation_error":121,"../util/get_type":151,"./validate":156}],171:[function(e,t,n){"use strict";var r=e("./validate_property");t.exports=function(e){return r(e,"paint")}},{"./validate_property":172}],172:[function(e,t,n){"use strict";var r=e("./validate"),o=e("../error/validation_error"),i=e("../util/get_type");t.exports=function(e,t){var n=e.key,a=e.style,s=e.styleSpec,u=e.value,l=e.objectKey,c=s[t+"_"+e.layerType];if(!c)return[];var p=l.match(/^(.*)-transition$/);if("paint"===t&&p&&c[p[1]]&&c[p[1]].transition)return r({key:n,value:u,valueSpec:s.transition,style:a,styleSpec:s});var h=e.valueSpec||c[l];if(!h)return[new o(n,u,'unknown property "%s"',l)];var f;if("string"===i(u)&&h["property-function"]&&!h.tokens&&(f=/^{([^}]+)}$/.exec(u)))return[new o(n,u,'"%s" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": %s` }`.',l,JSON.stringify(f[1]))];var d=[];return"symbol"===e.layerType&&"text-field"===l&&a&&!a.glyphs&&d.push(new o(n,u,'use of "text-field" requires a style "glyphs" property')),d.concat(r({key:e.key,value:u,valueSpec:h,style:a,styleSpec:s,expressionContext:"property"}))}},{"../error/validation_error":121,"../util/get_type":151,"./validate":156}],173:[function(e,t,n){"use strict";var r=e("../error/validation_error"),o=e("../util/unbundle_jsonlint"),i=e("./validate_object"),a=e("./validate_enum");t.exports=function(e){var t=e.value,n=e.key,s=e.styleSpec,u=e.style;if(!t.type)return[new r(n,t,'"type" is required')];var l=o(t.type),c=[];switch(l){case"vector":case"raster":if(c=c.concat(i({key:n,value:t,valueSpec:s.source_tile,style:e.style,styleSpec:s})),"url"in t)for(var p in t)["type","url","tileSize"].indexOf(p)<0&&c.push(new r(n+"."+p,t[p],'a source with a "url" property may not include a "%s" property',p));return c;case"geojson":return i({key:n,value:t,valueSpec:s.source_geojson,style:u,styleSpec:s});case"video":return i({key:n,value:t,valueSpec:s.source_video,style:u,styleSpec:s});case"image":return i({key:n,value:t,valueSpec:s.source_image,style:u,styleSpec:s});case"canvas":return i({key:n,value:t,valueSpec:s.source_canvas,style:u,styleSpec:s});default:return a({key:n+".type",value:t.type,valueSpec:{values:["vector","raster","geojson","video","image","canvas"]},style:u,styleSpec:s})}}},{"../error/validation_error":121,"../util/unbundle_jsonlint":155,"./validate_enum":161,"./validate_object":170}],174:[function(e,t,n){"use strict";var r=e("../util/get_type"),o=e("../error/validation_error");t.exports=function(e){var t=e.value,n=e.key,i=r(t);return"string"!==i?[new o(n,t,"string expected, %s found",i)]:[]}},{"../error/validation_error":121,"../util/get_type":151}],175:[function(e,t,n){"use strict";function r(e,t){t=t||u;var n=[];return n=n.concat(s({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:l,"*":function(){return[]}}})),t.$version>7&&e.constants&&(n=n.concat(a({key:"constants",value:e.constants,style:e,styleSpec:t}))),o(n)}function o(e){return[].concat(e).sort(function(e,t){return e.line-t.line})}function i(e){return function(){return o(e.apply(this,arguments))}}var a=e("./validate/validate_constants"),s=e("./validate/validate"),u=e("./reference/latest"),l=e("./validate/validate_glyphs_url");r.source=i(e("./validate/validate_source")),r.light=i(e("./validate/validate_light")),r.layer=i(e("./validate/validate_layer")),r.filter=i(e("./validate/validate_filter")),r.paintProperty=i(e("./validate/validate_paint_property")),r.layoutProperty=i(e("./validate/validate_layout_property")),t.exports=r},{"./reference/latest":147,"./validate/validate":156,"./validate/validate_constants":160,"./validate/validate_filter":163,"./validate/validate_glyphs_url":165,"./validate/validate_layer":166,"./validate/validate_layout_property":167,"./validate/validate_light":168,"./validate/validate_paint_property":171,"./validate/validate_source":173}],176:[function(e,t,n){"use strict";var r=function(){this.n=0,this.times=[]};r.prototype.stopped=function(){return this.times=this.times.filter(function(e){return e.time>=(new Date).getTime()}),!this.times.length},r.prototype.set=function(e){return this.times.push({id:this.n,time:e+(new Date).getTime()}),this.n++},r.prototype.cancel=function(e){this.times=this.times.filter(function(t){return t.id!==e})},t.exports=r},{}],177:[function(e,t,n){"use strict";var r=e("../style-spec/reference/latest"),o=e("../util/util"),i=e("../util/evented"),a=e("./validate_style"),s=e("./style_declaration"),u=e("./style_transition"),l=["anchor","color","position","intensity"],c=r.light,p=function(e){function t(t){e.call(this),this.set(t)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.set=function(e){var t=this;if(!this._validate(a.light,e)){this._declarations={},this._transitions={},this._transitionOptions={},this.calculated={},e=o.extend({anchor:c.anchor.default,color:c.color.default,position:c.position.default,intensity:c.intensity.default},e);for(var n=0,r=l;n<r.length;n+=1){var i=r[n];t._declarations[i]=new s(c[i],e[i],i)}return this}},t.prototype.getLight=function(){return{anchor:this.getLightProperty("anchor"),color:this.getLightProperty("color"),position:this.getLightProperty("position"),intensity:this.getLightProperty("intensity")}},t.prototype.getLightProperty=function(e){return o.endsWith(e,"-transition")?this._transitionOptions[e]:this._declarations[e]&&this._declarations[e].value},t.prototype.getLightValue=function(e,t){if("position"===e){var n=this._transitions[e].calculate(t),r=o.sphericalToCartesian(n);return{x:r[0],y:r[1],z:r[2]}}return this._transitions[e].calculate(t)},t.prototype.setLight=function(e){var t=this;if(!this._validate(a.light,e))for(var n in e){var r=e[n];o.endsWith(n,"-transition")?t._transitionOptions[n]=r:null===r||void 0===r?delete t._declarations[n]:t._declarations[n]=new s(c[n],r,n)}},t.prototype.recalculate=function(e){var t=this;for(var n in t._declarations)t.calculated[n]=t.getLightValue(n,{zoom:e})},t.prototype._applyLightDeclaration=function(e,t,n,r,i){var a=n.transition?this._transitions[e]:void 0,l=c[e];if(null!==t&&void 0!==t||(t=new s(l,l.default,e)),!a||a.declaration.json!==t.json){var p=o.extend({duration:300,delay:0},r,this.getLightProperty(e+"-transition")),h=this._transitions[e]=new u(l,t,a,p);h.instant()||(h.loopID=i.set(h.endTime-Date.now())),a&&i.cancel(a.loopID)}},t.prototype.updateLightTransitions=function(e,t,n){var r,o=this;for(r in o._declarations)o._applyLightDeclaration(r,o._declarations[r],e,t,n)},t.prototype._validate=function(e,t){return a.emitErrors(this,e.call(a,o.extend({value:t,style:{glyphs:!0,sprite:!0},styleSpec:r})))},t}(i);t.exports=p},{"../style-spec/reference/latest":147,"../util/evented":239,"../util/util":252,"./style_declaration":183,"./style_transition":194,"./validate_style":195}],178:[function(e,t,n){"use strict";var r=e("../util/mapbox"),o=r.normalizeGlyphsURL,i=e("../util/ajax"),a=e("./parse_glyph_pbf");t.exports=function(e,t,n,r,s){var u=256*t,l=u+255,c=r(o(n).replace("{fontstack}",e).replace("{range}",u+"-"+l),i.ResourceType.Glyphs);i.getArrayBuffer(c,function(e,t){if(e)s(e);else if(t){for(var n={},r=0,o=a(t.data);r<o.length;r+=1){var i=o[r];n[i.id]=i}s(null,n)}})}},{"../util/ajax":230,"../util/mapbox":246,"./parse_glyph_pbf":180}],179:[function(e,t,n){"use strict";var r=e("../util/ajax"),o=e("../util/browser"),i=e("../util/mapbox"),a=i.normalizeSpriteURL,s=e("../util/image"),u=s.RGBAImage;t.exports=function(e,t,n){function i(){if(c)n(c);else if(s&&l){var e=o.getImageData(l),t={};for(var r in s){var i=s[r],a=i.width,p=i.height,h=i.x,f=i.y,d=i.sdf,m=i.pixelRatio,y=u.create({width:a,height:p});u.copy(e,y,{x:h,y:f},{x:0,y:0},{width:a,height:p}),t[r]={data:y,pixelRatio:m,sdf:d}}n(null,t)}}var s,l,c,p=o.devicePixelRatio>1?"@2x":"";r.getJSON(t(a(e,p,".json"),r.ResourceType.SpriteJSON),function(e,t){c||(c=e,s=t,i())}),r.getImage(t(a(e,p,".png"),r.ResourceType.SpriteImage),function(e,t){c||(c=e,l=t,i())})}},{"../util/ajax":230,"../util/browser":231,"../util/image":242,"../util/mapbox":246}],180:[function(e,t,n){"use strict";function r(e,t,n){1===e&&n.readMessage(o,t)}function o(e,t,n){if(3===e){var r=n.readMessage(i,{}),o=r.id,a=r.bitmap,u=r.width,c=r.height,p=r.left,h=r.top,f=r.advance;t.push({id:o,bitmap:s.create({width:u+2*l,height:c+2*l},a),metrics:{width:u,height:c,left:p,top:h,advance:f}})}}function i(e,t,n){1===e?t.id=n.readVarint():2===e?t.bitmap=n.readBytes():3===e?t.width=n.readVarint():4===e?t.height=n.readVarint():5===e?t.left=n.readSVarint():6===e?t.top=n.readSVarint():7===e&&(t.advance=n.readVarint())}var a=e("../util/image"),s=a.AlphaImage,u=e("pbf"),l=3;t.exports=function(e){return new u(e).readFields(r,[])},t.exports.GLYPH_PBF_BORDER=l},{"../util/image":242,pbf:38}],181:[function(e,t,n){"use strict";function r(e,t,n){return t.isPaintValueFeatureConstant(e)?t.paint[e]:n.programConfigurations.get(t.id).paintPropertyStatistics[e].max}function o(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function i(e,t,n,r,o){if(!t[0]&&!t[1])return e;var i=a.convert(t);"viewport"===n&&i._rotate(-r);for(var s=[],u=0;u<e.length;u++){for(var l=e[u],c=[],p=0;p<l.length;p++)c.push(l[p].sub(i._mult(o)));s.push(c)}return s}var a=e("@mapbox/point-geometry");t.exports={getMaximumPaintValue:r,translateDistance:o,translate:i}},{"@mapbox/point-geometry":2}],182:[function(e,t,n){"use strict";var r=e("../util/evented"),o=e("./style_layer"),i=e("./load_sprite"),a=e("../render/image_manager"),s=e("../render/glyph_manager"),u=e("./light"),l=e("../render/line_atlas"),c=e("../util/util"),p=e("../util/ajax"),h=e("../util/mapbox"),f=e("../util/browser"),d=e("../util/dispatcher"),m=e("./animation_loop"),y=e("./validate_style"),v=e("../source/source").getType,g=e("../source/source").setType,_=e("../source/query_features"),b=e("../source/source_cache"),w=(e("../source/geojson_source"),e("../style-spec/reference/latest")),x=e("../util/global_worker_pool"),E=e("../style-spec/deref"),C=e("../style-spec/diff"),T=e("../source/rtl_text_plugin"),S=c.pick(C.operations,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),P=c.pick(C.operations,["setCenter","setZoom","setBearing","setPitch"]),O=function(e){function t(t,n){var r=this;void 0===n&&(n={}),e.call(this),this.map=t,this.animationLoop=t&&t.animationLoop||new m,this.dispatcher=new d(x(),this),this.imageManager=new a,this.glyphManager=new s(t._transformRequest,n.localIdeographFontFamily),this.lineAtlas=new l(256,512),this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory={},this._loaded=!1,c.bindAll(["_redoPlacement"],this),this._resetUpdates();var o=this;this._rtlTextPluginCallback=T.registerForPluginAvailability(function(e){o.dispatcher.broadcast("loadRTLTextPlugin",e.pluginBlobURL,e.errorCallback);for(var t in o.sourceCaches)o.sourceCaches[t].reload()}),this.on("data",function(e){if("source"===e.dataType&&"metadata"===e.sourceDataType){var t=r.sourceCaches[e.sourceId];if(t){var n=t.getSource();if(n&&n.vectorLayerIds)for(var o in r._layers){var i=r._layers[o];i.source===n.id&&r._validateLayer(i)}}}})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.loadURL=function(e,t){var n=this;void 0===t&&(t={}),this.fire("dataloading",{dataType:"style"});var r="boolean"==typeof t.validate?t.validate:!h.isMapboxURL(e);e=h.normalizeStyleURL(e,t.accessToken);var o=this.map._transformRequest(e,p.ResourceType.Style);p.getJSON(o,function(e,t){e?n.fire("error",{error:e}):t&&n._load(t,r)})},t.prototype.loadJSON=function(e,t){var n=this;void 0===t&&(t={}),this.fire("dataloading",{dataType:"style"}),f.frame(function(){n._load(e,!1!==t.validate)})},t.prototype._load=function(e,t){var n=this;if(!t||!y.emitErrors(this,y(e))){this._loaded=!0,this.stylesheet=e,this.updatePaintProperties();for(var r in e.sources)n.addSource(r,e.sources[r],{validate:!1});e.sprite?i(e.sprite,this.map._transformRequest,function(e,t){if(e)n.fire("error",e);else if(t)for(var r in t)n.imageManager.addImage(r,t[r]);n.imageManager.setLoaded(!0),n.fire("data",{dataType:"style"})}):this.imageManager.setLoaded(!0),this.glyphManager.setURL(e.glyphs);var a=E(this.stylesheet.layers);this._order=a.map(function(e){return e.id}),this._layers={};for(var s=0,l=a;s<l.length;s+=1){var c=l[s];c=o.create(c),c.setEventedParent(n,{layer:{id:c.id}}),n._layers[c.id]=c}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new u(this.stylesheet.light),this.fire("data",{dataType:"style"}),this.fire("style.load")}},t.prototype._validateLayer=function(e){var t=this.sourceCaches[e.source];if(t){var n=e.sourceLayer;if(n){var r=t.getSource();("geojson"===r.type||r.vectorLayerIds&&-1===r.vectorLayerIds.indexOf(n))&&this.fire("error",{error:new Error('Source layer "'+n+'" does not exist on source "'+r.id+'" as specified by style layer "'+e.id+'"')})}}},t.prototype.loaded=function(){var e=this;if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var t in e.sourceCaches)if(!e.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()},t.prototype._serializeLayers=function(e){var t=this;return e.map(function(e){return t._layers[e].serialize()})},t.prototype._applyPaintPropertyUpdates=function(e){var t=this;if(this._loaded){e=e||{transition:!0};var n=this.stylesheet.transition||{},r=this._updatedAllPaintProps?this._layers:this._updatedPaintProps;for(var o in r){var i=t._layers[o],a=t._updatedPaintProps[o];if(t._updatedAllPaintProps||a.all)i.updatePaintTransitions(e,n,t.animationLoop,t.zoomHistory);else for(var s in a)t._layers[o].updatePaintTransition(s,e,n,t.animationLoop,t.zoomHistory)}this.light.updateLightTransitions(e,n,this.animationLoop)}},t.prototype._recalculate=function(e){var t=this;if(this._loaded){for(var n in t.sourceCaches)t.sourceCaches[n].used=!1;this._updateZoomHistory(e);for(var r=0,o=t._order;r<o.length;r+=1){var i=o[r],a=t._layers[i];a.recalculate(e),!a.isHidden(e)&&a.source&&(t.sourceCaches[a.source].used=!0)}this.light.recalculate(e),Math.floor(this.z)!==Math.floor(e)&&this.animationLoop.set(300),this.z=e}},t.prototype._updateZoomHistory=function(e){var t=this.zoomHistory;void 0===t.lastIntegerZoom&&(t.lastIntegerZoom=Math.floor(e),t.lastIntegerZoomTime=0,t.lastZoom=e),Math.floor(t.lastZoom)<Math.floor(e)?(t.lastIntegerZoom=Math.floor(e),t.lastIntegerZoomTime=Date.now()):Math.floor(t.lastZoom)>Math.floor(e)&&(t.lastIntegerZoom=Math.floor(e+1),t.lastIntegerZoomTime=Date.now()),t.lastZoom=e},t.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},t.prototype.update=function(e){var t=this;if(this._changed){var n=Object.keys(this._updatedLayers),r=Object.keys(this._removedLayers);(n.length||r.length||this._updatedSymbolOrder)&&this._updateWorkerLayers(n,r);for(var o in t._updatedSources){var i=t._updatedSources[o];"reload"===i?t._reloadSource(o):"clear"===i&&t._clearSource(o)}this._applyPaintPropertyUpdates(e),this._resetUpdates(),this.fire("data",{dataType:"style"})}},t.prototype._updateWorkerLayers=function(e,t){var n=this,r=this._updatedSymbolOrder?this._order.filter(function(e){return"symbol"===n._layers[e].type}):null;this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(e),removedIds:t,symbolOrder:r})},t.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSymbolOrder=!1,this._updatedSources={},this._updatedPaintProps={},this._updatedAllPaintProps=!1},t.prototype.setState=function(e){var t=this;if(this._checkLoaded(),y.emitErrors(this,y(e)))return!1;e=c.clone(e),e.layers=E(e.layers);var n=C(this.serialize(),e).filter(function(e){return!(e.command in P)});if(0===n.length)return!1;var r=n.filter(function(e){return!(e.command in S)});if(r.length>0)throw new Error("Unimplemented: "+r.map(function(e){return e.command}).join(", ")+".");return n.forEach(function(e){"setTransition"!==e.command&&t[e.command].apply(t,e.args)}),this.stylesheet=e,!0},t.prototype.addImage=function(e,t){if(this.imageManager.getImage(e))return this.fire("error",{error:new Error("An image with this name already exists.")});this.imageManager.addImage(e,t),this.fire("data",{dataType:"style"})},t.prototype.removeImage=function(e){if(!this.imageManager.getImage(e))return this.fire("error",{error:new Error("No image with this name exists.")});this.imageManager.removeImage(e),this.fire("data",{dataType:"style"})},t.prototype.addSource=function(e,t,n){var r=this;if(this._checkLoaded(),void 0!==this.sourceCaches[e])throw new Error("There is already a source with this ID");if(!t.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(t).join(", ")+".");if(!(["vector","raster","geojson","video","image","canvas"].indexOf(t.type)>=0&&this._validate(y.source,"sources."+e,t,null,n))){var o=this.sourceCaches[e]=new b(e,t,this.dispatcher);o.style=this,o.setEventedParent(this,function(){return{isSourceLoaded:r.loaded(),source:o.serialize(),sourceId:e}}),o.onAdd(this.map),this._changed=!0}},t.prototype.removeSource=function(e){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error("There is no source with this ID");var t=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],t.fire("data",{sourceDataType:"metadata",dataType:"source",sourceId:e}),t.setEventedParent(null),t.clearTiles(),t.onRemove&&t.onRemove(this.map),this._changed=!0},t.prototype.setGeoJSONSourceData=function(e,t){this._checkLoaded(),this.sourceCaches[e].getSource().setData(t),this._changed=!0},t.prototype.getSource=function(e){return this.sourceCaches[e]&&this.sourceCaches[e].getSource()},t.prototype.addLayer=function(e,t,n){this._checkLoaded();var r=e.id;if("object"==typeof e.source&&(this.addSource(r,e.source),e=c.clone(e),e=c.extend(e,{source:r})),!this._validate(y.layer,"layers."+r,e,{arrayIndex:-1},n)){var i=o.create(e);this._validateLayer(i),i.setEventedParent(this,{layer:{id:r}});var a=t?this._order.indexOf(t):this._order.length;if(t&&-1===a)return void this.fire("error",{message:new Error('Layer with id "'+t+'" does not exist on this map.')});if(this._order.splice(a,0,r),this._layers[r]=i,this._removedLayers[r]&&i.source){var s=this._removedLayers[r];delete this._removedLayers[r],s.type!==i.type?this._updatedSources[i.source]="clear":(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause())}this._updateLayer(i),"symbol"===i.type&&(this._updatedSymbolOrder=!0),this.updatePaintProperties(r)}},t.prototype.moveLayer=function(e,t){this._checkLoaded(),this._changed=!0;var n=this._layers[e];if(!n)return void this.fire("error",{error:new Error("The layer '"+e+"' does not exist in the map's style and cannot be moved.")});var r=this._order.indexOf(e);this._order.splice(r,1);var o=t?this._order.indexOf(t):this._order.length;this._order.splice(o,0,e),"symbol"===n.type&&(this._updatedSymbolOrder=!0,n.source&&!this._updatedSources[n.source]&&(this._updatedSources[n.source]="reload",this.sourceCaches[n.source].pause()))},t.prototype.removeLayer=function(e){this._checkLoaded();var t=this._layers[e];if(!t)return void this.fire("error",{error:new Error("The layer '"+e+"' does not exist in the map's style and cannot be removed.")});t.setEventedParent(null);var n=this._order.indexOf(e);this._order.splice(n,1),"symbol"===t.type&&(this._updatedSymbolOrder=!0),this._changed=!0,this._removedLayers[e]=t,delete this._layers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e]},t.prototype.getLayer=function(e){return this._layers[e]},t.prototype.setLayerZoomRange=function(e,t,n){this._checkLoaded();var r=this.getLayer(e);if(!r)return void this.fire("error",{error:new Error("The layer '"+e+"' does not exist in the map's style and cannot have zoom extent.")});r.minzoom===t&&r.maxzoom===n||(null!=t&&(r.minzoom=t),null!=n&&(r.maxzoom=n),this._updateLayer(r))},t.prototype.setFilter=function(e,t){this._checkLoaded();var n=this.getLayer(e);if(!n)return void this.fire("error",{error:new Error("The layer '"+e+"' does not exist in the map's style and cannot be filtered.")});null!==t&&void 0!==t&&this._validate(y.filter,"layers."+n.id+".filter",t)||c.deepEqual(n.filter,t)||(n.filter=c.clone(t),this._updateLayer(n))},t.prototype.getFilter=function(e){return c.clone(this.getLayer(e).filter)},t.prototype.setLayoutProperty=function(e,t,n){this._checkLoaded();var r=this.getLayer(e);if(!r)return void this.fire("error",{error:new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")});c.deepEqual(r.getLayoutProperty(t),n)||(r.setLayoutProperty(t,n),this._updateLayer(r))},t.prototype.getLayoutProperty=function(e,t){return this.getLayer(e).getLayoutProperty(t)},t.prototype.setPaintProperty=function(e,t,n){this._checkLoaded();var r=this.getLayer(e);if(!r)return void this.fire("error",{error:new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")});if(!c.deepEqual(r.getPaintProperty(t),n)){var o=r.isPaintValueFeatureConstant(t);r.setPaintProperty(t,n),r.isPaintValueFeatureConstant(t)&&o||this._updateLayer(r),this.updatePaintProperties(e,t)}},t.prototype.getPaintProperty=function(e,t){return this.getLayer(e).getPaintProperty(t)},t.prototype.getTransition=function(){return c.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},t.prototype.updatePaintProperties=function(e,t){if(this._changed=!0,e){var n=this._updatedPaintProps;n[e]||(n[e]={}),n[e][t||"all"]=!0}else this._updatedAllPaintProps=!0},t.prototype.serialize=function(){var e=this;return c.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:c.mapObject(this.sourceCaches,function(e){return e.serialize()}),layers:this._order.map(function(t){return e._layers[t].serialize()})},function(e){return void 0!==e})},t.prototype._updateLayer=function(e){this._updatedLayers[e.id]=!0,e.source&&!this._updatedSources[e.source]&&(this._updatedSources[e.source]="reload",this.sourceCaches[e.source].pause()),this._changed=!0},t.prototype._flattenRenderedFeatures=function(e){for(var t=this,n=[],r=this._order.length-1;r>=0;r--)for(var o=t._order[r],i=0,a=e;i<a.length;i+=1){var s=a[i],u=s[o];if(u)for(var l=0,c=u;l<c.length;l+=1){var p=c[l];n.push(p)}}return n},t.prototype.queryRenderedFeatures=function(e,t,n,r){var o=this;t&&t.filter&&this._validate(y.filter,"queryRenderedFeatures.filter",t.filter);var i={};if(t&&t.layers){if(!Array.isArray(t.layers))return this.fire("error",{error:"parameters.layers must be an Array."}),[];for(var a=0,s=t.layers;a<s.length;a+=1){var u=s[a],l=o._layers[u];if(!l)return o.fire("error",{error:"The layer '"+u+"' does not exist in the map's style and cannot be queried for features."}),[];i[l.source]=!0}}var c=[];for(var p in o.sourceCaches)if(!t.layers||i[p]){var h=_.rendered(o.sourceCaches[p],o._layers,e,t,n,r);c.push(h)}return this._flattenRenderedFeatures(c)},t.prototype.querySourceFeatures=function(e,t){t&&t.filter&&this._validate(y.filter,"querySourceFeatures.filter",t.filter);var n=this.sourceCaches[e];return n?_.source(n,t):[]},t.prototype.addSourceType=function(e,t,n){return v(e)?n(new Error('A source type called "'+e+'" already exists.')):(g(e,t),t.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:e,url:t.workerSourceURL},n):n(null,null))},t.prototype.getLight=function(){return this.light.getLight()},t.prototype.setLight=function(e,t){this._checkLoaded();var n=this.light.getLight(),r=!1;for(var o in e)if(!c.deepEqual(e[o],n[o])){r=!0;break}if(r){var i=this.stylesheet.transition||{};this.light.setLight(e),this.light.updateLightTransitions(t||{transition:!0},i,this.animationLoop)}},t.prototype._validate=function(e,t,n,r,o){return(!o||!1!==o.validate)&&y.emitErrors(this,e.call(y,c.extend({key:t,style:this.serialize(),value:n,styleSpec:w},r)))},t.prototype._remove=function(){var e=this;T.evented.off("pluginAvailable",this._rtlTextPluginCallback);for(var t in e.sourceCaches)e.sourceCaches[t].clearTiles();this.dispatcher.remove()},t.prototype._clearSource=function(e){this.sourceCaches[e].clearTiles()},t.prototype._reloadSource=function(e){this.sourceCaches[e].resume(),this.sourceCaches[e].reload()},t.prototype._updateSources=function(e){var t=this;for(var n in t.sourceCaches)t.sourceCaches[n].update(e)},t.prototype._redoPlacement=function(){var e=this;for(var t in e.sourceCaches)e.sourceCaches[t].redoPlacement()},t.prototype.getImages=function(e,t,n){this.imageManager.getImages(t.icons,n)},t.prototype.getGlyphs=function(e,t,n){this.glyphManager.getGlyphs(t.stacks,n)},t}(r);t.exports=O},{"../render/glyph_manager":86,"../render/image_manager":88,"../render/line_atlas":89,"../source/geojson_source":100,"../source/query_features":106,"../source/rtl_text_plugin":108,"../source/source":109,"../source/source_cache":110,"../style-spec/deref":119,"../style-spec/diff":120,"../style-spec/reference/latest":147,"../util/ajax":230,"../util/browser":231,"../util/dispatcher":237,"../util/evented":239,"../util/global_worker_pool":241,"../util/mapbox":246,"../util/util":252,"./animation_loop":176,"./light":177,"./load_sprite":179,"./style_layer":184,"./validate_style":195}],183:[function(e,t,n){"use strict";function r(e,t,n){if(a(e))return s(e,t,n);if(l(e)){var r=c(e,t,"property");if("success"!==r.result)throw new Error(r.errors.map(function(e){return e.key+": "+e.message}).join(", "));if("property"===r.context)return r;throw new Error("Incorrect expression context "+r.context)}return"string"==typeof e&&"color"===t.type&&(e=o(e)),{result:"success",context:"property",isFeatureConstant:!0,isZoomConstant:!0,evaluate:function(){return e}}}var o=e("../style-spec/util/parse_color"),i=e("../style-spec/function"),a=i.isFunction,s=i.createFunction,u=e("../style-spec/expression"),l=u.isExpression,c=u.createExpression,p=e("../util/util"),h=e("../style-spec/expression/definitions/curve"),f=function(e,t,n){this.value=p.clone(t),this.json=JSON.stringify(this.value),this.minimum=e.minimum,this.expression=r(this.value,e,n)};f.prototype.calculate=function(e,t){var n=this.expression.evaluate(e,t);return void 0!==this.minimum&&n<this.minimum?this.minimum:n},f.prototype.interpolationFactor=function(e,t,n){return this.expression.isZoomConstant?0:h.interpolationFactor(this.expression.interpolation,e,t,n)},t.exports=f},{"../style-spec/expression":136,"../style-spec/expression/definitions/curve":129,"../style-spec/function":145,"../style-spec/util/parse_color":153,"../util/util":252}],184:[function(e,t,n){"use strict";function r(e){return e.value}var o=e("../util/util"),i=e("./style_transition"),a=e("./style_declaration"),s=e("../style-spec/reference/latest"),u=e("./validate_style"),l=e("./../style-spec/util/parse_color"),c=e("../util/evented"),p=function(e){function t(t){var n=this;e.call(this),this.id=t.id,this.metadata=t.metadata,this.type=t.type,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,"background"!==t.type&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),this.paint={},this.layout={},this._featureFilter=function(){return!0},this._paintSpecifications=s["paint_"+this.type],this._layoutSpecifications=s["layout_"+this.type],this._paintTransitions={},this._paintTransitionOptions={},this._paintDeclarations={},this._layoutDeclarations={},this._layoutFunctions={};var r,o,i={validate:!1};for(r in t.paint)n.setPaintProperty(r,t.paint[r],i);for(o in t.layout)n.setLayoutProperty(o,t.layout[o],i);for(r in n._paintSpecifications)n.paint[r]=n.getPaintValue(r,{zoom:0});for(o in n._layoutSpecifications)n._updateLayoutValue(o)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setLayoutProperty=function(e,t,n){if(null==t)delete this._layoutDeclarations[e];else{var r="layers."+this.id+".layout."+e;if(this._validate(u.layoutProperty,r,e,t,n))return;this._layoutDeclarations[e]=new a(this._layoutSpecifications[e],t,e)}this._updateLayoutValue(e)},t.prototype.getLayoutProperty=function(e){return this._layoutDeclarations[e]&&this._layoutDeclarations[e].value},t.prototype.getLayoutValue=function(e,t,n){var r=this._layoutSpecifications[e],o=this._layoutDeclarations[e];return o&&(o.expression.isFeatureConstant||n)?o.calculate(t,n):r.default},t.prototype.setPaintProperty=function(e,t,n){var r="layers."+this.id+".paint."+e;if(o.endsWith(e,"-transition"))if(null===t||void 0===t)delete this._paintTransitionOptions[e];else{if(this._validate(u.paintProperty,r,e,t,n))return;this._paintTransitionOptions[e]=t}else if(null===t||void 0===t)delete this._paintDeclarations[e];else{if(this._validate(u.paintProperty,r,e,t,n))return;this._paintDeclarations[e]=new a(this._paintSpecifications[e],t,e)}},t.prototype.getPaintProperty=function(e){return o.endsWith(e,"-transition")?this._paintTransitionOptions[e]:this._paintDeclarations[e]&&this._paintDeclarations[e].value},t.prototype.getPaintValue=function(e,t,n){var r=this._paintSpecifications[e],o=this._paintTransitions[e];return o&&(o.declaration.expression.isFeatureConstant||n)?o.calculate(t,n):"color"===r.type&&r.default?l(r.default):r.default},t.prototype.getPaintInterpolationFactor=function(e,t,n,r){var o=this._paintDeclarations[e];return o?o.interpolationFactor(t,n,r):0},t.prototype.isPaintValueFeatureConstant=function(e){var t=this._paintDeclarations[e];return!t||t.expression.isFeatureConstant},t.prototype.isPaintValueZoomConstant=function(e){var t=this._paintDeclarations[e];return!t||t.expression.isZoomConstant},t.prototype.isHidden=function(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.layout.visibility},t.prototype.updatePaintTransitions=function(e,t,n,r){var o,i=this;for(o in i._paintDeclarations)i._applyPaintDeclaration(o,i._paintDeclarations[o],e,t,n,r);for(o in i._paintTransitions)o in i._paintDeclarations||i._applyPaintDeclaration(o,null,e,t,n,r)},t.prototype.updatePaintTransition=function(e,t,n,r,o){var i=this._paintDeclarations[e];this._applyPaintDeclaration(e,i,t,n,r,o)},t.prototype.recalculate=function(e){var t=this;for(var n in t._paintTransitions)t.paint[n]=t.getPaintValue(n,{zoom:e});for(var r in t._layoutFunctions)t.layout[r]=t.getLayoutValue(r,{zoom:e})},t.prototype.serialize=function(){var e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:o.mapObject(this._layoutDeclarations,r),paint:o.mapObject(this._paintDeclarations,r)};return o.filterObject(e,function(e,t){return!(void 0===e||"layout"===t&&!Object.keys(e).length||"paint"===t&&!Object.keys(e).length)})},t.prototype._applyPaintDeclaration=function(e,t,n,r,s,u){var l=n.transition?this._paintTransitions[e]:void 0,c=this._paintSpecifications[e];if(null!==t&&void 0!==t||(t=new a(c,c.default,e)),!l||l.declaration.json!==t.json){var p=o.extend({duration:300,delay:0},r,this.getPaintProperty(e+"-transition")),h=this._paintTransitions[e]=new i(c,t,l,p,u);s&&(h.instant()||(h.loopID=s.set(h.endTime-Date.now())),l&&s.cancel(l.loopID))}},t.prototype._updateLayoutValue=function(e){var t=this._layoutDeclarations[e];!t||t.expression.isZoomConstant&&t.expression.isFeatureConstant?(delete this._layoutFunctions[e],this.layout[e]=this.getLayoutValue(e,{zoom:0})):this._layoutFunctions[e]=!0},t.prototype._validate=function(e,t,n,r,o){return(!o||!1!==o.validate)&&u.emitErrors(this,e.call(u,{key:t,layerType:this.type,objectKey:n,value:r,styleSpec:s,style:{glyphs:!0,sprite:!0}}))},t.prototype.has3DPass=function(){return!1},t.prototype.resize=function(e){},t}(c);t.exports=p;var h={circle:e("./style_layer/circle_style_layer"),heatmap:e("./style_layer/heatmap_style_layer"),fill:e("./style_layer/fill_style_layer"),"fill-extrusion":e("./style_layer/fill_extrusion_style_layer"),line:e("./style_layer/line_style_layer"),symbol:e("./style_layer/symbol_style_layer"),background:e("./style_layer/background_style_layer"),raster:e("./style_layer/raster_style_layer")};p.create=function(e){return new h[e.type](e)}},{"../style-spec/reference/latest":147,"../util/evented":239,"../util/util":252,"./../style-spec/util/parse_color":153,"./style_declaration":183,"./style_layer/background_style_layer":185,"./style_layer/circle_style_layer":186,"./style_layer/fill_extrusion_style_layer":187,"./style_layer/fill_style_layer":188,"./style_layer/heatmap_style_layer":189,"./style_layer/line_style_layer":190,"./style_layer/raster_style_layer":191,"./style_layer/symbol_style_layer":192,"./style_transition":194,"./validate_style":195}],185:[function(e,t,n){"use strict";var r=e("../style_layer"),o=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.isOpacityZero=function(e){return 0===this.getPaintValue("background-opacity",{zoom:e})},t}(r);t.exports=o},{"../style_layer":184}],186:[function(e,t,n){"use strict";var r=e("../style_layer"),o=e("../../data/bucket/circle_bucket"),i=e("../../util/intersection_tests"),a=i.multiPolygonIntersectsBufferedMultiPoint,s=e("../query_utils"),u=s.getMaximumPaintValue,l=s.translateDistance,c=s.translate,p=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.createBucket=function(e){return new o(e)},t.prototype.isOpacityZero=function(e){return this.isPaintValueFeatureConstant("circle-opacity")&&0===this.getPaintValue("circle-opacity",{zoom:e})&&this.isPaintValueFeatureConstant("circle-stroke-width")&&0===this.getPaintValue("circle-stroke-width",{zoom:e})||this.isPaintValueFeatureConstant("circle-stroke-opacity")&&0===this.getPaintValue("circle-stroke-opacity",{zoom:e})},t.prototype.queryRadius=function(e){return u("circle-radius",this,e)+l(this.paint["circle-translate"])},t.prototype.queryIntersectsFeature=function(e,t,n,r,o,i){var s=c(e,this.getPaintValue("circle-translate",{zoom:r},t),this.getPaintValue("circle-translate-anchor",{zoom:r},t),o,i),u=this.getPaintValue("circle-radius",{zoom:r},t)*i;return a(s,n,u)},t}(r);t.exports=p},{"../../data/bucket/circle_bucket":52,"../../util/intersection_tests":243,"../query_utils":181,"../style_layer":184}],187:[function(e,t,n){"use strict";var r=e("../style_layer"),o=e("../../data/bucket/fill_extrusion_bucket"),i=e("../../util/intersection_tests"),a=i.multiPolygonIntersectsMultiPolygon,s=e("../query_utils"),u=s.translateDistance,l=s.translate,c=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getPaintValue=function(t,n,r){var o=e.prototype.getPaintValue.call(this,t,n,r);return"fill-extrusion-color"===t&&o&&(o[3]=1),o},t.prototype.createBucket=function(e){return new o(e)},t.prototype.isOpacityZero=function(e){return 0===this.getPaintValue("fill-extrusion-opacity",{zoom:e})},t.prototype.queryRadius=function(){return u(this.paint["fill-extrusion-translate"])},t.prototype.queryIntersectsFeature=function(e,t,n,r,o,i){var s=l(e,this.getPaintValue("fill-extrusion-translate",{zoom:r},t),this.getPaintValue("fill-extrusion-translate-anchor",{zoom:r},t),o,i);return a(s,n)},t.prototype.has3DPass=function(){return 0!==this.paint["fill-extrusion-opacity"]&&"none"!==this.layout.visibility},t.prototype.resize=function(e){if(this.viewportFrame){var t=this.viewportFrame,n=t.texture,r=t.fbo;e.deleteTexture(n),e.deleteFramebuffer(r),this.viewportFrame=null}},t}(r);t.exports=c},{"../../data/bucket/fill_extrusion_bucket":54,"../../util/intersection_tests":243,"../query_utils":181,"../style_layer":184}],188:[function(e,t,n){"use strict";var r=e("../style_layer"),o=e("../../data/bucket/fill_bucket"),i=e("../../util/intersection_tests"),a=i.multiPolygonIntersectsMultiPolygon,s=e("../query_utils"),u=s.translateDistance,l=s.translate,c=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getPaintValue=function(t,n,r){var o=this;if("fill-outline-color"===t){if(void 0===this.getPaintProperty("fill-outline-color"))return e.prototype.getPaintValue.call(this,"fill-color",n,r);for(var i=this._paintTransitions["fill-outline-color"];i;){if(!(i&&i.declaration&&i.declaration.value))return e.prototype.getPaintValue.call(o,"fill-color",n,r);i=i.oldTransition}}return e.prototype.getPaintValue.call(this,t,n,r)},t.prototype.getPaintInterpolationFactor=function(t){for(var n=[],r=arguments.length-1;r-- >0;)n[r]=arguments[r+1];return"fill-outline-color"===t&&void 0===this.getPaintProperty("fill-outline-color")?e.prototype.getPaintInterpolationFactor.apply(this,["fill-color"].concat(n)):e.prototype.getPaintInterpolationFactor.apply(this,[t].concat(n))},t.prototype.isPaintValueFeatureConstant=function(t){return"fill-outline-color"===t&&void 0===this.getPaintProperty("fill-outline-color")?e.prototype.isPaintValueFeatureConstant.call(this,"fill-color"):e.prototype.isPaintValueFeatureConstant.call(this,t)},t.prototype.isPaintValueZoomConstant=function(t){return"fill-outline-color"===t&&void 0===this.getPaintProperty("fill-outline-color")?e.prototype.isPaintValueZoomConstant.call(this,"fill-color"):e.prototype.isPaintValueZoomConstant.call(this,t)},t.prototype.createBucket=function(e){return new o(e)},t.prototype.isOpacityZero=function(e){return this.isPaintValueFeatureConstant("fill-opacity")&&0===this.getPaintValue("fill-opacity",{zoom:e})},t.prototype.queryRadius=function(){return u(this.paint["fill-translate"])},t.prototype.queryIntersectsFeature=function(e,t,n,r,o,i){var s=l(e,this.getPaintValue("fill-translate",{zoom:r},t),this.getPaintValue("fill-translate-anchor",{zoom:r},t),o,i);return a(s,n)},t}(r);t.exports=c},{"../../data/bucket/fill_bucket":53,"../../util/intersection_tests":243,"../query_utils":181,"../style_layer":184}],189:[function(e,t,n){"use strict";var r=e("../style_layer"),o=e("../../data/bucket/heatmap_bucket"),i=e("../../util/image").RGBAImage,a=function(e){function t(t){e.call(this,t),this.colorRampData=new Uint8Array(1024),this.getPaintProperty("heatmap-color")||this.setPaintProperty("heatmap-color",this._paintSpecifications["heatmap-color"].default,"")}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.createBucket=function(e){return new o(e)},t.prototype.isOpacityZero=function(e){return 0===this.getPaintValue("heatmap-opacity",{zoom:e})},t.prototype._applyPaintDeclaration=function(t,n,r,o,a,s){var u=this;if(e.prototype._applyPaintDeclaration.call(this,t,n,r,o,a,s),"heatmap-color"===t){for(var l=this.colorRampData.length,c=4;c<l;c+=4){var p=u.getPaintValue("heatmap-color",{heatmapDensity:c/l,zoom:-1}),h=p[3];u.colorRampData[c+0]=Math.floor(255*p[0]/h),u.colorRampData[c+1]=Math.floor(255*p[1]/h),u.colorRampData[c+2]=Math.floor(255*p[2]/h),u.colorRampData[c+3]=Math.floor(255*h)}this.colorRamp=i.create({width:256,height:1},this.colorRampData),this.colorRampTexture=null}},t.prototype.resize=function(e){this.heatmapTexture&&(e.deleteTexture(this.heatmapTexture),this.heatmapTexture=null),this.heatmapFbo&&(e.deleteFramebuffer(this.heatmapFbo),this.heatmapFbo=null)},t}(r);t.exports=a},{"../../data/bucket/heatmap_bucket":55,"../../util/image":242,"../style_layer":184}],190:[function(e,t,n){"use strict";function r(e,t){return t>0?t+2*e:e}function o(e,t){for(var n=[],r=new i(0,0),o=0;o<e.length;o++){for(var a=e[o],s=[],u=0;u<a.length;u++){var l=a[u-1],c=a[u],p=a[u+1],h=0===u?r:c.sub(l)._unit()._perp(),f=u===a.length-1?r:p.sub(c)._unit()._perp(),d=h._add(f)._unit(),m=d.x*f.x+d.y*f.y;d._mult(1/m),s.push(d._mult(t)._add(c))}n.push(s)}return n}var i=e("@mapbox/point-geometry"),a=e("../style_layer"),s=e("../../data/bucket/line_bucket"),u=e("../../util/intersection_tests"),l=u.multiPolygonIntersectsBufferedMultiLine,c=e("../query_utils"),p=c.getMaximumPaintValue,h=c.translateDistance,f=c.translate,d=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.createBucket=function(e){return new s(e)},t.prototype.isOpacityZero=function(e){return this.isPaintValueFeatureConstant("line-opacity")&&0===this.getPaintValue("line-opacity",{zoom:e})},t.prototype.queryRadius=function(e){var t=e,n=r(p("line-width",this,t),p("line-gap-width",this,t)),o=p("line-offset",this,t);return n/2+Math.abs(o)+h(this.paint["line-translate"])},t.prototype.queryIntersectsFeature=function(e,t,n,i,a,s){var u=f(e,this.getPaintValue("line-translate",{zoom:i},t),this.getPaintValue("line-translate-anchor",{zoom:i},t),a,s),c=s/2*r(this.getPaintValue("line-width",{zoom:i},t),this.getPaintValue("line-gap-width",{zoom:i},t)),p=this.getPaintValue("line-offset",{zoom:i},t);return p&&(n=o(n,p*s)),l(u,n,c)},t}(a);t.exports=d},{"../../data/bucket/line_bucket":56,"../../util/intersection_tests":243,"../query_utils":181,"../style_layer":184,"@mapbox/point-geometry":2}],191:[function(e,t,n){"use strict";var r=e("../style_layer"),o=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.isOpacityZero=function(e){return 0===this.getPaintValue("raster-opacity",{zoom:e})},t}(r);t.exports=o},{"../style_layer":184}],192:[function(e,t,n){"use strict";var r=e("../style_layer"),o=e("../../data/bucket/symbol_bucket"),i=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getLayoutValue=function(t,n,r){var o=e.prototype.getLayoutValue.call(this,t,n,r);if("auto"!==o)return o;switch(t){case"text-rotation-alignment":case"icon-rotation-alignment":return"line"===this.getLayoutValue("symbol-placement",n,r)?"map":"viewport";case"text-pitch-alignment":return this.getLayoutValue("text-rotation-alignment",n,r);case"icon-pitch-alignment":return this.getLayoutValue("icon-rotation-alignment",n,r);default:return o}},t.prototype.getLayoutDeclaration=function(e){return this._layoutDeclarations[e]},t.prototype.isLayoutValueFeatureConstant=function(e){var t=this._layoutDeclarations[e];return!t||t.expression.isFeatureConstant},t.prototype.isLayoutValueZoomConstant=function(e){var t=this._layoutDeclarations[e];return!t||t.expression.isZoomConstant},t.prototype.createBucket=function(e){return new o(e)},t.prototype.isOpacityZero=function(e,t){return this.isPaintValueFeatureConstant(t)&&0===this.getPaintValue(t,{zoom:e})},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t}(r);t.exports=i},{"../../data/bucket/symbol_bucket":57,"../style_layer":184}],193:[function(e,t,n){"use strict";var r=e("./style_layer"),o=e("../util/util"),i=e("../style-spec/feature_filter"),a=e("../style-spec/group_by_layout"),s=function(e){e&&this.replace(e)};s.prototype.replace=function(e){var t=this;this.symbolOrder=[];for(var n=0,r=e;n<r.length;n+=1){var o=r[n];"symbol"===o.type&&t.symbolOrder.push(o.id)}this._layerConfigs={},this._layers={},this.update(e,[])},s.prototype.update=function(e,t,n){for(var s=this,u=0,l=e;u<l.length;u+=1){var c=l[u];s._layerConfigs[c.id]=c;var p=s._layers[c.id]=r.create(c);p.updatePaintTransitions({transition:!1}),p._featureFilter=i(p.filter)}for(var h=0,f=t;h<f.length;h+=1){var d=f[h];delete s._layerConfigs[d],delete s._layers[d]}n&&(this.symbolOrder=n),this.familiesBySource={};for(var m=a(o.values(this._layerConfigs)),y=0,v=m;y<v.length;y+=1){var g=v[y],_=g.map(function(e){return s._layers[e.id]}),b=_[0];if(!b.layout||"none"!==b.layout.visibility){var w=b.source||"",x=s.familiesBySource[w];x||(x=s.familiesBySource[w]={});var E=b.sourceLayer||"_geojsonTileLayer",C=x[E];C||(C=x[E]=[]),C.push(_)}}},t.exports=s},{"../style-spec/feature_filter":144,"../style-spec/group_by_layout":146,"../util/util":252,"./style_layer":184}],194:[function(e,t,n){"use strict";function r(e,t,n){if(void 0!==e&&void 0!==t)return{from:e.to,fromScale:e.toScale,to:t.to,toScale:t.toScale,t:n}}var o=e("../util/util"),i=e("../style-spec/util/interpolate"),a={lastIntegerZoom:0,lastIntegerZoomTime:0,lastZoom:0},s=function(e,t,n,o,s){this.declaration=t,this.startTime=this.endTime=(new Date).getTime(),this.oldTransition=n,this.duration=o.duration||0,this.delay=o.delay||0,this.zoomTransitioned="piecewise-constant"===e.function&&e.transition,this.interp=this.zoomTransitioned?r:i[e.type],this.zoomHistory=s||a,this.instant()||(this.endTime=this.startTime+this.duration+this.delay),n&&n.endTime<=this.startTime&&delete n.oldTransition};s.prototype.instant=function(){return!this.oldTransition||!this.interp||0===this.duration&&0===this.delay},s.prototype.calculate=function(e,t,n){var r=this._calculateTargetValue(e,t);if(this.instant())return r;if((n=n||Date.now())>=this.endTime)return r;var i=this.oldTransition.calculate(e,t,this.startTime),a=o.easeCubicInOut((n-this.startTime-this.delay)/this.duration);return this.interp(i,r,a)},s.prototype._calculateTargetValue=function(e,t){if(!this.zoomTransitioned)return this.declaration.calculate(e,t);var n=e.zoom,r=this.zoomHistory.lastIntegerZoom,o=n>r?2:.5,a=this.declaration.calculate({zoom:n>r?n-1:n+1},t),s=this.declaration.calculate({zoom:n},t),u=Math.min((Date.now()-this.zoomHistory.lastIntegerZoomTime)/this.duration,1),l=Math.abs(n-r),c=i(u,1,l);return void 0!==a&&void 0!==s?{from:a,fromScale:o,to:s,toScale:1,t:c}:void 0},t.exports=s},{"../style-spec/util/interpolate":152,"../util/util":252}],195:[function(e,t,n){"use strict";t.exports=e("../style-spec/validate_style.min"),t.exports.emitErrors=function(e,t){if(t&&t.length){for(var n=0,r=t;n<r.length;n+=1){var o=r[n],i=o.message;e.fire("error",{error:new Error(i)})}return!0}return!1}},{"../style-spec/validate_style.min":175}],196:[function(e,t,n){"use strict";var r=e("@mapbox/point-geometry"),o=function(e){function t(t,n,r,o){e.call(this,t,n),this.angle=r,void 0!==o&&(this.segment=o)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.clone=function(){return new t(this.x,this.y,this.angle,this.segment)},t}(r);t.exports=o},{"@mapbox/point-geometry":2}],197:[function(e,t,n){"use strict";function r(e,t,n,r,o){if(void 0===t.segment)return!0;for(var i=t,a=t.segment+1,s=0;s>-n/2;){if(--a<0)return!1;s-=e[a].dist(i),i=e[a]}s+=e[a].dist(e[a+1]),a++;for(var u=[],l=0;s<n/2;){var c=e[a-1],p=e[a],h=e[a+1];if(!h)return!1;var f=c.angleTo(p)-p.angleTo(h);for(f=Math.abs((f+3*Math.PI)%(2*Math.PI)-Math.PI),u.push({distance:s,angleDelta:f}),l+=f;s-u[0].distance>r;)l-=u.shift().angleDelta;if(l>o)return!1;a++,s+=p.dist(h)}return!0}t.exports=r},{}],198:[function(e,t,n){"use strict";function r(e,t,n,r,i){for(var a=[],s=0;s<e.length;s++)for(var u=e[s],l=void 0,c=0;c<u.length-1;c++){var p=u[c],h=u[c+1];p.x<t&&h.x<t||(p.x<t?p=new o(t,p.y+(h.y-p.y)*((t-p.x)/(h.x-p.x)))._round():h.x<t&&(h=new o(t,p.y+(h.y-p.y)*((t-p.x)/(h.x-p.x)))._round()),p.y<n&&h.y<n||(p.y<n?p=new o(p.x+(h.x-p.x)*((n-p.y)/(h.y-p.y)),n)._round():h.y<n&&(h=new o(p.x+(h.x-p.x)*((n-p.y)/(h.y-p.y)),n)._round()),p.x>=r&&h.x>=r||(p.x>=r?p=new o(r,p.y+(h.y-p.y)*((r-p.x)/(h.x-p.x)))._round():h.x>=r&&(h=new o(r,p.y+(h.y-p.y)*((r-p.x)/(h.x-p.x)))._round()),p.y>=i&&h.y>=i||(p.y>=i?p=new o(p.x+(h.x-p.x)*((i-p.y)/(h.y-p.y)),i)._round():h.y>=i&&(h=new o(p.x+(h.x-p.x)*((i-p.y)/(h.y-p.y)),i)._round()),l&&p.equals(l[l.length-1])||(l=[p],a.push(l)),l.push(h)))))}return a}var o=e("@mapbox/point-geometry");t.exports=r},{"@mapbox/point-geometry":2}],199:[function(e,t,n){"use strict";var r=e("../util/struct_array"),o=e("@mapbox/point-geometry"),i=r({members:[{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"offsetX"},{type:"Int16",name:"offsetY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Float32",name:"unadjustedMaxScale"},{type:"Float32",name:"maxScale"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"},{type:"Int16",name:"bbox0"},{type:"Int16",name:"bbox1"},{type:"Int16",name:"bbox2"},{type:"Int16",name:"bbox3"},{type:"Float32",name:"placementScale"}]});Object.defineProperty(i.prototype.StructType.prototype,"anchorPoint",{get:function(){return new o(this.anchorPointX,this.anchorPointY)}}),t.exports=i},{"../util/struct_array":249,"@mapbox/point-geometry":2}],200:[function(e,t,n){"use strict";var r=function(e,t,n,r,o,i,a,s,u,l,c){var p=a.top*s-u,h=a.bottom*s+u,f=a.left*s-u,d=a.right*s+u;if(this.boxStartIndex=e.length,l){var m=h-p,y=d-f;if(m>0)if(m=Math.max(10*s,m),c){var v=t[n.segment+1].sub(t[n.segment])._unit()._mult(y),g=[n.sub(v),n.add(v)];this._addLineCollisionBoxes(e,g,n,0,y,m,r,o,i)}else this._addLineCollisionBoxes(e,t,n,n.segment,y,m,r,o,i)}else e.emplaceBack(n.x,n.y,0,0,f,p,d,h,1/0,1/0,r,o,i,0,0,0,0,0);this.boxEndIndex=e.length};r.prototype._addLineCollisionBoxes=function(e,t,n,r,o,i,a,s,u){var l=i/2,c=Math.floor(o/l),p=Math.floor(c/2),h=-i/2,f=n,d=r+1,m=h,y=-o/2,v=y-o/8;do{if(--d<0){if(m>y)return;d=0;break}m-=t[d].dist(f),f=t[d]}while(m>v);for(var g=t[d].dist(t[d+1]),_=-p;_<c+p;_++){var b=_*l,w=y+b;if(b<0&&(w+=b),b>o&&(w+=b-o),!(w<m)){for(;m+g<w;){if(m+=g,++d+1>=t.length)return;g=t[d].dist(t[d+1])}var x=w-m,E=t[d],C=t[d+1],T=C.sub(E)._unit()._mult(x)._add(E)._round(),S=Math.max(Math.abs(w-h)-l/2,0),P=o/2/S;(_<0||_>=c)&&(P=Math.min(P,.99)),e.emplaceBack(T.x,T.y,T.x-n.x,T.y-n.y,-i/2,-i/2,i/2,i/2,P,P,a,s,u,0,0,0,0,0)}}},t.exports=r},{}],201:[function(e,t,n){"use strict";var r=e("@mapbox/point-geometry"),o=e("../data/extent"),i=e("grid-index"),a=e("../util/intersection_tests"),s=function(e,t,n,r,a,s,u){void 0===s&&(s=new i(o,12,6)),void 0===u&&(u=new i(o,12,0)),this.angle=e,this.pitch=t,this.cameraToCenterDistance=n,this.cameraToTileDistance=r,this.grid=s,this.ignoredGrid=u,this.perspectiveRatio=1+.5*(r/n-1),this.minScale=.5/this.perspectiveRatio,this.maxScale=2/this.perspectiveRatio;var l=Math.sin(this.angle),c=Math.cos(this.angle);this.rotationMatrix=[c,-l,l,c],this.reverseRotationMatrix=[c,l,-l,c],this.yStretch=Math.max(1,r/(n*Math.cos(t/180*Math.PI))),this.collisionBoxArray=a,0===a.length&&(a.emplaceBack(),a.emplaceBack(0,0,0,0,0,-o,0,o,1/0,1/0,0,0,0,0,0,0,0,0,0),a.emplaceBack(o,0,0,0,0,-o,0,o,1/0,1/0,0,0,0,0,0,0,0,0,0),a.emplaceBack(0,0,0,0,-o,0,o,0,1/0,1/0,0,0,0,0,0,0,0,0,0),a.emplaceBack(0,o,0,0,-o,0,o,0,1/0,1/0,0,0,0,0,0,0,0,0,0)),this.tempCollisionBox=a.get(0),this.edges=[a.get(1),a.get(2),a.get(3),a.get(4)]};s.deserialize=function(e,t){return new s(e.angle,e.pitch,e.cameraToCenterDistance,e.cameraToTileDistance,t,new i(e.grid),new i(e.ignoredGrid))},s.prototype.serialize=function(e){var t=this.grid.toArrayBuffer(),n=this.ignoredGrid.toArrayBuffer();return e&&(e.push(t),e.push(n)),{angle:this.angle,pitch:this.pitch,cameraToCenterDistance:this.cameraToCenterDistance,cameraToTileDistance:this.cameraToTileDistance,grid:t,ignoredGrid:n}},s.prototype.placeCollisionFeature=function(e,t,n){for(var o=this,i=this.collisionBoxArray,a=this.minScale,s=this.rotationMatrix,u=this.yStretch,l=e.boxStartIndex;l<e.boxEndIndex;l++){var c=i.get(l),p=c.anchorPoint._matMult(s),h=p.x,f=p.y,d=h+c.x1*o.perspectiveRatio,m=f+c.y1*u*o.perspectiveRatio,y=h+c.x2*o.perspectiveRatio,v=f+c.y2*u*o.perspectiveRatio;c.bbox0=d,c.bbox1=m,c.bbox2=y,c.bbox3=v;var g=new r(c.offsetX,c.offsetY)._matMult(s),_=g.x*g.x,b=g.y*g.y,w=b*u*u,x=Math.sqrt((_+w)/(_+b))||1;if(c.maxScale=c.unadjustedMaxScale*x,!t)for(var E=o.grid.query(d,m,y,v),C=0;C<E.length;C++){var T=i.get(E[C]),S=T.anchorPoint._matMult(s);if((a=o.getPlacementScale(a,p,c,S,T))>=o.maxScale)return a}if(n){var P=void 0;if(o.angle){var O=o.reverseRotationMatrix,A=new r(c.x1,c.y1).matMult(O),k=new r(c.x2,c.y1).matMult(O),I=new r(c.x1,c.y2).matMult(O),N=new r(c.x2,c.y2).matMult(O);P=o.tempCollisionBox,P.anchorPointX=c.anchorPoint.x,P.anchorPointY=c.anchorPoint.y,P.x1=Math.min(A.x,k.x,I.x,N.x),P.y1=Math.min(A.y,k.x,I.x,N.x),P.x2=Math.max(A.x,k.x,I.x,N.x),P.y2=Math.max(A.y,k.x,I.x,N.x),P.maxScale=c.maxScale}else P=c;for(var R=0;R<this.edges.length;R++){var M=o.edges[R];if((a=o.getPlacementScale(a,c.anchorPoint,P,M.anchorPoint,M))>=o.maxScale)return a}}}return a},s.prototype.queryRenderedSymbols=function(e,t){var n={},o=[];if(0===e.length||0===this.grid.keys.length&&0===this.ignoredGrid.keys.length)return o;for(var i=this.collisionBoxArray,s=this.rotationMatrix,u=this.yStretch,l=[],c=1/0,p=1/0,h=-1/0,f=-1/0,d=0;d<e.length;d++)for(var m=e[d],y=0;y<m.length;y++){var v=m[y].matMult(s);c=Math.min(c,v.x),p=Math.min(p,v.y),h=Math.max(h,v.x),f=Math.max(f,v.y),l.push(v)}for(var g=this.grid.query(c,p,h,f),_=this.ignoredGrid.query(c,p,h,f),b=0;b<_.length;b++)g.push(_[b]);for(var w=t/this.perspectiveRatio,x=Math.pow(2,Math.ceil(Math.log(w)/Math.LN2*10)/10),E=0;E<g.length;E++){var C=i.get(g[E]),T=C.sourceLayerIndex,S=C.featureIndex;if(void 0===n[T]&&(n[T]={}),!n[T][S]&&!(x<C.placementScale||x>C.maxScale)){var P=C.anchorPoint.matMult(s),O=P.x+C.x1/w,A=P.y+C.y1/w*u,k=P.x+C.x2/w,I=P.y+C.y2/w*u,N=[new r(O,A),new r(k,A),new r(k,I),new r(O,I)];a.polygonIntersectsPolygon(l,N)&&(n[T][S]=!0,o.push(g[E]))}}return o},s.prototype.getPlacementScale=function(e,t,n,r,o){var i=t.x-r.x,a=t.y-r.y,s=(o.x1-n.x2)/i,u=(o.x2-n.x1)/i,l=(o.y1-n.y2)*this.yStretch/a,c=(o.y2-n.y1)*this.yStretch/a;(isNaN(s)||isNaN(u))&&(s=u=1),(isNaN(l)||isNaN(c))&&(l=c=1);var p=Math.min(Math.max(s,u),Math.max(l,c)),h=o.maxScale,f=n.maxScale;return p>h&&(p=h),p>f&&(p=f),p>e&&p>=o.placementScale&&(e=p),e},s.prototype.insertCollisionFeature=function(e,t,n){for(var r=this,o=n?this.ignoredGrid:this.grid,i=this.collisionBoxArray,a=e.boxStartIndex;a<e.boxEndIndex;a++){var s=i.get(a);s.placementScale=t,t<r.maxScale&&(1===r.perspectiveRatio||s.maxScale>=1)&&o.insert(a,s.bbox0,s.bbox1,s.bbox2,s.bbox3)}},t.exports=s},{"../data/extent":58,"../util/intersection_tests":243,"@mapbox/point-geometry":2,"grid-index":23}],202:[function(e,t,n){"use strict";function r(e,t,n,r,i,a,s,u,l){var c=r?.6*a*s:0,p=Math.max(r?r.right-r.left:0,i?i.right-i.left:0),h=0===e[0].x||e[0].x===l||0===e[0].y||e[0].y===l;t-p*s<t/4&&(t=p*s+t/4);var f=2*a;return o(e,h?t/2*u%t:(p/2+f)*s*u%t,t,c,n,p*s,h,!1,l)}function o(e,t,n,r,u,l,c,p,h){for(var f=l/2,d=0,m=0;m<e.length-1;m++)d+=e[m].dist(e[m+1]);for(var y=0,v=t-n,g=[],_=0;_<e.length-1;_++){for(var b=e[_],w=e[_+1],x=b.dist(w),E=w.angleTo(b);v+n<y+x;){v+=n;var C=(v-y)/x,T=i(b.x,w.x,C),S=i(b.y,w.y,C);if(T>=0&&T<h&&S>=0&&S<h&&v-f>=0&&v+f<=d){var P=new a(T,S,E,_);P._round(),r&&!s(e,P,l,r,u)||g.push(P)}}y+=x}return p||g.length||c||(g=o(e,y/2,n,r,u,l,c,!0,h)),g}var i=e("../style-spec/util/interpolate"),a=e("../symbol/anchor"),s=e("./check_max_angle");t.exports=r},{"../style-spec/util/interpolate":152,"../symbol/anchor":196,"./check_max_angle":197}],203:[function(e,t,n){"use strict";t.exports=function(e){function t(t){s.push(e[t]),u++}function n(e,t,n){var r=a[e];return delete a[e],a[t]=r,s[r].geometry[0].pop(),s[r].geometry[0]=s[r].geometry[0].concat(n[0]),r}function r(e,t,n){var r=i[t];return delete i[t],i[e]=r,s[r].geometry[0].shift(),s[r].geometry[0]=n[0].concat(s[r].geometry[0]),r}function o(e,t,n){var r=n?t[0][t[0].length-1]:t[0][0];return e+":"+r.x+":"+r.y}for(var i={},a={},s=[],u=0,l=0;l<e.length;l++){var c=e[l],p=c.geometry,h=c.text;if(h){var f=o(h,p),d=o(h,p,!0);if(f in a&&d in i&&a[f]!==i[d]){var m=r(f,d,p),y=n(f,d,s[m].geometry);delete i[f],delete a[d],a[o(h,s[y].geometry,!0)]=y,s[m].geometry=null}else f in a?n(f,d,p):d in i?r(f,d,p):(t(l),i[f]=u-1,a[d]=u-1)}else t(l)}return s.filter(function(e){return e.geometry})}},{}],204:[function(e,t,n){"use strict";function r(e,t,n,r,o){var i=d.identity(new Float32Array(16));return t?(d.identity(i),d.scale(i,i,[1/o,1/o,1]),n||d.rotateZ(i,i,r.angle)):(d.scale(i,i,[r.width/2,-r.height/2,1]),d.translate(i,i,[1,-1,0]),d.multiply(i,i,e)),i}function o(e,t,n,r,o){var i=d.identity(new Float32Array(16));return t?(d.multiply(i,i,e),d.scale(i,i,[o,o,1]),n||d.rotateZ(i,i,-r.angle)):(d.scale(i,i,[1,-1,1]),d.translate(i,i,[-1,-1,0]),d.scale(i,i,[2/r.width,2/r.height,1])),i}function i(e,t){var n=[e.x,e.y,0,1];m.transformMat4(n,n,t);var r=n[3];return{point:new h(n[0]/r,n[1]/r),signedDistanceFromCamera:r}}function a(e,t,n,r){var o=e[0]/e[3],i=e[1]/e[3];return o>=-n[0]&&o<=n[0]&&i>=-n[1]&&i<=n[1]&&r.frameHistory.isVisible(t)}function s(e,t,n,r,o,s,l,c,f,d){var v=r?e.textSizeData:e.iconSizeData,g=y.evaluateSizeForZoom(v,n.transform,d,r),_=[256/n.width*2+1,256/n.height*2+1],b=r?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;b.clear();for(var w=e.lineVertexArray,x=r?e.placedGlyphArray:e.placedIconArray,E=0;E<x.length;E++){var C=x.get(E),T=[C.anchorX,C.anchorY,0,1];if(m.transformMat4(T,T,t),a(T,C.placementZoom,_,n)){var S=T[3],P=1+.5*(S/n.transform.cameraToCenterDistance-1),O=y.evaluateSizeForFeature(v,g,C),A=l?O*P:O/P,k=new h(C.anchorX,C.anchorY),I=i(k,o).point,N={},R=u(C,A,!1,c,t,o,s,e.glyphOffsetArray,w,b,I,k,N);(R.notEnoughRoom||R.needsFlipping&&u(C,A,!0,c,t,o,s,e.glyphOffsetArray,w,b,I,k,N).notEnoughRoom)&&p(C.numGlyphs,b)}else p(C.numGlyphs,b)}r?e.text.dynamicLayoutVertexBuffer.updateData(b.serialize()):e.icon.dynamicLayoutVertexBuffer.updateData(b.serialize())}function u(e,t,n,r,o,a,s,u,p,f,d,m,y){var v,_=t/24,b=e.lineOffsetX*t,w=e.lineOffsetY*t;if(e.numGlyphs>1){var x=e.glyphStartIndex+e.numGlyphs,E=u.get(e.glyphStartIndex).offsetX,C=u.get(x-1).offsetX,T=e.lineStartIndex,S=e.lineStartIndex+e.lineLength,P=c(_*E,b,w,n,d,m,e.segment,T,S,p,a,y);if(!P)return{notEnoughRoom:!0};var O=c(_*C,b,w,n,d,m,e.segment,T,S,p,a,y);if(!O)return{notEnoughRoom:!0};var A=i(P.point,s).point,k=i(O.point,s).point;if(r&&!n&&(e.vertical?A.y<k.y:A.x>k.x))return{needsFlipping:!0};v=[P];for(var I=e.glyphStartIndex+1;I<x-1;I++){var N=u.get(I);v.push(c(_*N.offsetX,b,w,n,d,m,e.segment,T,S,p,a,y))}v.push(O)}else{if(r&&!n){var R=i(m,o).point,M=p.get(e.lineStartIndex+e.segment+1),D=i(M,o),L=D.signedDistanceFromCamera>0?D.point:l(m,new h(M.x,M.y),R,1,o);if(e.vertical?L.y>R.y:L.x<R.x)return{needsFlipping:!0}}var F=u.get(e.glyphStartIndex),j=c(_*F.offsetX,b,w,n,d,m,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,p,a,y);if(!j)return{notEnoughRoom:!0};v=[j]}for(var z=e.placementZoom,B=0,U=v;B<U.length;B+=1){var V=U[B];g(f,V.point,V.angle,z)}return{}}function l(e,t,n,r,o){var a=i(e.add(e.sub(t)._unit()),o).point,s=n.sub(a);return n.add(s._mult(r/s.mag()))}function c(e,t,n,r,o,a,s,u,c,p,f,d){var m=r?e-t:e+t,y=m>0?1:-1,v=0;r&&(y*=-1,v=Math.PI),y<0&&(v+=Math.PI);for(var g=y>0?u+s:u+s+1,_=o,b=o,w=0,x=0,E=Math.abs(m);w+x<=E;){if((g+=y)<u||g>=c)return null;if(b=_,void 0===(_=d[g])){var C=i(p.get(g),f);_=C.signedDistanceFromCamera>0?d[g]=C.point:l(0===w?a:new h(p.get(g-y).x,p.get(g-y).y),new h(p.get(g).x,p.get(g).y),b,E-w+1,f)}w+=x,x=b.dist(_)}var T=(E-w)/x,S=_.sub(b),P=S.mult(T)._add(b);return P._add(S._unit()._perp()._mult(n*y)),{point:P,angle:v+Math.atan2(_.y-b.y,_.x-b.x)}}function p(e,t){for(var n=0;n<e;n++)g(t,_,0,25)}var h=e("@mapbox/point-geometry"),f=e("@mapbox/gl-matrix"),d=f.mat4,m=f.vec4,y=e("./symbol_size"),v=e("../data/bucket/symbol_bucket"),g=v.addDynamicAttributes;t.exports={updateLineLabels:s,getLabelPlaneMatrix:r,getGlCoordMatrix:o};var _=new h(-1/0,-1/0)},{"../data/bucket/symbol_bucket":57,"./symbol_size":207,"@mapbox/gl-matrix":1,"@mapbox/point-geometry":2}],205:[function(e,t,n){"use strict";function r(e,t,n,r,o,a,s){var u,l,c,p,h=t.image,f=n.layout,d=t.top-1/h.pixelRatio,m=t.left-1/h.pixelRatio,y=t.bottom+1/h.pixelRatio,v=t.right+1/h.pixelRatio;if("none"!==f["icon-text-fit"]&&o){var g=v-m,_=y-d,b=f["text-size"]/24,w=o.left*b,x=o.right*b,E=o.top*b,C=o.bottom*b,T=x-w,S=C-E,P=f["icon-text-fit-padding"][0],O=f["icon-text-fit-padding"][1],A=f["icon-text-fit-padding"][2],k=f["icon-text-fit-padding"][3],I="width"===f["icon-text-fit"]?.5*(S-_):0,N="height"===f["icon-text-fit"]?.5*(T-g):0,R="width"===f["icon-text-fit"]||"both"===f["icon-text-fit"]?T:g,M="height"===f["icon-text-fit"]||"both"===f["icon-text-fit"]?S:_;u=new i(w+N-k,E+I-P),l=new i(w+N+O+R,E+I-P),c=new i(w+N+O+R,E+I+A+M),p=new i(w+N-k,E+I+A+M)}else u=new i(m,d),l=new i(v,d),c=new i(v,y),p=new i(m,y);var D=n.getLayoutValue("icon-rotate",a,s)*Math.PI/180;if(D){var L=Math.sin(D),F=Math.cos(D),j=[F,-L,L,F];u._matMult(j),l._matMult(j),p._matMult(j),c._matMult(j)}return[{tl:u,tr:l,bl:p,br:c,tex:{x:h.textureRect.x-1,y:h.textureRect.y-1,w:h.textureRect.w+2,h:h.textureRect.h+2},writingMode:void 0,glyphOffset:[0,0]}]}function o(e,t,n,r,o,a,u){for(var l=n.getLayoutValue("text-rotate",o,a)*Math.PI/180,c=n.getLayoutValue("text-offset",o,a).map(function(e){return 24*e}),p=t.positionedGlyphs,h=[],f=0;f<p.length;f++){var d=p[f],m=u[d.glyph];if(m){var y=m.rect;if(y){var v=s+1,g=m.metrics.advance/2,_=r?[d.x+g,d.y]:[0,0],b=r?[0,0]:[d.x+g+c[0],d.y+c[1]],w=m.metrics.left-v-g+b[0],x=-m.metrics.top-v+b[1],E=w+y.w,C=x+y.h,T=new i(w,x),S=new i(E,x),P=new i(w,C),O=new i(E,C);if(r&&d.vertical){var A=new i(-g,g),k=-Math.PI/2,I=new i(5,0);T._rotateAround(k,A)._add(I),S._rotateAround(k,A)._add(I),P._rotateAround(k,A)._add(I),O._rotateAround(k,A)._add(I)}if(l){var N=Math.sin(l),R=Math.cos(l),M=[R,-N,N,R];T._matMult(M),S._matMult(M),P._matMult(M),O._matMult(M)}h.push({tl:T,tr:S,bl:P,br:O,tex:y,writingMode:t.writingMode,glyphOffset:_})}}}return h}var i=e("@mapbox/point-geometry"),a=e("../style/parse_glyph_pbf"),s=a.GLYPH_PBF_BORDER;t.exports={getIconQuads:r,getGlyphQuads:o}},{"../style/parse_glyph_pbf":180,"@mapbox/point-geometry":2}],206:[function(e,t,n){"use strict";function r(e,t){for(var n=[],r=0,o=0,i=t;o<i.length;o+=1){var a=i[o];n.push(e.substring(r,a)),r=a}return r<e.length&&n.push(e.substring(r,e.length)),n}function o(e,t,n,o,i,a,s,u,l,p){var f=e.trim();p===_.vertical&&(f=v(f));var d,m=[],y={positionedGlyphs:m,text:f,top:u[1],bottom:u[1],left:u[0],right:u[0],writingMode:p},b=g.processBidirectionalText;return d=b?b(f,c(f,s,n,t)):r(f,c(f,s,n,t)),h(y,t,d,o,i,a,p,s,l),!!m.length&&y}function i(e,t,n,r){for(var o=0,i=0;i<e.length;i++){var a=r[e.charCodeAt(i)];a&&(o+=a.metrics.advance+t)}return o/Math.max(1,Math.ceil(o/n))}function a(e,t,n,r){var o=Math.pow(e-t,2);return r?e<t?o/2:2*o:o+Math.abs(n)*n}function s(e,t){var n=0;return 10===e&&(n-=1e4),40!==e&&65288!==e||(n+=50),41!==t&&65289!==t||(n+=50),n}function u(e,t,n,r,o,i){for(var s=null,u=a(t,n,o,i),l=0,c=r;l<c.length;l+=1){var p=c[l],h=t-p.x,f=a(h,n,o,i)+p.badness;f<=u&&(s=p,u=f)}return{index:e,x:t,priorBreak:s,badness:u}}function l(e){return e?l(e.priorBreak).concat(e.index):[]}function c(e,t,n,r){if(!n)return[];if(!e)return[];for(var o=[],a=i(e,t,n,r),c=0,p=0;p<e.length;p++){var h=e.charCodeAt(p),f=r[h];f&&!b[h]&&(c+=f.metrics.advance+t),p<e.length-1&&(w[h]||y.charAllowsIdeographicBreaking(h))&&o.push(u(p+1,c,a,o,s(h,e.charCodeAt(p+1)),!1))}return l(u(e.length,c,a,o,0,!0))}function p(e){var t=.5,n=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:t,verticalAlign:n}}function h(e,t,n,r,o,i,a,s,u){for(var l=0,c=-17,h=0,m=e.positionedGlyphs,v="right"===i?1:"left"===i?0:.5,g=0,b=n;g<b.length;g+=1){var w=b[g];if(w=w.trim(),w.length){for(var x=m.length,E=0;E<w.length;E++){var C=w.charCodeAt(E),T=t[C];T&&(y.charHasUprightVerticalOrientation(C)&&a!==_.horizontal?(m.push({glyph:C,x:l,y:0,vertical:!0}),l+=u+s):(m.push({glyph:C,x:l,y:c,vertical:!1}),l+=T.metrics.advance+s))}if(m.length!==x){var S=l-s;h=Math.max(S,h),f(m,t,x,m.length-1,v)}l=0,c+=r}else c+=r}var P=p(o),O=P.horizontalAlign,A=P.verticalAlign;d(m,v,O,A,h,r,n.length);var k=n.length*r;e.top+=-A*k,e.bottom=e.top+k,e.left+=-O*h,e.right=e.left+h}function f(e,t,n,r,o){if(o){var i=t[e[r].glyph];if(i)for(var a=i.metrics.advance,s=(e[r].x+a)*o,u=n;u<=r;u++)e[u].x-=s}}function d(e,t,n,r,o,i,a){for(var s=(t-n)*o,u=(-r*a+.5)*i,l=0;l<e.length;l++)e[l].x+=s,e[l].y+=u}function m(e,t,n){var r=p(n),o=r.horizontalAlign,i=r.verticalAlign,a=t[0],s=t[1],u=a-e.displaySize[0]*o,l=u+e.displaySize[0],c=s-e.displaySize[1]*i;return{image:e,top:c,bottom:c+e.displaySize[1],left:u,right:l}}var y=e("../util/script_detection"),v=e("../util/verticalize_punctuation"),g=e("../source/rtl_text_plugin"),_={horizontal:1,vertical:2};t.exports={shapeText:o,shapeIcon:m,WritingMode:_};var b={};b[9]=!0,b[10]=!0,b[11]=!0,b[12]=!0,b[13]=!0,b[32]=!0;var w={};w[10]=!0,w[32]=!0,w[38]=!0,w[40]=!0,w[41]=!0,w[43]=!0,w[45]=!0,w[47]=!0,w[173]=!0,w[183]=!0,w[8203]=!0,w[8208]=!0,w[8211]=!0,w[8231]=!0},{"../source/rtl_text_plugin":108,"../util/script_detection":247,"../util/verticalize_punctuation":254}],207:[function(e,t,n){"use strict";function r(e,t,n){var r=t.getLayoutDeclaration(n),o=!r||r.expression.isFeatureConstant;if(!r||r.expression.isZoomConstant)return o?{functionType:"constant",layoutSize:t.getLayoutValue(n,{zoom:e+1})}:{functionType:"source"};for(var i=r.expression.zoomStops,a=0;a<i.length&&i[a]<=e;)a++;a=Math.max(0,a-1);for(var s=a;s<i.length&&i[s]<e+1;)s++;s=Math.min(i.length-1,s);var u=[i[a],i[s]];return o?{functionType:"camera",layoutSize:t.getLayoutValue(n,{zoom:e+1}),coveringZoomRange:u,coveringStopValues:[t.getLayoutValue(n,{zoom:i[a]}),t.getLayoutValue(n,{zoom:i[s]})]}:{functionType:"composite",coveringZoomRange:u}}function o(e,t,n){var r=t;return"source"===e.functionType?n.lowerSize/10:"composite"===e.functionType?a.number(n.lowerSize/10,n.upperSize/10,r.uSizeT):r.uSize}function i(e,t,n,r){var o={};if("composite"===e.functionType){var i=n.getLayoutDeclaration(r?"text-size":"icon-size"),a=i.interpolationFactor(t.zoom,e.coveringZoomRange[0],e.coveringZoomRange[1]);o.uSizeT=s.clamp(a,0,1)}else if("camera"===e.functionType){var u=n.getLayoutDeclaration(r?"text-size":"icon-size"),l=u.interpolationFactor(t.zoom,e.coveringZoomRange[0],e.coveringZoomRange[1]),c=e.coveringStopValues[0],p=e.coveringStopValues[1];o.uSize=c+(p-c)*s.clamp(l,0,1)}else"constant"===e.functionType&&(o.uSize=e.layoutSize);return o}var a=e("../style-spec/util/interpolate"),s=e("../util/util");t.exports={getSizeData:r,evaluateSizeForFeature:o,evaluateSizeForZoom:i}},{"../style-spec/util/interpolate":152,"../util/util":252}],208:[function(e,t,n){"use strict";var r=e("../source/rtl_text_plugin");t.exports=function(e,t,n,o){var i=t.getLayoutValue("text-transform",n,o);return"uppercase"===i?e=e.toLocaleUpperCase():"lowercase"===i&&(e=e.toLocaleLowerCase()),r.applyArabicShaping&&(e=r.applyArabicShaping(e)),e}},{"../source/rtl_text_plugin":108}],209:[function(e,t,n){"use strict";var r=e("../util/dom"),o=e("@mapbox/point-geometry"),i={scrollZoom:e("./handler/scroll_zoom"),boxZoom:e("./handler/box_zoom"),dragRotate:e("./handler/drag_rotate"),dragPan:e("./handler/drag_pan"),keyboard:e("./handler/keyboard"),doubleClickZoom:e("./handler/dblclick_zoom"),touchZoomRotate:e("./handler/touch_zoom_rotate")};t.exports=function(e,t){function n(e){v("mouseout",e)}function a(t){e.doubleClickZoom.isActive()||e.stop(),x=r.mousePos(_,t),v("mousedown",t),w=!0}function s(t){var n=e.dragRotate&&e.dragRotate.isActive();b&&!n&&v("contextmenu",b),b=null,w=!1,v("mouseup",t)}function u(t){if(!(e.dragPan&&e.dragPan.isActive()||e.dragRotate&&e.dragRotate.isActive())){for(var n=t.toElement||t.target;n&&n!==_;)n=n.parentNode;n===_&&v("mousemove",t)}}function l(t){e.stop(),g("touchstart",t),!t.touches||t.touches.length>1||(E?(clearTimeout(E),E=null,v("dblclick",t)):E=setTimeout(f,300))}function c(e){g("touchmove",e)}function p(e){g("touchend",e)}function h(e){g("touchcancel",e)}function f(){E=null}function d(e){r.mousePos(_,e).equals(x)&&v("click",e)}function m(e){v("dblclick",e),e.preventDefault()}function y(t){var n=e.dragRotate&&e.dragRotate.isActive();w||n?w&&(b=t):v("contextmenu",t),t.preventDefault()}function v(t,n){var o=r.mousePos(_,n);return e.fire(t,{lngLat:e.unproject(o),point:o,originalEvent:n})}function g(t,n){var i=r.touchPos(_,n),a=i.reduce(function(e,t,n,r){return e.add(t.div(r.length))},new o(0,0));return e.fire(t,{lngLat:e.unproject(a),point:a,lngLats:i.map(function(t){return e.unproject(t)},this),points:i,originalEvent:n})}var _=e.getCanvasContainer(),b=null,w=!1,x=null,E=null;for(var C in i)e[C]=new i[C](e,t),t.interactive&&t[C]&&e[C].enable(t[C]);_.addEventListener("mouseout",n,!1),_.addEventListener("mousedown",a,!1),_.addEventListener("mouseup",s,!1),_.addEventListener("mousemove",u,!1),_.addEventListener("touchstart",l,!1),_.addEventListener("touchend",p,!1),_.addEventListener("touchmove",c,!1),_.addEventListener("touchcancel",h,!1),_.addEventListener("click",d,!1),_.addEventListener("dblclick",m,!1),_.addEventListener("contextmenu",y,!1)}},{"../util/dom":238,"./handler/box_zoom":218,"./handler/dblclick_zoom":219,"./handler/drag_pan":220,"./handler/drag_rotate":221,"./handler/keyboard":222,"./handler/scroll_zoom":223,"./handler/touch_zoom_rotate":224,"@mapbox/point-geometry":2}],210:[function(e,t,n){"use strict";var r=e("../util/util"),o=e("../style-spec/util/interpolate"),i=e("../util/browser"),a=e("../geo/lng_lat"),s=e("../geo/lng_lat_bounds"),u=e("@mapbox/point-geometry"),l=e("../util/evented"),c=function(e){function t(t,n){e.call(this),this.moving=!1,this.transform=t,this._bearingSnap=n.bearingSnap}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getCenter=function(){return this.transform.center},t.prototype.setCenter=function(e,t){return this.jumpTo({center:e},t)},t.prototype.panBy=function(e,t,n){return e=u.convert(e).mult(-1),this.panTo(this.transform.center,r.extend({offset:e},t),n)},t.prototype.panTo=function(e,t,n){return this.easeTo(r.extend({center:e},t),n)},t.prototype.getZoom=function(){return this.transform.zoom},t.prototype.setZoom=function(e,t){return this.jumpTo({zoom:e},t),this},t.prototype.zoomTo=function(e,t,n){return this.easeTo(r.extend({zoom:e},t),n)},t.prototype.zoomIn=function(e,t){return this.zoomTo(this.getZoom()+1,e,t),this},t.prototype.zoomOut=function(e,t){return this.zoomTo(this.getZoom()-1,e,t),this},t.prototype.getBearing=function(){return this.transform.bearing},t.prototype.setBearing=function(e,t){return this.jumpTo({bearing:e},t),this},t.prototype.rotateTo=function(e,t,n){return this.easeTo(r.extend({bearing:e},t),n)},t.prototype.resetNorth=function(e,t){return this.rotateTo(0,r.extend({duration:1e3},e),t),this},t.prototype.snapToNorth=function(e,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,t):this},t.prototype.getPitch=function(){return this.transform.pitch},t.prototype.setPitch=function(e,t){return this.jumpTo({pitch:e},t),this},t.prototype.fitBounds=function(e,t,n){if(t=r.extend({padding:{top:0,bottom:0,right:0,left:0},offset:[0,0],maxZoom:this.transform.maxZoom},t),"number"==typeof t.padding){var o=t.padding;t.padding={top:o,bottom:o,right:o,left:o}}if(!r.deepEqual(Object.keys(t.padding).sort(function(e,t){return e<t?-1:e>t?1:0}),["bottom","left","right","top"]))return r.warnOnce("options.padding must be a positive number, or an Object with keys 'bottom', 'left', 'right', 'top'"),this;e=s.convert(e);var i=[t.padding.left-t.padding.right,t.padding.top-t.padding.bottom],a=Math.min(t.padding.right,t.padding.left),l=Math.min(t.padding.top,t.padding.bottom);t.offset=[t.offset[0]+i[0],t.offset[1]+i[1]];var c=u.convert(t.offset),p=this.transform,h=p.project(e.getNorthWest()),f=p.project(e.getSouthEast()),d=f.sub(h),m=(p.width-2*a-2*Math.abs(c.x))/d.x,y=(p.height-2*l-2*Math.abs(c.y))/d.y;return y<0||m<0?(r.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset."),this):(t.center=p.unproject(h.add(f).div(2)),t.zoom=Math.min(p.scaleZoom(p.scale*Math.min(m,y)),t.maxZoom),t.bearing=0,t.linear?this.easeTo(t,n):this.flyTo(t,n))},t.prototype.jumpTo=function(e,t){this.stop();var n=this.transform,r=!1,o=!1,i=!1;return"zoom"in e&&n.zoom!==+e.zoom&&(r=!0,n.zoom=+e.zoom),void 0!==e.center&&(n.center=a.convert(e.center)),"bearing"in e&&n.bearing!==+e.bearing&&(o=!0,n.bearing=+e.bearing),"pitch"in e&&n.pitch!==+e.pitch&&(i=!0,n.pitch=+e.pitch),this.fire("movestart",t).fire("move",t),r&&this.fire("zoomstart",t).fire("zoom",t).fire("zoomend",t),o&&this.fire("rotate",t),i&&this.fire("pitchstart",t).fire("pitch",t).fire("pitchend",t),this.fire("moveend",t)},t.prototype.easeTo=function(e,t){var n=this;this.stop(),e=r.extend({offset:[0,0],duration:500,easing:r.ease},e),!1===e.animate&&(e.duration=0),e.smoothEasing&&0!==e.duration&&(e.easing=this._smoothOutEasing(e.duration));var i=this.transform,s=this.getZoom(),l=this.getBearing(),c=this.getPitch(),p="zoom"in e?+e.zoom:s,h="bearing"in e?this._normalizeBearing(e.bearing,l):l,f="pitch"in e?+e.pitch:c,d=i.centerPoint.add(u.convert(e.offset)),m=i.pointLocation(d),y=a.convert(e.center||m);this._normalizeCenter(y);var v,g,_=i.project(m),b=i.project(y).sub(_),w=i.zoomScale(p-s);return e.around&&(v=a.convert(e.around),g=i.locationPoint(v)),this.zooming=p!==s,this.rotating=l!==h,this.pitching=f!==c,this._prepareEase(t,e.noMoveStart),clearTimeout(this._onEaseEnd),this._ease(function(e){if(this.zooming&&(i.zoom=o(s,p,e)),this.rotating&&(i.bearing=o(l,h,e)),this.pitching&&(i.pitch=o(c,f,e)),v)i.setLocationAtPoint(v,g);else{var n=i.zoomScale(i.zoom-s),r=p>s?Math.min(2,w):Math.max(.5,w),a=Math.pow(r,1-e),u=i.unproject(_.add(b.mult(e*a)).mult(n));i.setLocationAtPoint(i.renderWorldCopies?u.wrap():u,d)}this._fireMoveEvents(t)},function(){e.delayEndEvents?n._onEaseEnd=setTimeout(function(){return n._easeToEnd(t)},e.delayEndEvents):n._easeToEnd(t)},e),this},t.prototype._prepareEase=function(e,t){this.moving=!0,t||this.fire("movestart",e),this.zooming&&this.fire("zoomstart",e),this.pitching&&this.fire("pitchstart",e)},t.prototype._fireMoveEvents=function(e){this.fire("move",e),this.zooming&&this.fire("zoom",e),this.rotating&&this.fire("rotate",e),this.pitching&&this.fire("pitch",e)},t.prototype._easeToEnd=function(e){var t=this.zooming,n=this.pitching;this.moving=!1,this.zooming=!1,this.rotating=!1,this.pitching=!1,t&&this.fire("zoomend",e),n&&this.fire("pitchend",e),this.fire("moveend",e)},t.prototype.flyTo=function(e,t){function n(e){var t=(S*S-T*T+(e?-1:1)*k*k*P*P)/(2*(e?S:T)*k*P);return Math.log(Math.sqrt(t*t+1)-t)}function i(e){return(Math.exp(e)-Math.exp(-e))/2}function s(e){return(Math.exp(e)+Math.exp(-e))/2}function l(e){return i(e)/s(e)}var c=this;this.stop(),e=r.extend({offset:[0,0],speed:1.2,curve:1.42,easing:r.ease},e);var p=this.transform,h=this.getZoom(),f=this.getBearing(),d=this.getPitch(),m="zoom"in e?r.clamp(+e.zoom,p.minZoom,p.maxZoom):h,y="bearing"in e?this._normalizeBearing(e.bearing,f):f,v="pitch"in e?+e.pitch:d,g=p.zoomScale(m-h),_=p.centerPoint.add(u.convert(e.offset)),b=p.pointLocation(_),w=a.convert(e.center||b);this._normalizeCenter(w);var x=p.project(b),E=p.project(w).sub(x),C=e.curve,T=Math.max(p.width,p.height),S=T/g,P=E.mag();if("minZoom"in e){var O=r.clamp(Math.min(e.minZoom,h,m),p.minZoom,p.maxZoom),A=T/p.zoomScale(O-h);C=Math.sqrt(A/P*2)}var k=C*C,I=n(0),N=function(e){return s(I)/s(I+C*e)},R=function(e){return T*((s(I)*l(I+C*e)-i(I))/k)/P},M=(n(1)-I)/C;if(Math.abs(P)<1e-6||!isFinite(M)){if(Math.abs(T-S)<1e-6)return this.easeTo(e,t);var D=S<T?-1:1;M=Math.abs(Math.log(S/T))/C,R=function(){return 0},N=function(e){return Math.exp(D*C*e)}}if("duration"in e)e.duration=+e.duration;else{var L="screenSpeed"in e?+e.screenSpeed/C:+e.speed;e.duration=1e3*M/L}return e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this.zooming=!0,this.rotating=f!==y,this.pitching=v!==d,this._prepareEase(t,!1),this._ease(function(e){var n=e*M,r=1/N(n);p.zoom=h+p.scaleZoom(r),this.rotating&&(p.bearing=o(f,y,e)),this.pitching&&(p.pitch=o(d,v,e));var i=p.unproject(x.add(E.mult(R(n))).mult(r));p.setLocationAtPoint(p.renderWorldCopies?i.wrap():i,_),this._fireMoveEvents(t)},function(){return c._easeToEnd(t)},e),this},t.prototype.isEasing=function(){return!!this._abortFn},t.prototype.isMoving=function(){return this.moving},t.prototype.stop=function(){return this._abortFn&&(this._abortFn(),this._finishEase()),this},t.prototype._ease=function(e,t,n){this._finishFn=t,this._abortFn=i.timed(function(t){e.call(this,n.easing(t)),1===t&&this._finishEase()},!1===n.animate?0:n.duration,this)},t.prototype._finishEase=function(){delete this._abortFn;var e=this._finishFn;delete this._finishFn,e.call(this)},t.prototype._normalizeBearing=function(e,t){e=r.wrap(e,-180,180);var n=Math.abs(e-t);return Math.abs(e-360-t)<n&&(e-=360),Math.abs(e+360-t)<n&&(e+=360),e},t.prototype._normalizeCenter=function(e){var t=this.transform;if(t.renderWorldCopies&&!t.lngRange){var n=e.lng-t.center.lng;e.lng+=n>180?-360:n<-180?360:0}},t.prototype._smoothOutEasing=function(e){var t=r.ease;if(this._prevEase){var n=this._prevEase,o=(Date.now()-n.start)/n.duration,i=n.easing(o+.01)-n.easing(o),a=.27/Math.sqrt(i*i+1e-4)*.01,s=Math.sqrt(.0729-a*a);t=r.bezier(a,s,.25,1)}return this._prevEase={start:(new Date).getTime(),duration:e,easing:t},t},t}(l);t.exports=c},{"../geo/lng_lat":68,"../geo/lng_lat_bounds":69,"../style-spec/util/interpolate":152,"../util/browser":231,"../util/evented":239,"../util/util":252,"@mapbox/point-geometry":2}],211:[function(e,t,n){"use strict";var r=e("../../util/dom"),o=e("../../util/util"),i=e("../../util/config"),a=function(e){this.options=e,o.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};a.prototype.getDefaultPosition=function(){return"bottom-right"},a.prototype.onAdd=function(e){var t=this.options&&this.options.compact;return this._map=e,this._container=r.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),t&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===t&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},a.prototype.onRemove=function(){r.remove(this._container),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0},a.prototype._updateEditLink=function(){var e=this._editLink;e||(e=this._editLink=this._container.querySelector(".mapbox-improve-map"));var t=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:i.ACCESS_TOKEN}];if(e){var n=t.reduce(function(e,n,r){return n.value&&(e+=n.key+"="+n.value+(r<t.length-1?"&":"")),e},"?");e.href="https://www.mapbox.com/feedback/"+n+(this._map._hash?this._map._hash.getHashString(!0):"")}},a.prototype._updateData=function(e){e&&"metadata"===e.sourceDataType&&(this._updateAttributions(),this._updateEditLink())},a.prototype._updateAttributions=function(){if(this._map.style){var e=[];if(this._map.style.stylesheet){var t=this._map.style.stylesheet;this.styleOwner=t.owner,this.styleId=t.id}var n=this._map.style.sourceCaches;for(var r in n){var o=n[r].getSource();o.attribution&&e.indexOf(o.attribution)<0&&e.push(o.attribution)}e.sort(function(e,t){return e.length-t.length}),e=e.filter(function(t,n){for(var r=n+1;r<e.length;r++)if(e[r].indexOf(t)>=0)return!1;return!0}),this._container.innerHTML=e.join(" | "),this._editLink=null}},a.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")},t.exports=a},{"../../util/config":235,"../../util/dom":238,"../../util/util":252}],212:[function(e,t,n){"use strict";var r=e("../../util/dom"),o=e("../../util/util"),i=e("../../util/window"),a=function(){this._fullscreen=!1,o.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in i.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in i.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in i.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in i.document&&(this._fullscreenchange="MSFullscreenChange"),this._className="mapboxgl-ctrl"};a.prototype.onAdd=function(e){return this._map=e,this._mapContainer=this._map.getContainer(),this._container=r.create("div",this._className+" mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._container.style.display="none",o.warnOnce("This device does not support fullscreen mode.")),this._container},a.prototype.onRemove=function(){r.remove(this._container),this._map=null,i.document.removeEventListener(this._fullscreenchange,this._changeIcon)},a.prototype._checkFullscreenSupport=function(){return!!(i.document.fullscreenEnabled||i.document.mozFullScreenEnabled||i.document.msFullscreenEnabled||i.document.webkitFullscreenEnabled)},a.prototype._setupUI=function(){var e=this._fullscreenButton=r.create("button",this._className+"-icon "+this._className+"-fullscreen",this._container);e.setAttribute("aria-label","Toggle fullscreen"),e.type="button",this._fullscreenButton.addEventListener("click",this._onClickFullscreen),i.document.addEventListener(this._fullscreenchange,this._changeIcon)},a.prototype._isFullscreen=function(){return this._fullscreen},a.prototype._changeIcon=function(){(i.document.fullscreenElement||i.document.mozFullScreenElement||i.document.webkitFullscreenElement||i.document.msFullscreenElement)===this._mapContainer!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle(this._className+"-shrink"),this._fullscreenButton.classList.toggle(this._className+"-fullscreen"))},a.prototype._onClickFullscreen=function(){this._isFullscreen()?i.document.exitFullscreen?i.document.exitFullscreen():i.document.mozCancelFullScreen?i.document.mozCancelFullScreen():i.document.msExitFullscreen?i.document.msExitFullscreen():i.document.webkitCancelFullScreen&&i.document.webkitCancelFullScreen():this._mapContainer.requestFullscreen?this._mapContainer.requestFullscreen():this._mapContainer.mozRequestFullScreen?this._mapContainer.mozRequestFullScreen():this._mapContainer.msRequestFullscreen?this._mapContainer.msRequestFullscreen():this._mapContainer.webkitRequestFullscreen&&this._mapContainer.webkitRequestFullscreen()},t.exports=a},{"../../util/dom":238,"../../util/util":252,"../../util/window":233}],213:[function(e,t,n){"use strict";function r(e){void 0!==o?e(o):void 0!==s.navigator.permissions?s.navigator.permissions.query({name:"geolocation"}).then(function(t){o="denied"!==t.state,e(o)}):(o=!!s.navigator.geolocation,e(o))}var o,i=e("../../util/evented"),a=e("../../util/dom"),s=e("../../util/window"),u=e("../../util/util"),l=e("../../geo/lng_lat"),c=e("../marker"),p={positionOptions:{enableHighAccuracy:!1,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showUserLocation:!0},h=function(e){function t(t){e.call(this),this.options=u.extend({},p,t),u.bindAll(["_onSuccess","_onError","_finish","_setupUI","_updateCamera","_updateMarker","_onClickGeolocate"],this)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.onAdd=function(e){return this._map=e,this._container=a.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),r(this._setupUI),this._container},t.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(s.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker.remove(),a.remove(this._container),this._map=void 0},t.prototype._onSuccess=function(e){if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire("geolocate",e),this._finish()},t.prototype._updateCamera=function(e){var t=new l(e.coords.longitude,e.coords.latitude),n=e.coords.accuracy;this._map.fitBounds(t.toBounds(n),this.options.fitBoundsOptions,{geolocateSource:!0})},t.prototype._updateMarker=function(e){e?this._userLocationDotMarker.setLngLat([e.coords.longitude,e.coords.latitude]).addTo(this._map):this._userLocationDotMarker.remove()},t.prototype._onError=function(e){if(this.options.trackUserLocation)if(1===e.code)this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),void 0!==this._geolocationWatchID&&this._clearWatch();else switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire("error",e),this._finish()},t.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},t.prototype._setupUI=function(e){var t=this;!1!==e&&(this._container.addEventListener("contextmenu",function(e){return e.preventDefault()}),this._geolocateButton=a.create("button","mapboxgl-ctrl-icon mapboxgl-ctrl-geolocate",this._container),this._geolocateButton.type="button",this._geolocateButton.setAttribute("aria-label","Geolocate"),this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=a.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new c(this._dotElement),this.options.trackUserLocation&&(this._watchState="OFF")),this._geolocateButton.addEventListener("click",this._onClickGeolocate.bind(this)),this.options.trackUserLocation&&this._map.on("movestart",function(e){e.geolocateSource||"ACTIVE_LOCK"!==t._watchState||(t._watchState="BACKGROUND",t._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),t._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),t.fire("trackuserlocationend"))}))},t.prototype._onClickGeolocate=function(){if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire("trackuserlocationstart");break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire("trackuserlocationend");break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire("trackuserlocationstart")}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}"OFF"===this._watchState&&void 0!==this._geolocationWatchID?this._clearWatch():void 0===this._geolocationWatchID&&(this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._geolocationWatchID=s.navigator.geolocation.watchPosition(this._onSuccess,this._onError,this.options.positionOptions))}else s.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4)},t.prototype._clearWatch=function(){s.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},t}(i);t.exports=h},{"../../geo/lng_lat":68,"../../util/dom":238,"../../util/evented":239,"../../util/util":252,"../../util/window":233,"../marker":227}],214:[function(e,t,n){"use strict";var r=e("../../util/dom"),o=e("../../util/util"),i=function(){o.bindAll(["_updateLogo"],this)};i.prototype.onAdd=function(e){this._map=e,this._container=r.create("div","mapboxgl-ctrl");var t=r.create("a","mapboxgl-ctrl-logo");return t.target="_blank",t.href="https://www.mapbox.com/",t.setAttribute("aria-label","Mapbox logo"),this._container.appendChild(t),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._container},i.prototype.onRemove=function(){r.remove(this._container),this._map.off("sourcedata",this._updateLogo)},i.prototype.getDefaultPosition=function(){return"bottom-left"},i.prototype._updateLogo=function(e){e&&"metadata"!==e.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},i.prototype._logoRequired=function(){if(this._map.style){var e=this._map.style.sourceCaches;for(var t in e)if(e[t].getSource().mapbox_logo)return!0;return!1}},t.exports=i},{"../../util/dom":238,"../../util/util":252}],215:[function(e,t,n){"use strict";var r=e("../../util/dom"),o=e("../../util/util"),i=e("../handler/drag_rotate"),a=function(){var e=this;o.bindAll(["_rotateCompassArrow"],this),this._container=r.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(e){return e.preventDefault()}),this._zoomInButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-in","Zoom In",function(){return e._map.zoomIn()}),this._zoomOutButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-out","Zoom Out",function(){return e._map.zoomOut()}),this._compass=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-compass","Reset North",function(){return e._map.resetNorth()}),this._compassArrow=r.create("span","mapboxgl-ctrl-compass-arrow",this._compass)};a.prototype._rotateCompassArrow=function(){var e="rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassArrow.style.transform=e},a.prototype.onAdd=function(e){return this._map=e,this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new i(e,{button:"left",element:this._compass,pitchWithRotate:!1}),this._handler.enable(),this._container},a.prototype.onRemove=function(){r.remove(this._container),this._map.off("rotate",this._rotateCompassArrow),delete this._map,this._handler.disable(),delete this._handler},a.prototype._createButton=function(e,t,n){var o=r.create("button",e,this._container);return o.type="button",o.setAttribute("aria-label",t),o.addEventListener("click",n),o},t.exports=a},{"../../util/dom":238,"../../util/util":252,"../handler/drag_rotate":221}],216:[function(e,t,n){"use strict";function r(e,t,n){var r=n&&n.maxWidth||100,a=e._container.clientHeight/2,s=i(e.unproject([0,a]),e.unproject([r,a]));if(n&&"imperial"===n.unit){var u=3.2808*s;u>5280?o(t,r,u/5280,"mi"):o(t,r,u,"ft")}else if(n&&"nautical"===n.unit){var l=s/1852;o(t,r,l,"nm")}else o(t,r,s,"m")}function o(e,t,n,r){var o=a(n),i=o/n;"m"===r&&o>=1e3&&(o/=1e3,r="km"),e.style.width=t*i+"px",e.innerHTML=o+r}function i(e,t){var n=Math.PI/180,r=e.lat*n,o=t.lat*n,i=Math.sin(r)*Math.sin(o)+Math.cos(r)*Math.cos(o)*Math.cos((t.lng-e.lng)*n);return 6371e3*Math.acos(Math.min(i,1))}function a(e){var t=Math.pow(10,(""+Math.floor(e)).length-1),n=e/t;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1,t*n}var s=e("../../util/dom"),u=e("../../util/util"),l=function(e){this.options=e,u.bindAll(["_onMove"],this)};l.prototype.getDefaultPosition=function(){return"bottom-left"},l.prototype._onMove=function(){r(this._map,this._container,this.options)},l.prototype.onAdd=function(e){return this._map=e,this._container=s.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",e.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},l.prototype.onRemove=function(){s.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},t.exports=l},{"../../util/dom":238,"../../util/util":252}],217:[function(e,t,n){"use strict"},{}],218:[function(e,t,n){"use strict";var r=e("../../util/dom"),o=e("../../geo/lng_lat_bounds"),i=e("../../util/util"),a=e("../../util/window"),s=function(e){this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),i.bindAll(["_onMouseDown","_onMouseMove","_onMouseUp","_onKeyDown"],this)};s.prototype.isEnabled=function(){return!!this._enabled},s.prototype.isActive=function(){return!!this._active},s.prototype.enable=function(){this.isEnabled()||(this._map.dragPan&&this._map.dragPan.disable(),this._el.addEventListener("mousedown",this._onMouseDown,!1),this._map.dragPan&&this._map.dragPan.enable(),this._enabled=!0)},s.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("mousedown",this._onMouseDown),this._enabled=!1)},s.prototype._onMouseDown=function(e){e.shiftKey&&0===e.button&&(a.document.addEventListener("mousemove",this._onMouseMove,!1),a.document.addEventListener("keydown",this._onKeyDown,!1),a.document.addEventListener("mouseup",this._onMouseUp,!1),r.disableDrag(),this._startPos=r.mousePos(this._el,e),this._active=!0)},s.prototype._onMouseMove=function(e){var t=this._startPos,n=r.mousePos(this._el,e);this._box||(this._box=r.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",e));var o=Math.min(t.x,n.x),i=Math.max(t.x,n.x),a=Math.min(t.y,n.y),s=Math.max(t.y,n.y);r.setTransform(this._box,"translate("+o+"px,"+a+"px)"),this._box.style.width=i-o+"px",this._box.style.height=s-a+"px"},s.prototype._onMouseUp=function(e){if(0===e.button){var t=this._startPos,n=r.mousePos(this._el,e),i=(new o).extend(this._map.unproject(t)).extend(this._map.unproject(n));this._finish(),t.x===n.x&&t.y===n.y?this._fireEvent("boxzoomcancel",e):this._map.fitBounds(i,{linear:!0}).fire("boxzoomend",{originalEvent:e,boxZoomBounds:i})}},s.prototype._onKeyDown=function(e){27===e.keyCode&&(this._finish(),this._fireEvent("boxzoomcancel",e))},s.prototype._finish=function(){this._active=!1,a.document.removeEventListener("mousemove",this._onMouseMove,!1),a.document.removeEventListener("keydown",this._onKeyDown,!1),a.document.removeEventListener("mouseup",this._onMouseUp,!1),this._container.classList.remove("mapboxgl-crosshair"),this._box&&(r.remove(this._box),this._box=null),r.enableDrag()},s.prototype._fireEvent=function(e,t){return this._map.fire(e,{originalEvent:t})},t.exports=s},{"../../geo/lng_lat_bounds":69,"../../util/dom":238,"../../util/util":252,"../../util/window":233}],219:[function(e,t,n){"use strict";var r=e("../../util/util"),o=function(e){this._map=e,r.bindAll(["_onDblClick","_onZoomEnd"],this)};o.prototype.isEnabled=function(){return!!this._enabled},o.prototype.isActive=function(){return!!this._active},o.prototype.enable=function(){this.isEnabled()||(this._map.on("dblclick",this._onDblClick),this._enabled=!0)},o.prototype.disable=function(){this.isEnabled()&&(this._map.off("dblclick",this._onDblClick),this._enabled=!1)},o.prototype._onDblClick=function(e){this._active=!0,this._map.on("zoomend",this._onZoomEnd),this._map.zoomTo(this._map.getZoom()+(e.originalEvent.shiftKey?-1:1),{around:e.lngLat},e)},o.prototype._onZoomEnd=function(){this._active=!1,this._map.off("zoomend",this._onZoomEnd)},t.exports=o},{"../../util/util":252}],220:[function(e,t,n){"use strict";var r=e("../../util/dom"),o=e("../../util/util"),i=e("../../util/window"),a=o.bezier(0,0,.3,1),s=function(e){this._map=e,this._el=e.getCanvasContainer(),o.bindAll(["_onDown","_onMove","_onUp","_onTouchEnd","_onMouseUp"],this)};s.prototype.isEnabled=function(){return!!this._enabled},s.prototype.isActive=function(){return!!this._active},s.prototype.enable=function(){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-drag-pan"),this._el.addEventListener("mousedown",this._onDown),this._el.addEventListener("touchstart",this._onDown),this._enabled=!0)},s.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-drag-pan"),this._el.removeEventListener("mousedown",this._onDown),this._el.removeEventListener("touchstart",this._onDown),this._enabled=!1)},s.prototype._onDown=function(e){this._ignoreEvent(e)||this.isActive()||(e.touches?(i.document.addEventListener("touchmove",this._onMove),i.document.addEventListener("touchend",this._onTouchEnd)):(i.document.addEventListener("mousemove",this._onMove),i.document.addEventListener("mouseup",this._onMouseUp)),i.addEventListener("blur",this._onMouseUp),this._active=!1,this._startPos=this._pos=r.mousePos(this._el,e),this._inertia=[[Date.now(),this._pos]])},s.prototype._onMove=function(e){if(!this._ignoreEvent(e)){this.isActive()||(this._active=!0,this._map.moving=!0,this._fireEvent("dragstart",e),this._fireEvent("movestart",e));var t=r.mousePos(this._el,e),n=this._map;n.stop(),this._drainInertiaBuffer(),this._inertia.push([Date.now(),t]),n.transform.setLocationAtPoint(n.transform.pointLocation(this._pos),t),this._fireEvent("drag",e),this._fireEvent("move",e),this._pos=t,e.preventDefault()}},s.prototype._onUp=function(e){var t=this;if(this.isActive()){this._active=!1,this._fireEvent("dragend",e),this._drainInertiaBuffer();var n=function(){t._map.moving=!1,t._fireEvent("moveend",e)},r=this._inertia;if(r.length<2)return void n();var o=r[r.length-1],i=r[0],s=o[1].sub(i[1]),u=(o[0]-i[0])/1e3;if(0===u||o[1].equals(i[1]))return void n();var l=s.mult(.3/u),c=l.mag();c>1400&&(c=1400,l._unit()._mult(c));var p=c/750,h=l.mult(-p/2);this._map.panBy(h,{duration:1e3*p,easing:a,noMoveStart:!0},{originalEvent:e})}},s.prototype._onMouseUp=function(e){this._ignoreEvent(e)||(this._onUp(e),i.document.removeEventListener("mousemove",this._onMove),i.document.removeEventListener("mouseup",this._onMouseUp),i.removeEventListener("blur",this._onMouseUp))},s.prototype._onTouchEnd=function(e){this._ignoreEvent(e)||(this._onUp(e),i.document.removeEventListener("touchmove",this._onMove),i.document.removeEventListener("touchend",this._onTouchEnd))},s.prototype._fireEvent=function(e,t){return this._map.fire(e,{originalEvent:t})},s.prototype._ignoreEvent=function(e){var t=this._map;return!(!t.boxZoom||!t.boxZoom.isActive())||!(!t.dragRotate||!t.dragRotate.isActive())||(e.touches?e.touches.length>1:!!e.ctrlKey||"mousemove"!==e.type&&e.button&&0!==e.button)},s.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,t=Date.now();e.length>0&&t-e[0][0]>160;)e.shift()},t.exports=s},{"../../util/dom":238,"../../util/util":252,"../../util/window":233}],221:[function(e,t,n){"use strict";var r=e("../../util/dom"),o=e("../../util/util"),i=e("../../util/window"),a=o.bezier(0,0,.25,1),s=function(e,t){this._map=e,this._el=t.element||e.getCanvasContainer(),this._button=t.button||"right",this._bearingSnap=t.bearingSnap||0,this._pitchWithRotate=!1!==t.pitchWithRotate,o.bindAll(["_onDown","_onMove","_onUp"],this)};s.prototype.isEnabled=function(){return!!this._enabled},s.prototype.isActive=function(){return!!this._active},s.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("mousedown",this._onDown),this._enabled=!0)},s.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("mousedown",this._onDown),this._enabled=!1)},s.prototype._onDown=function(e){if(!(this._map.boxZoom&&this._map.boxZoom.isActive()||this._map.dragPan&&this._map.dragPan.isActive()||this.isActive())){if("right"===this._button){var t=e.ctrlKey?0:2,n=e.button;if(void 0!==i.InstallTrigger&&2===e.button&&e.ctrlKey&&i.navigator.platform.toUpperCase().indexOf("MAC")>=0&&(n=0),n!==t)return}else if(e.ctrlKey||0!==e.button)return;r.disableDrag(),i.document.addEventListener("mousemove",this._onMove,{capture:!0}),i.document.addEventListener("mouseup",this._onUp),i.addEventListener("blur",this._onUp),this._active=!1,this._inertia=[[Date.now(),this._map.getBearing()]],this._startPos=this._pos=r.mousePos(this._el,e),this._center=this._map.transform.centerPoint,e.preventDefault()}},s.prototype._onMove=function(e){this.isActive()||(this._active=!0,this._map.moving=!0,this._fireEvent("rotatestart",e),this._fireEvent("movestart",e),this._pitchWithRotate&&this._fireEvent("pitchstart",e));var t=this._map;t.stop();var n=this._pos,o=r.mousePos(this._el,e),i=.8*(n.x-o.x),a=-.5*(n.y-o.y),s=t.getBearing()-i,u=t.getPitch()-a,l=this._inertia,c=l[l.length-1];this._drainInertiaBuffer(),l.push([Date.now(),t._normalizeBearing(s,c[1])]),t.transform.bearing=s,this._pitchWithRotate&&(this._fireEvent("pitch",e),t.transform.pitch=u),this._fireEvent("rotate",e),this._fireEvent("move",e),this._pos=o},s.prototype._onUp=function(e){var t=this;if(i.document.removeEventListener("mousemove",this._onMove,{capture:!0}),i.document.removeEventListener("mouseup",this._onUp),i.removeEventListener("blur",this._onUp),r.enableDrag(),this.isActive()){this._active=!1,this._fireEvent("rotateend",e),this._drainInertiaBuffer();var n=this._map,o=n.getBearing(),s=this._inertia,u=function(){Math.abs(o)<t._bearingSnap?n.resetNorth({noMoveStart:!0},{originalEvent:e}):(t._map.moving=!1,t._fireEvent("moveend",e)),t._pitchWithRotate&&t._fireEvent("pitchend",e)};if(s.length<2)return void u();var l=s[0],c=s[s.length-1],p=s[s.length-2],h=n._normalizeBearing(o,p[1]),f=c[1]-l[1],d=f<0?-1:1,m=(c[0]-l[0])/1e3;if(0===f||0===m)return void u();var y=Math.abs(f*(.25/m));y>180&&(y=180);var v=y/180;h+=d*y*(v/2),Math.abs(n._normalizeBearing(h,0))<this._bearingSnap&&(h=n._normalizeBearing(0,h)),n.rotateTo(h,{duration:1e3*v,easing:a,noMoveStart:!0},{originalEvent:e})}},s.prototype._fireEvent=function(e,t){return this._map.fire(e,{originalEvent:t})},s.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,t=Date.now();e.length>0&&t-e[0][0]>160;)e.shift()},t.exports=s},{"../../util/dom":238,"../../util/util":252,"../../util/window":233}],222:[function(e,t,n){"use strict";function r(e){return e*(2-e)}var o=e("../../util/util"),i=function(e){this._map=e,this._el=e.getCanvasContainer(),o.bindAll(["_onKeyDown"],this)};i.prototype.isEnabled=function(){return!!this._enabled},i.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("keydown",this._onKeyDown,!1),this._enabled=!0)},i.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("keydown",this._onKeyDown),this._enabled=!1)},i.prototype._onKeyDown=function(e){if(!(e.altKey||e.ctrlKey||e.metaKey)){var t=0,n=0,o=0,i=0,a=0;switch(e.keyCode){case 61:case 107:case 171:case 187:t=1;break;case 189:case 109:case 173:t=-1;break;case 37:e.shiftKey?n=-1:(e.preventDefault(),i=-1);break;case 39:e.shiftKey?n=1:(e.preventDefault(),i=1);break;case 38:e.shiftKey?o=1:(e.preventDefault(),a=-1);break;case 40:e.shiftKey?o=-1:(a=1,e.preventDefault());break;default:return}var s=this._map,u=s.getZoom(),l={duration:300,delayEndEvents:500,easing:r,zoom:t?Math.round(u)+t*(e.shiftKey?2:1):u,bearing:s.getBearing()+15*n,pitch:s.getPitch()+10*o,offset:[100*-i,100*-a],center:s.getCenter()};s.easeTo(l,{originalEvent:e})}},t.exports=i},{"../../util/util":252}],223:[function(e,t,n){"use strict";var r=e("../../util/dom"),o=e("../../util/util"),i=e("../../util/browser"),a=e("../../util/window"),s=a.navigator.userAgent.toLowerCase(),u=-1!==s.indexOf("firefox"),l=-1!==s.indexOf("safari")&&-1===s.indexOf("chrom"),c=function(e){this._map=e,this._el=e.getCanvasContainer(),o.bindAll(["_onWheel","_onTimeout"],this)};c.prototype.isEnabled=function(){return!!this._enabled},c.prototype.enable=function(e){this.isEnabled()||(this._el.addEventListener("wheel",this._onWheel,!1),this._el.addEventListener("mousewheel",this._onWheel,!1),this._enabled=!0,this._aroundCenter=e&&"center"===e.around)},c.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("wheel",this._onWheel),this._el.removeEventListener("mousewheel",this._onWheel),this._enabled=!1)},c.prototype._onWheel=function(e){var t=0;"wheel"===e.type?(t=e.deltaY,u&&e.deltaMode===a.WheelEvent.DOM_DELTA_PIXEL&&(t/=i.devicePixelRatio),e.deltaMode===a.WheelEvent.DOM_DELTA_LINE&&(t*=40)):"mousewheel"===e.type&&(t=-e.wheelDeltaY,l&&(t/=3));var n=i.now(),o=n-(this._time||0);this._pos=r.mousePos(this._el,e),this._time=n,0!==t&&t%4.000244140625==0?this._type="wheel":0!==t&&Math.abs(t)<4?this._type="trackpad":o>400?(this._type=null,this._lastValue=t,this._timeout=setTimeout(this._onTimeout,40)):this._type||(this._type=Math.abs(o*t)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,t+=this._lastValue)),e.shiftKey&&t&&(t/=4),this._type&&this._zoom(-t,e),e.preventDefault()},c.prototype._onTimeout=function(){this._type="wheel",this._zoom(-this._lastValue)},c.prototype._zoom=function(e,t){if(0!==e){var n=this._map,r=2/(1+Math.exp(-Math.abs(e/100)));e<0&&0!==r&&(r=1/r);var o=n.ease?n.ease.to:n.transform.scale,i=n.transform.scaleZoom(o*r);n.zoomTo(i,{duration:"wheel"===this._type?200:0,around:this._aroundCenter?n.getCenter():n.unproject(this._pos),delayEndEvents:200,smoothEasing:!0},{originalEvent:t})}},t.exports=c},{"../../util/browser":231,"../../util/dom":238,"../../util/util":252,"../../util/window":233}],224:[function(e,t,n){"use strict";var r=e("../../util/dom"),o=e("../../util/util"),i=e("../../util/window"),a=o.bezier(0,0,.15,1),s=function(e){this._map=e,this._el=e.getCanvasContainer(),o.bindAll(["_onStart","_onMove","_onEnd"],this)};s.prototype.isEnabled=function(){return!!this._enabled},s.prototype.enable=function(e){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-zoom-rotate"),this._el.addEventListener("touchstart",this._onStart,!1),this._enabled=!0,this._aroundCenter=e&&"center"===e.around)},s.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-zoom-rotate"),this._el.removeEventListener("touchstart",this._onStart),this._enabled=!1)},s.prototype.disableRotation=function(){this._rotationDisabled=!0},s.prototype.enableRotation=function(){this._rotationDisabled=!1},s.prototype._onStart=function(e){if(2===e.touches.length){var t=r.mousePos(this._el,e.touches[0]),n=r.mousePos(this._el,e.touches[1]);this._startVec=t.sub(n),this._startScale=this._map.transform.scale,this._startBearing=this._map.transform.bearing,this._gestureIntent=void 0,this._inertia=[],i.document.addEventListener("touchmove",this._onMove,!1),i.document.addEventListener("touchend",this._onEnd,!1)}},s.prototype._onMove=function(e){if(2===e.touches.length){var t=r.mousePos(this._el,e.touches[0]),n=r.mousePos(this._el,e.touches[1]),o=t.add(n).div(2),i=t.sub(n),a=i.mag()/this._startVec.mag(),s=this._rotationDisabled?0:180*i.angleWith(this._startVec)/Math.PI,u=this._map;if(this._gestureIntent){var l={duration:0,around:u.unproject(o)};"rotate"===this._gestureIntent&&(l.bearing=this._startBearing+s),"zoom"!==this._gestureIntent&&"rotate"!==this._gestureIntent||(l.zoom=u.transform.scaleZoom(this._startScale*a)),u.stop(),this._drainInertiaBuffer(),this._inertia.push([Date.now(),a,o]),u.easeTo(l,{originalEvent:e})}else{var c=Math.abs(1-a)>.15;Math.abs(s)>10?this._gestureIntent="rotate":c&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._startVec=i,this._startScale=u.transform.scale,this._startBearing=u.transform.bearing)}e.preventDefault()}},s.prototype._onEnd=function(e){i.document.removeEventListener("touchmove",this._onMove),i.document.removeEventListener("touchend",this._onEnd),this._drainInertiaBuffer();var t=this._inertia,n=this._map;if(t.length<2)return void n.snapToNorth({},{originalEvent:e});var r=t[t.length-1],o=t[0],s=n.transform.scaleZoom(this._startScale*r[1]),u=n.transform.scaleZoom(this._startScale*o[1]),l=s-u,c=(r[0]-o[0])/1e3,p=r[2];if(0===c||s===u)return void n.snapToNorth({},{originalEvent:e});var h=.15*l/c;Math.abs(h)>2.5&&(h=h>0?2.5:-2.5);var f=1e3*Math.abs(h/(12*.15)),d=s+h*f/2e3;d<0&&(d=0),n.easeTo({zoom:d,duration:f,easing:a,around:this._aroundCenter?n.getCenter():n.unproject(p)},{originalEvent:e})},s.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,t=Date.now();e.length>2&&t-e[0][0]>160;)e.shift()},t.exports=s},{"../../util/dom":238,"../../util/util":252,"../../util/window":233}],225:[function(e,t,n){"use strict";var r=e("../util/util"),o=e("../util/window"),i=function(){r.bindAll(["_onHashChange","_updateHash"],this)};i.prototype.addTo=function(e){return this._map=e,o.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},i.prototype.remove=function(){return o.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),delete this._map,this},i.prototype.getHashString=function(e){var t=this._map.getCenter(),n=Math.round(100*this._map.getZoom())/100,r=Math.max(0,Math.ceil(Math.log(n)/Math.LN2)),o=Math.round(t.lng*Math.pow(10,r))/Math.pow(10,r),i=Math.round(t.lat*Math.pow(10,r))/Math.pow(10,r),a=this._map.getBearing(),s=this._map.getPitch(),u="";return u+=e?"#/"+o+"/"+i+"/"+n:"#"+n+"/"+i+"/"+o,(a||s)&&(u+="/"+Math.round(10*a)/10),s&&(u+="/"+Math.round(s)),u},i.prototype._onHashChange=function(){var e=o.location.hash.replace("#","").split("/");return e.length>=3&&(this._map.jumpTo({center:[+e[2],+e[1]],zoom:+e[0],bearing:+(e[3]||0),pitch:+(e[4]||0)}),!0)},i.prototype._updateHash=function(){var e=this.getHashString();o.history.replaceState("","",e)},t.exports=i},{"../util/util":252,"../util/window":233}],226:[function(e,t,n){"use strict";function r(e){e.parentNode&&e.parentNode.removeChild(e)}var o=e("../util/util"),i=e("../util/browser"),a=e("../util/window"),s=e("../util/window"),u=s.HTMLImageElement,l=e("../util/dom"),c=e("../util/ajax"),p=e("../style/style"),h=e("../style/animation_loop"),f=e("../render/painter"),d=e("../geo/transform"),m=e("./hash"),y=e("./bind_handlers"),v=e("./camera"),g=e("../geo/lng_lat"),_=e("../geo/lng_lat_bounds"),b=e("@mapbox/point-geometry"),w=e("./control/attribution_control"),x=e("./control/logo_control"),E=e("mapbox-gl-supported");e("./events");var C={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:0,maxZoom:22,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,bearingSnap:7,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,transformRequest:null},T=function(e){function t(t){var n=this;if(t=o.extend({},C,t),null!=t.minZoom&&null!=t.maxZoom&&t.minZoom>t.maxZoom)throw new Error("maxZoom must be greater than minZoom");var r=new d(t.minZoom,t.maxZoom,t.renderWorldCopies);e.call(this,r,t),this._interactive=t.interactive,this._maxTileCacheSize=t.maxTileCacheSize,this._failIfMajorPerformanceCaveat=t.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=t.preserveDrawingBuffer,this._trackResize=t.trackResize,this._bearingSnap=t.bearingSnap,this._refreshExpiredTiles=t.refreshExpiredTiles;var i=t.transformRequest;if(this._transformRequest=i?function(e,t){return i(e,t)||{url:e}}:function(e){return{url:e}},"string"==typeof t.container){var s=a.document.getElementById(t.container);if(!s)throw new Error("Container '"+t.container+"' not found.");this._container=s}else this._container=t.container;this.animationLoop=new h,t.maxBounds&&this.setMaxBounds(t.maxBounds),o.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored","_update","_render","_onData","_onDataLoading"],this),this._setupContainer(),this._setupPainter(),this.on("move",this._update.bind(this,!1)),this.on("zoom",this._update.bind(this,!0)),this.on("moveend",function(){n.animationLoop.set(300),n._rerender()}),void 0!==a&&(a.addEventListener("online",this._onWindowOnline,!1),a.addEventListener("resize",this._onWindowResize,!1)),y(this,t),this._hash=t.hash&&(new m).addTo(this),this._hash&&this._hash._onHashChange()||this.jumpTo({center:t.center,zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}),this.resize(),t.style&&this.setStyle(t.style,{localIdeographFontFamily:t.localIdeographFontFamily}),t.attributionControl&&this.addControl(new w),this.addControl(new x,t.logoPosition),this.on("style.load",function(){this.transform.unmodified&&this.jumpTo(this.style.stylesheet),this.style.update({transition:!1})}),this.on("data",this._onData),this.on("dataloading",this._onDataLoading)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={showTileBoundaries:{},showCollisionBoxes:{},showOverdrawInspector:{},repaint:{},vertices:{}};return t.prototype.addControl=function(e,t){void 0===t&&e.getDefaultPosition&&(t=e.getDefaultPosition()),void 0===t&&(t="top-right");var n=e.onAdd(this),r=this._controlPositions[t];return-1!==t.indexOf("bottom")?r.insertBefore(n,r.firstChild):r.appendChild(n),this},t.prototype.removeControl=function(e){return e.onRemove(this),this},t.prototype.resize=function(){var e=this._containerDimensions(),t=e[0],n=e[1];return this._resizeCanvas(t,n),this.transform.resize(t,n),this.painter.resize(t,n),this.fire("movestart").fire("move").fire("resize").fire("moveend")},t.prototype.getBounds=function(){var e=new _(this.transform.pointLocation(new b(0,this.transform.height)),this.transform.pointLocation(new b(this.transform.width,0)));return(this.transform.angle||this.transform.pitch)&&(e.extend(this.transform.pointLocation(new b(this.transform.size.x,0))),e.extend(this.transform.pointLocation(new b(0,this.transform.size.y)))),e},t.prototype.getMaxBounds=function(){return this.transform.latRange&&2===this.transform.latRange.length&&this.transform.lngRange&&2===this.transform.lngRange.length?new _([this.transform.lngRange[0],this.transform.latRange[0]],[this.transform.lngRange[1],this.transform.latRange[1]]):null},t.prototype.setMaxBounds=function(e){if(e){var t=_.convert(e);this.transform.lngRange=[t.getWest(),t.getEast()],this.transform.latRange=[t.getSouth(),t.getNorth()],this.transform._constrain(),this._update()}else null!==e&&void 0!==e||(this.transform.lngRange=null,this.transform.latRange=null,this._update());return this},t.prototype.setMinZoom=function(e){if((e=null===e||void 0===e?0:e)>=0&&e<=this.transform.maxZoom)return this.transform.minZoom=e,this._update(),this.getZoom()<e&&this.setZoom(e),this;throw new Error("minZoom must be between 0 and the current maxZoom, inclusive")},t.prototype.getMinZoom=function(){return this.transform.minZoom},t.prototype.setMaxZoom=function(e){if((e=null===e||void 0===e?22:e)>=this.transform.minZoom)return this.transform.maxZoom=e,this._update(),this.getZoom()>e&&this.setZoom(e),this;throw new Error("maxZoom must be greater than the current minZoom")},t.prototype.getMaxZoom=function(){return this.transform.maxZoom},t.prototype.project=function(e){return this.transform.locationPoint(g.convert(e))},t.prototype.unproject=function(e){return this.transform.pointLocation(b.convert(e))},t.prototype.on=function(t,n,r){var i=this;if(void 0===r)return e.prototype.on.call(this,t,n);var a=function(){if("mouseenter"===t||"mouseover"===t){var e=!1;return{layer:n,listener:r,delegates:{mousemove:function(a){var s=i.getLayer(n)?i.queryRenderedFeatures(a.point,{layers:[n]}):[];s.length?e||(e=!0,r.call(i,o.extend({features:s},a,{type:t}))):e=!1},mouseout:function(){e=!1}}}}if("mouseleave"===t||"mouseout"===t){var a=!1;return{layer:n,listener:r,delegates:{mousemove:function(e){(i.getLayer(n)?i.queryRenderedFeatures(e.point,{layers:[n]}):[]).length?a=!0:a&&(a=!1,r.call(i,o.extend({},e,{type:t})))},mouseout:function(e){a&&(a=!1,r.call(i,o.extend({},e,{type:t})))}}}}var s=function(e){var t=i.getLayer(n)?i.queryRenderedFeatures(e.point,{layers:[n]}):[];t.length&&r.call(i,o.extend({features:t},e))};return{layer:n,listener:r,delegates:(u={},u[t]=s,u)};var u}();this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(a);for(var s in a.delegates)i.on(s,a.delegates[s]);return this},t.prototype.off=function(t,n,r){var o=this;if(void 0===r)return e.prototype.off.call(this,t,n);if(this._delegatedListeners&&this._delegatedListeners[t])for(var i=this._delegatedListeners[t],a=0;a<i.length;a++){var s=i[a];if(s.layer===n&&s.listener===r){for(var u in s.delegates)o.off(u,s.delegates[u]);return i.splice(a,1),o}}return this},t.prototype.queryRenderedFeatures=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n,r={};return 2===e.length?(n=arguments[0],r=arguments[1]):1===e.length&&function(e){return e instanceof b||Array.isArray(e)}(e[0])?n=e[0]:1===e.length&&(r=e[0]),this.style?this.style.queryRenderedFeatures(this._makeQueryGeometry(n),r,this.transform.zoom,this.transform.angle):[]},t.prototype._makeQueryGeometry=function(e){var t=this;void 0===e&&(e=[b.convert([0,0]),b.convert([this.transform.width,this.transform.height])]);var n;if(e instanceof b||"number"==typeof e[0])n=[b.convert(e)];else{var r=[b.convert(e[0]),b.convert(e[1])];n=[r[0],new b(r[1].x,r[0].y),r[1],new b(r[0].x,r[1].y),r[0]]}return n=n.map(function(e){return t.transform.pointCoordinate(e)})},t.prototype.querySourceFeatures=function(e,t){return this.style.querySourceFeatures(e,t)},t.prototype.setStyle=function(e,t){if((!t||!1!==t.diff&&!t.localIdeographFontFamily)&&this.style&&e&&"object"==typeof e)try{return this.style.setState(e)&&this._update(!0),this}catch(e){o.warnOnce("Unable to perform style diff: "+(e.message||e.error||e)+".  Rebuilding the style from scratch.")}return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.off("rotate",this.style._redoPlacement),this.off("pitch",this.style._redoPlacement),this.off("move",this.style._redoPlacement)),e?(this.style=new p(this,t||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e):this.style.loadJSON(e),this.on("rotate",this.style._redoPlacement),this.on("pitch",this.style._redoPlacement),this.on("move",this.style._redoPlacement),this):(delete this.style,this)},t.prototype.getStyle=function(){if(this.style)return this.style.serialize()},t.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():o.warnOnce("There is no style added to the map.")},t.prototype.addSource=function(e,t){return this.style.addSource(e,t),this._update(!0),this},t.prototype.isSourceLoaded=function(e){var t=this.style&&this.style.sourceCaches[e];return void 0===t?void this.fire("error",{error:new Error("There is no source with ID '"+e+"'")}):t.loaded()},t.prototype.areTilesLoaded=function(){var e=this.style&&this.style.sourceCaches;for(var t in e){var n=e[t],r=n._tiles;for(var o in r){var i=r[o];if("loaded"!==i.state&&"errored"!==i.state)return!1}}return!0},t.prototype.addSourceType=function(e,t,n){return this.style.addSourceType(e,t,n)},t.prototype.removeSource=function(e){return this.style.removeSource(e),this._update(!0),this},t.prototype.getSource=function(e){return this.style.getSource(e)},t.prototype.addImage=function(e,t,n){void 0===n&&(n={});var r=n.pixelRatio;void 0===r&&(r=1);var o=n.sdf;if(void 0===o&&(o=!1),t instanceof u)t=i.getImageData(t);else if(void 0===t.width||void 0===t.height)return this.fire("error",{error:new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")});this.style.addImage(e,{data:t,pixelRatio:r,sdf:o})},t.prototype.removeImage=function(e){this.style.removeImage(e)},t.prototype.loadImage=function(e,t){c.getImage(this._transformRequest(e,c.ResourceType.Image),t)},t.prototype.addLayer=function(e,t){return this.style.addLayer(e,t),this._update(!0),this},t.prototype.moveLayer=function(e,t){return this.style.moveLayer(e,t),this._update(!0),this},t.prototype.removeLayer=function(e){return this.style.removeLayer(e),this._update(!0),this},t.prototype.getLayer=function(e){return this.style.getLayer(e)},t.prototype.setFilter=function(e,t){return this.style.setFilter(e,t),this._update(!0),this},t.prototype.setLayerZoomRange=function(e,t,n){return this.style.setLayerZoomRange(e,t,n),this._update(!0),this},t.prototype.getFilter=function(e){return this.style.getFilter(e)},t.prototype.setPaintProperty=function(e,t,n){return this.style.setPaintProperty(e,t,n),this._update(!0),this},t.prototype.getPaintProperty=function(e,t){return this.style.getPaintProperty(e,t)},t.prototype.setLayoutProperty=function(e,t,n){return this.style.setLayoutProperty(e,t,n),this._update(!0),this},t.prototype.getLayoutProperty=function(e,t){return this.style.getLayoutProperty(e,t)},t.prototype.setLight=function(e){return this.style.setLight(e),this._update(!0),this},t.prototype.getLight=function(){return this.style.getLight()},t.prototype.getContainer=function(){return this._container},t.prototype.getCanvasContainer=function(){return this._canvasContainer},t.prototype.getCanvas=function(){return this._canvas},t.prototype._containerDimensions=function(){var e=0,t=0;return this._container&&(e=this._container.offsetWidth||400,t=this._container.offsetHeight||300),[e,t]},t.prototype._setupContainer=function(){var e=this._container;e.classList.add("mapboxgl-map"),(this._missingCSSContainer=l.create("div","mapboxgl-missing-css",e)).innerHTML="Missing Mapbox GL JS CSS";var t=this._canvasContainer=l.create("div","mapboxgl-canvas-container",e);this._interactive&&t.classList.add("mapboxgl-interactive"),this._canvas=l.create("canvas","mapboxgl-canvas",t),this._canvas.style.position="absolute",this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var n=this._containerDimensions();this._resizeCanvas(n[0],n[1]);var r=this._controlContainer=l.create("div","mapboxgl-control-container",e),o=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(e){o[e]=l.create("div","mapboxgl-ctrl-"+e,r)})},t.prototype._resizeCanvas=function(e,t){var n=a.devicePixelRatio||1;this._canvas.width=n*e,this._canvas.height=n*t,this._canvas.style.width=e+"px",this._canvas.style.height=t+"px"},t.prototype._setupPainter=function(){var e=o.extend({failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer},E.webGLContextAttributes),t=this._canvas.getContext("webgl",e)||this._canvas.getContext("experimental-webgl",e);if(!t)return void this.fire("error",{error:new Error("Failed to initialize WebGL")});this.painter=new f(t,this.transform)},t.prototype._contextLost=function(e){e.preventDefault(),this._frameId&&(i.cancelFrame(this._frameId),this._frameId=null),this.fire("webglcontextlost",{originalEvent:e})},t.prototype._contextRestored=function(e){this._setupPainter(),this.resize(),this._update(),this.fire("webglcontextrestored",{originalEvent:e})},t.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!(!this.style||!this.style.loaded())},t.prototype._update=function(e){return this.style?(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this._rerender(),this):this},t.prototype._render=function(){return this.style&&this._styleDirty&&(this._styleDirty=!1,this.style.update(),this.style._recalculate(this.transform.zoom)),this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.rotating,zooming:this.zooming}),this.fire("render"),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire("load")),this._frameId=null,this.animationLoop.stopped()||(this._styleDirty=!0),(this._sourcesDirty||this._repaint||this._styleDirty)&&this._rerender(),this},t.prototype.remove=function(){this._hash&&this._hash.remove(),i.cancelFrame(this._frameId),this._frameId=null,this.setStyle(null),void 0!==a&&(a.removeEventListener("resize",this._onWindowResize,!1),a.removeEventListener("online",this._onWindowOnline,!1));var e=this.painter.gl.getExtension("WEBGL_lose_context");e&&e.loseContext(),r(this._canvasContainer),r(this._controlContainer),r(this._missingCSSContainer),this._container.classList.remove("mapboxgl-map"),this.fire("remove")},t.prototype._rerender=function(){this.style&&!this._frameId&&(this._frameId=i.frame(this._render))},t.prototype._onWindowOnline=function(){this._update()},t.prototype._onWindowResize=function(){this._trackResize&&this.stop().resize()._update()},n.showTileBoundaries.get=function(){return!!this._showTileBoundaries},n.showTileBoundaries.set=function(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update())},n.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},n.showCollisionBoxes.set=function(e){this._showCollisionBoxes!==e&&(this._showCollisionBoxes=e,this.style._redoPlacement())},n.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},n.showOverdrawInspector.set=function(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update())},n.repaint.get=function(){return!!this._repaint},n.repaint.set=function(e){this._repaint=e,this._update()},n.vertices.get=function(){return!!this._vertices},n.vertices.set=function(e){this._vertices=e,this._update()},t.prototype._onData=function(e){this._update("style"===e.dataType),this.fire(e.dataType+"data",e)},t.prototype._onDataLoading=function(e){this.fire(e.dataType+"dataloading",e)},Object.defineProperties(t.prototype,n),t}(v);t.exports=T},{"../geo/lng_lat":68,"../geo/lng_lat_bounds":69,"../geo/transform":70,"../render/painter":90,"../style/animation_loop":176,"../style/style":182,"../util/ajax":230,"../util/browser":231,"../util/dom":238,"../util/util":252,"../util/window":233,"./bind_handlers":209,"./camera":210,"./control/attribution_control":211,"./control/logo_control":214,"./events":217,"./hash":225,"@mapbox/point-geometry":2,"mapbox-gl-supported":37}],227:[function(e,t,n){"use strict";var r=e("../util/dom"),o=e("../geo/lng_lat"),i=e("@mapbox/point-geometry"),a=e("../util/smart_wrap"),s=e("../util/util"),u=s.bindAll,l=function(e,t){this._offset=i.convert(t&&t.offset||[0,0]),u(["_update","_onMapClick"],this),e||(e=r.create("div")),e.classList.add("mapboxgl-marker"),this._element=e,this._popup=null};l.prototype.addTo=function(e){return this.remove(),this._map=e,e.getCanvasContainer().appendChild(this._element),e.on("move",this._update),e.on("moveend",this._update),this._update(),this._map.on("click",this._onMapClick),this},l.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),delete this._map),r.remove(this._element),this._popup&&this._popup.remove(),this},l.prototype.getLngLat=function(){return this._lngLat},l.prototype.setLngLat=function(e){return this._lngLat=o.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},l.prototype.getElement=function(){return this._element},l.prototype.setPopup=function(e){return this._popup&&(this._popup.remove(),this._popup=null),e&&("offset"in e.options||(e.options.offset=this._offset),this._popup=e,this._popup.setLngLat(this._lngLat)),this},l.prototype._onMapClick=function(e){var t=e.originalEvent.target,n=this._element;this._popup&&(t===n||n.contains(t))&&this.togglePopup()},l.prototype.getPopup=function(){return this._popup},l.prototype.togglePopup=function(){var e=this._popup;return e?(e.isOpen()?e.remove():e.addTo(this._map),this):this},l.prototype._update=function(e){this._map&&(this._map.transform.renderWorldCopies&&(this._lngLat=a(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset),e&&"moveend"!==e.type||(this._pos=this._pos.round()),r.setTransform(this._element,"translate(-50%, -50%) translate("+this._pos.x+"px, "+this._pos.y+"px)"))},t.exports=l},{"../geo/lng_lat":68,"../util/dom":238,"../util/smart_wrap":248,"../util/util":252,"@mapbox/point-geometry":2}],228:[function(e,t,n){"use strict";function r(e){if(e){if("number"==typeof e){var t=Math.round(Math.sqrt(.5*Math.pow(e,2)));return{top:new u(0,e),"top-left":new u(t,t),"top-right":new u(-t,t),bottom:new u(0,-e),"bottom-left":new u(t,-t),"bottom-right":new u(-t,-t),left:new u(e,0),right:new u(-e,0)}}if(e instanceof u||Array.isArray(e)){var n=u.convert(e);return{top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{top:u.convert(e.top||[0,0]),"top-left":u.convert(e["top-left"]||[0,0]),"top-right":u.convert(e["top-right"]||[0,0]),bottom:u.convert(e.bottom||[0,0]),"bottom-left":u.convert(e["bottom-left"]||[0,0]),"bottom-right":u.convert(e["bottom-right"]||[0,0]),left:u.convert(e.left||[0,0]),right:u.convert(e.right||[0,0])}}return r(new u(0,0))}var o=e("../util/util"),i=e("../util/evented"),a=e("../util/dom"),s=e("../geo/lng_lat"),u=e("@mapbox/point-geometry"),l=e("../util/window"),c=e("../util/smart_wrap"),p={closeButton:!0,closeOnClick:!0},h=function(e){function t(t){e.call(this),this.options=o.extend(Object.create(p),t),o.bindAll(["_update","_onClickClose"],this)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.addTo=function(e){return this._map=e,this._map.on("move",this._update),this.options.closeOnClick&&this._map.on("click",this._onClickClose),this._update(),this},t.prototype.isOpen=function(){return!!this._map},t.prototype.remove=function(){return this._content&&a.remove(this._content),this._container&&(a.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("click",this._onClickClose),delete this._map),this.fire("close"),this},t.prototype.getLngLat=function(){return this._lngLat},t.prototype.setLngLat=function(e){return this._lngLat=s.convert(e),this._pos=null,this._update(),this},t.prototype.setText=function(e){return this.setDOMContent(l.document.createTextNode(e))},t.prototype.setHTML=function(e){var t,n=l.document.createDocumentFragment(),r=l.document.createElement("body");for(r.innerHTML=e;t=r.firstChild;)n.appendChild(t);return this.setDOMContent(n)},t.prototype.setDOMContent=function(e){return this._createContent(),this._content.appendChild(e),this._update(),this},t.prototype._createContent=function(){this._content&&a.remove(this._content),this._content=a.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=a.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClickClose))},t.prototype._update=function(){if(this._map&&this._lngLat&&this._content){this._container||(this._container=a.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=a.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content)),this._map.transform.renderWorldCopies&&(this._lngLat=c(this._lngLat,this._pos,this._map.transform));var e=this._pos=this._map.project(this._lngLat),t=this.options.anchor,n=r(this.options.offset);if(!t){var o=this._container.offsetWidth,i=this._container.offsetHeight;t=e.y+n.bottom.y<i?["top"]:e.y>this._map.transform.height-i?["bottom"]:[],e.x<o/2?t.push("left"):e.x>this._map.transform.width-o/2&&t.push("right"),t=0===t.length?"bottom":t.join("-")}var s=e.add(n[t]).round(),u={top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},l=this._container.classList;for(var p in u)l.remove("mapboxgl-popup-anchor-"+p);l.add("mapboxgl-popup-anchor-"+t),a.setTransform(this._container,u[t]+" translate("+s.x+"px,"+s.y+"px)")}},t.prototype._onClickClose=function(){this.remove()},t}(i);t.exports=h},{"../geo/lng_lat":68,"../util/dom":238,"../util/evented":239,"../util/smart_wrap":248,"../util/util":252,"../util/window":233,"@mapbox/point-geometry":2}],229:[function(e,t,n){"use strict";var r=e("./util"),o=function(e,t,n){this.target=e,this.parent=t,this.mapId=n,this.callbacks={},this.callbackID=0,r.bindAll(["receive"],this),this.target.addEventListener("message",this.receive,!1)};o.prototype.send=function(e,t,n,r,o){var i=n?this.mapId+":"+this.callbackID++:null;n&&(this.callbacks[i]=n),this.target.postMessage({targetMapId:o,sourceMapId:this.mapId,type:e,id:String(i),data:t},r)},o.prototype.receive=function(e){var t,n=this,r=e.data,o=r.id;if(!r.targetMapId||this.mapId===r.targetMapId){var i=function(e,t,r){n.target.postMessage({sourceMapId:n.mapId,type:"<response>",id:String(o),error:e?String(e):null,data:t},r)};if("<response>"===r.type)t=this.callbacks[r.id],delete this.callbacks[r.id],t&&r.error?t(new Error(r.error)):t&&t(null,r.data);else if(void 0!==r.id&&this.parent[r.type])this.parent[r.type](r.sourceMapId,r.data,i);else if(void 0!==r.id&&this.parent.getWorkerSource){var a=r.type.split("."),s=this.parent.getWorkerSource(r.sourceMapId,a[0]);s[a[1]](r.data,i)}else this.parent[r.type](r.data)}},o.prototype.remove=function(){this.target.removeEventListener("message",this.receive,!1)},t.exports=o},{"./util":252}],230:[function(e,t,n){"use strict";function r(e){var t=new i.XMLHttpRequest;t.open("GET",e.url,!0);for(var n in e.headers)t.setRequestHeader(n,e.headers[n]);return t.withCredentials="include"===e.credentials,t}function o(e){var t=i.document.createElement("a");return t.href=e,t.protocol===i.document.location.protocol&&t.host===i.document.location.host}var i=e("./window"),a={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};n.ResourceType=a,"function"==typeof Object.freeze&&Object.freeze(a);var s=function(e){function t(t,n){e.call(this,t),this.status=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error);n.getJSON=function(e,t){var n=r(e);return n.setRequestHeader("Accept","application/json"),n.onerror=function(){t(new Error(n.statusText))},n.onload=function(){if(n.status>=200&&n.status<300&&n.response){var e;try{e=JSON.parse(n.response)}catch(e){return t(e)}t(null,e)}else t(new s(n.statusText,n.status))},n.send(),n},n.getArrayBuffer=function(e,t){var n=r(e);return n.responseType="arraybuffer",n.onerror=function(){t(new Error(n.statusText))},n.onload=function(){var e=n.response;if(0===e.byteLength&&200===n.status)return t(new Error("http status 200 returned without content."));n.status>=200&&n.status<300&&n.response?t(null,{data:e,cacheControl:n.getResponseHeader("Cache-Control"),expires:n.getResponseHeader("Expires")}):t(new s(n.statusText,n.status))},n.send(),n};n.getImage=function(e,t){return n.getArrayBuffer(e,function(e,n){if(e)t(e);else if(n){var r=new i.Image,o=i.URL||i.webkitURL;r.onload=function(){t(null,r),o.revokeObjectURL(r.src)};var a=new i.Blob([new Uint8Array(n.data)],{type:"image/png"});r.cacheControl=n.cacheControl,r.expires=n.expires,r.src=n.data.byteLength?o.createObjectURL(a):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}})},n.getVideo=function(e,t){var n=i.document.createElement("video");n.onloadstart=function(){t(null,n)};for(var r=0;r<e.length;r++){var a=i.document.createElement("source");o(e[r])||(n.crossOrigin="Anonymous"),a.src=e[r],n.appendChild(a)}return n}},{"./window":233}],231:[function(e,t,n){"use strict";var r=e("./window"),o=r.performance&&r.performance.now?r.performance.now.bind(r.performance):Date.now.bind(Date),i=r.requestAnimationFrame||r.mozRequestAnimationFrame||r.webkitRequestAnimationFrame||r.msRequestAnimationFrame,a=r.cancelAnimationFrame||r.mozCancelAnimationFrame||r.webkitCancelAnimationFrame||r.msCancelAnimationFrame;t.exports={now:o,frame:function(e){return i(e)},cancelFrame:function(e){return a(e)},timed:function(e,t,n){function r(){if(!a){var u=o();u>=s+t?e.call(n,1):(e.call(n,(u-s)/t),i(r))}}if(!t)return e.call(n,1),null;var a=!1,s=o();return i(r),function(){a=!0}},getImageData:function(e){var t=r.document.createElement("canvas"),n=t.getContext("2d");if(!n)throw new Error("failed to create canvas 2d context");return t.width=e.width,t.height=e.height,n.drawImage(e,0,0,e.width,e.height),n.getImageData(0,0,e.width,e.height)},hardwareConcurrency:r.navigator.hardwareConcurrency||4,get devicePixelRatio(){return r.devicePixelRatio},supportsWebp:!1};var s=r.document.createElement("img");s.onload=function(){t.exports.supportsWebp=!0},s.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="},{"./window":233}],232:[function(e,t,n){"use strict";var r=e("webworkify"),o=e("../window"),i=o.URL.createObjectURL(new r(e("../../source/worker"),{bare:!0}));t.exports=function(){return new o.Worker(i)}},{"../../source/worker":117,"../window":233,webworkify:48}],233:[function(e,t,n){"use strict";t.exports=self},{}],234:[function(e,t,n){"use strict";function r(e,t){return t.area-e.area}var o=e("quickselect"),i=e("./util").calculateSignedArea;t.exports=function(e,t){var n=e.length;if(n<=1)return[e];for(var a,s,u=[],l=0;l<n;l++){var c=i(e[l]);0!==c&&(e[l].area=Math.abs(c),void 0===s&&(s=c<0),s===c<0?(a&&u.push(a),a=[e[l]]):a.push(e[l]))}if(a&&u.push(a),t>1)for(var p=0;p<u.length;p++)u[p].length<=t||(o(u[p],t,1,u[p].length-1,r),u[p]=u[p].slice(0,t));return u}},{"./util":252,quickselect:40}],235:[function(e,t,n){"use strict";var r={API_URL:"https://api.mapbox.com",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null};t.exports=r},{}],236:[function(e,t,n){"use strict";var r=function(e){var t=this;this._stringToNumber={},this._numberToString=[];for(var n=0;n<e.length;n++){var r=e[n];t._stringToNumber[r]=n,t._numberToString[n]=r}};r.prototype.encode=function(e){return this._stringToNumber[e]},r.prototype.decode=function(e){return this._numberToString[e]},t.exports=r},{}],237:[function(e,t,n){"use strict";var r=e("./util"),o=e("./actor"),i=function(e,t){var n=this;this.workerPool=e,this.actors=[],this.currentActor=0,this.id=r.uniqueId();for(var i=this.workerPool.acquire(this.id),a=0;a<i.length;a++){var s=i[a],u=new o(s,t,n.id);u.name="Worker "+a,n.actors.push(u)}};i.prototype.broadcast=function(e,t,n){n=n||function(){},r.asyncAll(this.actors,function(n,r){n.send(e,t,r)},n)},i.prototype.send=function(e,t,n,r,o){return("number"!=typeof r||isNaN(r))&&(r=this.currentActor=(this.currentActor+1)%this.actors.length),this.actors[r].send(e,t,n,o),r},i.prototype.remove=function(){this.actors.forEach(function(e){e.remove()}),this.actors=[],this.workerPool.release(this.id)},t.exports=i},{"./actor":229,"./util":252}],238:[function(e,t,n){"use strict";function r(e){for(var t=0;t<e.length;t++)if(e[t]in s)return e[t];return e[0]}var o=e("@mapbox/point-geometry"),i=e("./window");n.create=function(e,t,n){var r=i.document.createElement(e);return t&&(r.className=t),n&&n.appendChild(r),r};var a,s=i.document.documentElement.style,u=r(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);n.disableDrag=function(){u&&(a=s[u],s[u]="none")},n.enableDrag=function(){u&&(s[u]=a)};var l=r(["transform","WebkitTransform"]);n.setTransform=function(e,t){e.style[l]=t};var c=function(e){e.preventDefault(),e.stopPropagation(),i.removeEventListener("click",c,!0)};n.suppressClick=function(){i.addEventListener("click",c,!0),i.setTimeout(function(){i.removeEventListener("click",c,!0)},0)},n.mousePos=function(e,t){var n=e.getBoundingClientRect();return t=t.touches?t.touches[0]:t,new o(t.clientX-n.left-e.clientLeft,t.clientY-n.top-e.clientTop)},n.touchPos=function(e,t){for(var n=e.getBoundingClientRect(),r=[],i="touchend"===t.type?t.changedTouches:t.touches,a=0;a<i.length;a++)r.push(new o(i[a].clientX-n.left-e.clientLeft,i[a].clientY-n.top-e.clientTop));return r},n.remove=function(e){e.parentNode&&e.parentNode.removeChild(e)}},{"./window":233,"@mapbox/point-geometry":2}],239:[function(e,t,n){"use strict";function r(e,t,n){n[e]=n[e]||[],n[e].push(t)}function o(e,t,n){if(n&&n[e]){var r=n[e].indexOf(t);-1!==r&&n[e].splice(r,1)}}var i=e("./util"),a=function(){};a.prototype.on=function(e,t){return this._listeners=this._listeners||{},r(e,t,this._listeners),this},a.prototype.off=function(e,t){return o(e,t,this._listeners),o(e,t,this._oneTimeListeners),this},a.prototype.once=function(e,t){return this._oneTimeListeners=this._oneTimeListeners||{},r(e,t,this._oneTimeListeners),this},a.prototype.fire=function(e,t){var n=this;if(this.listens(e)){t=i.extend({},t,{type:e,target:this});for(var r=this._listeners&&this._listeners[e]?this._listeners[e].slice():[],a=0;a<r.length;a++)r[a].call(n,t);for(var s=this._oneTimeListeners&&this._oneTimeListeners[e]?this._oneTimeListeners[e].slice():[],u=0;u<s.length;u++)s[u].call(n,t),o(e,s[u],n._oneTimeListeners);this._eventedParent&&this._eventedParent.fire(e,i.extend({},t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData))}else i.endsWith(e,"error")&&console.error(t&&t.error||t||"Empty error event");return this},a.prototype.listens=function(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)},a.prototype.setEventedParent=function(e,t){return this._eventedParent=e,this._eventedParentData=t,this},t.exports=a},{"./util":252}],240:[function(e,t,n){"use strict";function r(e,t){return t.max-e.max}function o(e,t,n,r){this.p=new u(e,t),this.h=n,this.d=i(this.p,r),this.max=this.d+this.h*Math.SQRT2}function i(e,t){for(var n=!1,r=1/0,o=0;o<t.length;o++)for(var i=t[o],a=0,s=i.length,u=s-1;a<s;u=a++){var c=i[a],p=i[u];c.y>e.y!=p.y>e.y&&e.x<(p.x-c.x)*(e.y-c.y)/(p.y-c.y)+c.x&&(n=!n),r=Math.min(r,l(e,c,p))}return(n?1:-1)*Math.sqrt(r)}function a(e){for(var t=0,n=0,r=0,i=e[0],a=0,s=i.length,u=s-1;a<s;u=a++){var l=i[a],c=i[u],p=l.x*c.y-c.x*l.y;n+=(l.x+c.x)*p,r+=(l.y+c.y)*p,t+=3*p}return new o(n/t,r/t,0,e)}var s=e("tinyqueue"),u=e("@mapbox/point-geometry"),l=e("./intersection_tests").distToSegmentSquared;t.exports=function(e,t,n){void 0===t&&(t=1),void 0===n&&(n=!1);for(var i=1/0,l=1/0,c=-1/0,p=-1/0,h=e[0],f=0;f<h.length;f++){var d=h[f];(!f||d.x<i)&&(i=d.x),(!f||d.y<l)&&(l=d.y),(!f||d.x>c)&&(c=d.x),(!f||d.y>p)&&(p=d.y)}var m=c-i,y=p-l,v=Math.min(m,y),g=v/2,_=new s(null,r);if(0===v)return new u(i,l);for(var b=i;b<c;b+=v)for(var w=l;w<p;w+=v)_.push(new o(b+g,w+g,g,e));for(var x=a(e),E=_.length;_.length;){var C=_.pop();(C.d>x.d||!x.d)&&(x=C,n&&console.log("found best %d after %d probes",Math.round(1e4*C.d)/1e4,E)),C.max-x.d<=t||(g=C.h/2,_.push(new o(C.p.x-g,C.p.y-g,g,e)),_.push(new o(C.p.x+g,C.p.y-g,g,e)),_.push(new o(C.p.x-g,C.p.y+g,g,e)),_.push(new o(C.p.x+g,C.p.y+g,g,e)),E+=4)}return n&&(console.log("num probes: "+E),console.log("best distance: "+x.d)),x.p}},{"./intersection_tests":243,"@mapbox/point-geometry":2,tinyqueue:42}],241:[function(e,t,n){"use strict";var r,o=e("./worker_pool");t.exports=function(){return r||(r=new o),r}},{"./worker_pool":255}],242:[function(e,t,n){"use strict";function r(e,t,n){var r=e.width,o=e.height;if(n){if(n.length!==r*o*t)throw new RangeError("mismatched image size")}else n=new Uint8Array(r*o*t);return{width:r,height:o,data:n}}function o(e,t,n){var o=t.width,a=t.height;if(o===e.width&&a===e.height)return e;var s=r({width:o,height:a},n);i(e,s,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,o),height:Math.min(e.height,a)},n),e.width=o,e.height=a,e.data=s.data}function i(e,t,n,r,o,i){if(0===o.width||0===o.height)return t;if(o.width>e.width||o.height>e.height||n.x>e.width-o.width||n.y>e.height-o.height)throw new RangeError("out of range source coordinates for image copy");if(o.width>t.width||o.height>t.height||r.x>t.width-o.width||r.y>t.height-o.height)throw new RangeError("out of range destination coordinates for image copy");for(var a=e.data,s=t.data,u=0;u<o.height;u++)for(var l=((n.y+u)*e.width+n.x)*i,c=((r.y+u)*t.width+r.x)*i,p=0;p<o.width*i;p++)s[c+p]=a[l+p];return t}var a=function(){};a.create=function(e,t){return r(e,1,t)},a.resize=function(e,t){o(e,t,1)},a.copy=function(e,t,n,r,o){i(e,t,n,r,o,1)};var s=function(){};s.create=function(e,t){return r(e,4,t)},s.resize=function(e,t){o(e,t,4)},s.copy=function(e,t,n,r,o){i(e,t,n,r,o,4)},t.exports={AlphaImage:a,RGBAImage:s}},{}],243:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<e.length;n++)if(f(t,e[n]))return!0;for(var r=0;r<t.length;r++)if(f(e,t[r]))return!0;return!!u(e,t)}function o(e,t,n){for(var r=0;r<e.length;r++)for(var o=e[r],i=0;i<t.length;i++)for(var a=t[i],s=0;s<a.length;s++){var u=a[s];if(f(o,u))return!0;if(c(u,o,n))return!0}return!1}function i(e,t){if(1===e.length&&1===e[0].length)return h(t,e[0][0]);for(var n=0;n<t.length;n++)for(var r=t[n],o=0;o<r.length;o++)if(h(e,r[o]))return!0;for(var i=0;i<e.length;i++){for(var a=e[i],s=0;s<a.length;s++)if(h(t,a[s]))return!0;for(var l=0;l<t.length;l++)if(u(a,t[l]))return!0}return!1}function a(e,t,n){for(var r=0;r<t.length;r++)for(var o=t[r],i=0;i<e.length;i++){var a=e[i];if(a.length>=3)for(var u=0;u<o.length;u++)if(f(a,o[u]))return!0;if(s(a,o,n))return!0}return!1}function s(e,t,n){if(e.length>1){if(u(e,t))return!0;for(var r=0;r<t.length;r++)if(c(t[r],e,n))return!0}for(var o=0;o<e.length;o++)if(c(e[o],t,n))return!0;return!1}function u(e,t){if(0===e.length||0===t.length)return!1;for(var n=0;n<e.length-1;n++)for(var r=e[n],o=e[n+1],i=0;i<t.length-1;i++){var a=t[i],s=t[i+1];if(l(r,o,a,s))return!0}return!1}function l(e,t,n,r){return m(e,n,r)!==m(t,n,r)&&m(e,t,n)!==m(e,t,r)}function c(e,t,n){var r=n*n;if(1===t.length)return e.distSqr(t[0])<r;for(var o=1;o<t.length;o++)if(p(e,t[o-1],t[o])<r)return!0;return!1}function p(e,t,n){var r=t.distSqr(n);if(0===r)return e.distSqr(t);var o=((e.x-t.x)*(n.x-t.x)+(e.y-t.y)*(n.y-t.y))/r;return o<0?e.distSqr(t):o>1?e.distSqr(n):e.distSqr(n.sub(t)._mult(o)._add(t))}function h(e,t){for(var n,r,o,i=!1,a=0;a<e.length;a++){n=e[a];for(var s=0,u=n.length-1;s<n.length;u=s++)r=n[s],o=n[u],r.y>t.y!=o.y>t.y&&t.x<(o.x-r.x)*(t.y-r.y)/(o.y-r.y)+r.x&&(i=!i)}return i}function f(e,t){for(var n=!1,r=0,o=e.length-1;r<e.length;o=r++){var i=e[r],a=e[o];i.y>t.y!=a.y>t.y&&t.x<(a.x-i.x)*(t.y-i.y)/(a.y-i.y)+i.x&&(n=!n)}return n}var d=e("./util"),m=d.isCounterClockwise;t.exports={multiPolygonIntersectsBufferedMultiPoint:o,multiPolygonIntersectsMultiPolygon:i,multiPolygonIntersectsBufferedMultiLine:a,polygonIntersectsPolygon:r,distToSegmentSquared:p}},{"./util":252}],244:[function(e,t,n){"use strict";var r={"Latin-1 Supplement":function(e){return e>=128&&e<=255},Arabic:function(e){return e>=1536&&e<=1791},"Arabic Supplement":function(e){return e>=1872&&e<=1919},"Arabic Extended-A":function(e){return e>=2208&&e<=2303},"Hangul Jamo":function(e){return e>=4352&&e<=4607},"Unified Canadian Aboriginal Syllabics":function(e){return e>=5120&&e<=5759},"Unified Canadian Aboriginal Syllabics Extended":function(e){return e>=6320&&e<=6399},"General Punctuation":function(e){return e>=8192&&e<=8303},"Letterlike Symbols":function(e){return e>=8448&&e<=8527},"Number Forms":function(e){return e>=8528&&e<=8591},"Miscellaneous Technical":function(e){return e>=8960&&e<=9215},"Control Pictures":function(e){return e>=9216&&e<=9279},"Optical Character Recognition":function(e){return e>=9280&&e<=9311},"Enclosed Alphanumerics":function(e){return e>=9312&&e<=9471},"Geometric Shapes":function(e){return e>=9632&&e<=9727},"Miscellaneous Symbols":function(e){return e>=9728&&e<=9983},"Miscellaneous Symbols and Arrows":function(e){return e>=11008&&e<=11263},"CJK Radicals Supplement":function(e){return e>=11904&&e<=12031},"Kangxi Radicals":function(e){return e>=12032&&e<=12255},"Ideographic Description Characters":function(e){return e>=12272&&e<=12287},"CJK Symbols and Punctuation":function(e){return e>=12288&&e<=12351},Hiragana:function(e){return e>=12352&&e<=12447},Katakana:function(e){return e>=12448&&e<=12543},Bopomofo:function(e){return e>=12544&&e<=12591},"Hangul Compatibility Jamo":function(e){return e>=12592&&e<=12687},Kanbun:function(e){return e>=12688&&e<=12703},"Bopomofo Extended":function(e){return e>=12704&&e<=12735},"CJK Strokes":function(e){return e>=12736&&e<=12783},"Katakana Phonetic Extensions":function(e){return e>=12784&&e<=12799},"Enclosed CJK Letters and Months":function(e){return e>=12800&&e<=13055},"CJK Compatibility":function(e){return e>=13056&&e<=13311},"CJK Unified Ideographs Extension A":function(e){return e>=13312&&e<=19903},"Yijing Hexagram Symbols":function(e){return e>=19904&&e<=19967},"CJK Unified Ideographs":function(e){return e>=19968&&e<=40959},"Yi Syllables":function(e){return e>=40960&&e<=42127},"Yi Radicals":function(e){return e>=42128&&e<=42191},"Hangul Jamo Extended-A":function(e){return e>=43360&&e<=43391},"Hangul Syllables":function(e){return e>=44032&&e<=55215},"Hangul Jamo Extended-B":function(e){return e>=55216&&e<=55295},"Private Use Area":function(e){return e>=57344&&e<=63743},"CJK Compatibility Ideographs":function(e){return e>=63744&&e<=64255},"Arabic Presentation Forms-A":function(e){return e>=64336&&e<=65023},"Vertical Forms":function(e){return e>=65040&&e<=65055},"CJK Compatibility Forms":function(e){return e>=65072&&e<=65103},"Small Form Variants":function(e){return e>=65104&&e<=65135},"Arabic Presentation Forms-B":function(e){return e>=65136&&e<=65279},"Halfwidth and Fullwidth Forms":function(e){return e>=65280&&e<=65519}};t.exports=r},{}],245:[function(e,t,n){"use strict";var r=function(e,t){this.max=e,this.onRemove=t,this.reset()};r.prototype.reset=function(){var e=this;for(var t in e.data)e.onRemove(e.data[t]);return this.data={},this.order=[],this},r.prototype.add=function(e,t){if(this.has(e))this.order.splice(this.order.indexOf(e),1),this.data[e]=t,this.order.push(e);else if(this.data[e]=t,this.order.push(e),this.order.length>this.max){var n=this.get(this.order[0]);n&&this.onRemove(n)}return this},r.prototype.has=function(e){return e in this.data},r.prototype.keys=function(){return this.order},r.prototype.get=function(e){if(!this.has(e))return null;var t=this.data[e];return delete this.data[e],this.order.splice(this.order.indexOf(e),1),t},r.prototype.getWithoutRemoving=function(e){return this.has(e)?this.data[e]:null},r.prototype.remove=function(e){if(!this.has(e))return this;var t=this.data[e];return delete this.data[e],this.onRemove(t),this.order.splice(this.order.indexOf(e),1),this},r.prototype.setMaxSize=function(e){var t=this;for(this.max=e;this.order.length>this.max;){var n=t.get(t.order[0]);n&&t.onRemove(n)}return this},t.exports=r},{}],246:[function(e,t,n){"use strict";function r(e,t){var n=a(u.API_URL);if(e.protocol=n.protocol,e.authority=n.authority,"/"!==n.path&&(e.path=""+n.path+e.path),!u.REQUIRE_ACCESS_TOKEN)return s(e);if(!(t=t||u.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+c);if("s"===t[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+c);return e.params.push("access_token="+t),s(e)}function o(e){return 0===e.indexOf("mapbox:")}function i(e){for(var t=0;t<e.length;t++)0===e[t].indexOf("access_token=tk.")&&(e[t]="access_token="+(u.ACCESS_TOKEN||""))}function a(e){var t=e.match(h);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function s(e){var t=e.params.length?"?"+e.params.join("&"):"";return e.protocol+"://"+e.authority+e.path+t}var u=e("./config"),l=e("./browser"),c="See https://www.mapbox.com/api-documentation/#access-tokens";n.isMapboxURL=o,n.normalizeStyleURL=function(e,t){if(!o(e))return e;var n=a(e);return n.path="/styles/v1"+n.path,r(n,t)},n.normalizeGlyphsURL=function(e,t){if(!o(e))return e;var n=a(e);return n.path="/fonts/v1"+n.path,r(n,t)},n.normalizeSourceURL=function(e,t){if(!o(e))return e;var n=a(e);return n.path="/v4/"+n.authority+".json",n.params.push("secure"),r(n,t)},n.normalizeSpriteURL=function(e,t,n,i){var u=a(e);return o(e)?(u.path="/styles/v1"+u.path+"/sprite"+t+n,r(u,i)):(u.path+=""+t+n,s(u))};var p=/(\.(png|jpg)\d*)(?=$)/;n.normalizeTileURL=function(e,t,n){if(!t||!o(t))return e;var r=a(e),u=l.devicePixelRatio>=2||512===n?"@2x":"",c=l.supportsWebp?".webp":"$1";return r.path=r.path.replace(p,""+u+c),i(r.params),s(r)};var h=/^(\w+):\/\/([^\/?]*)(\/[^?]+)?\??(.+)?/},{"./browser":231,"./config":235}],247:[function(e,t,n){"use strict";var r=e("./is_char_in_unicode_block");t.exports.allowsIdeographicBreaking=function(e){for(var t=0,r=e;t<r.length;t+=1){var o=r[t];if(!n.charAllowsIdeographicBreaking(o.charCodeAt(0)))return!1}return!0},t.exports.allowsVerticalWritingMode=function(e){for(var t=0,r=e;t<r.length;t+=1){var o=r[t];if(n.charHasUprightVerticalOrientation(o.charCodeAt(0)))return!0}return!1},t.exports.allowsLetterSpacing=function(e){for(var t=0,r=e;t<r.length;t+=1){var o=r[t];if(!n.charAllowsLetterSpacing(o.charCodeAt(0)))return!1}return!0},t.exports.charAllowsLetterSpacing=function(e){return!r.Arabic(e)&&!r["Arabic Supplement"](e)&&!r["Arabic Extended-A"](e)&&!r["Arabic Presentation Forms-A"](e)&&!r["Arabic Presentation Forms-B"](e)},t.exports.charAllowsIdeographicBreaking=function(e){return!(e<11904)&&(!!r["Bopomofo Extended"](e)||!!r.Bopomofo(e)||!!r["CJK Compatibility Forms"](e)||!!r["CJK Compatibility Ideographs"](e)||!!r["CJK Compatibility"](e)||!!r["CJK Radicals Supplement"](e)||!!r["CJK Strokes"](e)||!!r["CJK Symbols and Punctuation"](e)||!!r["CJK Unified Ideographs Extension A"](e)||!!r["CJK Unified Ideographs"](e)||!!r["Enclosed CJK Letters and Months"](e)||!!r["Halfwidth and Fullwidth Forms"](e)||!!r.Hiragana(e)||!!r["Ideographic Description Characters"](e)||!!r["Kangxi Radicals"](e)||!!r["Katakana Phonetic Extensions"](e)||!!r.Katakana(e)||!!r["Vertical Forms"](e)||!!r["Yi Radicals"](e)||!!r["Yi Syllables"](e))},n.charHasUprightVerticalOrientation=function(e){return 746===e||747===e||!(e<4352)&&(!!r["Bopomofo Extended"](e)||!!r.Bopomofo(e)||!(!r["CJK Compatibility Forms"](e)||e>=65097&&e<=65103)||!!r["CJK Compatibility Ideographs"](e)||!!r["CJK Compatibility"](e)||!!r["CJK Radicals Supplement"](e)||!!r["CJK Strokes"](e)||!(!r["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||!!r["CJK Unified Ideographs Extension A"](e)||!!r["CJK Unified Ideographs"](e)||!!r["Enclosed CJK Letters and Months"](e)||!!r["Hangul Compatibility Jamo"](e)||!!r["Hangul Jamo Extended-A"](e)||!!r["Hangul Jamo Extended-B"](e)||!!r["Hangul Jamo"](e)||!!r["Hangul Syllables"](e)||!!r.Hiragana(e)||!!r["Ideographic Description Characters"](e)||!!r.Kanbun(e)||!!r["Kangxi Radicals"](e)||!!r["Katakana Phonetic Extensions"](e)||!(!r.Katakana(e)||12540===e)||!(!r["Halfwidth and Fullwidth Forms"](e)||65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||!(!r["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||!!r["Unified Canadian Aboriginal Syllabics"](e)||!!r["Unified Canadian Aboriginal Syllabics Extended"](e)||!!r["Vertical Forms"](e)||!!r["Yijing Hexagram Symbols"](e)||!!r["Yi Syllables"](e)||!!r["Yi Radicals"](e))},n.charHasNeutralVerticalOrientation=function(e){return!(!r["Latin-1 Supplement"](e)||167!==e&&169!==e&&174!==e&&177!==e&&188!==e&&189!==e&&190!==e&&215!==e&&247!==e)||!(!r["General Punctuation"](e)||8214!==e&&8224!==e&&8225!==e&&8240!==e&&8241!==e&&8251!==e&&8252!==e&&8258!==e&&8263!==e&&8264!==e&&8265!==e&&8273!==e)||!!r["Letterlike Symbols"](e)||!!r["Number Forms"](e)||!(!r["Miscellaneous Technical"](e)||!(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215))||!(!r["Control Pictures"](e)||9251===e)||!!r["Optical Character Recognition"](e)||!!r["Enclosed Alphanumerics"](e)||!!r["Geometric Shapes"](e)||!(!r["Miscellaneous Symbols"](e)||e>=9754&&e<=9759)||!(!r["Miscellaneous Symbols and Arrows"](e)||!(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243))||!!r["CJK Symbols and Punctuation"](e)||!!r.Katakana(e)||!!r["Private Use Area"](e)||!!r["CJK Compatibility Forms"](e)||!!r["Small Form Variants"](e)||!!r["Halfwidth and Fullwidth Forms"](e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e},n.charHasRotatedVerticalOrientation=function(e){return!(n.charHasUprightVerticalOrientation(e)||n.charHasNeutralVerticalOrientation(e))}},{"./is_char_in_unicode_block":244}],248:[function(e,t,n){"use strict";var r=e("../geo/lng_lat");t.exports=function(e,t,n){if(e=new r(e.lng,e.lat),t){var o=new r(e.lng-360,e.lat),i=new r(e.lng+360,e.lat),a=n.locationPoint(e).distSqr(t);n.locationPoint(o).distSqr(t)<a?e=o:n.locationPoint(i).distSqr(t)<a&&(e=i)}for(;Math.abs(e.lng-n.center.lng)>180;){var s=n.locationPoint(e);if(s.x>=0&&s.y>=0&&s.x<=n.width&&s.y<=n.height)break;e.lng>n.center.lng?e.lng-=360:e.lng+=360}return e}},{"../geo/lng_lat":68}],249:[function(e,t,n){"use strict";function r(e){var t=JSON.stringify(e);if(f[t])return f[t];var n=void 0===e.alignment?1:e.alignment,r=0,a=0,u=["Uint8"],c=e.members.map(function(e){u.indexOf(e.type)<0&&u.push(e.type);var t=i(e.type),s=r=o(r,Math.max(n,t)),l=e.components||1;return a=Math.max(a,t),r+=t*l,{name:e.name,type:e.type,components:l,offset:s}}),d=o(r,Math.max(a,n)),m=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(p);m.prototype.alignment=n,m.prototype.size=d;for(var y=0,v=c;y<v.length;y+=1)for(var g=v[y],_=0;_<g.components;_++){var b=g.name;if(g.components>1&&(b+=_),b in m.prototype)throw new Error(b+" is a reserved name and cannot be used as a member name.");Object.defineProperty(m.prototype,b,l(g,_))}var w=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(h);return w.prototype.members=c,w.prototype.StructType=m,w.prototype.bytesPerElement=d,w.prototype.emplaceBack=s(c,d),w.prototype._usedTypes=u,f[t]=w,w}function o(e,t){return Math.ceil(e/t)*t}function i(e){return c[e].BYTES_PER_ELEMENT}function a(e){return e.toLowerCase()}function s(e,t){for(var n=[],r=[],o="var i = this.length;\nthis.resize(this.length + 1);\n",s=0,u=e;s<u.length;s+=1){var l=u[s],c=i(l.type);n.indexOf(c)<0&&(n.push(c),o+="var o"+c.toFixed(0)+" = i * "+(t/c).toFixed(0)+";\n");for(var p=0;p<l.components;p++){var h="v"+r.length,f="o"+c.toFixed(0)+" + "+(l.offset/c+p).toFixed(0);o+="this."+a(l.type)+"["+f+"] = "+h+";\n",r.push(h)}}return o+="return i;",new Function(r.toString(),o)}function u(e,t){var n="this._pos"+i(e.type).toFixed(0),r=(e.offset/i(e.type)+t).toFixed(0),o=n+" + "+r;return"this._structArray."+a(e.type)+"["+o+"]"}function l(e,t){var n=u(e,t);return{get:new Function("return "+n+";"),set:new Function("x",n+" = x;")}}t.exports=r;var c={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},p=function(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},h=function(e){this.isTransferred=!1,void 0!==e?(this.arrayBuffer=e.arrayBuffer,this.length=e.length,this.capacity=this.arrayBuffer.byteLength/this.bytesPerElement,this._refreshViews()):(this.capacity=-1,this.resize(0))};h.serialize=function(){return{members:this.prototype.members,alignment:this.prototype.StructType.prototype.alignment}},h.prototype.serialize=function(e){return this._trim(),e&&(this.isTransferred=!0,e.push(this.arrayBuffer)),{length:this.length,arrayBuffer:this.arrayBuffer}},h.prototype.get=function(e){return new this.StructType(this,e)},h.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},h.prototype.clear=function(){this.length=0},h.prototype.resize=function(e){if(this.length=e,e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}},h.prototype._refreshViews=function(){for(var e=this,t=0,n=e._usedTypes;t<n.length;t+=1){var r=n[t];e[a(r)]=new c[r](e.arrayBuffer)}},h.prototype.toArray=function(e,t){for(var n=this,r=[],o=e;o<t;o++){var i=n.get(o);r.push(i)}return r};var f={}},{}],250:[function(e,t,n){"use strict";var r=e("./browser"),o=function(e,t){this.frequency=e,this.throttledFunction=t,this.lastInvocation=0};o.prototype.invoke=function(){var e=this;if(!this.pendingInvocation){var t=0===this.lastInvocation?0:this.lastInvocation+this.frequency-r.now();t<=0?(this.lastInvocation=r.now(),this.throttledFunction()):this.pendingInvocation=setTimeout(function(){e.pendingInvocation=void 0,e.lastInvocation=r.now(),e.throttledFunction()},t)}},o.prototype.stop=function(){this.pendingInvocation&&(clearTimeout(this.pendingInvocation),this.pendingInvocation=void 0)},t.exports=o},{"./browser":231}],251:[function(e,t,n){"use strict";function r(e,t){return t.replace(/{([^{}]+)}/g,function(t,n){return n in e?String(e[n]):""})}t.exports=r},{}],252:[function(e,t,n){"use strict";var r=e("@mapbox/unitbezier"),o=e("../geo/coordinate");e("@mapbox/point-geometry");n.easeCubicInOut=function(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)},n.bezier=function(e,t,n,o){var i=new r(e,t,n,o);return function(e){return i.solve(e)}},n.ease=n.bezier(.25,.1,.25,1),n.clamp=function(e,t,n){return Math.min(n,Math.max(t,e))},n.wrap=function(e,t,n){var r=n-t,o=((e-t)%r+r)%r+t;return o===t?n:o},n.asyncAll=function(e,t,n){if(!e.length)return n(null,[]);var r=e.length,o=new Array(e.length),i=null;e.forEach(function(e,a){t(e,function(e,t){e&&(i=e),o[a]=t,0==--r&&n(i,o)})})},n.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},n.keysDifference=function(e,t){var n=[];for(var r in e)r in t||n.push(r);return n},n.extend=function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];for(var r=0,o=t;r<o.length;r+=1){var i=o[r];for(var a in i)e[a]=i[a]}return e},n.pick=function(e,t){for(var n={},r=0;r<t.length;r++){var o=t[r];o in e&&(n[o]=e[o])}return n};var i=1;n.uniqueId=function(){return i++},n.bindAll=function(e,t){e.forEach(function(e){t[e]&&(t[e]=t[e].bind(t))})},n.getCoordinatesCenter=function(e){for(var t=1/0,n=1/0,r=-1/0,i=-1/0,a=0;a<e.length;a++)t=Math.min(t,e[a].column),n=Math.min(n,e[a].row),r=Math.max(r,e[a].column),i=Math.max(i,e[a].row);var s=r-t,u=i-n,l=Math.max(s,u),c=Math.max(0,Math.floor(-Math.log(l)/Math.LN2));return new o((t+r)/2,(n+i)/2,0).zoomTo(c)},n.endsWith=function(e,t){return-1!==e.indexOf(t,e.length-t.length)},n.mapObject=function(e,t,n){var r=this,o={};for(var i in e)o[i]=t.call(n||r,e[i],i,e);return o},n.filterObject=function(e,t,n){var r=this,o={};for(var i in e)t.call(n||r,e[i],i,e)&&(o[i]=e[i]);return o},n.deepEqual=function(e,t){if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!n.deepEqual(e[r],t[r]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==t){if("object"!=typeof t)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var o in e)if(!n.deepEqual(e[o],t[o]))return!1;return!0}return e===t},n.clone=function(e){return Array.isArray(e)?e.map(n.clone):"object"==typeof e&&e?n.mapObject(e,n.clone):e},n.arraysIntersect=function(e,t){for(var n=0;n<e.length;n++)if(t.indexOf(e[n])>=0)return!0;return!1};var a={};n.warnOnce=function(e){a[e]||("undefined"!=typeof console&&console.warn(e),a[e]=!0)},n.isCounterClockwise=function(e,t,n){return(n.y-e.y)*(t.x-e.x)>(t.y-e.y)*(n.x-e.x)},n.calculateSignedArea=function(e){for(var t=0,n=0,r=e.length,o=r-1,i=void 0,a=void 0;n<r;o=n++)i=e[n],a=e[o],t+=(a.x-i.x)*(i.y+a.y);return t},n.isClosedPolygon=function(e){if(e.length<4)return!1;var t=e[0],r=e[e.length-1];return!(Math.abs(t.x-r.x)>0||Math.abs(t.y-r.y)>0)&&Math.abs(n.calculateSignedArea(e))>.01},n.sphericalToCartesian=function(e){var t=e[0],n=e[1],r=e[2];return n+=90,n*=Math.PI/180,r*=Math.PI/180,[t*Math.cos(n)*Math.sin(r),t*Math.sin(n)*Math.sin(r),t*Math.cos(r)]},n.parseCacheControl=function(e){var t=/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,n={};if(e.replace(t,function(e,t,r,o){var i=r||o;return n[t]=!i||i.toLowerCase(),""}),n["max-age"]){var r=parseInt(n["max-age"],10);isNaN(r)?delete n["max-age"]:n["max-age"]=r}return n}},{"../geo/coordinate":67,"@mapbox/point-geometry":2,"@mapbox/unitbezier":5}],253:[function(e,t,n){"use strict";var r=function(e,t,n,r){this.type="Feature",this._vectorTileFeature=e,e._z=t,e._x=n,e._y=r,this.properties=e.properties,null!=e.id&&(this.id=e.id)},o={geometry:{}};o.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},o.geometry.set=function(e){this._geometry=e},r.prototype.toJSON=function(){var e=this,t={geometry:this.geometry};for(var n in e)"_geometry"!==n&&"_vectorTileFeature"!==n&&(t[n]=e[n]);return t},Object.defineProperties(r.prototype,o),t.exports=r},{}],254:[function(e,t,n){"use strict";var r=e("./script_detection");t.exports=function(e){for(var n="",o=0;o<e.length;o++){var i=e.charCodeAt(o+1)||null,a=e.charCodeAt(o-1)||null;i&&r.charHasRotatedVerticalOrientation(i)&&!t.exports.lookup[e[o+1]]||a&&r.charHasRotatedVerticalOrientation(a)&&!t.exports.lookup[e[o-1]]||!t.exports.lookup[e[o]]?n+=e[o]:n+=t.exports.lookup[e[o]]}return n},t.exports.lookup={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"}},{"./script_detection":247}],255:[function(e,t,n){"use strict";var r=e("./web_worker"),o=function(){this.active={}};o.prototype.acquire=function(t){var n=this;if(!this.workers){var o=e("../").workerCount;for(this.workers=[];this.workers.length<o;)n.workers.push(new r)}return this.active[t]=!0,this.workers.slice()},o.prototype.release=function(e){delete this.active[e],0===Object.keys(this.active).length&&(this.workers.forEach(function(e){e.terminate()}),this.workers=null)},t.exports=o},{"../":73,"./web_worker":232}]},{},[73])(73)})}).call(t,n(23))},function(e,t){},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(1),s=n.n(a),u=n(15),l=n.n(u),c=n(5),p=n(16),h=n(358),f=(n.n(h),n(359)),d=n(360),m=n(361),y=n(362),v=n(363),g=n(364),_=n(365),b=n(366),w=n(367),x=n(368),E=n(369),C=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),T=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={email:"",uid:"",category:"",catId:"",title:"",price:0,tag:null,description:null,location:null,zipcode:null,condition:null,make:null,model:null,size:null,employmentType:null,compensation:null,companyName:null,phoneNumber:null,contactName:null,rent:null,bedrooms:null,bathrooms:null,availableDate:null,recordDate:null},n}return i(t,e),C(t,[{key:"componentWillMount",value:function(){var e=this;p.a.auth().onAuthStateChanged(function(t){t&&(e.setState({email:t.email}),e.setState({uid:t.uid}))}),this.handleCategoryState=this.handleCategoryState.bind(this),this.handleTagState=this.handleTagState.bind(this),this.handleSubmit=this.handleSubmit.bind(this)}},{key:"handleCategoryState",value:function(e){var t=e.target.innerHTML;switch(!0){case"For Sale"===t:this.setState({catId:1});break;case"Jobs"===t:this.setState({catId:2});break;case"Services"===t:this.setState({catId:3});break;case"Housing"===t:this.setState({catId:4});break;case"Community"===t:this.setState({catId:5});break;default:this.setState({catId:""})}this.setState({category:t}),this.setState({tag:null}),console.log(this.state.category)}},{key:"handleTagState",value:function(e){var t=e.target.innerHTML;t.includes("&amp;")?(t=t.replace(/amp;/g,""),this.setState({tag:t})):this.setState({tag:t})}},{key:"handleSubmit",value:function(e,t){var n=this,r=new Date;console.log(r),t.recordDate=r,console.log(t),e.preventDefault();var o=t.file,i=p.a.storage().ref(),a=i.child("images/"+o.name).put(o);return new Promise(function(e,t){a.on("state_changed",function(e){},function(e){},function(){var t=a.snapshot.downloadURL;e({downloadURL:t}),console.log(t)})}).then(function(e){var r=e.downloadURL;t.imageUrl=r,console.log(t),l.a.post("/api/createForSaleForm",t).then(function(e){console.log(e);var t=e.data[0].post_id;console.log(t),n.props.history.push("/post/"+t)})})}},{key:"render",value:function(){var e=void 0;this.state.category&&(e=s.a.createElement("div",{className:"center-cat select-category"},s.a.createElement("h4",null,"Select a category")));var t=void 0;return"For Sale"===this.state.category&&(t=s.a.createElement("div",{id:"for-sale-form"},s.a.createElement(d.a,{handleTagState:this.handleTagState}),this.state.tag&&s.a.createElement(m.a,{state:this.state,handleSubmit:this.handleSubmit}))),"Jobs"===this.state.category&&(t=s.a.createElement("div",null,s.a.createElement(y.a,{handleTagState:this.handleTagState}),this.state.tag&&s.a.createElement(v.a,{state:this.state,handleSubmit:this.handleSubmit}))),"Services"===this.state.category&&(t=s.a.createElement("div",null,s.a.createElement(g.a,{handleTagState:this.handleTagState}),this.state.tag&&s.a.createElement(_.a,{state:this.state,handleSubmit:this.handleSubmit}))),"Housing"===this.state.category&&(t=s.a.createElement("div",null,s.a.createElement(b.a,{handleTagState:this.handleTagState}),this.state.tag&&s.a.createElement(w.a,{state:this.state,handleSubmit:this.handleSubmit}))),"Community"===this.state.category&&(t=s.a.createElement("div",null,s.a.createElement(x.a,{handleTagState:this.handleTagState}),this.state.tag&&s.a.createElement(E.a,{state:this.state,handleSubmit:this.handleSubmit}))),s.a.createElement("div",{className:"form-parent-component"},s.a.createElement(f.a,{handleCategoryState:this.handleCategoryState}),e,t)}}]),t}(a.Component);t.a=Object(c.e)(T)},function(e,t){},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(1),s=n.n(a),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"content-container"},s.a.createElement("ul",{className:"category-list"},s.a.createElement("li",{className:"hover",onClick:this.props.handleCategoryState},"For Sale"),s.a.createElement("li",{className:"hover",onClick:this.props.handleCategoryState},"Jobs"),s.a.createElement("li",{className:"hover",onClick:this.props.handleCategoryState},"Services"),s.a.createElement("li",{className:"hover",onClick:this.props.handleCategoryState},"Housing"),s.a.createElement("li",{className:"hover",onClick:this.props.handleCategoryState},"Community")))}}]),t}(a.Component);t.a=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(1),s=n.n(a),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"tag-list-container"},s.a.createElement("ul",null,s.a.createElement("li",{className:"hover",onClick:this.props.handleTagState},"Outdoors"),s.a.createElement("li",{className:"hover",onClick:this.props.handleTagState},"Books"),s.a.createElement("li",{className:"hover",onClick:this.props.handleTagState},"Household"),s.a.createElement("li",{className:"hover",onClick:this.props.handleTagState},"Atv & Motorcycles"),s.a.createElement("li",{className:"hover",onClick:this.props.handleTagState},"Cars & Trucks"),s.a.createElement("li",{className:"hover",onClick:this.props.handleTagState},"Business"),s.a.createElement("li",{className:"hover",onClick:this.props.handleTagState},"Music"),s.a.createElement("li",{className:"hover",onClick:this.props.handleTagState},"Tech"),s.a.createElement("li",{className:"hover",onClick:this.props.handleTagState},"Toys & Games"),s.a.createElement("li",{className:"hover",onClick:this.props.handleTagState},"Garden & Tools"),s.a.createElement("li",{className:"hover",onClick:this.props.handleTagState},"Tickets"),s.a.createElement("li",{className:"hover",onClick:this.props.handleTagState},"Garage Sale")))}}]),t}(a.Component);t.a=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(1),s=n.n(a),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={},n}return i(t,e),u(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:""},s.a.createElement("form",null,s.a.createElement("div",{className:"main-parent-forsale-container"},s.a.createElement("div",{className:"title-form-container"},s.a.createElement("input",{className:"input",type:"text",required:!0,placeholder:"Title",onChange:function(t){e.props.state.title=t.target.value}})),s.a.createElement("div",{className:"center-center"},s.a.createElement("div",{className:"forsale-nontitle-input-container"},s.a.createElement("input",{className:"input forsale-input",type:"number",required:!0,placeholder:"Price",onChange:function(t){e.props.state.price=t.target.value}}),s.a.createElement("input",{className:"forsale-middle-input input forsale-input",type:"text",required:!0,placeholder:"Location",onChange:function(t){e.props.state.location=t.target.value}}),s.a.createElement("input",{className:"input forsale-input",type:"text",pattern:"(\\d{5}([\\-]\\d{4})?)",required:!0,placeholder:"Zip Code",onChange:function(t){e.props.state.zipcode=t.target.value}}))),s.a.createElement("div",{className:"form-description-container"},s.a.createElement("textarea",{className:"form-description-input email-modal-message-input",type:"text",required:!0,placeholder:"Description...",onChange:function(t){e.props.state.description=t.target.value}})),s.a.createElement("div",{className:"form-image-input"},s.a.createElement("input",{type:"file",required:!0,onChange:function(t){return e.props.state.file=t.target.files[0]}}),s.a.createElement("br",null)),s.a.createElement("div",null,s.a.createElement("button",{id:"form-submit-btn",className:"btn",type:"submit",onClick:function(t){e.props.state.title&&e.props.state.price&&e.props.state.location&&e.props.state.zipcode&&e.props.state.description&&e.props.state.file&&e.props.handleSubmit(t,e.props.state)}},"Submit")))))}}]),t}(a.Component);t.a=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(1),s=n.n(a),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"tag-list-container"},s.a.createElement("ul",null,s.a.createElement("li",{className:"hover",onClick:this.props.handleTagState},"Accounting & Finance"),s.a.createElement("li",{className:"hover",onClick:this.props.handleTagState},"Admin & Office"),s.a.createElement("li",{className:"hover",onClick:this.props.handleTagState},"Art & Media"),s.a.createElement("li",{className:"hover",onClick:this.props.handleTagState},"Education"),s.a.createElement("li",{className:"hover",onClick:this.props.handleTagState},"Food & Bev"),s.a.createElement("li",{className:"hover",onClick:this.props.handleTagState},"General Labor"),s.a.createElement("li",{className:"hover",onClick:this.props.handleTagState},"Manufacturing"),s.a.createElement("li",{className:"hover",onClick:this.props.handleTagState},"Medical & Health"),s.a.createElement("li",{className:"hover",onClick:this.props.handleTagState},"Real Estate"),s.a.createElement("li",{className:"hover",onClick:this.props.handleTagState},"Retail Wholesale"),s.a.createElement("li",{className:"hover",onClick:this.props.handleTagState},"Sales & Biz Dev"),s.a.createElement("li",{className:"hover",onClick:this.props.handleTagState},"Skilled Trade & Craft"),s.a.createElement("li",{className:"hover",onClick:this.props.handleTagState},"Technical"),s.a.createElement("li",{className:"hover",onClick:this.props.handleTagState},"Transport"),s.a.createElement("li",{className:"hover",onClick:this.props.handleTagState},"Writing & Editing"),s.a.createElement("li",{className:"hover",onClick:this.props.handleTagState},"Part-time")))}}]),t}(a.Component);t.a=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(1),s=n.n(a),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={},n}return i(t,e),u(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("form",{className:""},s.a.createElement("div",{className:"main-parent-forsale-container"},s.a.createElement("div",{className:"title-form-container"},s.a.createElement("input",{className:"input",type:"text",required:!0,placeholder:"Title",onChange:function(t){e.props.state.title=t.target.value}})),s.a.createElement("div",{className:"center-center"},s.a.createElement("div",{className:"forsale-nontitle-input-container"},s.a.createElement("input",{className:"input forsale-input",type:"text",required:!0,placeholder:"Company Name",onChange:function(t){e.props.state.companyName=t.target.value}}),s.a.createElement("input",{className:"forsale-middle-input input forsale-input",type:"text",required:!0,placeholder:"Location",onChange:function(t){e.props.state.location=t.target.value}}),s.a.createElement("input",{className:"input forsale-input",type:"text",pattern:"(\\d{5}([\\-]\\d{4})?)",required:!0,placeholder:"Zip Code",onChange:function(t){e.props.state.zipcode=t.target.value}}))),s.a.createElement("div",{className:"center-center"},s.a.createElement("div",{className:"forsale-nontitle-2nd"},s.a.createElement("input",{className:"form-left-input input forsale-input",type:"text",required:!0,placeholder:"Employment Type",onChange:function(t){e.props.state.employmentType=t.target.value}}),s.a.createElement("input",{className:"input forsale-input",type:"text",required:!0,placeholder:"Compensation",onChange:function(t){e.props.state.compensation=t.target.value}}))),s.a.createElement("div",{className:"form-description-container"},s.a.createElement("textarea",{className:"form-description-input email-modal-message-input",type:"text",required:!0,placeholder:"Description...",onChange:function(t){e.props.state.description=t.target.value}})),s.a.createElement("div",{className:"form-image-input"},s.a.createElement("input",{type:"file",required:!0,onChange:function(t){return e.props.state.file=t.target.files[0]}}),s.a.createElement("br",null)),s.a.createElement("div",null,s.a.createElement("button",{id:"form-submit-btn",className:"btn",type:"submit",onClick:function(t){e.props.state.title&&e.props.state.location&&e.props.state.zipcode&&e.props.state.description&&e.props.state.employmentType&&e.props.state.compensation&&e.props.state.companyName&&e.props.state.file&&e.props.handleSubmit(t,e.props.state)}},"Submit")))))}}]),t}(a.Component);t.a=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(1),s=n.n(a),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"tag-list-container"},s.a.createElement("ul",null,s.a.createElement("li",{className:"hover",onClick:this.props.handleTagState},"Automotive"),s.a.createElement("li",{className:"hover",onClick:this.props.handleTagState},"Beauty"),s.a.createElement("li",{className:"hover",onClick:this.props.handleTagState},"Cell & Mobile"),s.a.createElement("li",{className:"hover",onClick:this.props.handleTagState},"Computer"),s.a.createElement("li",{className:"hover",onClick:this.props.handleTagState},"Event"),s.a.createElement("li",{className:"hover",onClick:this.props.handleTagState},"Household"),s.a.createElement("li",{className:"hover",onClick:this.props.handleTagState},"Labor & Move"),s.a.createElement("li",{className:"hover",onClick:this.props.handleTagState},"Lessons"),s.a.createElement("li",{className:"hover",onClick:this.props.handleTagState},"Pet"),s.a.createElement("li",{className:"hover",onClick:this.props.handleTagState},"Real Estate"),s.a.createElement("li",{className:"hover",onClick:this.props.handleTagState},"Skilled Trade"),s.a.createElement("li",{className:"hover",onClick:this.props.handleTagState},"Writing & Editing")))}}]),t}(a.Component);t.a=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(1),s=n.n(a),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={},n}return i(t,e),u(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("form",null,s.a.createElement("div",{className:"main-parent-forsale-container"},s.a.createElement("div",{className:"title-form-container"},s.a.createElement("input",{className:"input",type:"text",required:!0,placeholder:"Title",onChange:function(t){e.props.state.title=t.target.value}})),s.a.createElement("div",{className:"center-center"},s.a.createElement("div",{className:"forsale-nontitle-input-container"},s.a.createElement("input",{className:"input forsale-input",type:"text",required:!0,placeholder:"Location",onChange:function(t){e.props.state.location=t.target.value}}),s.a.createElement("input",{className:"form-right-input input forsale-input",type:"text",pattern:"(\\d{5}([\\-]\\d{4})?)",required:!0,placeholder:"Zip Code",onChange:function(t){e.props.state.zipcode=t.target.value}}))),s.a.createElement("div",{className:"center-center"},s.a.createElement("div",{className:"forsale-nontitle-2nd"},s.a.createElement("input",{className:"input forsale-input",type:"text",required:!0,placeholder:"Contact Name",onChange:function(t){e.props.state.contactName=t.target.value}}),s.a.createElement("input",{className:"form-right-input input forsale-input",type:"text",required:!0,placeholder:"Phone Number",onChange:function(t){e.props.state.phoneNumber=t.target.value}}))),s.a.createElement("div",{className:"form-description-container"},s.a.createElement("textarea",{className:"form-description-input email-modal-message-input",type:"text",required:!0,placeholder:"Description...",onChange:function(t){e.props.state.description=t.target.value}})),s.a.createElement("div",{className:"form-image-input"},s.a.createElement("input",{type:"file",required:!0,onChange:function(t){return e.props.state.file=t.target.files[0]}}),s.a.createElement("br",null)),s.a.createElement("div",null,s.a.createElement("button",{id:"form-submit-btn",className:"btn",type:"submit",onClick:function(t){e.props.state.title&&e.props.state.location&&e.props.state.zipcode&&e.props.state.description&&e.props.state.employmentType&&e.props.state.compensation&&e.props.state.companyName&&e.props.state.file&&e.props.handleSubmit(t,e.props.state)}},"Submit")))))}}]),t}(a.Component);t.a=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(1),s=n.n(a),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"tag-list-container"},s.a.createElement("ul",null,s.a.createElement("li",{className:"hover",onClick:this.props.handleTagState},"Apts & Housing"),s.a.createElement("li",{className:"hover",onClick:this.props.handleTagState},"Housing Wanted"),s.a.createElement("li",{className:"hover",onClick:this.props.handleTagState},"Office & Commerical"),s.a.createElement("li",{className:"hover",onClick:this.props.handleTagState},"Real Estate For Sale"),s.a.createElement("li",{className:"hover",onClick:this.props.handleTagState},"Rooms & Shared"),s.a.createElement("li",{className:"hover",onClick:this.props.handleTagState},"Rooms Wanted"),s.a.createElement("li",{className:"hover",onClick:this.props.handleTagState},"Sublets & Temporary"),s.a.createElement("li",{className:"hover",onClick:this.props.handleTagState},"Vacation Rentals")))}}]),t}(a.Component);t.a=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(1),s=n.n(a),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={},n}return i(t,e),u(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("form",null,s.a.createElement("div",{className:"main-parent-forsale-container"},s.a.createElement("div",{className:"title-form-container"},s.a.createElement("input",{className:"input",type:"text",required:!0,placeholder:"Title",onChange:function(t){e.props.state.title=t.target.value}})),s.a.createElement("div",{className:"center-center"},s.a.createElement("div",{className:"forsale-nontitle-input-container"},s.a.createElement("input",{className:"input forsale-input",type:"text",required:!0,placeholder:"Location",onChange:function(t){e.props.state.location=t.target.value}}),s.a.createElement("input",{className:"forsale-middle-input input forsale-input",type:"text",pattern:"(\\d{5}([\\-]\\d{4})?)",required:!0,placeholder:"Zip Code",onChange:function(t){e.props.state.zipcode=t.target.value}}),s.a.createElement("input",{className:"input forsale-input",type:"text",required:!0,placeholder:"Available Date",onChange:function(t){e.props.state.availableDate=t.target.value}}))),s.a.createElement("div",{className:"center-center"},s.a.createElement("div",{className:"forsale-nontitle-2nd"},s.a.createElement("input",{className:"input forsale-input",type:"text",required:!0,placeholder:"Rent",onChange:function(t){e.props.state.rent=t.target.value}}),s.a.createElement("input",{className:"forsale-middle-input input forsale-input",type:"text",required:!0,placeholder:"Bedrooms",onChange:function(t){e.props.state.bedrooms=t.target.value}}),s.a.createElement("input",{className:"input forsale-input",type:"text",required:!0,placeholder:"Bathrooms",onChange:function(t){e.props.state.bathrooms=t.target.value}}))),s.a.createElement("div",{className:"form-description-container"},s.a.createElement("textarea",{className:"form-description-input email-modal-message-input",type:"text",required:!0,placeholder:"Description...",onChange:function(t){e.props.state.description=t.target.value}})),s.a.createElement("div",{className:"form-image-input"},s.a.createElement("input",{type:"file",required:!0,onChange:function(t){return e.props.state.file=t.target.files[0]}}),s.a.createElement("br",null)),s.a.createElement("div",null,s.a.createElement("button",{id:"form-submit-btn",className:"btn",type:"submit",onClick:function(t){e.props.state.title&&e.props.state.location&&e.props.state.zipcode&&e.props.state.description&&e.props.state.employmentType&&e.props.state.compensation&&e.props.state.companyName&&e.props.state.file&&e.props.handleSubmit(t,e.props.state)}},"Submit")))))}}]),t}(a.Component);t.a=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(1),s=n.n(a),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"tag-list-container"},s.a.createElement("ul",null,s.a.createElement("li",{className:"hover",onClick:this.props.handleTagState},"Activities"),s.a.createElement("li",{className:"hover",onClick:this.props.handleTagState},"Artists"),s.a.createElement("li",{className:"hover",onClick:this.props.handleTagState},"Childcare"),s.a.createElement("li",{className:"hover",onClick:this.props.handleTagState},"Classes"),s.a.createElement("li",{className:"hover",onClick:this.props.handleTagState},"Events"),s.a.createElement("li",{className:"hover",onClick:this.props.handleTagState},"General"),s.a.createElement("li",{className:"hover",onClick:this.props.handleTagState},"Groups"),s.a.createElement("li",{className:"hover",onClick:this.props.handleTagState},"Local News"),s.a.createElement("li",{className:"hover",onClick:this.props.handleTagState},"Lost & Found"),s.a.createElement("li",{className:"hover",onClick:this.props.handleTagState},"Musicians"),s.a.createElement("li",{className:"hover",onClick:this.props.handleTagState},"Pets"),s.a.createElement("li",{className:"hover",onClick:this.props.handleTagState},"Volunteers")))}}]),t}(a.Component);t.a=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(1),s=n.n(a),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={},n}return i(t,e),u(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("form",null,s.a.createElement("div",{className:"main-parent-forsale-container"},s.a.createElement("div",{className:"title-form-container"},s.a.createElement("input",{className:"input",type:"text",required:!0,placeholder:"Title",onChange:function(t){e.props.state.title=t.target.value}})),s.a.createElement("div",{className:"center-center"},s.a.createElement("div",{className:"forsale-nontitle-input-container"},s.a.createElement("input",{className:"form-left-input input forsale-input",type:"text",required:!0,placeholder:"Location",onChange:function(t){e.props.state.location=t.target.value}}),s.a.createElement("input",{className:"input forsale-input",type:"text",pattern:"(\\d{5}([\\-]\\d{4})?)",required:!0,placeholder:"Zip Code",onChange:function(t){e.props.state.zipcode=t.target.value}}))),s.a.createElement("div",{className:"center-center"},s.a.createElement("div",{className:"forsale-nontitle-2nd"},s.a.createElement("input",{className:"form-left-input input forsale-input",type:"text",required:!0,placeholder:"Contact Name",onChange:function(t){e.props.state.contactName=t.target.value}}),s.a.createElement("input",{className:"input forsale-input",type:"text",required:!0,placeholder:"Phone Number",onChange:function(t){e.props.state.phoneNumber=t.target.value}}))),s.a.createElement("div",{className:"form-description-container"},s.a.createElement("textarea",{className:"form-description-input email-modal-message-input",type:"text",required:!0,placeholder:"Description...",onChange:function(t){e.props.state.description=t.target.value}})),s.a.createElement("div",{className:"form-image-input"},s.a.createElement("input",{type:"file",required:!0,onChange:function(t){return e.props.state.file=t.target.files[0]}}),s.a.createElement("br",null)),s.a.createElement("div",null,s.a.createElement("button",{id:"form-submit-btn",className:"btn",type:"submit",onClick:function(t){e.props.state.title&&e.props.state.location&&e.props.state.zipcode&&e.props.state.description&&e.props.state.employmentType&&e.props.state.compensation&&e.props.state.companyName&&e.props.state.file&&e.props.handleSubmit(t,e.props.state)}},"Submit")))))}}]),t}(a.Component);t.a=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(1),s=n.n(a),u=n(16),l=n(15),c=n.n(l),p=n(371),h=n(375),f=n(5),d=n(378),m=(n.n(d),n(47),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),y=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={posts:[],listFav:!0,fav:!1,list:!0,favorites:[],modal:!1},n.changeView=n.changeView.bind(n),n.unFavorite=n.unFavorite.bind(n),n}return i(t,e),m(t,[{key:"componentWillMount",value:function(){var e=this;u.a.auth().onAuthStateChanged(function(t){if(t){e.setState({successEmail:t.email});var n=t.uid;e.setState({uid:n}),c.a.get("/api/getUserPosts/"+n).then(function(t){var n=t.data;e.setState({posts:n})}),c.a.get("/api/getFavorites/"+n).then(function(t){console.log(t);var n=t.data;e.setState({favorites:n})})}})}},{key:"handleDeletePost",value:function(e){var t=this;c.a.post("/api/deletePost",e).then(function(e){var n=e.data;t.setState({posts:n})})}},{key:"changeView",value:function(){console.log("show on click"),console.log(this),this.setState({listFav:!0})}},{key:"changeViews",value:function(){console.log("show on click"),console.log(this),this.setState({listFav:!1})}},{key:"unFavorite",value:function(e){var t=e.uid,n=this;console.log(e.post_id),document.getElementById("heart-"+e.post_id).style.transform="translateY(-30px) scale(4)",document.getElementById("heart-"+e.post_id).style.opacity="0",setTimeout(function(){c.a.post("/api/removeFav",e).then(function(e){c.a.get("/api/getFavorites/"+t).then(function(e){var t=e.data;n.setState({favorites:t})})}),document.getElementById("heart-"+e.post_id).style.transform="translateY(0) scale(1)",document.getElementById("heart-"+e.post_id).style.opacity="1"},550)}},{key:"callBack",value:function(){}},{key:"handleSignout",value:function(e){var t=this,n=this.state.successEmail;u.a.auth().signOut().then(function(){console.log(n,"Signed Out"),t.props.history.push("/"),console.log(t.props)})}},{key:"render",value:function(){var e=this;return console.log(this.state.successEmail),s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("div",{className:"myaccount-filter-container"},s.a.createElement("h1",{className:"myAccountUser"},"Home to ",this.state.successEmail,"  "),s.a.createElement("button",{className:"btn signOut",onClick:function(t){return e.handleSignout(t)}},"Sign out")),s.a.createElement("div",{className:"filter-container"},s.a.createElement("a",{className:"category-filter-myaccount",onClick:function(t){return e.changeView(t)}},"My posts"),s.a.createElement("div",{className:"myaccount-seperator"},"|"),s.a.createElement("a",{className:"category-filter-myaccount",onClick:function(t){return e.changeViews(t)}},"Favorites"))),s.a.createElement("div",null,this.state.listFav?s.a.createElement(p.a,{posts:this.state.posts,onDelete:this.handleDeletePost.bind(this)}):s.a.createElement(h.a,{favorites:this.state.favorites,onRemoveFav:this.unFavorite.bind(this)})))}}]),t}(a.Component);t.a=Object(f.e)(y)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(1),s=n.n(a),u=n(372),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function(e){function t(e){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),l(t,[{key:"deletePost",value:function(e){this.props.onDelete(e)}},{key:"render",value:function(){var e=this,t=this.props.posts.map(function(t,n){return s.a.createElement(u.a,{onDelete:e.deletePost.bind(e),key:n,post:t})});return s.a.createElement("div",{id:"center",className:"content-container"},s.a.createElement("div",{className:"list-item-parent-container"},t))}}]),t}(a.Component);t.a=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(1),s=n.n(a),u=n(373),l=(n.n(u),n(5)),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=function(e){function t(e){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),c(t,[{key:"deletePost",value:function(e){console.log("test"),console.log(e),this.props.onDelete(e)}},{key:"render",value:function(){var e={backgroundImage:"url("+this.props.post.image_url+")"};return s.a.createElement("div",{className:"list-item-container"},s.a.createElement(l.b,{to:"/post/"+this.props.post.post_id},s.a.createElement("div",{className:"list-item-parent-image"},s.a.createElement("div",{className:"list-item-image-container",style:e}))),s.a.createElement("div",{className:"list-item-title-container"},s.a.createElement(l.b,{to:"/post/"+this.props.post.post_id},s.a.createElement("h3",null,this.props.post.title)),s.a.createElement("div",{className:"list-item-delete",onClick:this.deletePost.bind(this,this.props.post)},s.a.createElement("img",{className:"list-item-delete-icon",src:n(374)}))))}}]),t}(a.Component);t.a=Object(l.e)(p)},function(e,t){},function(e,t,n){e.exports=n.p+"static/media/trashIcon.e01fab22.svg"},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(1),s=n.n(a),u=n(15),l=(n.n(u),n(16)),c=n(376),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=function(e){function t(e){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),p(t,[{key:"componentWillMount",value:function(){var e=this;l.a.auth().onAuthStateChanged(function(t){t&&e.setState({successEmail:t.email});var n=t.uid;e.setState({uid:n})})}},{key:"removeFav",value:function(e){this.props.onRemoveFav(e)}},{key:"render",value:function(){var e=this,t=this.props.favorites.map(function(t,n){return s.a.createElement(c.a,{onRemoveFav:e.removeFav.bind(e),key:n,fav:t})});return s.a.createElement("div",{id:"center",className:"content-container"},s.a.createElement("div",{className:"list-item-parent-container"},t))}}]),t}(a.Component);t.a=h},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(1),s=n.n(a),u=n(5),l=n(377),c=(n.n(l),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),p=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),c(t,[{key:"removeFav",value:function(e){this.props.onRemoveFav(e)}},{key:"componentWillMount",value:function(){console.log(this.props.fav.post_id)}},{key:"render",value:function(){var e={backgroundImage:"url("+this.props.fav.image_url+")"};return s.a.createElement("div",{id:"list-item",className:"list-item-container"},s.a.createElement(u.b,{to:"/post/"+this.props.fav.post_id},s.a.createElement("div",{id:"list-image",className:"list-item-parent-image"},s.a.createElement("div",{className:"list-item-image-container",style:e}))),s.a.createElement("div",{className:"list-item-title-container"},s.a.createElement(u.b,{to:"/post/"+this.props.fav.post_id},s.a.createElement("h3",{id:"list-title"},this.props.fav.title)),s.a.createElement("div",{className:"list-item-delete",onClick:this.removeFav.bind(this,this.props.fav)},s.a.createElement("i",{id:"heart-"+this.props.fav.post_id,className:"fa fa-heart selected animate","aria-hidden":"true"}))))}}]),t}(a.Component);t.a=Object(u.e)(p)},function(e,t){},function(e,t){},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(1),s=n.n(a),u=n(380),l=(n.n(u),n(16)),c=n(5),p=n(47),h=n(381),f=n.n(h),d=n(382),m=n.n(d),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),v=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleAccountCondition=function(){n.state.user?(n.setState({modal:!1}),n.props.history.push("/myaccount")):(console.log(n.state),n.setState({modal:!0,redirect:"account"}))},n.handleFormCondition=function(){n.state.user?n.props.history.push("/form"):n.setState({modal:!0,redirect:"form"})},n.state={modal:!1,redirect:"",user:""},n.closeModal=n.closeModal.bind(n),n}return i(t,e),y(t,[{key:"componentWillMount",value:function(){var e=this;console.log(this.state.modal),l.a.auth().onAuthStateChanged(function(t){t?e.setState({user:t.email}):e.setState({modal:!1,user:""})})}},{key:"handleSignout",value:function(e){var t=this,n=this.state.user;l.a.auth().signOut().then(function(){t.setState({user:""}),console.log(n,"Signed Out")})}},{key:"closeModal",value:function(){this.setState({modal:!1})}},{key:"render",value:function(){return s.a.createElement("div",{className:"content-container"},s.a.createElement("div",{className:"navbar-container"},s.a.createElement("div",{className:"logo"},s.a.createElement("div",{className:"img-container"},s.a.createElement(c.b,{to:"/",className:"cf"},s.a.createElement("div",{className:"space"}),s.a.createElement("img",{className:"navbar-logo-png bottom",src:f.a,alt:"logo"}),s.a.createElement("img",{className:"navbar-logo-png top",src:m.a,alt:"logo"}))),s.a.createElement("h3",{className:"navbar-logo"},s.a.createElement(c.b,{to:"/"},"Carlslist"))),s.a.createElement("div",{className:"navbar-btn-container"},s.a.createElement("a",{className:"navbar-account",onClick:this.handleAccountCondition},"My Account"),s.a.createElement("button",{className:"btn",onClick:this.handleFormCondition},"Post an Ad")),this.state.modal&&s.a.createElement(p.a,{state:this.state,closeModal:this.closeModal})))}}]),t}(a.Component);t.a=Object(c.e)(v)},function(e,t){},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAABS2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIi8+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo8P3hwYWNrZXQgZW5kPSJyIj8+LUNEtwAAC2hJREFUeJztnX+0FVUVxz8gkGkmxCpRkewFRWJZJpLgI0wCXCKlFlpQCOSqVllBGJXVqoC1+LHsl5VWoBiBQkCmpjyhgBAVzPA3vx4rLB8JEoiAFoL0x75zmXffnbkzc86ZMzP3fNa6a83Mm3vOfne+c+bMOfvsDQ6Ho35p520suvevNu3QSXfgbOAdpe1zgYXA3JjlfANoBJ4AtgPPAU8COzXZaZWRwwcC0MGyHaq0BwYgF3kw0BtoKB3380CCsrsDw0sfj0PANmAjsApYD6xLUHZmyKMAugLDSp9G4O0RvvNKgnpernKsE/Ce0ueK0rFmYDWwHFgG7EtQlzXyIoB2wAhgNDAUOMmuOa3oWfqMB/YC9yKPnD/ZNCoqWRfAWcBngauJdqfbpgvwmdKnGbgT6Xtss2hTKJXPyqwwCFgMPANMJh8Xv5KewHc4JoQBds2pTtYEcBFwP7ASuNKyLTq5CngQuAv4kGVbWpEVAbwP+D3wF6RzV1Q+BjwM3IF0JK1jWwDHA9ORd+1PWLYlTa4GngWmYbkfZlMAnwS2IM/4euXbwGbgclsG2BBAF2A+sAg4w0L9WaMBWArMw8LrbdoCGAJsAj6dcr15YDTSGgxJs9I0BXAD0AS8LcU688apyG90Q1oVpiGAjkgTNzWFuorCVGAJcJzpikwLoAcyg2atk5NjrkB+ux4mKzEpgH7I611vg3UUnbOAx4HzTFVgSgAfBR4BOhsqv57oAjwKXGKicBMCuJxk8++OcO7DwKNUtwAuRTp8DjMsBS7TWaBOAVyEzIU7zHI3GscKdAngvchEjiMdmhC/R2V0COBEoDAepTliNdJBVEKHAFbhevs2eAuwRrUQVQHcjsF3VEdN+hDf3b0VKgIYg/jrOewyBrgm6ZeTCqAbispzaOU24PQkX0wqAPe6lz3uTvKlJAK4HvhgksocRjkXmBT3S3EFcAYwM24ljtSYhayJjExcASyKeb4jfRbGOTmOAC4jYz7tjqr0JYaHdRwBzI5vi8MSv8G39D+MqAKYgPPlyxOdga9HOTGKADoCU5TMcdjgh8Abap0URQCTkQkfR754IxEW3dQSQCdk9Yojn0ymxtKzWgIYjyjJkU9OACaGnVBLAPW8bq8ohI4OhglgIPkMzOBozVuBjwf9MUwAX9Vvi8MSXwr6Q5AATuZYFCxH/rkYaQnaECSAkeZscVigHQFOI0ECcJ4+xWNMtYPVBNAVuNCsLQ4L9AF6VR6sJoAR5m1xWKLNta0mgMBXBkfuubTyQKUAjgMuSMcWhwUakfUEZSoFcA4BrwuOQtAB8R0sUymAgenZ4rBEo3+nUgB9UzTEYYf+/p1KAbR5TXAUjj7+Hb8ATiQj8WsdRjkFOM3b8QvgncCbUjfHkTbt8bX0fgGckr4tDku8y9vwC6C7BUPSIkkMXuXgCxnmVG/DL4D+VU4sCv9I8J2ntFuRHcodQb8AjlgwJA2mIWFX43IL8BPNtmSFsqOoXwC2k0eYYAaStycpEyjmiqj2bTYo3hjAFOCbGsq5FgnAUCTK8Yf9AmiwYIgppgPf01jeOIolgqqdwMMWDDHBDOBbBsotkghe9zb8AjhqwRDdzEJPsx/EOIoRG6l8rYvU8ZuDZPw2zVgkxV0hKIoAZgOfS7G+keRbBOXYAX4B1FxKnFF+h/TU02Yk+Q2LX05F4xfAPy0YosoCJFGzLYYCKyzWn5Rd3oZfAM9aMESFO4BRto1AsqOstm1ETMo3u18Ar1kwJCkLyVbuwUHkK2L6QW/DL4DjLRiShCVI7t2s8WFgrW0jIvKKt+EXwJMWDInLYrKdZLoRyQ6edXZ6G34BbLZgSBwWIAmns8xRZFpdOY6/YXZ4G34B7LZgSFQWk40OX1QGAutsGxFC+Wb3C6AZ3xhxhlhK9u/8avQnuyLY6m34BbAX2Ji+LaH8EbhSQzndEnxH1SXsdUQE6xXL0c1eoMXbqRwK3pauLaGsQM9C1blEjJpZwY9Rj4zuiSBL7mVPA4e8nUoBZMXQJmSARZVJSGCEJP2bI0huBNVsnUeA84FnFMvRxQb/TqUAHkzRkCBWAsM0lHMdMj0MyQTgjZYtRT1e0n+RSOtZeNN6yL9TKYC12B0RXAl8REM51wI/8+2HRssMoKNvewkwXMkiOIBkWLPdErR6Ra0UwH7s9Vx1XfzRwK81lFPJPcBgxTIOAP2w1xI8hW8MAKr7AyRKPqSIros/CpinoZwglqOet/cg0hJsrXWiAe6pPJAFAaxHz8W/BPENME0T6plTDpTK+Le6ObGIJIDNwBbztgDwOHoikg0F7tNQTlTWUBFpIwF7kJbgBXVzIvE88EjlwSCXsN+atQWATchdoNrpHAQsU7YmHh2QvpLqcvodwAeAfylbVJs7qx0MEsB8g4aADDj1A/6nWE5fpP9ggw5IS6C6qvoFZJzAdEtQdYVTkAC2Y25acxuSePJlxXLOp0qTljJdgcfQIwKTj4MNBLx5hHkF/9KAId7F36dYzvsRgWbBq/l04G+ozx20ICJ4Udmitvwi6A9hP+B81JtoP9vRc/HPRp6/Wbj4Ht0REahGWGlBWraXlC06xmuEJJMM+xGPAj/XZEQL8rxWvfhnIqOVnVQNMkAD0iqputdvR0RwsMZ5UbkZee2sSq27aIYGA1qQO1/V4aQHcpe9Wdkic3itU8daJ9ZgK3LD6BDBtLA/1hLAi6ithduFXPydtU6sQTdkwKirYjlpcA7SSkXK3BnCRtRFsBDfGoBqRHmOJg2wsAv5B1Qv/slIbz9PQaz6osdDWFUENf0gogigBfhVzIp3Iz1a1dVGnZHXrDwmr7oAPQtGkopgDj7PnyCi9qTjpI/bi1x81dGtTsCjSPzCvDIQuF9DOXFFcIiISb+iCmAf8IMI572EGPpcxHKDaIc0oT0Vy8kCw6gyCZOAOCK4PuJ5sd6lv0/FXHIF+xEDVf0K2yHP/PMUy8kSw5F1DapsBAbUOKeZ1s4wocQdTBkdcHw/0ttvjlleNdYi78FF41PArRrKeYLwsP6xVk7FFcBK2s65H0ImdnQ4OKyh2BlLxqJHBGuQWdBKfooIJDJJhlOv4dh49WFkSlfHeoJV1Ee2srFIEEpVVtPaebYZ+FrcQpII4AgSjmU34vO+Ifz0SKxCVtfWC58nxnM6hCbEY3kP8oiJTRJvWRC3sV7ombRYQH1dfI/rkMGyqYrl/AF5JCQaaleZUdNx8W8loXILwhRqpHePSOJ5FptTqrOR52G9MwuYaKtyWwK4GRhvqe4sciPwZRsV2xDATOALFurNOjcRkODZJGkLYDoyTOmozlyCB9uMkKYAJhNvUqlemUeKATHSEsBE5O53RGMRstjFOGkIYALSyXHEYxlwselKTAvgu8CPDNdRZFZgOCaiaQFsQd0TuJ45hASXMIZpASwEeiOePY54rENc4e4yWUkafQBv7VtR0q2kwS3ILKvxlcNpvgaOQ2YRi5qfUAeHken2L6ZVYdoDQXOQxRNZCEaVNf6MZPS8Pc1KbQwFb0KCKk8CXrVQf9Z4FfHgHUx6gTnK2JwNvBHJYp3n3Duq3Ib8BjqcQxJhe4Xt80junWHU15vCw0ggzHHIb2AN2wLwaELeFEaTj7wFSXkM+R/7k5FcQ1kRgMd8ZHHlKLIXZFmFh4CrkLUOpsPvxCJrAvBYgLiaDylt6wxUkRYHEZe3QchijkVWrQkgqwLwWI60Bg3AV8hHOpa1iNdvA+L1lOmMYkm9gtNmB+IxcxMytDwCmS69EPvRQg4gwnwAWQOYhYDQkcmLAPxsKn1mAqchzWs/pKntRfUIIickqOekgON7kPf1lcDfkTUNWU63E0oeBeBnBzKO4I0ldAHejYw2dkfesXsB/0lY9npkydum0v7TpW3VEHcOh8ORAf4Ph3DYFodRNKYAAAAASUVORK5CYII="},function(e,t,n){e.exports=n.p+"static/media/peaceNav-hover.f12e7a52.png"},function(e,t,n){"use strict";var r=n(135),o=n(384),i=n(72);t.a=Object(r.c)(i.a,Object(r.a)(Object(o.a)()))},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.promiseTypeSuffixes||u,n=e.promiseTypeSeparator||"_";return function(e){var r=e.dispatch;return function(e){return function(u){if(!u.payload)return e(u);if(!Object(o.a)(u.payload)&&!Object(o.a)(u.payload.promise))return e(u);var l=u.type,c=u.payload,p=u.meta,h=s(t,3),f=h[0],d=h[1],m=h[2],y=function(e,t){return a({type:[l,t?m:d].join(n)},null===e||"undefined"===typeof e?{}:{payload:e},void 0!==p?{meta:p}:{},t?{error:!0}:{})},v=void 0,g=void 0;Object(o.a)(u.payload)||"object"!==i(u.payload)?(v=c,g=void 0):(v=c.promise,g=c.data),e(a({type:[l,f].join(n)},void 0!==g?{payload:g}:{},void 0!==p?{meta:p}:{}));var _=function(e){var t=y(e,!0);throw r(t),e},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=y(e,!1);return r(t),{value:e,action:t}};return v.then(b,_)}}}}t.a=r;var o=n(385),i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=["PENDING","FULFILLED","REJECTED"]},function(e,t,n){"use strict";function r(e){return null!==e&&"object"===("undefined"===typeof e?"undefined":o(e))&&(e&&"function"===typeof e.then)}t.a=r;var o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}},function(e,t,n){"use strict";function r(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="/service-worker.js";a?i(e):o(e)})}}function o(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}function i(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):o(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}t.a=r;var a=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/))}]);
//# sourceMappingURL=main.6a5686ee.js.map